/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var Yp=function(e,t){return Yp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},Yp(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Yp(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,p=!1,f=i.length-1;f>=0;f--){var m={};for(var w in r)m[w]=w==="access"?{}:r[w];for(var w in r.access)m.access[w]=r.access[w];m.addInitializer=function(E){if(p)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(E||null))};var S=(0,i[f])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(S===void 0)continue;if(S===null||typeof S!="object")throw new TypeError("Object expected");(h=o(S.get))&&(u.get=h),(h=o(S.set))&&(u.set=h),(h=o(S.init))&&s.unshift(h)}else(h=o(S))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),p=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(m){return Promise.resolve(m).then(f,h)}}function a(f,m){r[f]&&(s[f]=function(w){return new Promise(function(S,E){n.push([f,w,S,E])>1||c(f,w)})},m&&(s[f]=m(s[f])))}function c(f,m){try{l(r[f](m))}catch(w){p(n[0][3],w)}}function l(f){f.value instanceof __await?Promise.resolve(f.value.v).then(u,h):p(n[0][2],f)}function u(f){c("next",f)}function h(f){c("throw",f)}function p(f,m){f(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var s3=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return s3(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var n3=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new n3(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var Ss;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Running=1]="Running",e[e.Completed=2]="Completed"})(Ss||(Ss={}));var At=class{constructor(e){this.d=e,this.a=Ss.Uninitialized}get hasValue(){return this.a===Ss.Completed}get value(){if(this.a===Ss.Uninitialized){this.a=Ss.Running;try{this.b=this.d()}catch(e){this.c=e}finally{this.a=Ss.Completed}}else if(this.a===Ss.Running)throw new Error("Cannot read the value of a lazy that is being initialized");if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},o3=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?an.isErrorNoTelemetry(e)?new an(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},ic=new o3;function Xp(e){ic.setUnexpectedErrorHandler(e)}function Au(e){ic.onUnexpectedError(e)}function Ot(e){xr(e)||ic.onUnexpectedError(e)}function Kp(e){xr(e)||ic.onUnexpectedExternalError(e)}function vo(e){if(e instanceof Error){const{name:t,message:i,cause:r}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:s,noTelemetry:an.isErrorNoTelemetry(e),cause:r?vo(r):void 0,code:e.code}}return e}function ay(e){let t;return e.noTelemetry?t=new an:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=ay(e.cause)),t}var Tu="Canceled";function xr(e){return e instanceof ki?!0:e instanceof Error&&e.name===Tu&&e.message===Tu}var ki=class extends Error{constructor(){super(Tu),this.name=this.message}},cy=class Rp extends Error{static{this.a="PendingMigrationError"}static is(t){return t instanceof Rp||t instanceof Error&&t.name===Rp.a}constructor(t){super(t),this.name=Rp.a}};function ly(){const e=new Error(Tu);return e.name=e.message,e}function Ce(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function Ru(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var on=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},a3=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},eg=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},an=class Rb extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Rb)return t;const i=new Rb;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},di=class PC extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,PC.prototype)}};function c3(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var sH=class AC{static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(AC.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=c3(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Fi(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function l3(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function uy(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function u3(e,t,i){const r=uy(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function ft(e){return e.filter(t=>!!t)}function h3(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function tg(e){return!Array.isArray(e)||e.length===0}function rc(e){return Array.isArray(e)&&e.length>0}function wo(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function hy(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function ig(e,t){return Array.isArray(e)?e.map(t):t(e)}function Vi(e){return Array.isArray(e)?e:[e]}var rg;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(rg||(rg={}));function d3(e,t){return(i,r)=>t(e(i),e(r))}var f3=(e,t)=>e-t,nH=class Lp{static{this.empty=new Lp(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Lp(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Lp(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||rg.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},dy;function fy(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function p3(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var oH=class{static{dy=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[dy]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},py,gy,my;function g3(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var m3=class{constructor(e,t){this.uri=e,this.value=t}};function v3(e){return Array.isArray(e)}var Bt=class wu{static{this.c=t=>t.toString()}constructor(t,i){if(this[py]="ResourceMap",t instanceof wu)this.d=new Map(t.d),this.e=i??wu.c;else if(v3(t)){this.d=new Map,this.e=i??wu.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??wu.c}set(t,i){return this.d.set(this.e(t),new m3(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(py=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},vy=class{constructor(e,t){this[gy]="ResourceSet",!e||typeof e=="function"?this.c=new Bt(e):(this.c=new Bt(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(gy=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},wy;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(wy||(wy={}));var w3=class{constructor(){this[my]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.n(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(r);break;case 1:this.k(r);break;case 2:this.l(r);break;default:this.l(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(my=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},b3=class extends w3{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},sg=class extends b3{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},by=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function ng(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function si(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function og(e,t="Unreachable"){throw new Error(t)}function ag(e,t="unexpected state"){if(!e)throw typeof t=="string"?new di(`Assertion Failed: ${t}`):t}function yy(e){if(!e()){debugger;e(),Ot(new di("Assertion Failed"))}}function He(e){return typeof e=="string"}function y3(e){return Array.isArray(e)&&e.every(t=>He(t))}function xt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function S3(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function cn(e){return typeof e=="number"&&!isNaN(e)}function x3(e){return!!e&&typeof e[Symbol.iterator]=="function"}function sc(e){return typeof e>"u"}function Oi(e){return!Et(e)}function Et(e){return sc(e)||e===null}function Sy(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function bo(e){return ag(e!=null,"Argument is `undefined` or `null`."),e}var E3=Object.prototype.hasOwnProperty;function cg(e){if(!xt(e))return!1;for(const t in e)if(E3.call(e,t))return!1;return!0}function xy(e){return typeof e=="function"}function k3(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++)Ey(e[r],t[r])}function Ey(e,t){if(He(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(xy(t)){try{if(e instanceof t)return}catch{}if(!Et(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var fi;(function(e){function t(O){return!!O&&typeof O=="object"&&typeof O[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(O){yield O}e.single=s;function n(O){return t(O)?O:s(O)}e.wrap=n;function o(O){return O||i}e.from=o;function*a(O){for(let B=O.length-1;B>=0;B--)yield O[B]}e.reverse=a;function c(O){return!O||O[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(O){return O[Symbol.iterator]().next().value}e.first=l;function u(O,B){let G=0;for(const me of O)if(B(me,G++))return!0;return!1}e.some=u;function h(O,B){let G=0;for(const me of O)if(!B(me,G++))return!1;return!0}e.every=h;function p(O,B){for(const G of O)if(B(G))return G}e.find=p;function*f(O,B){for(const G of O)B(G)&&(yield G)}e.filter=f;function*m(O,B){let G=0;for(const me of O)yield B(me,G++)}e.map=m;function*w(O,B){let G=0;for(const me of O)yield*B(me,G++)}e.flatMap=w;function*S(...O){for(const B of O)x3(B)?yield*B:yield B}e.concat=S;function E(O,B,G){let me=G;for(const xe of O)me=B(me,xe);return me}e.reduce=E;function C(O){let B=0;for(const G of O)B++;return B}e.length=C;function*P(O,B,G=O.length){for(B<-O.length&&(B=0),B<0&&(B+=O.length),G<0?G+=O.length:G>O.length&&(G=O.length);B<G;B++)yield O[B]}e.slice=P;function Z(O,B=Number.POSITIVE_INFINITY){const G=[];if(B===0)return[G,O];const me=O[Symbol.iterator]();for(let xe=0;xe<B;xe++){const ke=me.next();if(ke.done)return[G,e.empty()];G.push(ke.value)}return[G,{[Symbol.iterator](){return me}}]}e.consume=Z;async function W(O){const B=[];for await(const G of O)B.push(G);return B}e.asyncToArray=W;async function oe(O){let B=[];for await(const G of O)B=B.concat(G);return B}e.asyncToArrayFlat=oe})(fi||(fi={}));var C3=!1,ln=null,aH=class TC{constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:TC.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(h,p){for(;h.length>0&&p.some(f=>typeof f=="string"?f===h[0]:h[0].match(f));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new by;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(d3(c=>c.idx,f3));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let p=l[h];p=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${p}`;const m=n.get(l.slice(0,h).join(`
`)),w=fy([...m].map(S=>s(S)[h]),S=>S);delete w[l[h]];for(const[S,E]of Object.entries(w))u.unshift(`    - stacktraces of ${E.length} other leaks continue with ${S}`);u.unshift(p)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function $3(e){ln=e}if(C3){const e="__is_disposable_tracked__";$3(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==te.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==te.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function yo(e){return ln?.trackDisposable(e),e}function So(e){ln?.markAsDisposed(e)}function un(e,t){ln?.setParent(e,t)}function I3(e,t){if(ln)for(const i of e)ln.setParent(i,t)}function lg(e){return ln?.markAsSingleton(e),e}function ky(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function qi(e){if(fi.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function ug(...e){const t=ce(()=>qi(e));return I3(e,t),t}function ce(e){const t=yo({dispose:ng(()=>{So(t),e()})});return t}var he=class RC{static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,yo(this)}dispose(){this.g||(So(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{qi(this.f)}finally{this.f.clear()}}add(t){if(!t||t===te.None)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return un(t,this),this.g?RC.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),un(t,null))}assertNotDisposed(){this.g&&Ot(new di("Object disposed"))}},te=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new he,yo(this),un(this.q,this)}dispose(){So(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},xo=class{constructor(){this.b=!1,yo(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&un(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,So(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&un(e,null),e}},Lu=class{constructor(){this.a=new Map,this.b=!1,yo(this)}dispose(){So(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{qi(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t),un(t,this)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return t&&un(t,null),this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function Cy(e,t){return new D3(e,t)}var D3=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?Ot(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function P3(e,t){const i=[];let r;for(;(r=e.read())!==null;)i.push(r);return t(i)}function A3(e,t){return new Promise((i,r)=>{const s=[];$y(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function $y(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}function T3(e,t){const i=Cy(t);return i.end(e),i}var nc=typeof Buffer<"u",R3=new At(()=>new Uint8Array(256)),hg,dg,ne=class Zi{static alloc(t){return nc?new Zi(Buffer.allocUnsafe(t)):new Zi(new Uint8Array(t))}static wrap(t){return nc&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Zi(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&nc?new Zi(Buffer.from(t)):(hg||(hg=new TextEncoder),new Zi(hg.encode(t)))}static fromByteArray(t){const i=Zi.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=Zi.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}static isNativeBuffer(t){return nc&&Buffer.isBuffer(t)}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Zi.alloc(this.byteLength);return t.set(this),t}toString(){return nc?this.buffer.toString():(dg||(dg=new TextDecoder),dg.decode(this.buffer))}slice(t,i){return new Zi(this.buffer.subarray(t,i))}set(t,i){if(t instanceof Zi)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Nu(this.buffer,t)}writeUInt32BE(t,i){Mu(this.buffer,t,i)}readUInt32LE(t){return F3(this.buffer,t)}writeUInt32LE(t,i){O3(this.buffer,t,i)}readUInt8(t){return U3(this.buffer,t)}writeUInt8(t,i){j3(this.buffer,t,i)}indexOf(t,i=0){return L3(this.buffer,t instanceof Zi?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,r)=>i===t.buffer[r])}};function L3(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=R3.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function N3(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function M3(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function Nu(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Mu(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function F3(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function O3(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function U3(e,t){return e[t]}function j3(e,t,i){e[i]=t}function H3(e){return P3(e,t=>ne.concat(t))}function B3(e){return T3(e,t=>ne.concat(t))}function Eo(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return ne.wrap(s).slice(0,o)}var _3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",z3="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Fu({buffer:e},t=!0,i=!1){const r=i?z3:_3;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}var Iy="0123456789abcdef";function fg({buffer:e}){let t="";for(let i=0;i<e.length;i++){const r=e[i];t+=Iy[r>>>4],t+=Iy[r&15]}return t}function W3(e){if(e.length%2!==0)throw new SyntaxError("Hex string must have an even length");const t=new Uint8Array(e.length>>1);for(let i=0;i<e.length;)t[i>>1]=Dy(e,i++)<<4|Dy(e,i++);return ne.wrap(t)}function Dy(e,t){const i=e.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=97&&i<=102)return i-87;if(i>=65&&i<=70)return i-55;throw new SyntaxError(`Invalid hex character at position ${t}`)}var vt=class Np{static{this.Undefined=new Np(void 0)}constructor(t){this.element=t,this.next=Np.Undefined,this.prev=Np.Undefined}},xs=class{constructor(){this.a=vt.Undefined,this.b=vt.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===vt.Undefined}clear(){let e=this.a;for(;e!==vt.Undefined;){const t=e.next;e.prev=vt.Undefined,e.next=vt.Undefined,e=t}this.a=vt.Undefined,this.b=vt.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new vt(e);if(this.a===vt.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==vt.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==vt.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==vt.Undefined&&e.next!==vt.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===vt.Undefined&&e.next===vt.Undefined?(this.a=vt.Undefined,this.b=vt.Undefined):e.next===vt.Undefined?(this.b=this.b.prev,this.b.next=vt.Undefined):e.prev===vt.Undefined&&(this.a=this.a.next,this.a.prev=vt.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==vt.Undefined;)yield e.element,e=e.next}},V3=globalThis.performance.now.bind(globalThis.performance),hn=class LC{static create(t){return new LC(t)}constructor(t){this.c=t===!1?Date.now:V3,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},Py=!1,q3=!1,ht;(function(e){e.None=()=>te.None;function t(j){if(q3){const{onDidAddListener:_}=j,z=pg.create();let Q=0;j.onDidAddListener=()=>{++Q===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),z.print()),_?.()}}}function i(j,_){return f(j,()=>{},0,void 0,!0,void 0,_)}e.defer=i;function r(j){return(_,z=null,Q)=>{let Y=!1,ge;return ge=j(Ee=>{if(!Y)return ge?ge.dispose():Y=!0,_.call(z,Ee)},null,Q),Y&&ge.dispose(),ge}}e.once=r;function s(j,_){return e.once(e.filter(j,_))}e.onceIf=s;function n(j,_,z){return h((Q,Y=null,ge)=>j(Ee=>Q.call(Y,_(Ee)),null,ge),z)}e.map=n;function o(j,_,z){return h((Q,Y=null,ge)=>j(Ee=>{_(Ee),Q.call(Y,Ee)},null,ge),z)}e.forEach=o;function a(j,_,z){return h((Q,Y=null,ge)=>j(Ee=>_(Ee)&&Q.call(Y,Ee),null,ge),z)}e.filter=a;function c(j){return j}e.signal=c;function l(...j){return(_,z=null,Q)=>{const Y=ug(...j.map(ge=>ge(Ee=>_.call(z,Ee))));return p(Y,Q)}}e.any=l;function u(j,_,z,Q){let Y=z;return n(j,ge=>(Y=_(Y,ge),Y),Q)}e.reduce=u;function h(j,_){let z;const Q={onWillAddFirstListener(){z=j(Y.fire,Y)},onDidRemoveLastListener(){z?.dispose()}};_||t(Q);const Y=new D(Q);return _?.add(Y),Y.event}function p(j,_){return _ instanceof Array?_.push(j):_&&_.add(j),j}function f(j,_,z=100,Q=!1,Y=!1,ge,Ee){let De,nt,yt,We=0,dt;const ii={leakWarningThreshold:ge,onWillAddFirstListener(){De=j(zi=>{We++,nt=_(nt,zi),Q&&!yt&&(Mt.fire(nt),nt=void 0),dt=()=>{const bs=nt;nt=void 0,yt=void 0,(!Q||We>1)&&Mt.fire(bs),We=0},typeof z=="number"?(yt&&clearTimeout(yt),yt=setTimeout(dt,z)):yt===void 0&&(yt=null,queueMicrotask(dt))})},onWillRemoveListener(){Y&&We>0&&dt?.()},onDidRemoveLastListener(){dt=void 0,De.dispose()}};Ee||t(ii);const Mt=new D(ii);return Ee?.add(Mt),Mt.event}e.debounce=f;function m(j,_=0,z){return e.debounce(j,(Q,Y)=>Q?(Q.push(Y),Q):[Y],_,void 0,!0,void 0,z)}e.accumulate=m;function w(j,_=(Q,Y)=>Q===Y,z){let Q=!0,Y;return a(j,ge=>{const Ee=Q||!_(ge,Y);return Q=!1,Y=ge,Ee},z)}e.latch=w;function S(j,_,z){return[e.filter(j,_,z),e.filter(j,Q=>!_(Q),z)]}e.split=S;function E(j,_=!1,z=[],Q){let Y=z.slice(),ge=j(nt=>{Y?Y.push(nt):De.fire(nt)});Q&&Q.add(ge);const Ee=()=>{Y?.forEach(nt=>De.fire(nt)),Y=null},De=new D({onWillAddFirstListener(){ge||(ge=j(nt=>De.fire(nt)),Q&&Q.add(ge))},onDidAddFirstListener(){Y&&(_?setTimeout(Ee):Ee())},onDidRemoveLastListener(){ge&&ge.dispose(),ge=null}});return Q&&Q.add(De),De.event}e.buffer=E;function C(j,_){return(Q,Y,ge)=>{const Ee=_(new Z);return j(function(De){const nt=Ee.evaluate(De);nt!==P&&Q.call(Y,nt)},void 0,ge)}}e.chain=C;const P=Symbol("HaltChainable");class Z{constructor(){this.f=[]}map(_){return this.f.push(_),this}forEach(_){return this.f.push(z=>(_(z),z)),this}filter(_){return this.f.push(z=>_(z)?z:P),this}reduce(_,z){let Q=z;return this.f.push(Y=>(Q=_(Q,Y),Q)),this}latch(_=(z,Q)=>z===Q){let z=!0,Q;return this.f.push(Y=>{const ge=z||!_(Y,Q);return z=!1,Q=Y,ge?Y:P}),this}evaluate(_){for(const z of this.f)if(_=z(_),_===P)break;return _}}function W(j,_,z=Q=>Q){const Q=(...De)=>Ee.fire(z(...De)),Y=()=>j.on(_,Q),ge=()=>j.removeListener(_,Q),Ee=new D({onWillAddFirstListener:Y,onDidRemoveLastListener:ge});return Ee.event}e.fromNodeEventEmitter=W;function oe(j,_,z=Q=>Q){const Q=(...De)=>Ee.fire(z(...De)),Y=()=>j.addEventListener(_,Q),ge=()=>j.removeEventListener(_,Q),Ee=new D({onWillAddFirstListener:Y,onDidRemoveLastListener:ge});return Ee.event}e.fromDOMEventEmitter=oe;function O(j,_){let z;const Q=new Promise((Y,ge)=>{const Ee=r(j)(Y,null,_);z=()=>Ee.dispose()});return Q.cancel=z,Q}e.toPromise=O;function B(j,_){return j(z=>_.fire(z))}e.forward=B;function G(j,_,z){return _(z),j(Q=>_(Q))}e.runAndSubscribe=G;class me{constructor(_,z){this._observable=_,this.f=0,this.g=!1;const Q={onWillAddFirstListener:()=>{_.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{_.removeObserver(this)}};z||t(Q),this.emitter=new D(Q),z&&z.add(this.emitter)}beginUpdate(_){this.f++}handlePossibleChange(_){}handleChange(_,z){this.g=!0}endUpdate(_){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function xe(j,_){return new me(j,_).emitter.event}e.fromObservable=xe;function ke(j){return(_,z,Q)=>{let Y=0,ge=!1;const Ee={beginUpdate(){Y++},endUpdate(){Y--,Y===0&&(j.reportChanges(),ge&&(ge=!1,_.call(z)))},handlePossibleChange(){},handleChange(){ge=!0}};j.addObserver(Ee),j.reportChanges();const De={dispose(){j.removeObserver(Ee)}};return Q instanceof he?Q.add(De):Array.isArray(Q)&&Q.push(De),De}}e.fromObservableLight=ke})(ht||(ht={}));var G3=class Lb{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Lb.f++}`,Lb.all.add(this)}start(t){this.g=new hn,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Ay=-1,Q3=class NC{static{this.f=1}constructor(t,i,r=(NC.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new J3(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},pg=class MC{static create(){const t=new Error;return new MC(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},J3=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},Z3=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},Y3=0,Ou=class{constructor(e){this.value=e,this.id=Y3++}},X3=2,Ty=(e,t)=>{if(e instanceof Ou)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},D=class{constructor(e){this.A=0,this.g=e,this.j=Ay>0||this.g?.leakWarningThreshold?new Q3(e?.onListenerError??Ot,this.g?.leakWarningThreshold??Ay):void 0,this.m=this.g?._profName?new G3(this.g._profName):void 0,this.z=this.g?.deliveryQueue}dispose(){if(!this.q){if(this.q=!0,this.z?.current===this&&this.z.reset(),this.w){if(Py){const e=this.w;queueMicrotask(()=>{Ty(e,t=>t.stack?.print())})}this.w=void 0,this.A=0}this.g?.onDidRemoveLastListener?.(),this.j?.dispose()}}get event(){return this.u??=(e,t,i)=>{if(this.j&&this.A>this.j.threshold**2){const a=`[${this.j.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.A} vs ${this.j.threshold})`;console.warn(a);const c=this.j.getMostFrequentStack()??["UNKNOWN stack",-1],l=new Z3(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.g?.onListenerError||Ot)(l),te.None}if(this.q)return te.None;t&&(e=e.bind(t));const r=new Ou(e);let s,n;this.j&&this.A>=Math.ceil(this.j.threshold*.2)&&(r.stack=pg.create(),s=this.j.check(r.stack,this.A+1)),Py&&(r.stack=n??pg.create()),this.w?this.w instanceof Ou?(this.z??=new K3,this.w=[this.w,r]):this.w.push(r):(this.g?.onWillAddFirstListener?.(this),this.w=r,this.g?.onDidAddFirstListener?.(this)),this.g?.onDidAddListener?.(this),this.A++;const o=ce(()=>{s?.(),this.B(r)});return i instanceof he?i.add(o):Array.isArray(i)&&i.push(o),o},this.u}B(e){if(this.g?.onWillRemoveListener?.(this),!this.w)return;if(this.A===1){this.w=void 0,this.g?.onDidRemoveLastListener?.(this),this.A=0;return}const t=this.w,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.q),console.log("size?",this.A),console.log("arr?",JSON.stringify(this.w)),new Error("Attempted to dispose unknown listener");this.A--,t[i]=void 0;const r=this.z.current===this;if(this.A*X3<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.z.end&&(this.z.end--,s<this.z.i&&this.z.i--);t.length=s}}C(e,t){if(!e)return;const i=this.g?.onListenerError||Ot;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}D(e){const t=e.current.w;for(;e.i<e.end;)this.C(t[e.i++],e.value);e.reset()}fire(e){if(this.z?.current&&(this.D(this.z),this.m?.stop()),this.m?.start(this.A),this.w)if(this.w instanceof Ou)this.C(this.w,e);else{const t=this.z;t.enqueue(this,e,this.w.length),this.D(t)}this.m?.stop()}hasListeners(){return this.A>0}},K3=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},oc=class extends D{async fireAsync(e,t,i){if(this.w)for(this.f||(this.f=new xs),Ty(this.w,r=>this.f.push([r.value,e]));this.f.size>0&&!t.isCancellationRequested;){const[r,s]=this.f.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){Ot(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Ot(c.reason)})}}},Uu=class extends D{get isPaused(){return this.f!==0}constructor(e){super(e),this.f=0,this.h=new xs,this.s=e?.merge}pause(){this.f++}resume(){if(this.f!==0&&--this.f===0)if(this.s){if(this.h.size>0){const e=Array.from(this.h);this.h.clear(),super.fire(this.s(e))}}else for(;!this.f&&this.h.size!==0;)super.fire(this.h.shift())}fire(e){this.A&&(this.f!==0?this.h.push(e):super.fire(e))}},eI=class extends Uu{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},tI=class extends D{constructor(e){super(e),this.f=[],this.h=e?.merge}fire(e){this.hasListeners()&&(this.f.push(e),this.f.length===1&&queueMicrotask(()=>{this.h?super.fire(this.h(this.f)):this.f.forEach(t=>super.fire(t)),this.f=[]}))}},ac;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(ac||(ac={}));var Ry;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(Ry||(Ry={}));var Ly;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})(Ly||(Ly={}));function Ny(e){const t=ne.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function iI(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var My;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(My||(My={}));function gg(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function rI(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?gg():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=(performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart)??0);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return gg(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),gg()}function sI(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=rI()),e.MonacoPerformanceMarks}var Fy=sI(globalThis),pi=Fy.mark,nI=Fy.getMarks;function oI(){return globalThis._VSCODE_NLS_MESSAGES}function Oy(){return globalThis._VSCODE_NLS_LANGUAGE}var aI=Oy()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function ju(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),aI&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function d(e,t,...i){return ju(typeof e=="number"?Uy(e,t):t,i)}function Uy(e,t){const i=oI()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Hu(e,t,...i){let r;typeof e=="number"?r=Uy(e,t):r=t;const s=ju(r,i);return{value:s,original:t===r?s:ju(t,i)}}var Es="en",cc=!1,lc=!1,uc=!1,cI=!1,jy=!1,mg=!1,lI=!1,vg=!1,Hy=!1,By=!1,Bu=void 0,_u=Es,_y=Es,uI=void 0,Vr=void 0,qr=globalThis,Ci=void 0;typeof qr.vscode<"u"&&typeof qr.vscode.process<"u"?Ci=qr.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Ci=process);var zy=typeof Ci?.versions?.electron=="string",hI=zy&&Ci?.type==="renderer";if(typeof Ci=="object"){cc=Ci.platform==="win32",lc=Ci.platform==="darwin",uc=Ci.platform==="linux",cI=uc&&!!Ci.env.SNAP&&!!Ci.env.SNAP_REVISION,lI=zy,Hy=!!Ci.env.CI||!!Ci.env.BUILD_ARTIFACTSTAGINGDIRECTORY||!!Ci.env.GITHUB_WORKSPACE,Bu=Es,_u=Es;const e=Ci.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Bu=t.userLocale,_y=t.osLocale,_u=t.resolvedLanguage||Es,uI=t.languagePack?.translationsConfigFile}catch{}jy=!0}else typeof navigator=="object"&&!hI?(Vr=navigator.userAgent,cc=Vr.indexOf("Windows")>=0,lc=Vr.indexOf("Macintosh")>=0,vg=(Vr.indexOf("Macintosh")>=0||Vr.indexOf("iPad")>=0||Vr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,uc=Vr.indexOf("Linux")>=0,By=Vr?.indexOf("Mobi")>=0,mg=!0,_u=Oy()||Es,Bu=navigator.language.toLowerCase(),_y=Bu):console.error("Unable to resolve platform.");var Wy;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Wy||(Wy={}));function dI(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var wg=0;lc?wg=1:cc?wg=3:uc&&(wg=2);var Kt=cc,Ui=lc,ks=uc,Vy=jy,ko=mg,fI=mg&&typeof qr.importScripts=="function",pI=fI?qr.origin:void 0,gI=vg,mI=By,dn=Hy,Er=Vr,Cs=_u,qy;(function(e){function t(){return Cs}e.value=t;function i(){return Cs.length===2?Cs==="en":Cs.length>=3?Cs[0]==="e"&&Cs[1]==="n"&&Cs[2]==="-":!1}e.isDefaultVariant=i;function r(){return Cs==="en"}e.isDefault=r})(qy||(qy={}));var vI=typeof qr.postMessage=="function"&&!qr.importScripts,Gy=(()=>{if(vI){const e=[];qr.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),qr.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),Qy;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(Qy||(Qy={}));var hc=lc||vg?2:cc?1:3,Jy=!0,Zy=!1;function Yy(){if(!Zy){Zy=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Jy=new Uint16Array(e.buffer)[0]===513}return Jy}var bg=!!(Er&&Er.indexOf("Chrome")>=0),wI=!!(Er&&Er.indexOf("Firefox")>=0),bI=!!(!bg&&Er&&Er.indexOf("Safari")>=0),Xy=!!(Er&&Er.indexOf("Edg/")>=0),cH=!!(Er&&Er.indexOf("Android")>=0),fn,yg=globalThis.vscode;if(typeof yg<"u"&&typeof yg.process<"u"){const e=yg.process;fn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?fn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:fn={get platform(){return Kt?"win32":Ui?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Co=fn.cwd,dc=fn.env,yI=fn.platform,lH=fn.arch,SI=65,xI=97,EI=90,kI=122,pn=46,Gt=47,$i=92,Gr=58,CI=63,Ky=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function $I(e,t){if(e===null||typeof e!="object")throw new Ky(t,"Object",e)}function kt(e,t){if(typeof e!="string")throw new Ky(t,"string",e)}var Ii=yI==="win32";function Ae(e){return e===Gt||e===$i}function Sg(e){return e===Gt}function Qr(e){return e>=SI&&e<=EI||e>=xI&&e<=kI}function zu(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=Gt}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==pn||s.charCodeAt(s.length-2)!==pn){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===pn&&a!==-1?++a:a=-1}return s}function II(e){return e?`${e[0]==="."?"":"."}${e}`:""}function e4(e,t){$I(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${II(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var Ct={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],kt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=Co():(n=dc[`=${t}`]||Co(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===$i)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Ae(u)&&(a=1,l=!0);else if(Ae(u))if(l=!0,Ae(n.charCodeAt(1))){let h=2,p=h;for(;h<o&&!Ae(n.charCodeAt(h));)h++;if(h<o&&h!==p){const f=n.slice(p,h);for(p=h;h<o&&Ae(n.charCodeAt(h));)h++;if(h<o&&h!==p){for(p=h;h<o&&!Ae(n.charCodeAt(h));)h++;(h===o||h!==p)&&(c=`\\\\${f}\\${n.slice(p,h)}`,a=h)}}}else a=1;else Qr(u)&&n.charCodeAt(1)===Gr&&(c=n.slice(0,2),a=2,o>2&&Ae(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=zu(i,!r,"\\",Ae),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){kt(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return Sg(n)?"\\":e;if(Ae(n))if(s=!0,Ae(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Ae(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Ae(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Ae(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else Qr(n)&&e.charCodeAt(1)===Gr&&(r=e.slice(0,2),i=2,t>2&&Ae(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?zu(e.slice(i),!s,"\\",Ae):"";if(o.length===0&&!s&&(o="."),o.length>0&&Ae(e.charCodeAt(t-1))&&(o+="\\"),!s&&r===void 0&&e.includes(":")){if(o.length>=2&&Qr(o.charCodeAt(0))&&o.charCodeAt(1)===Gr)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Ae(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){kt(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Ae(i)||t>2&&Qr(i)&&e.charCodeAt(1)===Gr&&Ae(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];kt(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Ae(i.charCodeAt(0))){++s;const n=i.length;n>1&&Ae(i.charCodeAt(1))&&(++s,n>2&&(Ae(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Ae(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return Ct.normalize(t)},relative(e,t){if(kt(e,"from"),kt(t,"to"),e===t)return"";const i=Ct.resolve(e),r=Ct.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";if(i.length!==e.length||r.length!==t.length){const m=i.split("\\"),w=r.split("\\");m[m.length-1]===""&&m.pop(),w[w.length-1]===""&&w.pop();const S=m.length,E=w.length,C=S<E?S:E;let P;for(P=0;P<C&&m[P].toLowerCase()===w[P].toLowerCase();P++);return P===0?r:P===C?E>C?w.slice(P).join("\\"):S>C?"..\\".repeat(S-1-P)+"..":"":"..\\".repeat(S-P)+w.slice(P).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===$i;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===$i;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===$i;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===$i;)c--;const l=c-a,u=o<l?o:l;let h=-1,p=0;for(;p<u;p++){const m=e.charCodeAt(s+p);if(m!==t.charCodeAt(a+p))break;m===$i&&(h=p)}if(p!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+p)===$i)return r.slice(a+p+1);if(p===2)return r.slice(a+p)}o>u&&(e.charCodeAt(s+p)===$i?h=p:p===2&&(h=3)),h===-1&&(h=0)}let f="";for(p=s+h+1;p<=n;++p)(p===n||e.charCodeAt(p)===$i)&&(f+=f.length===0?"..":"\\..");return a+=h,f.length>0?`${f}${r.slice(a,c)}`:(r.charCodeAt(a)===$i&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=Ct.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===$i){if(t.charCodeAt(1)===$i){const i=t.charCodeAt(2);if(i!==CI&&i!==pn)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Qr(t.charCodeAt(0))&&t.charCodeAt(1)===Gr&&t.charCodeAt(2)===$i)return`\\\\?\\${t}`;return t},dirname(e){kt(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Ae(s)?e:".";if(Ae(s)){if(i=r=1,Ae(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Ae(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Ae(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Ae(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else Qr(s)&&e.charCodeAt(1)===Gr&&(i=t>2&&Ae(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Ae(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&kt(t,"suffix"),kt(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&Qr(e.charCodeAt(0))&&e.charCodeAt(1)===Gr&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Ae(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Ae(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){kt(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===Gr&&Qr(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Ae(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===pn?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:e4.bind(null,"\\"),parse(e){kt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Ae(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Ae(s)){if(r=1,Ae(e.charCodeAt(1))){let h=2,p=h;for(;h<i&&!Ae(e.charCodeAt(h));)h++;if(h<i&&h!==p){for(p=h;h<i&&Ae(e.charCodeAt(h));)h++;if(h<i&&h!==p){for(p=h;h<i&&!Ae(e.charCodeAt(h));)h++;h===i?r=h:h!==p&&(r=h+1)}}}}else if(Qr(s)&&e.charCodeAt(1)===Gr){if(i<=2)return t.root=t.dir=e,t;if(r=2,Ae(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Ae(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===pn?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},DI=(()=>{if(Ii){const e=/\\/g;return()=>{const t=Co().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>Co()})(),Oe={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=0&&!i;r--){const s=e[r];kt(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===Gt)}if(!i){const r=DI();t=`${r}/${t}`,i=r.charCodeAt(0)===Gt}return t=zu(t,!i,"/",Sg),i?`/${t}`:t.length>0?t:"."},normalize(e){if(kt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Gt,i=e.charCodeAt(e.length-1)===Gt;return e=zu(e,!t,"/",Sg),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return kt(e,"path"),e.length>0&&e.charCodeAt(0)===Gt},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const r=e[i];kt(r,"path"),r.length>0&&t.push(r)}return t.length===0?".":Oe.normalize(t.join("/"))},relative(e,t){if(kt(e,"from"),kt(t,"to"),e===t||(e=Oe.resolve(e),t=Oe.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===Gt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Gt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===Gt?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===Gt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(kt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Gt;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Gt){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&kt(t,"suffix"),kt(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Gt){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Gt){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){kt(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:e4.bind(null,"/"),parse(e){kt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===Gt;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===Gt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===pn?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Oe.win32=Ct.win32=Ct,Oe.posix=Ct.posix=Oe;var $o=Ii?Ct.normalize:Oe.normalize,Wu=Ii?Ct.isAbsolute:Oe.isAbsolute,xg=Ii?Ct.join:Oe.join,PI=Ii?Ct.resolve:Oe.resolve,fc=Ii?Ct.relative:Oe.relative,Io=Ii?Ct.dirname:Oe.dirname,Di=Ii?Ct.basename:Oe.basename,Vu=Ii?Ct.extname:Oe.extname,uH=Ii?Ct.format:Oe.format,hH=Ii?Ct.parse:Oe.parse,dH=Ii?Ct.toNamespacedPath:Oe.toNamespacedPath,ir=Ii?Ct.sep:Oe.sep,fH=Ii?Ct.delimiter:Oe.delimiter,AI=/^\w[\w\d+.-]*$/,TI=/^\//,RI=/^\/\//;function LI(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!AI.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!TI.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(RI.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function NI(e,t){return!e&&!t?"file":e}function MI(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==rr&&(t=rr+t):t=rr;break}return t}var ct="",rr="/",FI=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class Mp{static isUri(t){return t instanceof Mp?!0:!t||typeof t!="object"?!1:typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||ct,this.authority=t.authority||ct,this.path=t.path||ct,this.query=t.query||ct,this.fragment=t.fragment||ct):(this.scheme=NI(t,o),this.authority=i||ct,this.path=MI(this.scheme,r||ct),this.query=s||ct,this.fragment=n||ct,LI(this,o))}get fsPath(){return qu(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=ct),r===void 0?r=this.authority:r===null&&(r=ct),s===void 0?s=this.path:s===null&&(s=ct),n===void 0?n=this.query:n===null&&(n=ct),o===void 0?o=this.fragment:o===null&&(o=ct),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Do(i,r,s,n,o)}static parse(t,i=!1){const r=FI.exec(t);return r?new Do(r[2]||ct,Gu(r[4]||ct),Gu(r[5]||ct),Gu(r[7]||ct),Gu(r[9]||ct),i):new Do(ct,ct,ct,ct,ct)}static file(t){let i=ct;if(Kt&&(t=t.replace(/\\/g,rr)),t[0]===rr&&t[1]===rr){const r=t.indexOf(rr,2);r===-1?(i=t.substring(2),t=rr):(i=t.substring(2,r),t=t.substring(r)||rr)}return new Do("file",i,t,ct,ct)}static from(t,i){return new Do(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return Kt&&t.scheme==="file"?r=Mp.file(Ct.join(qu(t,!0),...i)).path:r=Oe.join(t.path,...i),t.with({path:r})}toString(t=!1){return kg(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof Mp)return t;{const i=new Do(t);return i._formatted=t.external??null,i._fsPath=t._sep===t4?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function Eg(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var t4=Kt?1:void 0,Do=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=qu(this,!1)),this._fsPath}toString(e=!1){return e?kg(this,!0):(this._formatted||(this._formatted=kg(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=t4),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},i4={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function r4(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=i4[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function OI(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=i4[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function qu(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,Kt&&(i=i.replace(/\//g,"\\")),i}function kg(e,t){const i=t?OI:r4;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=rr,r+=rr),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:r4(c,!1,!1)),r}function s4(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+s4(e.substr(3)):e}}var n4=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Gu(e){return e.match(n4)?e.replace(n4,t=>s4(t)):e}var o4=class FC{static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++FC.count}},a4=[];function L(e){const t=new o4(e);return a4[t.nid]=t,t}function Qu(e){return a4[e].sid}var ei=class{constructor(e){this.value=e}},c4;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(c4||(c4={}));var l4;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(l4||(l4={}));var u4;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(u4||(u4={}));var h4;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(h4||(h4={}));var d4;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(d4||(d4={}));var f4;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(f4||(f4={}));var p4;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(p4||(p4={}));var Cg;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Cg||(Cg={}));var pH=class OC{static{this.a=0}static mixin(t){return t._id=OC.a++,t}},g4;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(g4||(g4={}));var m4;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(m4||(m4={}));var v4;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(v4||(v4={}));var V={MainThreadAuthentication:L("MainThreadAuthentication"),MainThreadBulkEdits:L("MainThreadBulkEdits"),MainThreadLanguageModels:L("MainThreadLanguageModels"),MainThreadEmbeddings:L("MainThreadEmbeddings"),MainThreadChatAgents2:L("MainThreadChatAgents2"),MainThreadCodeMapper:L("MainThreadCodeMapper"),MainThreadLanguageModelTools:L("MainThreadChatSkills"),MainThreadClipboard:L("MainThreadClipboard"),MainThreadCommands:L("MainThreadCommands"),MainThreadComments:L("MainThreadComments"),MainThreadConfiguration:L("MainThreadConfiguration"),MainThreadConsole:L("MainThreadConsole"),MainThreadDebugService:L("MainThreadDebugService"),MainThreadDecorations:L("MainThreadDecorations"),MainThreadDiagnostics:L("MainThreadDiagnostics"),MainThreadDialogs:L("MainThreadDiaglogs"),MainThreadDocuments:L("MainThreadDocuments"),MainThreadDocumentContentProviders:L("MainThreadDocumentContentProviders"),MainThreadTextEditors:L("MainThreadTextEditors"),MainThreadEditorInsets:L("MainThreadEditorInsets"),MainThreadEditorTabs:L("MainThreadEditorTabs"),MainThreadErrors:L("MainThreadErrors"),MainThreadTreeViews:L("MainThreadTreeViews"),MainThreadDownloadService:L("MainThreadDownloadService"),MainThreadLanguageFeatures:L("MainThreadLanguageFeatures"),MainThreadLanguages:L("MainThreadLanguages"),MainThreadLogger:L("MainThreadLogger"),MainThreadMessageService:L("MainThreadMessageService"),MainThreadOutputService:L("MainThreadOutputService"),MainThreadProgress:L("MainThreadProgress"),MainThreadQuickDiff:L("MainThreadQuickDiff"),MainThreadQuickOpen:L("MainThreadQuickOpen"),MainThreadStatusBar:L("MainThreadStatusBar"),MainThreadSecretState:L("MainThreadSecretState"),MainThreadStorage:L("MainThreadStorage"),MainThreadSpeech:L("MainThreadSpeechProvider"),MainThreadTelemetry:L("MainThreadTelemetry"),MainThreadTerminalService:L("MainThreadTerminalService"),MainThreadTerminalShellIntegration:L("MainThreadTerminalShellIntegration"),MainThreadWebviews:L("MainThreadWebviews"),MainThreadWebviewPanels:L("MainThreadWebviewPanels"),MainThreadWebviewViews:L("MainThreadWebviewViews"),MainThreadCustomEditors:L("MainThreadCustomEditors"),MainThreadUrls:L("MainThreadUrls"),MainThreadUriOpeners:L("MainThreadUriOpeners"),MainThreadProfileContentHandlers:L("MainThreadProfileContentHandlers"),MainThreadWorkspace:L("MainThreadWorkspace"),MainThreadFileSystem:L("MainThreadFileSystem"),MainThreadFileSystemEventService:L("MainThreadFileSystemEventService"),MainThreadExtensionService:L("MainThreadExtensionService"),MainThreadSCM:L("MainThreadSCM"),MainThreadSearch:L("MainThreadSearch"),MainThreadShare:L("MainThreadShare"),MainThreadTask:L("MainThreadTask"),MainThreadWindow:L("MainThreadWindow"),MainThreadLabelService:L("MainThreadLabelService"),MainThreadNotebook:L("MainThreadNotebook"),MainThreadNotebookDocuments:L("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:L("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:L("MainThreadNotebookKernels"),MainThreadNotebookRenderers:L("MainThreadNotebookRenderers"),MainThreadInteractive:L("MainThreadInteractive"),MainThreadTheming:L("MainThreadTheming"),MainThreadTunnelService:L("MainThreadTunnelService"),MainThreadManagedSockets:L("MainThreadManagedSockets"),MainThreadTimeline:L("MainThreadTimeline"),MainThreadTesting:L("MainThreadTesting"),MainThreadLocalization:L("MainThreadLocalizationShape"),MainThreadMcp:L("MainThreadMcpShape"),MainThreadAiRelatedInformation:L("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:L("MainThreadAiEmbeddingVector"),MainThreadChatStatus:L("MainThreadChatStatus"),MainThreadAiSettingsSearch:L("MainThreadAiSettingsSearch"),MainThreadDataChannels:L("MainThreadDataChannels"),MainThreadChatSessions:L("MainThreadChatSessions"),MainThreadChatOutputRenderer:L("MainThreadChatOutputRenderer")},X={ExtHostCodeMapper:L("ExtHostCodeMapper"),ExtHostCommands:L("ExtHostCommands"),ExtHostConfiguration:L("ExtHostConfiguration"),ExtHostDiagnostics:L("ExtHostDiagnostics"),ExtHostDebugService:L("ExtHostDebugService"),ExtHostDecorations:L("ExtHostDecorations"),ExtHostDocumentsAndEditors:L("ExtHostDocumentsAndEditors"),ExtHostDocuments:L("ExtHostDocuments"),ExtHostDocumentContentProviders:L("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:L("ExtHostDocumentSaveParticipant"),ExtHostEditors:L("ExtHostEditors"),ExtHostTreeViews:L("ExtHostTreeViews"),ExtHostFileSystem:L("ExtHostFileSystem"),ExtHostFileSystemInfo:L("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:L("ExtHostFileSystemEventService"),ExtHostLanguages:L("ExtHostLanguages"),ExtHostLanguageFeatures:L("ExtHostLanguageFeatures"),ExtHostQuickOpen:L("ExtHostQuickOpen"),ExtHostQuickDiff:L("ExtHostQuickDiff"),ExtHostStatusBar:L("ExtHostStatusBar"),ExtHostShare:L("ExtHostShare"),ExtHostExtensionService:L("ExtHostExtensionService"),ExtHostLogLevelServiceShape:L("ExtHostLogLevelServiceShape"),ExtHostTerminalService:L("ExtHostTerminalService"),ExtHostTerminalShellIntegration:L("ExtHostTerminalShellIntegration"),ExtHostSCM:L("ExtHostSCM"),ExtHostSearch:L("ExtHostSearch"),ExtHostTask:L("ExtHostTask"),ExtHostWorkspace:L("ExtHostWorkspace"),ExtHostWindow:L("ExtHostWindow"),ExtHostWebviews:L("ExtHostWebviews"),ExtHostWebviewPanels:L("ExtHostWebviewPanels"),ExtHostCustomEditors:L("ExtHostCustomEditors"),ExtHostWebviewViews:L("ExtHostWebviewViews"),ExtHostEditorInsets:L("ExtHostEditorInsets"),ExtHostEditorTabs:L("ExtHostEditorTabs"),ExtHostProgress:L("ExtHostProgress"),ExtHostComments:L("ExtHostComments"),ExtHostSecretState:L("ExtHostSecretState"),ExtHostStorage:L("ExtHostStorage"),ExtHostUrls:L("ExtHostUrls"),ExtHostUriOpeners:L("ExtHostUriOpeners"),ExtHostChatOutputRenderer:L("ExtHostChatOutputRenderer"),ExtHostProfileContentHandlers:L("ExtHostProfileContentHandlers"),ExtHostOutputService:L("ExtHostOutputService"),ExtHostLabelService:L("ExtHostLabelService"),ExtHostNotebook:L("ExtHostNotebook"),ExtHostNotebookDocuments:L("ExtHostNotebookDocuments"),ExtHostNotebookEditors:L("ExtHostNotebookEditors"),ExtHostNotebookKernels:L("ExtHostNotebookKernels"),ExtHostNotebookRenderers:L("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:L("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:L("ExtHostInteractive"),ExtHostChatAgents2:L("ExtHostChatAgents"),ExtHostLanguageModelTools:L("ExtHostChatSkills"),ExtHostChatProvider:L("ExtHostChatProvider"),ExtHostSpeech:L("ExtHostSpeech"),ExtHostEmbeddings:L("ExtHostEmbeddings"),ExtHostAiRelatedInformation:L("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:L("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:L("ExtHostAiSettingsSearch"),ExtHostTheming:L("ExtHostTheming"),ExtHostTunnelService:L("ExtHostTunnelService"),ExtHostManagedSockets:L("ExtHostManagedSockets"),ExtHostAuthentication:L("ExtHostAuthentication"),ExtHostTimeline:L("ExtHostTimeline"),ExtHostTesting:L("ExtHostTesting"),ExtHostTelemetry:L("ExtHostTelemetry"),ExtHostLocalization:L("ExtHostLocalization"),ExtHostMcp:L("ExtHostMcp"),ExtHostDataChannels:L("ExtHostDataChannels"),ExtHostChatSessions:L("ExtHostChatSessions")},w4=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),st;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Ju?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ht.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:w4})})(st||(st={}));var Ju=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?w4:(this.b||(this.b=new D),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},lt=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Ju),this.f}cancel(){this.f?this.f instanceof Ju&&this.f.cancel():this.f=st.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Ju&&this.f.dispose():this.f=st.None}};function UI(e){return e}var jI=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=UI):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function Zu(e){return!e||typeof e!="string"?!0:e.trim().length===0}var HI=/{([^}]+)}/g;function b4(e,t){return Object.keys(t).length===0?e:e.replace(HI,(i,r)=>t[r]??i)}function gn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function BI(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function _I(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function $g(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let s=r,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+i!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function zI(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=gn(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function y4(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function S4(e){return e.split(/\r\n|\r|\n/)}function Ig(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function WI(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function mn(e,t){return e<t?-1:e>t?1:0}function Dg(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function Pg(e,t){return pc(e,t,0,e.length,0,t.length)}function pc(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Dg(e.toLowerCase(),t.toLowerCase(),i,r,s,n);x4(c)&&(c-=32),x4(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function x4(e){return e>=97&&e<=122}function vn(e,t){return e.length===t.length&&pc(e,t)===0}function Ag(e,t){const i=t.length;return t.length>e.length?!1:pc(e,t,0,i)===0}function VI(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function Yu(e){return 55296<=e&&e<=56319}function Xu(e){return 56320<=e&&e<=57343}function Tg(e,t){return(e-55296<<10)+(t-56320)+65536}function E4(e,t,i){const r=e.charCodeAt(i);if(Yu(r)&&i+1<t){const s=e.charCodeAt(i+1);if(Xu(s))return Tg(r,s)}return r}function qI(e,t){const i=e.charCodeAt(t-1);if(Xu(i)&&t>1){const r=e.charCodeAt(t-2);if(Yu(r))return Tg(r,i)}return i}var GI=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=qI(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=E4(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},QI=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new GI(e,t)}nextGraphemeLength(){const e=A4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(D4(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=A4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(D4(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function k4(e,t){return new QI(e,t).nextGraphemeLength()}var Rg=void 0;function JI(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function C4(e){return Rg||(Rg=JI()),Rg.test(e)}var ZI=/^[\t\n\r\x20-\x7E]*$/;function YI(e){return ZI.test(e)}var XI=/[\u2028\u2029]/;function $4(e){return XI.test(e)}var KI=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,eD=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,tD=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,gH=new RegExp("(?:"+[KI.source,eD.source,tD.source].join("|")+")","g"),iD="\uFEFF";function rD(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function I4(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function sD(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function D4(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var P4;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(P4||(P4={}));var A4=class bu{static{this.c=null}static getInstance(){return bu.c||(bu.c=new bu),bu.c}constructor(){this.d=nD()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function nD(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var T4;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(T4||(T4={}));var mH=class yu{static{this.c=new At(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new jI({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let p=0;p<u.length;p+=2)h.set(u[p],u[p+1]);return h}function r(u,h){const p=new Map(u);for(const[f,m]of h)p.set(f,m);return p}function s(u,h){if(!u)return h;const p=new Map;for(const[f,m]of u)h.has(f)&&p.set(f,m);return p}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(n[u]);a=s(a,h)}const c=i(n._common),l=r(c,a);return new yu(l)})}static getInstance(t){return yu.d.get(Array.from(t))}static{this.e=new At(()=>Object.keys(yu.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return yu.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},vH=class Su{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(Su.c())].flat())),this.d}static isInvisibleCharacter(t){return Su.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&(Su.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return Su.e()}};function $s(e){return e===47||e===92}function R4(e){return e.replace(/[\\/]/g,Oe.sep)}function oD(e){return e.indexOf("/")===-1&&(e=R4(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function L4(e,t=Oe.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if($s(r)){if($s(e.charCodeAt(1))&&!$s(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!$s(e.charCodeAt(n));n++);if(o!==n&&!$s(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if($s(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(N4(r)&&e.charCodeAt(1)===58)return $s(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if($s(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var aD=/[\\/:\*\?"<>\|]/g,cD=/[/]/g,lD=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function uD(e,t=Kt){const i=t?aD:cD;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&lD.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function Ku(e,t,i,r=ir){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!Ag(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function N4(e){return e>=65&&e<=90||e>=97&&e<=122}function hD(e,t=Kt){return t?N4(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var q;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatEditor="vscode-chat-editor",e.vscodeChatInput="chatSessionInput",e.vscodeChatSession="vscode-chat-session",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view",e.chatEditingSnapshotScheme="chat-editing-snapshot-text-model",e.chatEditingModel="chat-editing-text-model"})(q||(q={}));function Lg(e,t){return y.isUri(e)?vn(e.scheme,t):Ag(e,t+":")}function dD(e,...t){return t.some(i=>Lg(e,i))}var fD="tkn",pD=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Oe.join(t??"/",mD(e))}getServerRootPath(){return this.f}get g(){return Oe.join(this.f,q.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Ot(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${fD}=${encodeURIComponent(s)}`),y.from({scheme:ko?this.d:q.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},gD=new pD;function mD(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var vD="vs/../../node_modules",wD="vs/../../node_modules.asar",M4="vscode-app",bD=class Fp{static{this.a=M4}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===q.vscodeRemote?gD.rewrite(t):t.scheme===q.file&&(Vy||pI===`${q.vscodeFileResource}://${Fp.a}`)?t.with({scheme:q.vscodeFileResource,authority:t.authority||Fp.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===q.vscodeFileResource?t.with({scheme:q.file,authority:t.authority!==Fp.a?t.authority:null,query:null,fragment:null}):t}b(t){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const r=xg(i,t);return y.file(r)}throw new Error("Cannot determine URI for module id!")}},F4=new bD,wH=Object.freeze({"Cache-Control":"no-cache, no-store"}),bH=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),O4;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(O4||(O4={}));function sr(e){return qu(e,!0)}var gc=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:mn(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===q.file)return Ku(sr(e),sr(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(H4(e.authority,t.authority))return Ku(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return Jr(e)||e.authority}basename(e){return Oe.basename(e.path)}extname(e){return Oe.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===q.file?t=y.file(Io(sr(e))).path:(t=Oe.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===q.file?t=y.file($o(sr(e))).path:t=Oe.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!H4(e.authority,t.authority))return;if(e.scheme===q.file){const s=fc(sr(e),sr(t));return Kt?R4(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Oe.relative(i,r)}resolvePath(e,t){if(e.scheme===q.file){const i=y.file(PI(sr(e),t));return e.with({authority:i.authority,path:i.path})}return t=oD(t),e.with({path:Oe.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&vn(e,t)}hasTrailingPathSeparator(e,t=ir){if(e.scheme===q.file){const i=sr(e);return i.length>L4(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=ir){return B4(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=ir){let i=!1;if(e.scheme===q.file){const r=sr(e);i=r!==void 0&&r.length===L4(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!B4(e,t)?e.with({path:e.path+"/"}):e}},Be=new gc(()=>!1),yD=new gc(e=>e.scheme===q.file?!ks:!0),SD=new gc(e=>!0),U4=Be.isEqual.bind(Be),yH=Be.isEqualOrParent.bind(Be),SH=Be.getComparisonKey.bind(Be),Ng=Be.basenameOrAuthority.bind(Be),Jr=Be.basename.bind(Be),xH=Be.extname.bind(Be),Mg=Be.dirname.bind(Be),_t=Be.joinPath.bind(Be),EH=Be.normalizePath.bind(Be),j4=Be.relativePath.bind(Be),kH=Be.resolvePath.bind(Be),xD=Be.isAbsolutePath.bind(Be),H4=Be.isEqualAuthority.bind(Be),B4=Be.hasTrailingPathSeparator.bind(Be),CH=Be.removeTrailingPathSeparator.bind(Be),$H=Be.addTrailingPathSeparator.bind(Be),_4;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(_4||(_4={}));var ED=Symbol("MicrotaskDelay");function Is(e){return!!e&&typeof e.then=="function"}function kD(e){const t=new lt,i=e(t.token);let r=!1;const s=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),o(new ki)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),r?ky(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return s.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return s.finally(n)}}}function CD(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function Fg(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new ki)});e.then(i,r).finally(()=>s.dispose())})}function Qt(e){return new Promise((t,i)=>{const r=e();Is(r)?r.then(t,i):t(r)})}function $D(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var ID=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},DD=class{constructor(){this.a=Promise.resolve(null)}queue(e){return this.a=this.a.then(()=>e(),()=>e())}},PD=class{constructor(){this.a=new Map}queue(e,t){const r=(this.a.get(e)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.a.get(e)===r&&this.a.delete(e)});return this.a.set(e,r),r}keys(){return this.a.keys()}},AD=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},TD=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},RD=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===ED?TD(i):AD(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new ki),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},LD=class{constructor(e){this.a=new RD(e),this.b=new ID}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},kr=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function nr(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new ki)})}):kD(i=>nr(e,i))}function ND(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=ce(()=>{clearTimeout(r),i?.delete(s)});return i?.add(s),s}var MD=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new D}whenIdle(){return this.size>0?ht.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},FD=class extends MD{constructor(){super(1)}},OD=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new Zr;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=Be){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=Be){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new FD;const n=this.f++,o=ht.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Lu),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},UD=class{constructor(){this.g=void 0,this.j=!1}cancel(){this.g?.dispose(),this.g=void 0}cancelAndSet(e,t,i=globalThis){if(this.j)throw new di("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.g=ce(()=>{i.clearInterval(r),this.g=void 0})}dispose(){this.cancel(),this.j=!0}},wn=class{constructor(e,t){this.b=void 0,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=void 0)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=void 0,this.a&&this.h()}h(){this.a?.()}},z4,eh;(function(){const e=globalThis;typeof e.requestIdleCallback!="function"||typeof e.cancelIdleCallback!="function"?eh=(t,i,r)=>{Gy(()=>{if(s)return;const n=Date.now()+15;i(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let s=!1;return{dispose(){s||(s=!0)}}}:eh=(t,i,r)=>{const s=t.requestIdleCallback(i,typeof r=="number"?{timeout:r}:void 0);let n=!1;return{dispose(){n||(n=!0,t.cancelIdleCallback(s))}}},z4=(t,i)=>eh(globalThis,t,i)})();var jD=class{constructor(e,t){this.l=!1,this.g=()=>{try{this.m=t()}catch(i){this.o=i}finally{this.l=!0}},this.j=eh(e,()=>this.g())}dispose(){this.j.dispose()}get value(){if(this.l||(this.j.dispose(),this.g()),this.o)throw this.o;return this.m}get isInitialized(){return this.l}},HD=class extends jD{constructor(e){super(globalThis,e)}},W4;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(W4||(W4={}));var Zr=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new ki)}},Po;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(Po||(Po={}));var V4;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(V4||(V4={}));var mc=class _i{static fromArray(t){return new _i(i=>{i.emitMany(t)})}static fromPromise(t){return new _i(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new _i(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new _i(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=_i.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new D,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await ht.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new _i(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return _i.map(this,t)}static filter(t,i){return new _i(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return _i.filter(this,t)}static coalesce(t){return _i.filter(t,i=>!!i)}coalesce(){return _i.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return _i.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},BD=class{constructor(e){this.a=new Zr,this.b=new mc(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.g=s=>r.emitMany(s),this.a.p},e);let t,i;this.d=r=>{t||(t=r)},this.f=r=>{i||(i=[]),i.push(r)},this.g=r=>{i?r.forEach(s=>i.push(s)):i=r.slice()}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}emitMany(e){this.g(e)}},_D=class{constructor(){this.a=[],this.b=[]}get hasFinalValue(){return!!this.d}produce(e){if(this.f(),this.a.length>0){const t=this.a.shift();this.g(t,e)}else this.b.push(e)}produceFinal(e){this.f(),this.d=e;for(const t of this.a)this.g(t,e);this.a.length=0}f(){if(this.d)throw new di("ProducerConsumer: cannot produce after final value has been set")}g(e,t){t.ok?e.complete(t.value):e.error(t.error)}consume(){if(this.b.length>0||this.d){const e=this.b.length>0?this.b.shift():this.d;return e.ok?Promise.resolve(e.value):Promise.reject(e.error)}else{const e=new Zr;return this.a.push(e),e.p}}},IH=class Yi{constructor(t,i){this.b=i,this.a=new _D,this.g={next:()=>this.a.consume(),return:()=>(this.b?.(),Promise.resolve({done:!0,value:void 0})),throw:async r=>(this.f(r),{done:!0,value:void 0})},queueMicrotask(async()=>{const r=t({emitOne:s=>this.a.produce({ok:!0,value:{done:!1,value:s}}),emitMany:s=>{for(const n of s)this.a.produce({ok:!0,value:{done:!1,value:n}})},reject:s=>this.f(s)});if(!this.a.hasFinalValue)try{await r,this.d()}catch(s){this.f(s)}})}static fromArray(t){return new Yi(i=>{i.emitMany(t)})}static fromPromise(t){return new Yi(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Yi(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new Yi(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=Yi.fromArray([])}static map(t,i){return new Yi(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return Yi.map(this,t)}static coalesce(t){return Yi.filter(t,i=>!!i)}coalesce(){return Yi.coalesce(this)}static filter(t,i){return new Yi(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return Yi.filter(this,t)}d(){this.a.hasFinalValue||this.a.produceFinal({ok:!0,value:{done:!0,value:void 0}})}f(t){this.a.hasFinalValue||this.a.produceFinal({ok:!1,error:t})}[Symbol.asyncIterator](){return this.g}},DH=Symbol("AsyncReaderEndOfStream"),PH=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function q4(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof ne)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=q4(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function vc(e,t){const i=q4(e,t,!1,0);return i===null?e:i}var G4=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Ot(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},zD=class extends G4{constructor(){super(),this.h=!0,this.i=new ki}},Q4;function Og(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var Ug="$$ref$$",WD={[Ug]:-1};function J4(e,t=null,i=!1){const r=[];return{jsonString:(i?Og:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return WD;if(typeof o=="object"){if(o instanceof ne){const a=r.push(o)-1;return{[Ug]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function Z4(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[Ug];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function Y4(e,t){return JSON.stringify(e,t)}function VD(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var X4;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(X4||(X4={}));var K4;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(K4||(K4={}));var qD=()=>{},GD=Symbol.for("rpcProtocol"),QD=Symbol.for("rpcProxy"),JD=class Nb extends te{static{Q4=GD}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[Q4]=!0,this.b=this.B(new D),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=VD(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=o4.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new wn(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(ly())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+Nb.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+Nb.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?vc(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===QD?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=wt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=Gi.deserializeRequestJSONArgs(r);this.g&&(c=vc(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=Gi.deserializeRequestMixedArgs(r);this.g&&(c=vc(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=Gi.deserializeReplyOKJSON(r);this.g&&(o=vc(o,this.g)),this.O(i,n,o);break}case 10:{const o=Gi.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=Gi.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=Gi.deserializeReplyErrError(r);this.g&&(o=vc(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${Qu(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const h=new lt;n.push(h.token),c=this.Q(r,s,n),l=()=>h.cancel()}else c=this.Q(r,s,n),l=qD;this.u[a]=l;const u=Gi.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const p=Gi.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(p.byteLength,i,1,"reply:",h),this.c.send(p)},h=>{delete this.u[a];const p=Gi.serializeReplyErr(i,h);this.f?.logOutgoing(p.byteLength,i,1,"replyErr:",h),this.c.send(p)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+Qu(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+Qu(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new zD;let s=null;if(r.length>0&&st.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(ly());const n=Gi.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new G4,l=new he;s&&l.add(s.onCancellationRequested(()=>{const h=Gi.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new ZD(c,l),this.F(o);const u=Gi.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Qu(t)}.${i}(`,r),this.c.send(u),c}},ZD=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},wt=class Mb{static alloc(t,i,r){const s=new Mb(ne.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new Mb(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new ei(Z4(o,a,null));break}case 4:i[r]=void 0;break}return i}},e5;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(e5||(e5={}));var Gi=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof ne||e[t]instanceof ei||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof ne)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof ei){const{jsonString:o,referencedBuffers:a}=J4(n.value,t);i[r]={type:3,value:ne.fromString(o),buffers:a}}else i[r]={type:1,value:ne.fromString(Y4(n,t))}}return{type:1,args:i}}return{type:0,args:Y4(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=ne.fromString(i),o=ne.fromString(r);let a=0;a+=wt.sizeUInt8(),a+=wt.sizeShortString(n),a+=wt.sizeLongString(o);const c=wt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=ne.fromString(i);let o=0;o+=wt.sizeUInt8(),o+=wt.sizeShortString(n),o+=wt.sizeMixedArray(r);const a=wt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return wt.alloc(5,e,0).buffer}static serializeCancel(e){return wt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof ne)return this.e(e,t);if(t instanceof ei){const{jsonString:r,referencedBuffers:s}=J4(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,Og(t,i))}static d(e){return wt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=wt.sizeVSBuffer(t);const r=wt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=ne.fromString(t);let r=0;r+=wt.sizeLongString(i);const s=wt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=ne.fromString(t);let s=0;s+=wt.sizeUInt32,s+=wt.sizeLongString(r);for(const o of i)s+=wt.sizeVSBuffer(o);const n=wt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new ei(Z4(r,s,t))}static serializeReplyErr(e,t){const i=t?Og(vo(t),null):void 0;if(typeof i!="string")return this.h(e);const r=ne.fromString(i);let s=0;s+=wt.sizeLongString(r);const n=wt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return wt.alloc(12,e,0).buffer}},t5;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(t5||(t5={}));var i5;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(i5||(i5={}));var or;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(or||(or={}));var wc=H("instantiationService");function YD(e,t,i){t[or.DI_TARGET]===t?t[or.DI_DEPENDENCIES].push({id:e,index:i}):(t[or.DI_DEPENDENCIES]=[{id:e,index:i}],t[or.DI_TARGET]=t)}function H(e){if(or.serviceIds.has(e))return or.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");YD(t,i,s)};return t.toString=()=>e,or.serviceIds.set(e,t),t}function AH(e){return e}function jg(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var r5=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],s5;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(s5||(s5={}));var n5;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(n5||(n5={}));var Ve=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return vn(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},bn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(Ve.toKey(e))}delete(e){return this.c.delete(Ve.toKey(e))}has(e){return this.c.has(Ve.toKey(e))}},Ds=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(Ve.toKey(e))}get(e){return this.c.get(Ve.toKey(e))}has(e){return this.c.has(Ve.toKey(e))}set(e,t){this.c.set(Ve.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},o5=class extends Error{constructor(e,t,i){super(`Error in extension ${Ve.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},TH=H("IBuiltinExtensionsScannerService");function Hg(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,c5(e),a5(e.stack)||a5(e.stacktrace)):c5(e)}function a5(e){return Array.isArray(e)?e.join(`
`):e}function c5(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function Ao(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const i=ft(e),r=Ao(i[0],t);return i.length>1?d(114,null,r,i.length):r}if(He(e))return e;if(e.detail){const i=e.detail;if(i.error)return Hg(i.error,t);if(i.exception)return Hg(i.exception,t)}return e.stack?Hg(e,t):e.message?e.message:d(115,null)}function bc(e){return Bg(e,0)}function Bg(e,t){switch(typeof e){case"object":return e===null?Yr(349,t):Array.isArray(e)?KD(e,t):eP(e,t);case"string":return _g(e,t);case"boolean":return XD(e,t);case"number":return Yr(e,t);case"undefined":return Yr(937,t);default:return Yr(617,t)}}function Yr(e,t){return(t<<5)-t+e|0}function XD(e,t){return Yr(e?433:863,t)}function _g(e,t){t=Yr(149417,t);for(let i=0,r=e.length;i<r;i++)t=Yr(e.charCodeAt(i),t);return t}function KD(e,t){return t=Yr(104579,t),e.reduce((i,r)=>Bg(r,i),t)}function eP(e,t){return t=Yr(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=_g(r,i),Bg(e[r],i)),t)}var l5;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(l5||(l5={}));function zg(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function yc(e,t=32){return e instanceof ArrayBuffer?fg(ne.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}var RH=class UC{static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(Yu(o))if(a+1<i){const l=t.charCodeAt(a+1);Xu(l)?(a++,c=Tg(o,l)):c=65533}else{n=o;break}else Xu(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),yc(this.h)+yc(this.l)+yc(this.m)+yc(this.n)+yc(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=UC.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,zg(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=zg(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=zg(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},u5;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(u5||(u5={}));function Wg(...e){switch(e.length){case 1:return d(1844,null,e[0]);case 2:return d(1845,null,e[0],e[1]);case 3:return d(1846,null,e[0],e[1],e[2]);default:return}}var tP=d(1847,null),iP=d(1848,null),Sc=class Fb{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw Ru(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(Wg("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Wg("&&"));break;case 124:this.h(124)?this.k(16):this.l(Wg("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=Fb.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(tP);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(iP);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&Fb.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},zt=new Map;zt.set("false",!1),zt.set("true",!0),zt.set("isMac",Ui),zt.set("isLinux",ks),zt.set("isWindows",Kt),zt.set("isWeb",ko),zt.set("isMacNative",Ui&&!ko),zt.set("isEdge",Xy),zt.set("isFirefox",wI),zt.set("isChrome",bg),zt.set("isSafari",bI);var rP=Object.prototype.hasOwnProperty,h5;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(h5||(h5={}));var sP={regexParsingWithErrorRecovery:!0},nP=d(1823,null),oP=d(1824,null),aP=d(1825,null),d5=d(1826,null),cP=d(1827,null),lP=d(1828,null),uP=d(1829,null),hP=d(1830,null),f5=class xu{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=sP){this.k=t,this.d=new Sc,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:nP,offset:0,lexeme:"",additionalInfo:oP});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?lP:void 0;throw this.h.push({message:cP,offset:r.offset,lexeme:Sc.getLexeme(r),additionalInfo:s}),xu.c}return i}catch(i){if(i!==xu.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:Wt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:Wt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),gi.INSTANCE;case 12:return this.z(),Pi.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,d5),i?.negate()}case 17:return this.z(),kc.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),Wt.true();case 12:return this.z(),Wt.false();case 0:{this.z();const i=this.l();return this.A(1,d5),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return Zg.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let p=0;p<s.lexeme.length;p++)s.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let p=0;p<o.lexeme.length;p++)o.lexeme.charCodeAt(p)===40?a++:s.lexeme.charCodeAt(p)===41&&a--}if(a<0)break;n.push(Sc.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return Wt.regex(i,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!Zu(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return Zg.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,aP);const s=this.u();return Wt.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return Wt.equals(i,s);switch(s){case"true":return Wt.has(i);case"false":return Wt.not(i);default:return Wt.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return Wt.notEquals(i,s);switch(s){case"true":return Wt.not(i);case"false":return Wt.has(i);default:return Wt.notEquals(i,s)}}case 5:return this.z(),Qg.create(i,this.u());case 6:return this.z(),Jg.create(i,this.u());case 7:return this.z(),ih.create(i,this.u());case 8:return this.z(),Gg.create(i,this.u());case 13:return this.z(),Wt.in(i,this.u());default:return Wt.has(i)}}case 20:throw this.h.push({message:uP,offset:t.offset,lexeme:"",additionalInfo:hP}),xu.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=d(1831,null,t,Sc.getLexeme(i)),n=i.offset,o=Sc.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),xu.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},Wt=class{static false(){return gi.INSTANCE}static true(){return Pi.INSTANCE}static has(e){return Ec.create(e)}static equals(e,t){return Vg.create(e,t)}static notEquals(e,t){return qg.create(e,t)}static regex(e,t){return Zg.create(e,t)}static in(e,t){return p5.create(e,t)}static notIn(e,t){return g5.create(e,t)}static not(e){return kc.create(e)}static and(...e){return v5.create(e,null,!0)}static or(...e){return Yg.create(e,null,!0)}static greater(e,t){return ih.create(e,t)}static greaterEquals(e,t){return Gg.create(e,t)}static smaller(e,t){return Qg.create(e,t)}static smallerEquals(e,t){return Jg.create(e,t)}static{this.c=new f5({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function dP(e){const t=new f5({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?d(1832,null,r.additionalInfo):d(1833,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function xc(e,t){return e.cmp(t)}var gi=class jC{static{this.INSTANCE=new jC}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return Pi.INSTANCE}},Pi=class HC{static{this.INSTANCE=new HC}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return gi.INSTANCE}},Ec=class BC{static create(t,i=null){const r=zt.get(t);return typeof r=="boolean"?r?Pi.INSTANCE:gi.INSTANCE:new BC(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:w5(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=zt.get(this.key);return typeof t=="boolean"?t?Pi.INSTANCE:gi.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=kc.create(this.key,this)),this.c}},Vg=class _C{static create(t,i,r=null){if(typeof i=="boolean")return i?Ec.create(t,r):kc.create(t,r);const s=zt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?Pi.INSTANCE:gi.INSTANCE:new _C(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=zt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?Pi.INSTANCE:gi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=qg.create(this.c,this.d,this)),this.f}},p5=class zC{static create(t,i){return new zC(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?rP.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=g5.create(this.d,this.f)),this.c}},g5=class WC{static create(t,i){return new WC(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=p5.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},qg=class VC{static create(t,i,r=null){if(typeof i=="boolean")return i?kc.create(t,r):Ec.create(t,r);const s=zt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?gi.INSTANCE:Pi.INSTANCE:new VC(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=zt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?gi.INSTANCE:Pi.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Vg.create(this.c,this.d,this)),this.f}},kc=class qC{static create(t,i=null){const r=zt.get(t);return typeof r=="boolean"?r?gi.INSTANCE:Pi.INSTANCE:new qC(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:w5(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=zt.get(this.c);return typeof t=="boolean"?t?gi.INSTANCE:Pi.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=Ec.create(this.c,this)),this.d}};function th(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):gi.INSTANCE}var ih=class GC{static create(t,i,r=null){return th(i,s=>new GC(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=Jg.create(this.c,this.d,this)),this.f}},Gg=class QC{static create(t,i,r=null){return th(i,s=>new QC(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Qg.create(this.c,this.d,this)),this.f}},Qg=class JC{static create(t,i,r=null){return th(i,s=>new JC(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Gg.create(this.c,this.d,this)),this.f}},Jg=class ZC{static create(t,i,r=null){return th(i,s=>new ZC(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:yn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=ih.create(this.c,this.d,this)),this.f}},Zg=class YC{static create(t,i){return new YC(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=fP.create(this)),this.c}},fP=class Ob{static create(t){return new Ob(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new Ob(this.c.map(t))}negate(){return this.c}};function m5(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var v5=class Qa{static create(t,i,r){return Qa.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=xc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=m5(this.expr);return t===this.expr?this:Qa.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return gi.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return Pi.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(xc);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=Yg.create(o.expr.map(u=>Qa.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(xc))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return gi.INSTANCE;if(s.length===1)return s[0]}return new Qa(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new Qa(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=Yg.create(t,this,!0)}return this.c}},Yg=class ho{static create(t,i,r){return ho.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=xc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=m5(this.expr);return t===this.expr?this:ho.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return Pi.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return gi.INSTANCE;s.sort(xc)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return Pi.INSTANCE;if(s.length===1)return s[0]}return new ho(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new ho(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of b5(i))for(const o of b5(r))s.push(v5.create([n,o],null,!1));t.unshift(ho.create(s,null,!1))}this.c=ho.create(t,this,!0)}return this.c}},U=class Op extends Ec{static{this.d=[]}static all(){return Op.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?Op.d.push({...r,key:t}):r!==!0&&Op.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Vg.create(this.key,t)}notEqualsTo(t){return qg.create(this.key,t)}greater(t){return ih.create(this.key,t)}},pP=H("contextKeyService");function w5(e,t){return e<t?-1:e>t?1:0}function yn(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function b5(e){return e.type===9?e.expr:[e]}var _e=H("logService"),Sn=H("loggerService"),we;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})(we||(we={}));var gP=we.Info;function Xg(e,t){return e!==we.Off&&e<=t}function mP(e,t,i){switch(t){case we.Trace:e.trace(i);break;case we.Debug:e.debug(i);break;case we.Info:e.info(i);break;case we.Warning:e.warn(i);break;case we.Error:e.error(i);break;case we.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function To(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=Ao(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var y5=class extends te{constructor(){super(...arguments),this.b=gP,this.c=this.B(new D)}get onDidChangeLogLevel(){return this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return Xg(this.b,e)}g(e){return this.q.isDisposed?!1:this.f(e)}},S5=class extends y5{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g(we.Trace)&&this.m(we.Trace,To([e,...t],!0))}debug(e,...t){this.g(we.Debug)&&this.m(we.Debug,To([e,...t]))}info(e,...t){this.g(we.Info)&&this.m(we.Info,To([e,...t]))}warn(e,...t){this.g(we.Warning)&&this.m(we.Warning,To([e,...t]))}error(e,...t){if(this.g(we.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m(we.Error,To(i))}else this.m(we.Error,To([e,...t]))}flush(){}},vP=class extends y5{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},wP=class extends te{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new Bt,this.f=this.B(new D),this.onDidChangeLoggers=this.f.event,this.g=this.B(new D),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new D),this.onDidChangeVisibility=this.h.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}n(e){return He(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.s(e),r=He(e)?e:t?.id??bc(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?we.Trace:t?.logLevel;s||(s=this.t(i,n??this.getLogLevel(i)??this.j,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}s(e){return He(e)?_t(this.m,`${e}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.j?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.g.fire([i,r]))}else{this.j=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.s(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function bP(e){switch(e){case we.Trace:return"trace";case we.Debug:return"debug";case we.Info:return"info";case we.Warning:return"warn";case we.Error:return"error";case we.Off:return"off"}}function yP(e){switch(e){case"trace":return we.Trace;case"debug":return we.Debug;case"info":return we.Info;case"warn":return we.Warning;case"error":return we.Error;case"critical":return we.Error;case"off":return we.Off}}var LH=new U("logLevel",bP(we.Info)),Cr=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},x5=[],E5;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(E5||(E5={}));function qe(e,t,i){t instanceof Cr||(t=new Cr(t,[],!!i)),x5.push([e,t])}function SP(){return x5}var Kg=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},Tt=H("IExtHostInitDataService"),xP=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},k5=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new xP(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},EP=!1,C5=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},kP=class Ub{constructor(t=new Kg,i=!1,r,s=EP){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(wc,this),this._globalGraph=s?r?._globalGraph??new k5(n=>n):void 0}dispose(){if(!this.f){this.f=!0,qi(this.h),this.h.clear();for(const t of this.g)ky(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends Ub{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=em.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw Ru("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a},getIfExists:o=>{if(s)throw Ru("service accessor is only valid during the invocation of its target method");return this.s(o,r)}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Cr?(r=em.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=em.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=or.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Cr)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Cr?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new k5(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new C5(s);for(const l of or.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Cr){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new C5(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Cr){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Cr)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new Ub(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new HD(()=>{const u=a.o(i,r,n);for(const[h,p]of c){const f=u[h];if(typeof f=="function")for(const m of p)m.disposable=f.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new xs,c.set(h,m)),(S,E,C)=>{if(l.isInitialized)return l.value[h](S,E,C);{const P={listener:[S,E,C],disposable:void 0},Z=m.push(P);return ce(()=>{Z(),P.disposable?.dispose()})}}}if(h in u)return u[h];const p=l.value;let f=p[h];return typeof f!="function"||(f=f.bind(p),u[h]=f),f},set(u,h,p){return l.value[h]=p,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},$5;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})($5||($5={}));var em=class Br{static{this.all=new Set}static{this.c=new class extends Br{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new Br(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Br.c}static traceCreation(t,i){return t?new Br(1,i.name):Br.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new Br(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;Br.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const p=r(n+1,h);p&&a.push(p)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Br.f.toFixed(2)}ms)`];(t>2||i)&&Br.all.add(s.join(`
`))}},Le=H("IExtHostRpcService"),CP=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},rh=H("IURITransformerService"),$P=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},IP=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},DP=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Dg(e,this.b,0,e.length,this.c,this.d):pc(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},I5=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Dg(e,this.b,0,e.length,this.d,this.e):pc(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},D5;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(D5||(D5={}));var P5=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new I5(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return Pg(e,this.c.scheme);if(this.d[this.e]===2)return Pg(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return mn(e,this.c.query);if(this.d[this.e]===5)return mn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},xn=class jb{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?jb.Val:t}static unwrap(t){return t===jb.Val?void 0:t}},sh=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},A5;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(A5||(A5={}));var Ps=class Eu{static forUris(t=()=>!1,i=()=>!1){return new Eu(new P5(t,i))}static forPaths(t=!1){return new Eu(new I5(void 0,!t))}static forStrings(){return new Eu(new IP)}static forConfigKeys(){return new Eu(new DP)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);hy(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);hy(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new sh,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new sh,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new sh,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new sh,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=xn.unwrap(s.value);s.value=xn.wrap(i),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return xn.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,h]=o[o.length-1];switch(u){case-1:h.left=c;break;case 0:ag(!1);case 1:ag(!1)}}else n.right=c;const l=this.g(o);if(s.length>0){const[u,h]=s[s.length-1];switch(u){case-1:h.left=l;break;case 0:h.mid=l;break;case 1:h.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(s)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const r=t[i][1];r.updateHeight();const s=r.balanceFactor();if(s>1?(r.right.balanceFactor()>=0||(r.right=r.right.rotateRight()),t[i][1]=r.rotateLeft()):s<-1&&(r.left.balanceFactor()<=0||(r.left=r.left.rotateLeft()),t[i][1]=r.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=xn.unwrap(r.value)||s,r=r.mid;else break}return r&&xn.unwrap(r.value)||s}findSuperstr(t){return this.h(t,!1)}h(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.j(s.mid):i?xn.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,xn.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function it(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?it(r):r}),t}function tm(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(T5.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!S3(s)&&t.push(s)}}return e}var T5=Object.prototype.hasOwnProperty;function Ro(e,t){return im(e,t,new Set)}function im(e,t,i){if(Et(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(im(n,t,i));return s}if(xt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)T5.call(e,n)&&(s[n]=im(e[n],t,i));return i.delete(e),s}return e}function En(e,t,i=!0){return xt(e)?(xt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(xt(e[r])&&xt(t[r])?En(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function mi(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!mi(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!mi(s,n))return!1;for(i=0;i<s.length;i++)if(!mi(e[s[i]],t[s[i]]))return!1}return!0}function PP(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(xt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function R5(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var AP=class{constructor(){this.a=0}getNext(){return this.a++}},Cc;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(Cc||(Cc={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?vn(t,c)?e.Error:vn(i,c)||vn(r,c)?e.Warning:vn(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(Cc||(Cc={}));var bt=Cc,TP=bt,NH=H("notificationService"),L5;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})(L5||(L5={}));var N5;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(N5||(N5={}));var M5;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(M5||(M5={}));var rm=H("contextService");function RP(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function LP(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var F5;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(F5||(F5={}));var NP=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=Ps.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Ps.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},O5=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return _t(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function sm(e){return new O5({uri:e,index:0,name:Ng(e)},{uri:e.toString()})}var U5="code-workspace",MH=`.${U5}`,FH=[{name:d(2713,null),extensions:[U5]}],MP=class{constructor(){this.a=new Set(Object.keys(q)),this.b=new Map,this.extUri=new gc(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},Lo=H("IExtHostFileSystemInfo"),ni=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}(),nm=Object.freeze({create:e=>wo(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>nm.split(e).filter(t=>!t.startsWith("#"))}),OH=new Uint32Array(10),j5;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(j5||(j5={}));var H5;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(H5||(H5={}));var B5;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(B5||(B5={}));var UH=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),jH=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),HH=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),BH=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function _5(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var _H=W5.bind(void 0,!1),z5=W5.bind(void 0,!0);function W5(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=Ag(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function FP(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function OP(e,t){return om(e.toLowerCase(),t.toLowerCase(),0,0)}function om(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=om(e,t,i+1,r+1))?q5({start:r,end:r+1},s):null}return om(e,t,i,r+1)}function am(e){return 97<=e&&e<=122}function nh(e){return 65<=e&&e<=90}function cm(e){return 48<=e&&e<=57}function UP(e){return e===32||e===9||e===10||e===13}var jP=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>jP.add(e.charCodeAt(0)));function V5(e){return am(e)||nh(e)||cm(e)}function q5(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function G5(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(nh(r)||cm(r)||i>0&&!V5(e.charCodeAt(i-1)))return i}return e.length}function lm(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=lm(e,t,i+1,r+1);!s&&(n=G5(t,n))<t.length;)s=lm(e,t,i+1,n),n++;return s===null?null:q5({start:r,end:r+1},s)}}function HP(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),nh(n)&&t++,am(n)&&i++,V5(n)&&r++,cm(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function BP(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function _P(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function zP(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),nh(r)&&t++,am(r)&&i++,UP(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function Q5(e,t){if(!t||(t=t.trim(),t.length===0)||!zP(e))return null;t.length>60&&(t=t.substring(0,60));const i=HP(t);if(!_P(i)){if(!BP(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=lm(e,t,0,s))===null;)s=G5(t,s+1);return r}var zH=_5(z5,Q5,FP),WH=_5(z5,Q5,OP),VH=new sg(1e4),oh=128;function um(){const e=[],t=[];for(let i=0;i<=oh;i++)t[i]=0;for(let i=0;i<=oh;i++)e.push(t.slice(0));return e}function J5(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var qH=J5(2*oh),GH=J5(2*oh),QH=um(),JH=um(),ZH=um(),Z5;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(Z5||(Z5={}));var Y5;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(Y5||(Y5={}));var YH=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},hm=Object.create(null);function g(e,t){if(He(t)){const i=hm[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return hm[e]=t,{id:e}}function WP(){return hm}var VP={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468),goToEditingSession:g("go-to-editing-session",60469),editSession:g("edit-session",60470),codeReview:g("code-review",60471),copilotWarning:g("copilot-warning",60472),python:g("python",60473),copilotLarge:g("copilot-large",60474),copilotWarningLarge:g("copilot-warning-large",60475),keyboardTab:g("keyboard-tab",60476),copilotBlocked:g("copilot-blocked",60477),copilotNotConnected:g("copilot-not-connected",60478),flag:g("flag",60479),lightbulbEmpty:g("lightbulb-empty",60480),symbolMethodArrow:g("symbol-method-arrow",60481),copilotUnavailable:g("copilot-unavailable",60482),repoPinned:g("repo-pinned",60483),keyboardTabAbove:g("keyboard-tab-above",60484),keyboardTabBelow:g("keyboard-tab-below",60485),gitPullRequestDone:g("git-pull-request-done",60486),mcp:g("mcp",60487),extensionsLarge:g("extensions-large",60488),layoutPanelDock:g("layout-panel-dock",60489),layoutSidebarLeftDock:g("layout-sidebar-left-dock",60490),layoutSidebarRightDock:g("layout-sidebar-right-dock",60491),copilotInProgress:g("copilot-in-progress",60492),copilotError:g("copilot-error",60493),copilotSuccess:g("copilot-success",60494),chatSparkle:g("chat-sparkle",60495),searchSparkle:g("search-sparkle",60496),editSparkle:g("edit-sparkle",60497),copilotSnooze:g("copilot-snooze",60498),sendToRemoteAgent:g("send-to-remote-agent",60499),commentDiscussionSparkle:g("comment-discussion-sparkle",60500),chatSparkleWarning:g("chat-sparkle-warning",60501),chatSparkleError:g("chat-sparkle-error",60502)},qP={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},ie={...VP,...qP},No;(function(e){function t(i){return!!i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(No||(No={}));var $t;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(p){const f=t.exec(p.id);if(!f)return i(ie.error);const[,m,w]=f,S=["codicon","codicon-"+m];return w&&S.push("codicon-modifier-"+w.substring(1)),S}e.asClassNameArray=i;function r(p){return i(p).join(" ")}e.asClassName=r;function s(p){return"."+i(p).join(".")}e.asCSSSelector=s;function n(p){return!!p&&typeof p=="object"&&typeof p.id=="string"&&(typeof p.color>"u"||No.isThemeColor(p.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(p){const f=o.exec(p);if(!f)return;const[,m]=f;return{id:m}}e.fromString=a;function c(p){return{id:p}}e.fromId=c;function l(p,f){let m=p.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),f&&(m=`${m}~${f}`),{id:m}}e.modify=l;function u(p){const f=p.id.lastIndexOf("~");if(f!==-1)return p.id.substring(f+1)}e.getModifier=u;function h(p,f){return p.id===f.id&&p.color?.id===f.color?.id}e.isEqual=h})($t||($t={}));var dm=new RegExp(`\\$\\(${$t.iconNameExpression}(?:${$t.iconModifierExpression})?\\)`,"g"),GP=new RegExp(`(\\\\)?${dm.source}`,"g");function QP(e){return e.replace(GP,(t,i)=>i?t:`\\${t}`)}var XH=new RegExp(`\\\\${dm.source}`,"g"),KH=new RegExp(`(\\s)?(\\\\)?${dm.source}(\\s)?`,"g"),eB=new RegExp(`\\$\\(${$t.iconNameCharacter}+\\)`,"g"),X5;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(X5||(X5={}));var Mo=class XC{static lift(t){const i=new XC(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?y.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw Ce("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1)}appendText(t,i=0){return this.value+=JP(this.supportThemeIcons?QP(t):t).replace(/([ \t]+)/g,(r,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${ZP(i,t)}
`,this}appendLink(t,i,r){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(t,i){const r=new RegExp(gn(i),"g");return t.replace(r,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function kn(e){return e instanceof Mo?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function JP(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function ZP(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function YP(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function fm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Cn=fm();function K5(e){Cn=e}var e6=/[&<>"']/,XP=new RegExp(e6.source,"g"),t6=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,KP=new RegExp(t6.source,"g"),e2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i6=e=>e2[e];function ji(e,t){if(t){if(e6.test(e))return e.replace(XP,i6)}else if(t6.test(e))return e.replace(KP,i6);return e}var t2=/(^|[^\[])\^/g;function ot(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(t2,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function r6(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var $c={exec:()=>null};function s6(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Ic(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function i2(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function n6(e,t,i,r){const s=t.href,n=t.title?ji(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:ji(o)}}function r2(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var ah=class{options;rules;lexer;constructor(e){this.options=e||Cn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Ic(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=r2(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=Ic(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ic(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=Ic(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const p=n[n.length-1];if(p?.type==="code")break;if(p?.type==="blockquote"){const f=p,m=f.raw+`
`+i.join(`
`),w=this.blockquote(m);n[n.length-1]=w,r=r.substring(0,r.length-f.raw.length)+w.raw,s=s.substring(0,s.length-f.text.length)+w.text;break}else if(p?.type==="list"){const f=p,m=f.raw+`
`+i.join(`
`),w=this.list(m);n[n.length-1]=w,r=r.substring(0,r.length-p.raw.length)+w.raw,s=s.substring(0,s.length-f.raw.length)+w.raw,i=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,S=>" ".repeat(3*S.length)),h=e.split(`
`,1)[0],p=!u.trim(),f=0;if(this.options.pedantic?(f=2,l=u.trimStart()):p?f=t[1].length+1:(f=t[2].search(/[^ ]/),f=f>4?1:f,l=u.slice(f),f+=t[1].length),p&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const S=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,f-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,f-1)}}#`);for(;e;){const Z=e.split(`
`,1)[0];if(h=Z,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(h)||P.test(h)||S.test(h)||E.test(e))break;if(h.search(/[^ ]/)>=f||!h.trim())l+=`
`+h.slice(f);else{if(p||u.search(/[^ ]/)>=4||C.test(u)||P.test(u)||E.test(u))break;l+=`
`+h}!p&&!h.trim()&&(p=!0),c+=Z+`
`,e=e.substring(Z.length+1),u=h.slice(f)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=s6(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(s6(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ji(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=Ic(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=i2(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),n6(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return n6(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...r[0]][0].length,p=e.slice(0,n+r.index+h+a);if(Math.min(n,a)%2){const m=p.slice(1,-1);return{type:"em",raw:p,text:m,tokens:this.lexer.inlineTokens(m)}}const f=p.slice(2,-2);return{type:"strong",raw:p,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=ji(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=ji(t[1]),r="mailto:"+i):(i=ji(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=ji(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=ji(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=ji(t[0]),{type:"text",raw:t[0],text:i}}}},s2=/^(?: *(?:\n|$))+/,n2=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,o2=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Dc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,a2=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,o6=/(?:[*+-]|\d{1,9}[.)])/,a6=ot(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,o6).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,c2=/^[^\n]+/,gm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,l2=ot(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",gm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),u2=ot(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,o6).getRegex(),ch="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mm=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,h2=ot("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",mm).replace("tag",ch).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),c6=ot(pm).replace("hr",Dc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ch).getRegex(),d2=ot(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",c6).getRegex(),vm={blockquote:d2,code:n2,def:l2,fences:o2,heading:a2,hr:Dc,html:h2,lheading:a6,list:u2,newline:s2,paragraph:c6,table:$c,text:c2},l6=ot("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Dc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ch).getRegex(),f2={...vm,table:l6,paragraph:ot(pm).replace("hr",Dc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",l6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ch).getRegex()},p2={...vm,html:ot(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mm).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$c,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ot(pm).replace("hr",Dc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",a6).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},u6=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,g2=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,h6=/^( {2,}|\\)\n(?!\s*$)/,m2=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pc="\\p{P}\\p{S}",v2=ot(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pc).getRegex(),w2=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,b2=ot(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pc).getRegex(),y2=ot("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pc).getRegex(),S2=ot("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pc).getRegex(),x2=ot(/\\([punct])/,"gu").replace(/punct/g,Pc).getRegex(),E2=ot(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),k2=ot(mm).replace("(?:-->|$)","-->").getRegex(),C2=ot("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",k2).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),lh=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,$2=ot(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",lh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),d6=ot(/^!?\[(label)\]\[(ref)\]/).replace("label",lh).replace("ref",gm).getRegex(),f6=ot(/^!?\[(ref)\](?:\[\])?/).replace("ref",gm).getRegex(),I2=ot("reflink|nolink(?!\\()","g").replace("reflink",d6).replace("nolink",f6).getRegex(),wm={_backpedal:$c,anyPunctuation:x2,autolink:E2,blockSkip:w2,br:h6,code:g2,del:$c,emStrongLDelim:b2,emStrongRDelimAst:y2,emStrongRDelimUnd:S2,escape:u6,link:$2,nolink:f6,punctuation:v2,reflink:d6,reflinkSearch:I2,tag:C2,text:m2,url:$c},D2={...wm,link:ot(/^!?\[(label)\]\((.*?)\)/).replace("label",lh).getRegex(),reflink:ot(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",lh).getRegex()},bm={...wm,escape:ot(u6).replace("])","~|])").getRegex(),url:ot(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},P2={...bm,br:ot(h6).replace("{2,}","*").getRegex(),text:ot(bm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},uh={normal:vm,gfm:f2,pedantic:p2},Ac={normal:wm,gfm:bm,breaks:P2,pedantic:D2},$n=class Hb{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Cn,this.options.tokenizer=this.options.tokenizer||new ah,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:uh.normal,inline:Ac.normal};this.options.pedantic?(i.block=uh.pedantic,i.inline=Ac.pedantic):this.options.gfm&&(i.block=uh.gfm,this.options.breaks?i.inline=Ac.breaks:i.inline=Ac.gfm),this.tokenizer.rules=i}static get rules(){return{block:uh,inline:Ac}}static lex(t,i){return new Hb(i).lex(t)}static lexInline(t,i){return new Hb(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let p;this.options.extensions.startInline.forEach(f=>{p=f.call({lexer:this},h),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},hh=class{options;parser;constructor(e){this.options=e||Cn}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+ji(r)+'">'+(i?s:ji(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:ji(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=r6(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=r6(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},ym=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},In=class Bb{options;renderer;textRenderer;constructor(t){this.options=t||Cn,this.options.renderer=this.options.renderer||new hh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ym}static parse(t,i){return new Bb(i).parse(t)}static parseInline(t,i){return new Bb(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},dh=class{options;constructor(e){this.options=e||Cn}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},A2=class{defaults=fm();options=this.setOptions;parse=this.parseMarkdown($n.lex,In.parse);parseInline=this.parseMarkdown($n.lexInline,In.parseInline);Parser=In;Renderer=hh;TextRenderer=ym;Lexer=$n;Tokenizer=ah;Hooks=dh;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new hh(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new ah(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new dh;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];dh.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return $n.lex(e,t??this.defaults)}parser(e,t){return In.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+ji(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},Dn=new A2;function rt(e,t){return Dn.parse(e,t)}rt.options=rt.setOptions=function(e){return Dn.setOptions(e),rt.defaults=Dn.defaults,K5(rt.defaults),rt},rt.getDefaults=fm,rt.defaults=Cn,rt.use=function(...e){return Dn.use(...e),rt.defaults=Dn.defaults,K5(rt.defaults),rt},rt.walkTokens=function(e,t){return Dn.walkTokens(e,t)},rt.parseInline=Dn.parseInline,rt.Parser=In,rt.parser=In.parse,rt.Renderer=hh,rt.TextRenderer=ym,rt.Lexer=$n,rt.lexer=$n.lex,rt.Tokenizer=ah,rt.Hooks=dh,rt.parse=rt;var tB=rt.options,iB=rt.setOptions,rB=rt.use,sB=rt.walkTokens,nB=rt.parseInline,oB=In.parse,aB=$n.lex;function T2(e){return JSON.stringify(e,R2)}function p6(e){let t=JSON.parse(e);return t=Jt(t),t}function R2(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function Jt(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ne||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=Jt(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=Jt(e[i],t+1))}return e}var $r=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),L2=/^(.+)\/(.+?)(;.+)?$/;function g6(e,t){const i=L2.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}function m6(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var oi=Symbol("unset"),N2=class{constructor(){this.root=new Sm,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||fi.empty()}get entries(){return this.root.children?.entries()||fi.empty()}insert(e,t,i){this.c(e,r=>r._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===oi?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==oi){for(this.a--,t[i].node._value=oi;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==oi)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==oi)break}for(const r of v6(i))r._value!==oi&&(this.a--,yield r._value);i===this.root&&(this.root._value=oi,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===oi?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==oi)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==oi}b(e){const t=[{part:"",node:this.root}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}c(e,t,i){let r=this.root;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new Sm;r.children.set(o,a),r=a}else{const a=new Sm;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===oi?0:1;t(r);const n=r._value===oi?0:1;this.a+=n-s}*values(){for(const{_value:e}of v6(this.root))e!==oi&&(yield e)}};function*v6(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var Sm=class{constructor(){this._value=oi}get value(){return this._value===oi?void 0:this._value}set value(e){this._value=e===void 0?oi:e}},Hi=class fo{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new fo(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return fo.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return fo.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return fo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new fo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new fo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Je=class Nt{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Nt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Nt.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Nt.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Nt.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Nt.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Nt(r,s,n,o)}intersectRanges(t){return Nt.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Nt(r,s,n,o)}equalsRange(t){return Nt.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Nt.getEndPosition(this)}static getEndPosition(t){return new Hi(t.endLineNumber,t.endColumn)}getStartPosition(){return Nt.getStartPosition(this)}static getStartPosition(t){return new Hi(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Nt(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Nt(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Nt.collapseToStart(this)}static collapseToStart(t){return new Nt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Nt.collapseToEnd(this)}static collapseToEnd(t){return new Nt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Nt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new Nt(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Nt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,p=i.endColumn|0;return h-p}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},M2=class{constructor(){this.a=new Map,this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),ce(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new F2(this,e,t);return this.b.set(e,i),ce(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},F2=class extends te{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},w6;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(w6||(w6={}));var b6;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"})(b6||(b6={}));var y6;(function(e){const t=new Map;t.set(0,ie.symbolMethod),t.set(1,ie.symbolFunction),t.set(2,ie.symbolConstructor),t.set(3,ie.symbolField),t.set(4,ie.symbolVariable),t.set(5,ie.symbolClass),t.set(6,ie.symbolStruct),t.set(7,ie.symbolInterface),t.set(8,ie.symbolModule),t.set(9,ie.symbolProperty),t.set(10,ie.symbolEvent),t.set(11,ie.symbolOperator),t.set(12,ie.symbolUnit),t.set(13,ie.symbolValue),t.set(15,ie.symbolEnum),t.set(14,ie.symbolConstant),t.set(15,ie.symbolEnum),t.set(16,ie.symbolEnumMember),t.set(17,ie.symbolKeyword),t.set(28,ie.symbolSnippet),t.set(18,ie.symbolText),t.set(19,ie.symbolColor),t.set(20,ie.symbolFile),t.set(21,ie.symbolReference),t.set(22,ie.symbolCustomColor),t.set(23,ie.symbolFolder),t.set(24,ie.symbolTypeParameter),t.set(25,ie.account),t.set(26,ie.issues),t.set(27,ie.tools);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=ie.symbolProperty),a}e.toIcon=i;function r(o){switch(o){case 0:return d(835,null);case 1:return d(836,null);case 2:return d(837,null);case 3:return d(838,null);case 4:return d(839,null);case 5:return d(840,null);case 6:return d(841,null);case 7:return d(842,null);case 8:return d(843,null);case 9:return d(844,null);case 10:return d(845,null);case 11:return d(846,null);case 12:return d(847,null);case 13:return d(848,null);case 14:return d(849,null);case 15:return d(850,null);case 16:return d(851,null);case 17:return d(852,null);case 18:return d(853,null);case 19:return d(854,null);case 20:return d(855,null);case 21:return d(856,null);case 22:return d(857,null);case 23:return d(858,null);case 24:return d(859,null);case 25:return d(860,null);case 26:return d(861,null);case 27:return d(862,null);case 28:return d(863,null);default:return""}}e.toLabel=r;const s=new Map;s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",28),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26),s.set("tool",27);function n(o,a){let c=s.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(y6||(y6={}));var S6;(function(e){e[e.Deprecated=1]="Deprecated"})(S6||(S6={}));var x6;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(x6||(x6={}));var E6;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(E6||(E6={}));var k6;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(k6||(k6={}));var fh;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(fh||(fh={}));var xm;(function(e){e[e.Code=1]="Code",e[e.Label=2]="Label"})(xm||(xm={}));var ph;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(ph||(ph={}));var C6;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(C6||(C6={}));var $6;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})($6||($6={}));var I6;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(I6||(I6={}));var D6;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(D6||(D6={}));function O2(e){return e&&y.isUri(e.uri)&&Je.isIRange(e.range)&&(Je.isIRange(e.originSelectionRange)||Je.isIRange(e.targetSelectionRange))}function U2(e){return e&&y.isUri(e.uri)&&Je.isIRange(e.range)}var P6;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(P6||(P6={}));var cB={17:d(864,null),16:d(865,null),4:d(866,null),13:d(867,null),8:d(868,null),9:d(869,null),21:d(870,null),23:d(871,null),7:d(872,null),0:d(873,null),11:d(874,null),10:d(875,null),19:d(876,null),5:d(877,null),1:d(878,null),2:d(879,null),20:d(880,null),15:d(881,null),18:d(882,null),24:d(883,null),3:d(884,null),6:d(885,null),14:d(886,null),22:d(887,null),25:d(888,null),12:d(889,null)},A6;(function(e){e[e.Deprecated=1]="Deprecated"})(A6||(A6={}));var T6;(function(e){const t=new Map;t.set(0,ie.symbolFile),t.set(1,ie.symbolModule),t.set(2,ie.symbolNamespace),t.set(3,ie.symbolPackage),t.set(4,ie.symbolClass),t.set(5,ie.symbolMethod),t.set(6,ie.symbolProperty),t.set(7,ie.symbolField),t.set(8,ie.symbolConstructor),t.set(9,ie.symbolEnum),t.set(10,ie.symbolInterface),t.set(11,ie.symbolFunction),t.set(12,ie.symbolVariable),t.set(13,ie.symbolConstant),t.set(14,ie.symbolString),t.set(15,ie.symbolNumber),t.set(16,ie.symbolBoolean),t.set(17,ie.symbolArray),t.set(18,ie.symbolObject),t.set(19,ie.symbolKey),t.set(20,ie.symbolNull),t.set(21,ie.symbolEnumMember),t.set(22,ie.symbolStruct),t.set(23,ie.symbolEvent),t.set(24,ie.symbolOperator),t.set(25,ie.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=ie.symbolProperty),o}e.toIcon=i;const r=new Map;r.set(0,20),r.set(1,8),r.set(2,8),r.set(3,8),r.set(4,5),r.set(5,0),r.set(6,9),r.set(7,3),r.set(8,2),r.set(9,15),r.set(10,7),r.set(11,1),r.set(12,4),r.set(13,14),r.set(14,18),r.set(15,13),r.set(16,13),r.set(17,13),r.set(18,13),r.set(19,17),r.set(20,13),r.set(21,16),r.set(22,6),r.set(23,10),r.set(24,11),r.set(25,24);function s(n){let o=r.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(T6||(T6={}));var Fo=class rn{static{this.Comment=new rn("comment")}static{this.Imports=new rn("imports")}static{this.Region=new rn("region")}static fromValue(t){switch(t){case"comment":return rn.Comment;case"imports":return rn.Imports;case"region":return rn.Region}return new rn(t)}constructor(t){this.value=t}},R6;(function(e){e[e.AIGenerated=1]="AIGenerated"})(R6||(R6={}));var gh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(gh||(gh={}));var Em;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(Em||(Em={}));var Oo;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Oo||(Oo={}));var Tc;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Tc||(Tc={}));var Rc;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Rc||(Rc={}));var L6;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(L6||(L6={}));var N6;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(N6||(N6={}));var M6;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(M6||(M6={}));var lB=new M2,F6;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(F6||(F6={}));var O6;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(O6||(O6={}));var vi;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(vi||(vi={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=d(2144,null),i[e.Warning]=d(2145,null),i[e.Info]=d(2146,null);function r(c){return i[c]||""}e.toString=r;const s=Object.create(null);s[e.Error]=d(2147,null),s[e.Warning]=d(2148,null),s[e.Info]=d(2149,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case bt.Error:return e.Error;case bt.Warning:return e.Warning;case bt.Info:return e.Info;case bt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return bt.Error;case e.Warning:return bt.Warning;case e.Info:return bt.Info;case e.Hint:return bt.Ignore}}e.toSeverity=a}(vi||(vi={}));var U6;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(vi.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(U6||(U6={}));var uB=H("markerService"),j2=class{constructor(){this.a=new Map}add(e,t){si(He(e)),si(xt(t)),si(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{xy(e.dispose)&&e.dispose()}),this.a.clear()}},Vt=new j2,H2=H("fileService"),Pn;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Pn||(Pn={}));var Uo;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(Uo||(Uo={}));var j6;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(j6||(j6={}));var H6;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone",e[e.FileRealpath=262144]="FileRealpath"})(H6||(H6={}));var be;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(be||(be={}));var B6=class KC extends Error{static create(t,i){const r=new KC(t.toString(),i);return _6(r,i),r}constructor(t,i){super(t),this.code=i}};function _6(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function mh(e){if(!e)return be.Unknown;if(e instanceof B6)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return be.Unknown;switch(t[1]){case be.FileExists:return be.FileExists;case be.FileIsADirectory:return be.FileIsADirectory;case be.FileNotADirectory:return be.FileNotADirectory;case be.FileNotFound:return be.FileNotFound;case be.FileTooLarge:return be.FileTooLarge;case be.FileWriteLocked:return be.FileWriteLocked;case be.NoPermissions:return be.NoPermissions;case be.Unavailable:return be.Unavailable}return be.Unknown}function B2(e){if(e instanceof vh)return e.fileOperationResult;switch(mh(e)){case be.FileNotFound:return 1;case be.FileIsADirectory:return 0;case be.FileNotADirectory:return 9;case be.FileWriteLocked:return 5;case be.NoPermissions:return 6;case be.FileExists:return 4;case be.FileTooLarge:return 7;default:return 10}}var z6;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(z6||(z6={}));var W6;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(W6||(W6={}));var hB=class Up{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new At(()=>{const r=Ps.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new At(()=>{const r=Ps.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new At(()=>{const r=Ps.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==Up.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=Up.a):this.b!==void 0&&(this.b=Up.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},vh=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},V6;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(V6||(V6={}));var q6;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(q6||(q6={}));var _2="";function G6(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var dB=class xi{static{this.KB=1024}static{this.MB=xi.KB*xi.KB}static{this.GB=xi.MB*xi.KB}static{this.TB=xi.GB*xi.KB}static formatSize(t){return cn(t)||(t=0),t<xi.KB?d(2057,null,t.toFixed(0)):t<xi.MB?d(2058,null,(t/xi.KB).toFixed(2)):t<xi.GB?d(2059,null,(t/xi.MB).toFixed(2)):t<xi.TB?d(2060,null,(t/xi.GB).toFixed(2)):d(2061,null,(t/xi.TB).toFixed(2))}},z2=class extends te{get onDidChange(){return this.j.event}constructor(e,t="",i="",r=!0,s){super(),this.j=this.B(new D),this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},fB=class _b{constructor(){this.id=_b.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new _b,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},pB=class e$ extends z2{static{this.ID="vs.actions.empty"}constructor(){super(e$.ID,d(44,null),void 0,!1)}},W2={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},V2={id:"default",displayName:d(4395,null),providerDisplayName:d(4396,null)},Q6;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(Q6||(Q6={}));var J6;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(J6||(J6={}));function wh(e){if(As(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function Z6(e){if(As(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function km(e){if(As(e)||wh(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function bh(e){if(As(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var Y6;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(Y6||(Y6={}));var X6;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(X6||(X6={}));var q2=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},gB=new q2,K6;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(K6||(K6={}));var G2=class extends te{};function As(e){return e instanceof G2}function Q2(e){const t=e;return y.isUri(t?.preferredResource)}function J2(e){const t=e;return As(t?.primary)&&As(t?.secondary)}function Z2(e){const t=e;return As(t?.modified)&&As(t?.original)}var e7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(e7||(e7={}));var t7;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(t7||(t7={}));var Ts;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(Ts||(Ts={}));var Y2=class{getOriginalUri(e,t){if(!e)return;if(bh(e))return r7.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===Ts.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Ts.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Ts.PRIMARY?r:s}}if(wh(e)||Z6(e)||km(e)||bh(e))return;const i=Q2(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return J2(e)||km(e)?{primary:e.primary,secondary:e.secondary}:Z2(e)||wh(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(bh(e))return r7.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===Ts.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===Ts.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===Ts.PRIMARY?r:s}}if(wh(e)||Z6(e)||km(e)||bh(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},i7;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(i7||(i7={}));var r7=new Y2,s7;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(s7||(s7={}));var X2=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(wc);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return bo(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),ce(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};Vt.add(W2.EditorFactory,new X2);var n7;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(n7||(n7={}));var o7;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(o7||(o7={}));var a7;(function(e){e.icon=ie.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:r(n),name:s(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function r(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber].join(":")}e.id=r;function s(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=d(6052,null);return n.filterUri&&(a=d(6053,null,Jr(n.filterUri))),a}e.label=s})(a7||(a7={}));var c7;(function(e){function t(i){return y.isUri(i.value)?i.value:U2(i.value)?i.value.uri:void 0}e.toUri=t})(c7||(c7={}));function K2(e){return e.kind==="image"}var l7;(function(e){e.Instruction="vscode.prompt.instructions.root",e.InstructionReference="vscode.prompt.instructions",e.PromptFile="vscode.prompt.file"})(l7||(l7={}));var u7;(function(e){e.UseFileStorage="chat.useFileStorage",e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled",e.EditRequests="chat.editRequests",e.GlobalAutoApprove="chat.tools.global.autoApprove",e.AutoApproveEdits="chat.tools.edits.autoApprove",e.EnableMath="chat.math.enabled",e.CheckpointsEnabled="chat.checkpoints.enabled",e.AgentSessionsViewLocation="chat.agentSessionsViewLocation",e.ThinkingStyle="chat.agent.thinkingStyle",e.UseChatSessionsForCloudButton="chat.useChatSessionsForCloudButton",e.ShowAgentSessionsViewDescription="chat.showAgentSessionsViewDescription",e.EmptyStateHistoryEnabled="chat.emptyState.history.enabled"})(u7||(u7={}));var h7;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})(h7||(h7={}));var d7;(function(e){e.Collapsed="collapsed",e.CollapsedPreview="collapsedPreview",e.Expanded="expanded",e.None="none"})(d7||(d7={}));var ai;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(ai||(ai={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(ai||(ai={}));var mB=new Set([q.vscodeChatEditor,q.walkThrough,q.vscodeChatSession,"ccreq"]),Lc=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return eA(e,this)}},f7=new Map,Cm=new WeakMap;function eA(e,t){const i=Cm.get(e);if(i)return i;const r=tA(e,t);if(r){let s=f7.get(r)??0;s++,f7.set(r,s);const n=s===1?r:`${r}#${s}`;return Cm.set(e,n),n}}function tA(e,t){const i=Cm.get(e);if(i)return i;const r=t.owner?rA(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=$m(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=iA(t.owner,e);if(a!==void 0)return r+a}}function iA(e,t){for(const i in e)if(e[i]===t)return i}var p7=new Map,g7=new WeakMap;function rA(e){const t=g7.get(e);if(t)return t;const i=m7(e)??"Object";let r=p7.get(i)??0;r++,p7.set(i,r);const s=r===1?i:`${i}#${r}`;return g7.set(e,s),s}function m7(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function $m(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var Im=(e,t)=>e===t;function Dm(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Dm(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!Dm(i[a],r[a]))return!1;return!0}return!1}function v7(e){const t=new Error("BugIndicatingErrorRecovery: "+e);Ot(t),console.error("recovered from an error that indicates a bug",t)}var An;function Pm(e){An?An instanceof w7?An.loggers.push(e):An=new w7([An,e]):An=e}function qt(){return An}var Am=void 0;function sA(e){Am=e}function nA(e){Am&&Am(e)}var w7=class{constructor(e){this.loggers=e}handleObservableCreated(e,t){for(const i of this.loggers)i.handleObservableCreated(e,t)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e,t){for(const i of this.loggers)i.handleAutorunCreated(e,t)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const r of this.loggers)r.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const r of this.loggers)r.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}};function b7(e,t){const i=new y7(e,t);try{e(i)}finally{i.finish()}}function oA(e,t,i){e?t(e):b7(t,i)}var y7=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],qt()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():$m(this._fn)}updateObserver(e,t){if(!this.a){v7("Transaction already finished!"),b7(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){v7("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,qt()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}},Xr;(function(e){let t=!1;function i(){t=!0}e.enable=i;function r(){if(!t)return;const s=Error,n=s.stackTraceLimit;s.stackTraceLimit=3;const o=new Error().stack;return s.stackTraceLimit=n,aA.fromStack(o,2)}e.ofCaller=r})(Xr||(Xr={}));var aA=class t${static fromStack(t,i){const r=t.split(`
`),s=cA(r[i+1]);if(s)return new t$(s.fileName,s.line,s.column,s.id)}constructor(t,i,r,s){this.fileName=t,this.line=i,this.column=r,this.id=s}};function cA(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var Tm;function lA(e){Tm=e}var S7;function uA(e){S7=e}var x7;function hA(e){x7=e}var dA=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t,i=Xr.ofCaller()){const r=t===void 0?void 0:e,s=t===void 0?e:t;return Tm({owner:r,debugName:()=>{const n=$m(s);if(n!==void 0)return n;const a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(s.toString());if(a)return`${this.debugName}.${a[2]}`;if(!r)return`${this.debugName} (mapped)`},debugReferenceFn:s},n=>s(this.read(n),n),i)}flatten(){return Tm({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(S7(this,t)),this}keepObserved(e){return e.add(x7(this)),this}get b(){return this.get()}},Rm=class extends dA{constructor(e){super(),this.f=new Set,qt()?.handleObservableCreated(this,e)}addObserver(e){const t=this.f.size;this.f.add(e),t===0&&this.g(),t!==this.f.size&&qt()?.handleOnListenerCountChanged(this,this.f.size)}removeObserver(e){const t=this.f.delete(e);t&&this.f.size===0&&this.h(),t&&qt()?.handleOnListenerCountChanged(this,this.f.size)}g(){}h(){}log(){const e=!!qt();return nA(this),e||qt()?.handleObservableCreated(this,Xr.ofCaller()),this}debugGetObservers(){return this.f}};function fA(e,t,i=Xr.ofCaller()){let r;return typeof e=="string"?r=new Lc(void 0,e,void 0):r=new Lc(e,void 0,void 0),new Lm(r,t,Im,i)}var Lm=class extends Rm{get debugName(){return this.c.getDebugName(this)??"ObservableValue"}constructor(e,t,i,r){super(r),this.c=e,this.d=i,this.a=t,qt()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.a}set(e,t,i){if(i===void 0&&this.d(this.a,e))return;let r;t||(t=r=new y7(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.a;this.i(e),qt()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.f)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.a}`}i(e){this.a=e}debugGetState(){return{value:this.a}}debugSetValue(e){this.a=e}},E7;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(E7||(E7={}));var Nm=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r){this._debugNameData=e,this._runFn=t,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.n=void 0,this.p=void 0,this.h=this.j?.createChangeSummary(void 0),qt()?.handleAutorunCreated(this,r),this.k(),yo(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),this.n!==void 0&&this.n.dispose(),this.p!==void 0&&this.p.dispose(),qt()?.handleAutorunDisposed(this),So(this)}}k(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){qt()?.handleAutorunStarted(this);const t=this.h,i=this.p;i!==void 0&&(this.p=void 0);try{this.i=!0,this.j&&(this.j.beforeUpdate?.(this,t),this.h=this.j.createChangeSummary(t)),this.n!==void 0&&(this.n.dispose(),this.n=void 0),this._runFn(this,t)}catch(r){Au(r)}finally{this.i=!1,i!==void 0&&i.dispose()}}}finally{this.c||qt()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.a=1),this.b++}endUpdate(e){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.a!==3&&this.k()}while(this.a!==3)}finally{this.b--}yy(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.l(e)&&(this.a=1)}handleChange(e,t){if(this.l(e)){qt()?.handleAutorunDependencyChanged(this,e,t);try{(this.j?this.j.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.a=2)}catch(i){Au(i)}}}l(e){return this.f.has(e)&&!this.g.has(e)}m(){if(!this.i)throw new di("The reader object cannot be used outside its compute function!")}readObservable(e){if(this.m(),this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}get store(){if(this.m(),this.c)throw new di("Cannot access store after dispose");return this.n===void 0&&(this.n=new he),this.n}get delayedStore(){if(this.m(),this.c)throw new di("Cannot access store after dispose");return this.p===void 0&&(this.p=new he),this.p}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a}}debugRerun(){this.i?this.a=2:this.k()}};function k7(e,t=Xr.ofCaller()){return new Nm(new Lc(void 0,void 0,e),e,void 0,t)}var C7;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(C7||(C7={}));var Ir=class extends Rm{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r=void 0,s,n){super(n),this._debugNameData=e,this._computeFn=t,this.w=i,this.x=r,this.y=s,this.a=0,this.c=void 0,this.i=0,this.j=new Set,this.k=new Set,this.l=void 0,this.m=!1,this.n=!1,this.p=!1,this.q=!1,this.s=!1,this.t=void 0,this.u=void 0,this.v=null,this.l=this.w?.createChangeSummary(void 0)}h(){this.a=0,this.c=void 0,qt()?.handleDerivedCleared(this);for(const e of this.j)e.removeObserver(this);this.j.clear(),this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.u!==void 0&&(this.u.dispose(),this.u=void 0),this.x?.()}get(){if(this.n,this.f.size===0){let t;try{this.s=!0;let i;this.w&&(i=this.w.createChangeSummary(void 0),this.w.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.s=!1}return this.h(),t}else{do{if(this.a===1){for(const t of this.j)if(t.reportChanges(),this.a===2)break}this.a===1&&(this.a=3),this.a!==3&&this.A()}while(this.a!==3);return this.c}}A(){let e=!1;this.n=!0,this.p=!1;const t=this.k;this.k=this.j,this.j=t;try{const i=this.l;this.s=!0,this.w&&(this.q=!0,this.w.beforeUpdate?.(this,i),this.q=!1,this.l=this.w?.createChangeSummary(i));const r=this.a!==0,s=this.c;this.a=3;const n=this.u;n!==void 0&&(this.u=void 0);try{this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.c=this._computeFn(this,i)}finally{this.s=!1;for(const o of this.k)o.removeObserver(this);this.k.clear(),n!==void 0&&n.dispose()}e=this.p||r&&!this.y(s,this.c),qt()?.handleObservableUpdated(this,{oldValue:s,newValue:this.c,change:void 0,didChange:e,hadValue:r})}catch(i){Au(i)}if(this.n=!1,!this.p&&e)for(const i of this.f)i.handleChange(this,void 0);else this.p=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.m)throw new di("Cyclic deriveds are not supported yet!");this.i++,this.m=!0;try{const t=this.i===1;if(this.a===3&&(this.a=1,!t))for(const i of this.f)i.handlePossibleChange(this);if(t)for(const i of this.f)i.beginUpdate(this)}finally{this.m=!1}}endUpdate(e){if(this.i--,this.i===0){const t=[...this.f];for(const i of t)i.endUpdate(this);if(this.v){const i=[...this.v];this.v=null;for(const r of i)r.endUpdate(this)}}yy(()=>this.i>=0)}handlePossibleChange(e){if(this.a===3&&this.j.has(e)&&!this.k.has(e)){this.a=1;for(const t of this.f)t.handlePossibleChange(this)}}handleChange(e,t){if(this.j.has(e)&&!this.k.has(e)||this.q){qt()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.w?this.w.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.l):!0}catch(s){Au(s)}const r=this.a===3;if(i&&(this.a===1||r)&&(this.a=2,r))for(const s of this.f)s.handlePossibleChange(this)}}B(){if(!this.s)throw new di("The reader object cannot be used outside its compute function!")}readObservable(e){this.B(),e.addObserver(this);const t=e.get();return this.j.add(e),this.k.delete(e),t}reportChange(e){this.B(),this.p=!0;for(const t of this.f)t.handleChange(this,e)}get store(){return this.B(),this.t===void 0&&(this.t=new he),this.t}get delayedStore(){return this.B(),this.u===void 0&&(this.u=new he),this.u}addObserver(e){const t=!this.f.has(e)&&this.i>0;super.addObserver(e),t&&(this.v&&this.v.has(e)?this.v.delete(e):e.beginUpdate(this))}removeObserver(e){this.f.has(e)&&this.i>0&&(this.v||(this.v=new Set),this.v.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.a,updateCount:this.i,isComputing:this.n,dependencies:this.j,value:this.c}}debugSetValue(e){this.c=e}debugRecompute(){this.n?this.a=2:this.A()}setValue(e,t,i){this.c=e;const r=this.f;t.updateObserver(this,this);for(const s of r)s.handleChange(this,i)}};function $7(e,t,i=Xr.ofCaller()){return new Ir(new Lc(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??Im,i)}lA($7);function I7(...e){let t,i,r,s;return e.length===2?[i,r]=e:[t,i,r,s]=e,new Tn(new Lc(t,void 0,r),i,r,()=>Tn.globalTransaction,Im,s??Xr.ofCaller())}var Tn=class extends Rm{constructor(e,t,i,r,s,n){super(n),this.e=e,this.i=t,this._getValue=i,this.j=r,this.k=s,this.c=!1,this.n=o=>{const a=this._getValue(o),c=this.a,l=!this.c||!this.k(c,a);let u=!1;l&&(this.a=a,this.c&&(u=!0,oA(this.j(),h=>{qt()?.handleObservableUpdated(this,{oldValue:c,newValue:a,change:void 0,didChange:l,hadValue:this.c});for(const p of this.f)h.updateObserver(p,this),p.handleChange(this,void 0)},()=>{const h=this.l();return"Event fired"+(h?`: ${h}`:"")})),this.c=!0),u||qt()?.handleObservableUpdated(this,{oldValue:c,newValue:a,change:void 0,didChange:l,hadValue:this.c})}}l(){return this.e.getDebugName(this)}get debugName(){const e=this.l();return"From Event"+(e?`: ${e}`:"")}g(){this.d=this.i(this.n)}h(){this.d.dispose(),this.d=void 0,this.c=!1,this.a=void 0}get(){return this.d?(this.c||this.n(void 0),this.a):this._getValue(void 0)}debugSetValue(e){this.a=e}};(function(e){e.Observer=Tn;function t(i,r){let s=!1;Tn.globalTransaction===void 0&&(Tn.globalTransaction=i,s=!0);try{r()}finally{s&&(Tn.globalTransaction=void 0)}}e.batchEventsGlobally=t})(I7||(I7={}));function pA(e){const t=new D7(!1,void 0);return e.addObserver(t),ce(()=>{e.removeObserver(t)})}hA(pA);function gA(e,t){const i=new D7(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return ce(()=>{e.removeObserver(i)})}uA(gA);var D7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}},yh;function mA(e){yh||(yh=new P7,Pm(yh)),yh.addFilteredObj(e)}var P7=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return vA([jo(yA("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[jo(" "),Qi(Kr(e.oldValue,70),{color:"red",strikeThrough:!0}),jo(" "),Qi(Kr(e.newValue,60),{color:"green"})]:[jo(" (unchanged)")]:[jo(" "),Qi(Kr(e.newValue,60),{color:"green"}),jo(" (initial)")]}handleObservableCreated(e){if(e instanceof Ir){const t=e;if(this.f.set(t,new Set),!1){const r=[];t.__debugUpdating=r;const s=t.beginUpdate;t.beginUpdate=o=>(r.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=r.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),r.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof Ir){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([Ho("observable value changed"),Qi(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return Qi(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([Ho("derived recomputed"),Qi(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([Ho("derived cleared"),Qi(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([Ho("observable from event triggered"),Qi(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([Ho("autorun"),Qi(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([Ho("transaction"),Qi(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function vA(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function jo(e){return Qi(e,{color:"black"})}function Ho(e){return Qi(SA(`${e}: `,10),{color:"black",bold:!0})}function Qi(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Kr(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?wA(e,t):bA(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function wA(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Kr(s,t-i.length)}`}return i+=" ]",i}function bA(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=m7(e);let r=i?i+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(r+=", "),r.length-5>t){r+="...";break}s=!1,r+=`${n}: ${Kr(o,t-r.length)}`}return r+=i?")":" }",r}function yA(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function SA(e,t){for(;e.length<t;)e+=" ";return e}var xA=class zb{static createHost(t,i){return new zb(t,i)}static createClient(t,i){return new zb(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const r=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),s=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:s,requests:r}}};function EA(e,t){const i=globalThis;let r=[],s;const{channel:n,handler:o}=kA({sendNotification:c=>{s?s.sendNotification(c):r.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),s=c;for(const l of r)c.sendNotification(l);return r=[],o},xA.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function kA(e){let t;return{channel:r=>(t=r,{sendNotification:s=>{e.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?t?.handleNotification(r.data):t?.handleRequest(r.data)}}}var CA=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function A7(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?A7(e[i],t[i]):e[i]=t[i]}function T7(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?T7(e[i],t[i]):e[i]=t[i]}var $A=class ku{static{this.a=void 0}static getInstance(){return ku.a===void 0&&(ku.a=new ku),ku.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const r=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),s=new Set;for(;r.length>0;){const n=r.shift();if(s.has(n))continue;s.add(n);const o=this.m(n,a=>{s.has(a)||r.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){Ot(new di("No info found"));return}return i}l(t){const i=this.f.get(t);if(!i){Ot(new di("No info found"));return}return i}m(t,i){if(t instanceof Ir){const r=[...t.debugGetObservers()];for(const c of r)i(c);const s=this.k(t);if(!s)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:s.instanceId,updateCount:n.updateCount},a=[...s.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(Oi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof Nm){const r=this.l(t);if(!r)return;const s={name:t.debugName,instanceId:r.instanceId,updateCount:r.updateCount},n=[...r.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...s,type:"autorun",state:"upToDate"};case 2:return{...s,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...s,type:"autorun",state:"possiblyStale"}}}}n(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}p(t){if(t instanceof Ir)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.l(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=EA("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.v()},resetUpdates:()=>{this.q=null,this.i.api.notifications.handleChange(this.s,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(r=>this.p(r)).filter(Oi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(r=>this.n(r)).filter(Oi),observers:[...i.debugGetObservers()].map(r=>this.p(r)).filter(Oi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(r=>this.n(r)).filter(Oi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const r=this.g.get(t);if(r instanceof Ir)r.debugSetValue(i);else if(r instanceof Lm)r.debugSetValue(i);else if(r instanceof Tn)r.debugSetValue(i);else throw new di("Observable is not supported");const s=[...r.debugGetObservers()];for(const n of s)n.beginUpdate(r);for(const n of s)n.handleChange(r,void 0);for(const n of s)n.endUpdate(r)},getValue:t=>{const i=this.g.get(t);if(i instanceof Ir)return Kr(i.debugGetState().value,200);if(i instanceof Lm)return Kr(i.debugGetState().value,200)},logValue:t=>{const i=this.g.get(t);if(i&&"get"in i)console.log("Logged Value:",i.get());else throw new di("Observable is not supported")},rerun:t=>{const i=this.g.get(t);if(i instanceof Ir)i.debugRecompute();else if(i instanceof Nm)i.debugRerun();else throw new di("Observable is not supported")}}})),this.q=null,this.r=new CA,this.s={},this.v=()=>{this.q!==null&&(this.i.api.notifications.handleChange(this.q,!1),this.q=null)},Xr.enable()}u(t){T7(this.s,t),this.q===null?this.q=t:A7(this.q,t),this.r.throttle(this.v,10)}w(t,i){if(!i)return-1;let r=this.e.get(i.id);return r===void 0&&(r={id:this.b++,type:t,url:i.fileName,line:i.line,column:i.column},this.e.set(i.id,r),this.u({decls:{[r.id]:r}})),r.id}handleObservableCreated(t,i){const s={declarationId:this.w("observable/value",i),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,s)}handleOnListenerCountChanged(t,i){const r=this.k(t);if(r){if(r.listenerCount===0&&i>0){const s=t instanceof Ir?"observable/derived":"observable/value";this.g.set(r.instanceId,t),this.u({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:s,name:t.debugName}}})}else r.listenerCount>0&&i===0&&(this.u({instances:{[r.instanceId]:null}}),this.g.delete(r.instanceId));r.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof Ir){this._handleDerivedRecomputed(t,i);return}const r=this.k(t);r&&i.didChange&&(r.lastValue=Kr(i.newValue,30),r.listenerCount>0&&this.u({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(t,i){const s={declarationId:this.w("autorun",i),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,s),this.g.set(s.instanceId,t),s&&this.u({instances:{[s.instanceId]:{instanceId:s.instanceId,declarationId:s.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.l(t);i&&(this.u({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,r){const s=this.l(t);s&&s.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.l(t);i&&(i.changedObservables.clear(),i.updateCount++,this.u({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,r){const s=this.k(t);s&&s.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const r=this.k(t);if(!r)return;const s=Kr(i.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=s,r.listenerCount>0&&this.u({instances:{[r.instanceId]:{formattedValue:s,recomputationCount:r.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.u({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};sA(mA);var IA=!1;IA&&Pm(new P7),dc&&dc.VSCODE_DEV_DEBUG_OBSERVABLES&&Pm($A.getInstance());var Rn;(function(e){e.Internal={type:"internal",label:"Built-In"},e.External={type:"external",label:"External"};function t(s){switch(s.type){case"extension":return`extension:${s.extensionId.value}`;case"mcp":return`mcp:${s.collectionId}:${s.definitionId}`;case"user":return`user:${s.file.toString()}`;case"internal":return"internal";case"external":return"external"}}e.toKey=t;function i(s,n){return t(s)===t(n)}e.equals=i;function r(s){return s.type==="internal"?{ordinal:1,label:d(6064,null)}:s.type==="mcp"?{ordinal:2,label:d(6065,null,s.label)}:s.type==="user"?{ordinal:0,label:d(6066,null)}:{ordinal:3,label:d(6067,null,s.label)}}e.classify=r})(Rn||(Rn={}));function DA(e){return typeof e=="object"&&typeof e.sessionId=="string"}var Sh;(function(e){e.Hidden="hidden",e.HiddenAfterComplete="hiddenAfterComplete"})(Sh||(Sh={}));var PA=H("ILanguageModelToolsService"),Bo;(function(e){e.LATEST_PROTOCOL_VERSION="2025-06-18",e.JSONRPC_VERSION="2.0",e.PARSE_ERROR=-32700,e.INVALID_REQUEST=-32600,e.METHOD_NOT_FOUND=-32601,e.INVALID_PARAMS=-32602,e.INTERNAL_ERROR=-32603})(Bo||(Bo={}));function AA(e,t){return Ve.toKey(e)+"/"+t}var R7;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(R7||(R7={}));var L7;(function(e){function t(i,r){return i.id===r.id&&i.remoteAuthority===r.remoteAuthority&&i.label===r.label&&i.trustBehavior===r.trustBehavior}e.equals=t})(L7||(L7={}));var N7;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{id:s.id,label:s.label,cacheNonce:s.cacheNonce,launch:Nc.fromSerialized(s.launch),variableReplacement:s.variableReplacement?Mm.fromSerialized(s.variableReplacement):void 0}}e.fromSerialized=i;function r(s,n){return s.id===n.id&&s.label===n.label&&Fi(s.roots,n.roots,(o,a)=>o.toString()===a.toString())&&mi(s.launch,n.launch)&&mi(s.presentation,n.presentation)&&mi(s.variableReplacement,n.variableReplacement)&&mi(s.devMode,n.devMode)}e.equals=r})(N7||(N7={}));var Mm;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{section:r.section,folder:r.folder?{...r.folder,uri:y.revive(r.folder.uri)}:void 0,target:r.target}}e.fromSerialized=i})(Mm||(Mm={}));var M7;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(M7||(M7={}));var vB=H("IMcpService"),F7;(function(e){let t;(function(i){i[i.Trusted=0]="Trusted",i[i.TrustedOnNonce=1]="TrustedOnNonce",i[i.Untrusted=2]="Untrusted",i[i.Unknown=3]="Unknown"})(t=e.Kind||(e.Kind={}))})(F7||(F7={}));var O7;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(O7||(O7={}));var U7;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(U7||(U7={}));var Nc;(function(e){function t(s){return s}e.toSerialized=t;function i(s){switch(s.type){case 2:return{type:s.type,uri:y.revive(s.uri),headers:s.headers};case 1:return{type:s.type,cwd:s.cwd,command:s.command,args:s.args,env:s.env,envFile:s.envFile}}}e.fromSerialized=i;async function r(s){const n=await crypto.subtle.digest("SHA-256",new TextEncoder().encode(JSON.stringify(s)));return fg(ne.wrap(new Uint8Array(n)))}e.hash=r})(Nc||(Nc={}));var j7;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return d(9415,null);case 1:return d(9416,null);case 2:return d(9417,null);case 3:return d(9418,null,i.message);default:og(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:og(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(j7||(j7={}));var H7;(function(e){e[e.DisabledByAccess=0]="DisabledByAccess",e[e.Enabled=1]="Enabled"})(H7||(H7={}));var B7;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(B7||(B7={}));var _7;(function(e){e.Readme="readme",e.Manifest="manifest",e.Configuration="configuration"})(_7||(_7={}));var TA=H("IMcpWorkbenchService"),z7=class extends te{constructor(t,i){super(),this.f=t,this.B(i.onChange(this.update,this))}set mcpServer(t){this.f.forEach(i=>i.mcpServer=t)}update(t){for(const i of this.f)t&&i.mcpServer?t.id===i.mcpServer.id&&(i.mcpServer=t):i.update()}};z7=__decorate([__param(1,TA)],z7);var bB=new U("mcpServersGalleryStatus","unavailable"),yB=new U("hasInstalledMcpServers",!0),W7;(function(e){e.scheme="mcp-resource";const t="dylo78gyp";function i(s,n){return typeof n=="string"&&(n=y.parse(n)),n.with({scheme:e.scheme,authority:fg(ne.fromString(s.id)),path:["",n.scheme,n.authority||t].join("/")+n.path})}e.fromServer=i;function r(s){if(typeof s=="string"&&(s=y.parse(s)),s.scheme!==e.scheme)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const n=s.path.split("/");if(n.length<3)throw new Error(`Invalid MCP resource URI: ${s.toString()}`);const[,o,a,...c]=n,l=new URL(`${o}://${a.toLowerCase()===t?"":a}`);return l.pathname=c.length?"/"+c.join("/"):"",l.search=s.query,l.hash=s.fragment,{definitionId:W3(s.authority).toString(),resourceURL:l}}e.toServer=r})(W7||(W7={}));var V7;(function(e){e[e.Logging=1]="Logging",e[e.Completions=2]="Completions",e[e.Prompts=4]="Prompts",e[e.PromptsListChanged=8]="PromptsListChanged",e[e.Resources=16]="Resources",e[e.ResourcesSubscribe=32]="ResourcesSubscribe",e[e.ResourcesListChanged=64]="ResourcesListChanged",e[e.Tools=128]="Tools",e[e.ToolsListChanged=256]="ToolsListChanged"})(V7||(V7={}));var SB=H("IMcpServerSampling"),q7;(function(e){e.Prefix="mcp_",e[e.MaxPrefixLen=18]="MaxPrefixLen",e[e.MaxLength=64]="MaxLength"})(q7||(q7={}));var xB=H("IMcpElicitationService"),Ln="**",Fm="/",xh="[/\\\\]",Eh="[^/\\\\]",RA=/\//g;function G7(e,t){switch(e){case 0:return"";case 1:return`${Eh}*?`;default:return`(?:${xh}|${Eh}+${xh}${t?`|${xh}${Eh}+`:""})*?`}}function Om(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function Q7(e){if(!e)return"";let t="";const i=Om(e,Fm);if(i.every(r=>r===Ln))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===Ln){if(r)return;t+=G7(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Fm?h="":h=gn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const p=`(?:${Om(a,",").map(f=>Q7(f)).join("|")})`;t+=p,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Eh;continue;case"*":t+=G7(1);continue;default:t+=gn(u)}}n<i.length-1&&(i[n+1]!==Ln||n+2<i.length)&&(t+=xh)}r=s===Ln})}return t}var LA=/^\*\*\/\*\.[\w\.-]+$/,NA=/^\*\*\/([\w\.-]+)\/?$/,MA=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,FA=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,OA=/^\*\*((\/[\w\.-]+)+)\/?$/,UA=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,J7=new sg(1e4),Z7=function(){return!1},Dr=function(){return null};function Um(e,t){if(!e)return Dr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let s=J7.get(r);if(s)return Y7(s,e);let n;return LA.test(i)?s=jA(i.substr(4),i):(n=NA.exec(jm(i,t)))?s=HA(n[1],i):(t.trimForExclusions?FA:MA).test(i)?s=BA(i,t):(n=OA.exec(jm(i,t)))?s=X7(n[1].substr(1),i,!0):(n=UA.exec(jm(i,t)))?s=X7(n[1],i,!1):s=_A(i),J7.set(r,s),Y7(s,e)}function Y7(e,t){if(typeof t=="string")return e;const i=function(r,s){return Ku(r,t.base,!ks)?e(_I(r.substr(t.base.length),ir),s):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function jm(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function jA(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function HA(e,t){const i=`/${e}`,r=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function BA(e,t){const i=K7(e.slice(1,-1).split(",").map(a=>Um(a,t)).filter(a=>a!==Dr),e),r=i.length;if(!r)return Dr;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function X7(e,t,i){const r=ir===Oe.sep,s=r?e:e.replace(RA,ir),n=ir+s,o=Oe.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function _A(e){try{const t=new RegExp(`^${Q7(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return Dr}}function Mc(e,t,i){return!e||typeof t!="string"?!1:_o(e)(t,void 0,i)}function _o(e,t={}){if(!e)return Z7;if(typeof e=="string"||zA(e)){const i=Um(e,t);if(i===Dr)return Z7;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return WA(e,t)}function zA(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function WA(e,t){const i=K7(Object.getOwnPropertyNames(e).map(a=>VA(a,e[a],t)).filter(a=>a!==Dr)),r=i.length;if(!r)return Dr;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let p;for(let f=0,m=i.length;f<m;f++){const w=i[f](u,h);if(typeof w=="string")return w;Is(w)&&(p||(p=[]),p.push(w))}return p?(async()=>{for(const f of p){const m=await f;if(typeof m=="string")return m}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let p=0,f=i.length;p<f;p++){const m=i[p];m.requiresSiblings&&l&&(c||(c=Di(a)),u||(u=c.substr(0,c.length-Vu(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;Is(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const p of h){const f=await p;if(typeof f=="string")return f}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function VA(e,t,i){if(t===!1)return Dr;const r=Um(e,i);if(r===Dr)return Dr;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return Is(h)?h.then(p=>p?e:null):h?e:null};return n.requiresSiblings=!0,n}}return r}function K7(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}var qA=H("notebookDocumentService"),Hm=["W","X","Y","Z","a","b","c","d","e","f"],GA=new RegExp(`^[${Hm.join("")}]+`),e9=7;function Bm(e){if(e.scheme!==q.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(GA,""),e9),r=Eo(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function QA(e,t){const i=t.toString(e9),s=`${i.length<Hm.length?Hm[i.length-1]:"z"}${i}s${Fu(ne.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookCell,fragment:s})}function JA(e){if(e.scheme!==q.vscodeNotebookMetadata)return;const t=Eo(e.fragment).toString();return e.with({scheme:t,fragment:null})}function ZA(e){const t=`${Fu(ne.fromString(e.scheme),!0,!0)}`;return e.with({scheme:q.vscodeNotebookMetadata,fragment:t})}function t9(e){if(e.scheme!==q.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const r=t.get("outputId")??void 0,s=Bm(e.with({scheme:q.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=s?s.notebook:e.with({scheme:t.get("notebookScheme")||q.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:r,outputIndex:n,cellHandle:s?.handle,cellFragment:e.fragment,cellIndex:a}}var YA=class{constructor(){this.a=new Bt}getNotebook(e){if(e.scheme===q.vscodeNotebookCell){const t=Bm(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===q.vscodeNotebookCellOutput){const t=t9(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};qe(qA,YA,1);var zo;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(zo||(zo={}));var EB=["application/json","application/javascript","text/html","image/svg+xml",$r.latex,$r.markdown,"image/png","image/jpeg",$r.text],kB=[$r.latex,$r.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",$r.text],i9;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(i9||(i9={}));var r9;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(r9||(r9={}));var s9;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(s9||(s9={}));var n9;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(n9||(n9={}));var o9;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(o9||(o9={}));var ar;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(ar||(ar={}));var a9;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(a9||(a9={}));var c9;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(c9||(c9={}));var l9;(function(e){e.scheme=q.vscodeNotebookMetadata;function t(r){return ZA(r)}e.generate=t;function i(r){return JA(r)}e.parse=i})(l9||(l9={}));var _m;(function(e){e.scheme=q.vscodeNotebookCell;function t(l,u){return QA(l,u)}e.generate=t;function i(l){return Bm(l)}e.parse=i;function r(l,u){return l.with({scheme:q.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==q.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=r;function s(l,u,h){return l.with({scheme:q.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(h)}).toString()})}e.generateCellOutputUriWithIndex=s;function n(l,u,h,p,f){return l.with({scheme:q.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(h),outputId:p,outputIndex:String(f)}).toString()})}e.generateOutputEditorUri=n;function o(l){return t9(l)}e.parseCellOutputUri=o;function a(l,u,h){return e.generate(l,u).with({scheme:h})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(_m||(_m={}));var CB=new U("notebookEditorCursorAtBoundary","none"),$B=new U("notebookEditorCursorAtLineBoundary","none"),u9;(function(e){e.default="default",e.option="option"})(u9||(u9={}));var h9;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(h9||(h9={}));var d9;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(d9||(d9={}));var IB=class jp{static{this.d="notebook/"}static create(t,i){return`${jp.d}${t}/${i??t}`}static parse(t){if(t.startsWith(jp.d)){const i=t.substring(jp.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}},XA=new TextDecoder;function KA(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=tT(t);const s=ne.concat(t.map(o=>ne.wrap(o))),n=oT(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var kh="\x1B[A",zm=kh.split("").map(e=>e.charCodeAt(0)),eT=10;function tT(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<kh.length)return;const s=e[r-1],n=i.subarray(0,kh.length);if(n[0]===zm[0]&&n[1]===zm[1]&&n[2]===zm[2]){const o=s.lastIndexOf(eT);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(kh.length)}}),t}function iT(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function rT(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var sT=8,nT=13;function oT(e){return!e.buffer.includes(sT)&&!e.buffer.includes(nT)?e:ne.fromString(rT(iT(XA.decode(e.buffer))))}var f9;(function(e){e.Delimiter="\0"})(f9||(f9={}));var p9;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(p9||(p9={}));var Ne=class Xi{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new Xi([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new Xi(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new Xi(t.split("\0"))}static join(t,i){return new Xi([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:Xi.isChild(t,i)?2:Xi.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new Xi(this.path,1)}get parentId(){return this.d>1?new Xi(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new Xi(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new Xi(this.path,t)}compare(t){if(typeof t=="string")return Xi.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},g9;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(g9||(g9={}));var m9;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(m9||(m9={}));var v9;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(v9||(v9={}));var w9;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(w9||(w9={}));var DB={2:d(13292,null),4:d(13293,null),8:d(13294,null)},aT=e=>"runId"in e,Wo;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:Je.lift(i.range),uri:t.asCanonicalUri(y.revive(i.uri))})})(Wo||(Wo={}));var b9;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(b9||(b9={}));var Ch;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,position:i.position?Hi.lift(i.position):void 0})})(Ch||(Ch={}));var $h;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Wo.serialize(t.location),stackTrace:t.stackTrace?.map(Ch.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Wo.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>Ch.deserialize(t,r))})})($h||($h={}));var Ih;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Wo.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Wo.deserialize(t,i.location)})})(Ih||(Ih={}));var Dh;(function(e){e.serialize=t=>t.type===0?$h.serialize(t):Ih.serialize(t),e.deserialize=(t,i)=>i.type===0?$h.deserialize(t,i):Ih.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Dh||(Dh={}));var Fc;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Dh.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>Dh.deserialize(t,r))})})(Fc||(Fc={}));var y9="\0",Ph=(e,t)=>e+y9+t,S9=e=>{const t=e.indexOf(y9);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Ah;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,range:i.range?Je.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(Ah||(Ah={}));var x9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(x9||(x9={}));var Rs;(function(e){e.serialize=t=>({expand:t.expand,item:Ah.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Ne.root(i.item.extId),expand:i.expand,item:Ah.deserialize(t,i.item)})})(Rs||(Rs={}));var Oc;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?Je.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(Oc||(Oc={}));var Wm=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},E9;(function(e){e.serializeWithoutMessages=t=>({...Rs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Fc.serializeWithoutMessages)}),e.serialize=t=>({...Rs.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Fc.serialize)}),e.deserialize=(t,i)=>({...Rs.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Fc.deserialize(t,r)),retired:!0})})(E9||(E9={}));var Vm;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(Vm||(Vm={}));var k9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(y.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:Vm.empty()})})(k9||(k9={}));function qm(e){return{...e,location:e.location?.toJSON()}}function Gm(e){return e.location=e.location?Hi.isIPosition(e.location)?Hi.lift(e.location):Je.lift(e.location):void 0,e}var C9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(C9||(C9={}));var $9;(function(e){e.serialize=t=>t.type===0?Rh.serialize(t):Lh.serialize(t),e.deserialize=t=>t.type===0?Rh.deserialize(t):Lh.deserialize(t)})($9||($9={}));var Th;(function(e){e.serialize=qm,e.deserialize=Gm})(Th||(Th={}));var Rh;(function(e){e.serialize=qm,e.deserialize=Gm})(Rh||(Rh={}));var Lh;(function(e){e.serialize=t=>({...qm(t),branches:t.branches?.map(Th.serialize)}),e.deserialize=t=>({...Gm(t),branches:t.branches?.map(Th.deserialize)})})(Lh||(Lh={}));var I9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(I9||(I9={}));var Nh;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:Rs.deserialize(t,i.item)}:i.op===1?{op:i.op,item:Oc.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(y.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:Rs.serialize(t.item)}:t.op===1?{op:t.op,item:Oc.serialize(t.item)}:t})(Nh||(Nh={}));var cT=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(Rs.deserialize(this.l,i.item),t);break;case 1:this.q(Oc.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Ne.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),Wm(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Ne.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},PB=H("IAiSettingsSearchService"),Ls;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(Ls||(Ls={}));var lT=H("editorGroupsService"),D9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(D9||(D9={}));var P9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(P9||(P9={}));var A9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(A9||(A9={}));var T9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(T9||(T9={}));var R9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(R9||(R9={}));var L9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(L9||(L9={}));var N9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(N9||(N9={}));var AB=H("editorService"),uT=-1,hT=-2,Uc=H("configurationService"),M9;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(M9||(M9={}));function Qm(e,t){const i=Object.create(null);for(const r in e)F9(i,r,e[r],t);return i}function F9(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function dT(e,t){const i=t.split(".");O9(e,i)}function O9(e,t){if(!e)return;const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(O9(r,t),Object.keys(r).length===0&&delete e[i])}}function Mh(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function fT(e){return e.replace(/^\[/,"").replace(/]$/g,"").replace(/\]\[/g,", ")}function pT(e){let t=!1;const i=new Map,r=new Map;if(gT(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const p=i.get(h);if(!p){const f={schemas:[u]};return i.set(h,f),r.set(u,f),!0}return p.schemas.push(u),r.set(u,p),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,p)=>{if(p!==u){const f=r.get(p);if(f&&f.schemas.length>1)return f.id||(f.id=`_${o.length}`,o.push(f.schemas[0])),{$ref:`#/${n}/${f.id}`}}return p})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function Vo(e){return typeof e=="object"&&e!==null}function gT(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)Vo(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(Vo(l))for(const u in l){const h=l[u];Vo(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)Vo(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)Vo(l)&&o.push(l);else Vo(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Fh={JSONContribution:"base.contributions.json"};function U9(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var mT=class extends te{constructor(){super(...arguments),this.a={},this.b={},this.c=this.B(new D),this.onDidChangeSchema=this.c.event,this.f=this.B(new D),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const r=U9(e);this.a[r]=t,this.c.fire(e),i&&i.add(ce(()=>{delete this.a[r],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=U9(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),ce(()=>{const r=this.b[i];if(r){const s=r.indexOf(t);s!==-1&&(r.splice(s,1),r.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?pT(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},vT=new mT;Vt.add(Fh.JSONContribution,vT);var j9;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(j9||(j9={}));var qo={Configuration:"base.contributions.configuration"},H9;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(H9||(H9={}));var Oh={properties:{},patternProperties:{}},Uh={properties:{},patternProperties:{}},jh={properties:{},patternProperties:{}},Hh={properties:{},patternProperties:{}},Bh={properties:{},patternProperties:{}},_h={properties:{},patternProperties:{}},jc={properties:{},patternProperties:{}},Nn="vscode://schemas/settings/resourceLanguage",zh=Vt.as(Fh.JSONContribution),wT=class extends te{constructor(){super(),this.a=[],this.n=new Set,this.r=this.B(new D),this.onDidSchemaChange=this.r.event,this.s=this.B(new D),this.onDidUpdateConfiguration=this.s.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1812,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},zh.registerSchema(Nn,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),zh.registerSchema(Nn,this.m),this.r.fire(),this.s.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),zh.registerSchema(Nn,this.m),this.r.fire(),this.s.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),zh.registerSchema(Nn,this.m),this.r.fire(),this.s.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.u(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}u(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),Pr.test(n)){const c=this.z(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.y(n,c,s),i.push(...Hc(n))}else{const c=this.C(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.D(i)}deregisterDefaultConfigurations(e){const t=new Set;this.w(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}w(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),Pr.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.z(s,c.value,c.source,a);a&&!cg(a.value)?(n.configurationDefaultOverrideValue=a,this.y(s,a,r)):(this.b.delete(s),delete this.g[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.C(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[s];c&&(this.O(s,c),this.J(s,c))}t.add(s)}}this.M()}y(e,t,i){const r={type:"object",default:t.value,description:d(1813,null,fT(e)),$ref:Nn,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=r,this.c.properties[e]=r}z(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(xt(a)&&(sc(s[o])||xt(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}C(e,t,i,r){const s=this.g[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(xt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(sc(n)||xt(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...xt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.w(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.u(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.r.fire(),this.s.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.r.fire()}registerOverrideIdentifiers(e){this.D(e),this.r.fire()}D(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(r=>{this.H(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.f.push(r),this.I(r)})}G(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.g[s];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[s],this.L(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.f.indexOf(r);s!==-1&&this.f.splice(s,1)}}H(e,t=!0,i,r,s=4,n){s=Et(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&yT(c,l)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),Pr.test(c)?l.scope=void 0:(l.scope=Et(l.scope)?s:l.scope,l.restricted=Et(l.restricted)?!!r?.includes(c):l.restricted),l.experiment?l.tags?.some(p=>p.toLowerCase()==="onexp")||(l.tags=l.tags??[],l.tags.push("onExP")):l.tags?.some(p=>p.toLowerCase()==="onexp")&&(console.error(`Invalid tag 'onExP' found for property '${c}'. Please use 'experiment' property instead.`),l.experiment={mode:"startup"});const u=o[c].hasOwnProperty("included")&&!o[c].included,h=o[c].policy?.name;u?(this.j[c]=o[c],h&&(this.h.set(h,c),n.add(c)),delete o[c]):(n.add(c),h&&this.h.set(h,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,r,s,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.J(n,r[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch(Oh.properties[e]=t,t.scope){case 1:Uh.properties[e]=t;break;case 2:Hh.properties[e]=t;break;case 3:jh.properties[e]=t;break;case 7:Bh.properties[e]=t;break;case 4:_h.properties[e]=t;break;case 5:jc.properties[e]=t;break;case 6:jc.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete Oh.properties[e],t.scope){case 1:delete Uh.properties[e];break;case 2:delete Hh.properties[e];break;case 3:delete jh.properties[e];break;case 7:delete Bh.properties[e];break;case 4:delete _h.properties[e];break;case 5:case 6:delete jc.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:d(1814,null),errorMessage:d(1815,null),$ref:Nn};this.O(t,i),Oh.properties[t]=i,Uh.properties[t]=i,jh.properties[t]=i,Hh.properties[t]=i,Bh.properties[t]=i,_h.properties[t]=i,jc.properties[t]=i}}N(){const e={type:"object",description:d(1816,null),errorMessage:d(1817,null),$ref:Nn};Oh.patternProperties[Ns]=e,Uh.patternProperties[Ns]=e,jh.patternProperties[Ns]=e,Hh.patternProperties[Ns]=e,Bh.patternProperties[Ns]=e,_h.patternProperties[Ns]=e,jc.patternProperties[Ns]=e,this.r.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),sc(r)&&(r=t.defaultDefaultValue,s=void 0),sc(r)&&(r=bT(t.type)),t.default=r,t.defaultValueSource=s}},B9="\\[([^\\]]+)\\]",_9=new RegExp(B9,"g"),Ns=`^(${B9})+$`,Pr=new RegExp(Ns);function Hc(e){const t=[];if(Pr.test(e)){let i=_9.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=_9.exec(e)}}return wo(t)}function bT(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Wh=new wT;Vt.add(qo.Configuration,Wh);function yT(e,t){return e.trim()?Pr.test(e)?d(1819,null,e):Wh.getConfigurationProperties()[e]!==void 0?d(1820,null,e):t.policy?.name&&Wh.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1821,null,e,t.policy?.name,Wh.getPolicyConfigurations().get(t.policy?.name)):null:d(1818,null)}var Jm="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",TB=new RegExp(Jm),z9;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(z9||(z9={}));var W9;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(W9||(W9={}));var V9;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(V9||(V9={}));var q9;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(q9||(q9={}));var G9;(function(e){e.Install="install",e.Uninstall="uninstall"})(G9||(G9={}));var Q9;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(Q9||(Q9={}));var RB=H("extensionGalleryService"),J9;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.ClientError="ClientError",e.ServerError="ServerError",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(J9||(J9={}));var Z9;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(Z9||(Z9={}));var Y9;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(Y9||(Y9={}));var LB=H("extensionManagementService"),NB=H("IGlobalExtensionEnablementService"),MB=H("IExtensionTipsService"),FB=H("IAllowedExtensionsService"),OB=Hu(1969,"Extensions"),UB=Hu(1970,"Preferences"),ST="extensions.allowed";Vt.as(qo.Configuration).registerConfiguration({id:"extensions",order:30,title:d(1952,null),type:"object",properties:{[ST]:{type:"object",markdownDescription:d(1953,null),default:"*",defaultSnippets:[{body:{},description:d(1954,null)},{body:{"*":!0},description:d(1955,null)}],scope:1,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:d(1956,null)},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1957,null),enumDescriptions:[d(1958,null),d(1959,null),d(1960,null)]},{type:"array",items:{type:"string"},description:d(1961,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1962,null),enumDescriptions:[d(1963,null),d(1964,null),d(1965,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:d(1966,null),enumDescriptions:[d(1967,null),d(1968,null)]}}}}});var xT=H("telemetryService"),jB=H("customEndpointTelemetryService"),X9;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(X9||(X9={}));var K9;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(K9||(K9={}));var Zm=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},ET=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},HB=new ET,kT="telemetry",CT={id:kT,name:d(2297,null)},$T=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function IT(e){if(!e)return"none";const t=jg(e);return $T.has(t)?t:"other"}function DT(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function PT(e){if(!e)return e;const t=[{label:"URL",regex:/[a-zA-Z][a-zA-Z0-9+.-]*:\/\/[^\s]*/},{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function e8(e,t){return Ro(e,i=>{if(i instanceof Zm||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=DT(r,t);for(const s of t)r=r.replace(s,"");return r=PT(r),r}})}function AT(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:Pg(e.id,t.id)===0}var BB=new Ve("pprice.better-merge"),TT=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[Ve.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${Ve.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{r(n,t)}catch(o){Ot(o)}}return t}},RT=new TT,LT=Object.freeze({identifier:new Ve("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),_B=H("extensionService"),t8=class{constructor(e){this.dependency=e}},i8;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.LazyAutoStart=3]="LazyAutoStart"})(i8||(i8={}));function Ge(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function T(e,t){if(!Ge(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var r8;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(r8||(r8={}));var s8;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(s8||(s8={}));var Bc=(e,t)=>e===t,NT={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Bc,label:Bc,description:Bc,error:Bc,sortText:Bc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},MT=Object.entries(NT),FT=(e,t)=>{let i;for(const[r,s]of MT)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},OT=class extends te{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new wn(()=>this.flushDiff(),200)),this.g=this.B(new D),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Wm(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Wm(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Ne.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:og(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Ne.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=FT(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Ne.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(s.actual.uri)}C(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>Ph(this.s.controllerId,s.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Ph(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Ph(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.w(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.s.getChildren(e.actual)){const n=this.expand(Ne.joinToString(e.fullId,s.id),t);Is(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new kr;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new kr,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return Is(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.s.getChildren(r.actual))i.push(this.tree.get(Ne.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},UT=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},Vh=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},jT=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},HT=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new Vh(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new jT(c.id,l,e.controllerId);if(n.has(c.id))throw new UT(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new Vh(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},n8=new WeakMap,BT=(e,t)=>{const i={controllerId:t};return n8.set(e,i),i},qh=e=>{const t=n8.get(e);if(!t)throw new Vh(e?.id||"<unknown>");return t},zB=H("remoteAuthorityResolverService"),o8;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(o8||(o8={}));var _T=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},zT=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},es;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(es||(es={}));function a8(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}function se(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var Mn,$e=Mn=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof Mn)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof Mn)return t;if(this.isPosition(t))return new Mn(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.a}get character(){return this.b}constructor(t,i){if(t<0)throw Ce("line must be non-negative");if(i<0)throw Ce("character must be non-negative");this.a=t,this.b=i}isBefore(t){return this.a<t.a?!0:t.a<this.a?!1:this.b<t.b}isBeforeOrEqual(t){return this.a<t.a?!0:t.a<this.a?!1:this.b<=t.b}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.a===t.a&&this.b===t.b}compareTo(t){return this.a<t.a?-1:this.a>t.line?1:this.b<t.b?-1:this.b>t.b?1:0}translate(t,i=0){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new Mn(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new Mn(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};$e=Mn=__decorate([se],$e);var ts,ye=ts=class{static isRange(t){return t instanceof ts?!0:t?$e.isPosition(t.start)&&$e.isPosition(t.end):!1}static of(t){if(t instanceof ts)return t;if(this.isRange(t))return new ts(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.a}get end(){return this.b}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new $e(t,i),o=new $e(r,s)):$e.isPosition(t)&&$e.isPosition(i)&&(n=$e.of(t),o=$e.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.a=n,this.b=o):(this.a=o,this.b=n)}contains(t){return ts.isRange(t)?this.contains(t.start)&&this.contains(t.end):$e.isPosition(t)?!($e.of(t).isBefore(this.a)||this.b.isBefore(t)):!1}isEqual(t){return this.a.isEqual(t.a)&&this.b.isEqual(t.b)}intersection(t){const i=$e.Max(t.start,this.a),r=$e.Min(t.end,this.b);if(!i.isAfter(r))return new ts(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=$e.Min(t.start,this.a),r=$e.Max(t.end,this.end);return new ts(i,r)}get isEmpty(){return this.a.isEqual(this.b)}get isSingleLine(){return this.a.line===this.b.line}with(t,i=this.end){if(t===null||i===null)throw Ce();let r;return t?$e.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.a)&&i.isEqual(this.end)?this:new ts(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return c8(this)}};ye=ts=__decorate([se],ye);function c8(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}var Ym,Ai=Ym=class{#e;static isMarkdownString(t){return t instanceof Ym?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new Mo(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Ai=Ym=__decorate([se],Ai);var Xm,Ar=Xm=class extends ye{static isSelection(t){return t instanceof Xm?!0:t?ye.isRange(t)&&$e.isPosition(t.anchor)&&$e.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.c}get active(){return this.d}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new $e(t,i),o=new $e(r,s)):$e.isPosition(t)&&$e.isPosition(i)&&(n=$e.of(t),o=$e.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.c=n,this.d=o}get isReversed(){return this.c===this.b}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return WT(this)}};Ar=Xm=__decorate([se],Ar);function WT(e){let t=c8(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var _c,ut=class{static{_c=this}static{this.a="."}constructor(t){this.value=t}append(t){return new _c(this.value?this.value+_c.a+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+_c.a)}};ut=_c=__decorate([se],ut),ut.Empty=new ut(""),ut.QuickFix=ut.Empty.append("quickfix"),ut.Refactor=ut.Empty.append("refactor"),ut.RefactorExtract=ut.Refactor.append("extract"),ut.RefactorInline=ut.Refactor.append("inline"),ut.RefactorMove=ut.Refactor.append("move"),ut.RefactorRewrite=ut.Refactor.append("rewrite"),ut.Source=ut.Empty.append("source"),ut.SourceOrganizeImports=ut.Source.append("organizeImports"),ut.SourceFixAll=ut.Source.append("fixAll"),ut.Notebook=ut.Empty.append("notebook");var Km,Bi=Km=class{static isLocation(t){return t instanceof Km?!0:t?ye.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(ye.isRange(i))this.range=ye.of(i);else if($e.isPosition(i))this.range=new ye(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Bi=Km=__decorate([se],Bi);var Fn;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(Fn||(Fn={}));var Zt;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(Zt||(Zt={}));var zc=class{static is(t){return t?typeof t.message=="string"&&t.location&&ye.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};zc=__decorate([se],zc);var Gh=class{constructor(t,i,r=Zt.Error){if(!ye.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:Zt[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Fi(t.tags,i.tags)&&Fi(t.relatedInformation,i.relatedInformation,zc.isEqual)}};Gh=__decorate([se],Gh);var On,cr;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(cr||(cr={}));var Ms=On=class{static isTextEdit(t){return t instanceof On?!0:t?ye.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new On(t,i)}static insert(t,i){return On.replace(new ye(t,t),i)}static delete(t){return On.replace(t,"")}static setEndOfLine(t){const i=new On(new ye(new $e(0,0),new $e(0,0)),"");return i.newEol=t,i}get range(){return this.a}set range(t){if(t&&!ye.isRange(t))throw Ce("range");this.a=t}get newText(){return this.b||""}set newText(t){if(t&&typeof t!="string")throw Ce("newText");this.b=t}get newEol(){return this.c}set newEol(t){if(t&&typeof t!="number")throw Ce("newEol");this.c=t}constructor(t,i){this.a=t,this.b=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.c}}};Ms=On=__decorate([se],Ms);var Fs,Un;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Un||(Un={}));var Tr=class Wb{static isNotebookRange(t){return t instanceof Wb?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.a}get end(){return this.b}get isEmpty(){return this.a===this.b}constructor(t,i){if(t<0)throw Ce("start must be positive");if(i<0)throw Ce("end must be positive");t<=i?(this.a=t,this.b=i):(this.a=i,this.b=t)}with(t){let i=this.a,r=this.b;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.a&&r===this.b?this:new Wb(i,r)}},Qh=class Vb{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>Vb.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,Vb.validate(this)}},l8=class{constructor(e){this.cells=e}},Jh=Fs=class{static isNotebookCellEdit(t){return t instanceof Fs?!0:t?Tr.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new Fs(t,i)}static insertCells(t,i){return new Fs(new Tr(t,t),i)}static deleteCells(t){return new Fs(t,[])}static updateCellMetadata(t,i){const r=new Fs(new Tr(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new Fs(new Tr(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};Jh=Fs=__decorate([se],Jh);var u8=class ws{static isNotebookCellOutputItem(t){return t instanceof ws?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return ws.json(i,"application/vnd.code.notebook.error")}static stdout(t){return ws.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return ws.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new ws(t,i)}static#e=new TextEncoder;static text(t,i=$r.text){const r=ws.#e.encode(String(t));return new ws(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return ws.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=g6(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},Zh=class qb{static isNotebookCellOutput(t){return t instanceof qb?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=g6(o.mime);if(!r.has(a)||m6(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=qb.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=ni(),this.metadata=i??r)}},jn,Hn=jn=class{static isSnippetString(t){return t instanceof jn?!0:t?typeof t.value=="string":!1}static a(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.b=1,this.value=t||""}appendText(t){return this.value+=jn.a(t),this}appendTabstop(t=this.b++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.b++){if(typeof t=="function"){const r=new jn;r.b=this.b,t(r),this.b=r.b,t=r.value}else t=jn.a(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.b++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new jn;r.b=this.b,i(r),this.b=r.b,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Hn=jn=__decorate([se],Hn);var e1=class Hp{static isSnippetTextEdit(t){return t instanceof Hp?!0:t?ye.isRange(t.range)&&Hn.isSnippetString(t.snippet):!1}static replace(t,i){return new Hp(t,i)}static insert(t,i){return Hp.replace(new ye(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},h8;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(h8||(h8={}));var Bn=class{constructor(){this.a=[]}_allEntries(){return this.a}renameFile(t,i,r,s){this.a.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.a.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.a.push({_type:1,from:t,to:void 0,options:i,metadata:r})}b(t,i,r){this.a.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}c(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.a.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}d(t,i,r,s){this.a.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.a.push({_type:2,uri:t,edit:new Ms(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new ye(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.a.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,Jh.isNotebookCellEdit(s)?s.newCellMetadata?this.d(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.b(t,s.newNotebookMetadata,n):this.c(t,s.range,s.newCells,n):e1.isSnippetTextEdit(s)?this.a.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.a.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.a.length;r++){const s=this.a[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.a[r]=void 0);break}}h3(this.a)}}get(t){const i=[];for(const r of this.a)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new Bt;for(const i of this.a)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Bn=__decorate([se],Bn);var t1,et;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(et||(et={}));var Wc;(function(e){e[e.Deprecated=1]="Deprecated"})(Wc||(Wc={}));var Vc=t1=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof Bi?this.location=s:r instanceof ye&&(this.location=new Bi(s,r)),t1.validate(this)}toJSON(){return{name:this.name,kind:et[this.kind],location:this.location,containerName:this.containerName}}};Vc=t1=__decorate([se],Vc);var i1,Yh,Rr,Lr,r1,wi,s1,n1;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(n1||(n1={}));var d8;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(d8||(d8={}));var Ie=i1=class{static from(...t){let i=t;return new i1(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Ie=i1=__decorate([se],Ie);var f8=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ce("connectionToken")},VT=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw Ce("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ce("port");typeof i<"u"&&f8(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},Xh=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&f8(t)}},Go=class Bp extends Error{static NotAvailable(t,i){return new Bp(t,es.NotAvailable,i)}static TemporarilyNotAvailable(t){return new Bp(t,es.TemporarilyNotAvailable)}constructor(t,i=es.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,Bp.prototype)}},Qo;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Qo||(Qo={}));var Kh=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};Kh=__decorate([se],Kh);var ed=class extends Kh{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};ed=__decorate([se],ed);var o1;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(o1||(o1={}));var qc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(qc||(qc={}));var td=class{constructor(t,i=qc.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:qc[this.kind]}}};td=__decorate([se],td);var id=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};id=__decorate([se],id);var Gc=Yh=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(Yh.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],Yh.validate(this)}};Gc=Yh=__decorate([se],Gc);var Qc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Qc||(Qc={}));var Jc=class{constructor(t,i){this.title=t,this.kind=i}};Jc=__decorate([se],Jc);var Zc=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Zc=__decorate([se],Zc);var a1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},p8=class{constructor(e,t){this.fromRanges=t,this.from=e}},g8=class{constructor(e,t){this.fromRanges=t,this.to=e}},Jo;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Jo||(Jo={}));var rd=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};rd=__decorate([se],rd);var c1=class{constructor(t,i){this.label=t,this.documentation=i}};c1=__decorate([se],c1);var l1=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};l1=__decorate([se],l1);var u1=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};u1=__decorate([se],u1);var h1;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(h1||(h1={}));var d1;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(d1||(d1={}));var sd=class{constructor(t){this.value=t}};sd=__decorate([se],sd);var nd=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};nd=__decorate([se],nd);var Zo;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Zo||(Zo={}));var ue;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(ue||(ue={}));var Yc;(function(e){e[e.Deprecated=1]="Deprecated"})(Yc||(Yc={}));var od=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&ue[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};od=__decorate([se],od);var Yo=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Yo=__decorate([se],Yo);var f1=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};f1=__decorate([se],f1);var p1=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};p1=__decorate([se],p1);var _n;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(_n||(_n={}));var Xo;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Xo||(Xo={}));var is;(function(e){e[e.Code=1]="Code",e[e.Label=2]="Label"})(is||(is={}));var Xc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Xc||(Xc={}));var Os;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Os||(Os={}));function qT(e,t){return`${Ve.toKey(e)}.${t}`}var lr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(lr||(lr={}));var Ko;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Ko||(Ko={}));var ad;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(ad||(ad={}));var ea;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(ea||(ea={}));var ta;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(ta||(ta={}));var Kc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Kc||(Kc={}));var zn;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(zn||(zn={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(ea||(ea={}));var ia;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(ia||(ia={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(ia||(ia={}));var cd=class{constructor(t,i){if(i&&!y.isUri(i))throw Ce("target");if(!ye.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.target=i}};cd=__decorate([se],cd);var ra=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};ra=__decorate([se],ra);var ld=class{constructor(t,i){if(i&&!(i instanceof ra))throw Ce("color");if(!ye.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.color=i}};ld=__decorate([se],ld);var ud=class{constructor(t){if(!t||typeof t!="string")throw Ce("label");this.label=t}};ud=__decorate([se],ud);var m8;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(m8||(m8={}));var g1;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(g1||(g1={}));var m1;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(m1||(m1={}));var el;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(el||(el={}));var v1;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(v1||(v1={}));var GT=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw Ce("startIndex");if(typeof t!="number"||t<1)throw Ce("length");if(i!==void 0&&typeof i!="string")throw Ce("tooltip")}},QT=class{constructor(e){this.uri=e}},JT=class{constructor(e){this.terminalCommand=e}},w1;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(w1||(w1={}));var ZT=class{constructor(e){if(this.options=e,typeof e!="object")throw Ce("options")}},b1;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag",e[e.SymbolicLinkFile=8]="SymbolicLinkFile",e[e.SymbolicLinkFolder=9]="SymbolicLinkFolder",e[e.Commit=10]="Commit",e[e.Branch=11]="Branch",e[e.Tag=12]="Tag",e[e.Stash=13]="Stash",e[e.Remote=14]="Remote",e[e.PullRequest=15]="PullRequest",e[e.PullRequestDone=16]="PullRequestDone"})(b1||(b1={}));var YT=class{constructor(e,t,i,r,s,n,o,a,c){this.label=e,this.icon=t,this.detail=i,this.documentation=r,this.isFile=s,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},XT=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},y1;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(y1||(y1={}));var S1;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(S1||(S1={}));var x1;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(x1||(x1={}));var tl=class{static{Rr=this}static{this.Clean=new Rr("clean","Clean")}static{this.Build=new Rr("build","Build")}static{this.Rebuild=new Rr("rebuild","Rebuild")}static{this.Test=new Rr("test","Test")}static from(t){switch(t){case"clean":return Rr.Clean;case"build":return Rr.Build;case"rebuild":return Rr.Rebuild;case"test":return Rr.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw Ce("name");this.c=t}get id(){return this.c}};tl=Rr=__decorate([se],tl);function v8(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var sa=class{constructor(t,i,r){if(typeof t!="string")throw Ce("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ce("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return v8(t)}};sa=__decorate([se],sa);var Wn=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw Ce("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t,i&&(this.f=i),this.g=r}else{if(typeof t!="string")throw Ce("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ce("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return v8(t)}};Wn=__decorate([se],Wn);var E1;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(E1||(E1={}));var Us;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Us||(Us={}));var k1=class{constructor(e){this.c=e}computeId(){return"customExecution"+ni()}set callback(e){this.c=e}get callback(){return this.c}},hd=class{static{Lr=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.u=this.source=r,this.execution=s,a=n,this.k=!0):i===Us.Global||i===Us.Workspace?(this.target=i,this.o=this.name=r,this.u=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.u=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.q=[a],this.r=!0):Array.isArray(a)?(this.q=a,this.r=!0):(this.q=[],this.r=!1),this.t=!1,this.x=Object.create(null),this.y=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}A(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.B())}B(){this.p instanceof sa?this.l={type:Lr.e,id:this.p.computeId()}:this.p instanceof Wn?this.l={type:Lr.f,id:this.p.computeId()}:this.p instanceof k1?this.l={type:Lr.c,id:this.p.computeId()}:this.l={type:Lr.g,id:ni()}}get definition(){return this.l}set definition(t){if(t==null)throw Ce("Kind can't be undefined or null");this.A(),this.l=t}get scope(){return this.m}set target(t){this.A(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ce("name");this.A(),this.o=t}get execution(){return this.p}set execution(t){t===null&&(t=void 0),this.A(),this.p=t;const i=this.l.type;(Lr.g===i||Lr.e===i||Lr.f===i||Lr.c===i)&&this.B()}get problemMatchers(){return this.q}set problemMatchers(t){if(Array.isArray(t))this.A(),this.q=t,this.r=!0;else{this.A(),this.q=[],this.r=!1;return}}get hasDefinedMatchers(){return this.r}get isBackground(){return this.t}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.A(),this.t=t}get source(){return this.u}set source(t){if(typeof t!="string"||t.length===0)throw Ce("source must be a string of length > 0");this.A(),this.u=t}get group(){return this.w}set group(t){t===null&&(t=void 0),this.A(),this.w=t}get detail(){return this.z}set detail(t){t===null&&(t=void 0),this.z=t}get presentationOptions(){return this.x}set presentationOptions(t){t==null&&(t=Object.create(null)),this.A(),this.x=t}get runOptions(){return this.y}set runOptions(t){t==null&&(t=Object.create(null)),this.A(),this.y=t}};hd=Lr=__decorate([se],hd);var js;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(js||(js={}));var C1;(function(e){function t(i){const r=i;return cn(r.value)?r.tooltip&&!He(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(C1||(C1={}));var dd=r1=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=cn(r.checkboxState)?r.checkboxState:xt(r.checkboxState)&&cn(r.checkboxState.state)?r.checkboxState.state:void 0,n=!cn(r.checkboxState)&&xt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==Nr.Checked&&s!==Nr.Unchecked||n!==void 0&&!He(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof r1)return!0;if(r.label!==void 0&&!He(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!He(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!He(r.iconPath)&&!y.isUri(r.iconPath)&&(!r.iconPath||!He(r.iconPath.id))){const s=r.iconPath;if(!s||!He(s.light)&&!y.isUri(s.light)&&!He(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!He(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!y.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!He(r.tooltip)&&!(r.tooltip instanceof Ai)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Vn.None&&r.collapsibleState>Vn.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!He(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Vn.None){this.collapsibleState=i,y.isUri(t)?this.resourceUri=t:this.label=t}};dd=r1=__decorate([se],dd);var Vn;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Vn||(Vn={}));var Nr;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Nr||(Nr={}));var fd=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};fd=__decorate([se],fd);var pd=class extends fd{},KT=class extends pd{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},eR=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},na=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};na=__decorate([se],na);var $1=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};$1=__decorate([se],$1);var I1;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(I1||(I1={}));var Hs=class _p{static{this.c="."}constructor(t){this.value=t}append(...t){return new _p((this.value?[this.value,...t]:t).join(_p.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+_p.c)}};Hs.Empty=new Hs(""),Hs.Text=new Hs("text"),Hs.TextUpdateImports=Hs.Text.append("updateImports");var tR=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},ci=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};ci=__decorate([se],ci),ci.File=new ci("file"),ci.Folder=new ci("folder");var il=class{constructor(t){this.id=t}};il=__decorate([se],il);var oa;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(oa||(oa={}));var aa=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw Ce("base");if(typeof i!="string")throw Ce("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};aa=__decorate([se],aa);var w8=new WeakMap;function iR(e,t){w8.set(e,t)}var ca=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=w8.get(this)??ni()),this.c}};ca=__decorate([se],ca);var qn=class extends ca{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw Ce("location");this.location=t}};qn=__decorate([se],qn);var Gn=class extends ca{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};Gn=__decorate([se],Gn);var gd=class extends ca{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw Ce("dataId");this.label=t,this.dataId=i,this.canPersist=r}};gd=__decorate([se],gd);var md=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};md=__decorate([se],md);var rl=class{constructor(t,i){this.port=t,this.host=i}};rl=__decorate([se],rl);var vd=class{constructor(t){this.path=t}};vd=__decorate([se],vd);var sl=class{constructor(t){this.implementation=t}};sl=__decorate([se],sl);var b8=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},y8=class{constructor(e,t){this.session=e,this.threadId=t}},wd=class{constructor(t,i){this.range=t,this.expression=i}};wd=__decorate([se],wd);var nl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(nl||(nl={}));var rs;(function(e){e[e.Other=0]="Other",e[e.Empty=1]="Empty",e[e.TokenCancellation=2]="TokenCancellation",e[e.LostRace=3]="LostRace",e[e.NotTaken=4]="NotTaken"})(rs||(rs={}));var bd=class{constructor(t,i){this.range=t,this.text=i}};bd=__decorate([se],bd);var yd=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};yd=__decorate([se],yd);var Sd=class{constructor(t,i){this.range=t,this.expression=i}};Sd=__decorate([se],Sd);var D1=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};D1=__decorate([se],D1);var P1;(function(e){e[e.AIGenerated=1]="AIGenerated"})(P1||(P1={}));var ol;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(ol||(ol={}));var rR=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},la;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(la||(la={}));var Rt=wi=class extends Error{static FileExists(t){return new wi(t,be.FileExists,wi.FileExists)}static FileNotFound(t){return new wi(t,be.FileNotFound,wi.FileNotFound)}static FileNotADirectory(t){return new wi(t,be.FileNotADirectory,wi.FileNotADirectory)}static FileIsADirectory(t){return new wi(t,be.FileIsADirectory,wi.FileIsADirectory)}static NoPermissions(t){return new wi(t,be.NoPermissions,wi.NoPermissions)}static Unavailable(t){return new wi(t,be.Unavailable,wi.Unavailable)}constructor(t,i=be.Unknown,r){super(y.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",_6(this,i),Object.setPrototypeOf(this,wi.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Rt=wi=__decorate([se],Rt);var A1=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};A1=__decorate([se],A1);var ss;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(ss||(ss={}));var al;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(al||(al={}));var T1;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(T1||(T1={}));var R1;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(R1||(R1={}));var cl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(cl||(cl={}));var ll;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(ll||(ll={}));var ul;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(ul||(ul={}));var L1=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function sR(e){return typeof e>"u"||y3(e)}var nR=class i${constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.p(t,i,r,s,n);if(ye.isRange(t)&&typeof i=="string"&&sR(r))return this.o(t,i,r);throw Ce()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.p(s,n,o,a,c)}p(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let p=this.g[5*h],f=this.g[5*h+1];p===0?(p=l,f+=u):p+=l,this.g[5*h]=p,this.g[5*h+1]=f,l=p,u=f}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static q(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],p=t[5*c+1];return h-p}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],p=t[c+3],f=t[c+4],m=l-n,w=m===0?u-o:u,S=5*a;s[S+0]=m,s[S+1]=w,s[S+2]=h,s[S+3]=p,s[S+4]=f,n=l,o=u}return s}build(t){return this.f?new ua(new Uint32Array(this.g),t):new ua(i$.q(this.g),t)}},ua=class{constructor(e,t){this.resultId=t,this.data=e}},S8=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},xd=class{constructor(e,t){this.resultId=t,this.edits=e}},Ed;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Ed||(Ed={}));var oR=class{constructor(e){this.name=e}},N1;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(N1||(N1={}));var hl=class{static{this.Back={iconPath:new ci("arrow-left")}}constructor(){}};hl=__decorate([se],hl);var dl;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(dl||(dl={}));var ha;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ha||(ha={}));var Qn;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Qn||(Qn={}));var M1=class{static validate(e){if(typeof e.badge=="string"){let t=k4(e.badge,0);if(t<e.badge.length&&(t+=k4(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!ci.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},kd=class{constructor(t){this.kind=t}};kd=__decorate([se],kd);var Bs;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Bs||(Bs={}));var aR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},F1;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(F1||(F1={}));var Cd;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Cd||(Cd={}));var $d;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})($d||($d={}));var cR=class{constructor(e,t){this.text=e,this.alignment=t}},O1;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(O1||(O1={}));var Id;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Id||(Id={}));var x8=class{constructor(e,t=[]){this.uri=e,this.provides=Vi(t)}},lR=class{constructor(e){this.label=e}},fl;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(fl||(fl={}));var U1=class{constructor(t,i){this.label=t,this.timestamp=i}};U1=__decorate([se],U1);var da;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(da||(da={}));var Dd;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(Dd||(Dd={}));var _s;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(_s||(_s={}));var uR=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},hR=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},j1;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(j1||(j1={}));var fa;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(fa||(fa={}));var E8=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},Pd=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};Pd=__decorate([se],Pd);var Ad=s1=class{static diff(t,i,r){const s=new s1(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};Ad=s1=__decorate([se],Ad);var pl=class{constructor(t){this.id=t}};pl=__decorate([se],pl);var dR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Td=class{constructor(e,t){this.covered=e,this.total=t,Rd(this)}};function Rd(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Ld=class r${static fromDetails(t,i){const r=new Td(0,0),s=new Td(0,0),n=new Td(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new r$(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.includesTests=n}},k8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},C8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},$8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},H1;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(H1||(H1={}));var B1;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(B1||(B1={}));var _1;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(_1||(_1={}));var z1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},W1=class{constructor(e){this.uri=e}},Nd=class{constructor(e,t){this.original=e,this.modified=t}},I8=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},V1=class{constructor(e,t){this.uri=e,this.viewType=t}},D8=class{constructor(e){this.viewType=e}},q1=class{constructor(e,t){this.uri=e,this.notebookType=t}},G1=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},P8=class{constructor(){}},A8=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},T8=class{constructor(){}},R8=class{constructor(e){this.textDiffs=e}},Q1;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Q1||(Q1={}));var J1;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(J1||(J1={}));var Z1;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(Z1||(Z1={}));var fR=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},Mr;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(Mr||(Mr={}));var Y1;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(Y1||(Y1={}));var X1;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(X1||(X1={}));var gl;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(gl||(gl={}));var Md=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ai(e):e}},ml=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ai(e):e,this.vulnerabilities=t}},Fd=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},Od=class{constructor(e,t){this.value=e,this.baseUri=t}},K1=class{constructor(e,t){this.value=e,this.title=t}},vl=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},ev=class{constructor(e){this.value=e}},Ud=class{constructor(e,t){this.value=e,this.task=t}},pa=class{constructor(e,t,i){this.value=e,this.id=t,this.metadata=i}},wl=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ai(e):e}},jd=class{constructor(e){this.value=e}},Jn=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},Hd=class{constructor(e,t){this.value=e,this.isEdit=t}},Bd=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},_d=class{constructor(e,t){this.uri=e,this.range=t}},tv=class{constructor(e){this.extensions=e}},iv=class{constructor(e,t,i,r,s){this.uri=e,this.title=t,this.description=i,this.author=r,this.linkTag=s}toJSON(){return{$mid:26,uri:this.uri,title:this.title,description:this.description,author:this.author}}},bl=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},zd=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},yl=class{constructor(e){this.toolName=e}},rv=class{constructor(e,t,i){this.toolName=e,this.toolCallId=t,this.isError=i}},Wd=class{constructor(e,t,i,r,s,n){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s,this.editedFileEvents=n}},L8=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},pR=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},ur;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(ur||(ur={}));var sv;(function(e){e[e.Failed=0]="Failed",e[e.Completed=1]="Completed",e[e.InProgress=2]="InProgress"})(sv||(sv={}));var nv;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(nv||(nv={}));var ov;(function(e){e[e.NoReason=0]="NoReason",e[e.FilteredContentRetry=1]="FilteredContentRetry",e[e.CopyrightContentRetry=2]="CopyrightContentRetry"})(ov||(ov={}));var N8=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},M8=class{constructor(e){this.cell=e}},F8=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},O8=class{constructor(e){this.diagnostics=e}},Ti;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Ti||(Ti={}));var Sl=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},av=class extends Sl{constructor(e,t,i){super(e,t,i),this.content=t}},cv;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(cv||(cv={}));var U8=class Gb{static User(t,i){return new Gb(Ti.User,t,i)}static Assistant(t,i){return new Gb(Ti.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new pt(t)]:this.c=t}get content(){return this.c}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},j8=class Qb{static User(t,i){return new Qb(Ti.User,t,i)}static Assistant(t,i){return new Qb(Ti.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new pt(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new pt(i):i))}get content2(){return this.content.map(t=>t instanceof pt?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Zn=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},Vd;(function(e){e[e.Assistant=0]="Assistant",e[e.User=1]="User",e[e.Extension=2]="Extension"})(Vd||(Vd={}));var pt=class{constructor(e,t){this.value=e,t=t}toJSON(){return{$mid:21,value:this.value,audience:this.audience}}},hr=class zp{constructor(t,i,r){this.mimeType=i,this.data=t,this.audience=r}static image(t,i){return new zp(t,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return new zp(ne.fromString(r).buffer,i)}static text(t,i=$r.text){return new zp(ne.fromString(t).buffer,i)}toJSON(){return{$mid:24,mimeType:this.mimeType,data:this.data,audience:this.audience}}},zs;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(zs||(zs={}));var ga=class{constructor(e,t,i){this.value=e,this.id=t,this.metadata=i}toJSON(){return{$mid:22,value:this.value,id:this.id,metadata:this.metadata}}},Fr=class{constructor(e){this.value=e}toJSON(){return{$mid:23,value:this.value}}},ns=class _r extends Error{static#e="LanguageModelError";static NotFound(t){return new _r(t,_r.NotFound.name)}static NoPermissions(t){return new _r(t,_r.NoPermissions.name)}static Blocked(t){return new _r(t,_r.Blocked.name)}static tryDeserialize(t){if(t.name===_r.#e)return new _r(t.message,t.code,t.cause)}constructor(t,i,r){super(t,{cause:r}),this.name=_r.#e,this.code=i??""}},qd=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},H8=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},gR=class extends qd{},Gd;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(Gd||(Gd={}));var B8=class{constructor(e,t){this.id=e,this.label=t}},_8=class{constructor(e,t,i){this.label=e,this.name=t,this.instructions=i}},lv;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(lv||(lv={}));var uv;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(uv||(uv={}));var hv;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(hv||(hv={}));var dv;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(dv||(dv={}));var fv;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(fv||(fv={}));var mR=class{constructor(e,t,i,r={},s){this.label=e,this.command=t,this.args=i,this.env=r,this.version=s}},vR=class{constructor(e,t,i={},r){this.label=e,this.uri=t,this.headers=i,this.version=r}},dr;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new $e(s-1,n-1),l=new $e(o-1,a-1);return new Ar(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(dr||(dr={}));var M;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new ye(s-1,n-1,o-1,a-1)}e.to=i})(M||(M={}));var Or;(function(e){function t(r){return{uri:r.uri,range:M.from(r.range)}}e.from=t;function i(r){return new Bi(y.revive(r.uri),M.to(r.range))}e.to=i})(Or||(Or={}));var pv;(function(e){function t(i){switch(i){case 1:return _s.Comment;case 0:return _s.Other;case 3:return _s.RegEx;case 2:return _s.String}}e.to=t})(pv||(pv={}));var ze;(function(e){function t(r){return new $e(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(ze||(ze={}));var ma;(function(e){function t(s,n,o){return ft(Vi(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Li.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(ma||(ma={}));var Qd;(function(e){function t(r){switch(r){case Fn.Unnecessary:return 1;case Fn.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return Fn.Unnecessary;case 2:return Fn.Deprecated;default:return}}e.to=i})(Qd||(Qd={}));var va;(function(e){function t(r){let s;return r.code&&(He(r.code)||cn(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...M.from(r.range),message:r.message,source:r.source,code:s,severity:xl.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(Jd.from),tags:Array.isArray(r.tags)?ft(r.tags.map(Qd.from)):void 0}}e.from=t;function i(r){const s=new Gh(M.to(r),r.message,xl.to(r.severity));return s.source=r.source,s.code=He(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(Jd.to),s.tags=r.tags&&ft(r.tags.map(Qd.to)),s}e.to=i})(va||(va={}));var Jd;(function(e){function t(r){return{...M.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new zc(new Bi(r.resource,M.to(r)),r.message)}e.to=i})(Jd||(Jd={}));var xl;(function(e){function t(r){switch(r){case Zt.Error:return vi.Error;case Zt.Warning:return vi.Warning;case Zt.Information:return vi.Info;case Zt.Hint:return vi.Hint}return vi.Error}e.from=t;function i(r){switch(r){case vi.Info:return Zt.Information;case vi.Warning:return Zt.Warning;case vi.Error:return Zt.Error;case vi.Hint:return Zt.Hint;default:return Zt.Error}}e.to=i})(xl||(xl={}));var It;(function(e){function t(r){return typeof r=="number"&&r>=Xc.One?r-1:r===Xc.Beside?hT:uT}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(It||(It={}));function wR(e){return typeof e.range<"u"}function z8(e){return e.length===0?!0:!!wR(e[0])}var de;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:p}=a;c={value:"```"+h+`
`+p+"\n```\n"}}else Ai.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let p=y.parse(h,!0);p=p.with({query:s(p.query,l)}),l[h]=p}catch{}return""};return rt.walkTokens(rt.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(YP(h.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=p6(a)}catch{}if(!l)return a;let u=!1;return l=Ro(l,h=>{if(y.isUri(h)){const p=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[p]=h,u=!0,p}else return}),u?JSON.stringify(l):a}function n(a){const c=new Ai(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(de||(de={}));function bR(e){return z8(e)?e.map(t=>({range:M.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?de.fromMany(t.hoverMessage):t.hoverMessage?de.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:M.from(t)}))}function Zd(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var wa;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?Zd(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(wa||(wa={}));var Yd;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Zd(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wa.from(i.before):void 0,after:i.after?wa.from(i.after):void 0}}e.from=t})(Yd||(Yd={}));var gv;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case zn.OpenOpen:return 0;case zn.ClosedClosed:return 1;case zn.OpenClosed:return 2;case zn.ClosedOpen:return 3}}e.from=t})(gv||(gv={}));var mv;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?gv.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?Yd.from(i.light):void 0,dark:i.dark?Yd.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?Zd(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?wa.from(i.before):void 0,after:i.after?wa.from(i.after):void 0}}e.from=t})(mv||(mv={}));var Lt;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&xa.from(r.newEol),range:M.from(r.range)}}e.from=t;function i(r){const s=new Ms(M.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:xa.to(r.eol),s}e.to=i})(Lt||(Lt={}));var Ri;(function(e){function t(r,s){const n={edits:[]};if(r instanceof Bn){const o=new vy;for(const a of r._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Fu(ne.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:Lt.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:M.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(ka.from)}})}return n}e.from=t;function i(r){const s=new Bn,n=new Bt;for(const o of r.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=M.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let p;h?p=e1.replace(l,new Hn(u)):p=Ms.replace(l,u);const f=n.get(c);f?f.push(p):n.set(c,[p])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(Ri||(Ri={}));var Ji;(function(e){const t=Object.create(null);t[et.File]=0,t[et.Module]=1,t[et.Namespace]=2,t[et.Package]=3,t[et.Class]=4,t[et.Method]=5,t[et.Property]=6,t[et.Field]=7,t[et.Constructor]=8,t[et.Enum]=9,t[et.Interface]=10,t[et.Function]=11,t[et.Variable]=12,t[et.Constant]=13,t[et.String]=14,t[et.Number]=15,t[et.Boolean]=16,t[et.Array]=17,t[et.Object]=18,t[et.Key]=19,t[et.Null]=20,t[et.EnumMember]=21,t[et.Struct]=22,t[et.Event]=23,t[et.Operator]=24,t[et.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return et.Property}e.to=r})(Ji||(Ji={}));var os;(function(e){function t(r){switch(r){case Wc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Wc.Deprecated}}e.to=i})(os||(os={}));var Yn;(function(e){function t(r){return{name:r.name,kind:Ji.from(r.kind),tags:r.tags&&r.tags.map(os.from),containerName:r.containerName,location:bi.from(r.location)}}e.from=t;function i(r){const s=new Vc(r.name,Ji.to(r.kind),r.containerName,bi.to(r.location));return s.tags=r.tags&&r.tags.map(os.to),s}e.to=i})(Yn||(Yn={}));var vv;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:M.from(r.range),selectionRange:M.from(r.selectionRange),kind:Ji.from(r.kind),tags:r.tags?.map(os.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Gc(r.name,r.detail,Ji.to(r.kind),M.to(r.range),M.to(r.selectionRange));return rc(r.tags)&&(s.tags=r.tags.map(os.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(vv||(vv={}));var Xn;(function(e){function t(r){const s=new a1(Ji.to(r.kind),r.name,r.detail||"",y.revive(r.uri),M.to(r.range),M.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:Ji.from(r.kind),uri:r.uri,range:M.from(r.range),selectionRange:M.from(r.selectionRange),tags:r.tags?.map(os.from)}}e.from=i})(Xn||(Xn={}));var wv;(function(e){function t(i){return new p8(Xn.to(i.from),i.fromRanges.map(r=>M.to(r)))}e.to=t})(wv||(wv={}));var bv;(function(e){function t(i){return new g8(Xn.to(i.to),i.fromRanges.map(r=>M.to(r)))}e.to=t})(bv||(bv={}));var bi;(function(e){function t(r){return{range:r.range&&M.from(r.range),uri:r.uri}}e.from=t;function i(r){return new Bi(y.revive(r.uri),M.to(r.range))}e.to=i})(bi||(bi={}));var El;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?M.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:M.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?M.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:y.revive(r.uri),targetRange:M.to(r.range),targetSelectionRange:r.targetSelectionRange?M.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?M.to(r.originSelectionRange):void 0}}e.to=i})(El||(El={}));var kl;(function(e){function t(r){return{range:M.from(r.range),contents:de.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(de.to),n=M.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new ed(s,n,o,a)}e.to=i})(kl||(kl={}));var yv;(function(e){function t(r){return{range:M.from(r.range),expression:r.expression}}e.from=t;function i(r){return new wd(M.to(r.range),r.expression)}e.to=i})(yv||(yv={}));var Xd;(function(e){function t(r){if(r instanceof bd)return{type:"text",range:M.from(r.range),text:r.text};if(r instanceof yd)return{type:"variable",range:M.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof Sd)return{type:"expression",range:M.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:M.to(r.range),text:r.text};case"variable":return{range:M.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:M.to(r.range),expression:r.expression}}}e.to=i})(Xd||(Xd={}));var Kd;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:M.from(r.stoppedLocation)}}e.from=t;function i(r){return new D1(r.frameId,M.to(r.stoppedLocation))}e.to=i})(Kd||(Kd={}));var ba;(function(e){function t(r){return{range:M.from(r.range),kind:r.kind}}e.from=t;function i(r){return new td(M.to(r.range),r.kind)}e.to=i})(ba||(ba={}));var Sv;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(ba.from)}}e.from=t;function i(r){return new id(y.revive(r.uri),r.highlights.map(ba.to))}e.to=i})(Sv||(Sv={}));var xv;(function(e){function t(i){switch(i){case 1:return Zo.TriggerCharacter;case 2:return Zo.TriggerForIncompleteCompletions;case 0:default:return Zo.Invoke}}e.to=t})(xv||(xv={}));var Ev;(function(e){function t(i){return{triggerKind:xv.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(Ev||(Ev={}));var ef;(function(e){function t(r){switch(r){case Yc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Yc.Deprecated}}e.to=i})(ef||(ef={}));var kv;(function(e){function t(i,r,s){return"icon"in i&&"command"in i?{command:r.toInternal(i.command,s),icon:Pf.fromThemeIcon(i.icon)}:{command:r.toInternal(i,s)}}e.from=t})(kv||(kv={}));var tf;(function(e){const t=new Map([[ue.Method,0],[ue.Function,1],[ue.Constructor,2],[ue.Field,3],[ue.Variable,4],[ue.Class,5],[ue.Interface,7],[ue.Struct,6],[ue.Module,8],[ue.Property,9],[ue.Unit,12],[ue.Value,13],[ue.Constant,14],[ue.Enum,15],[ue.EnumMember,16],[ue.Keyword,17],[ue.Snippet,28],[ue.Text,18],[ue.Color,19],[ue.File,20],[ue.Reference,21],[ue.Folder,23],[ue.Event,10],[ue.Operator,11],[ue.TypeParameter,24],[ue.Issue,26],[ue.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,ue.Method],[1,ue.Function],[2,ue.Constructor],[3,ue.Field],[4,ue.Variable],[5,ue.Class],[7,ue.Interface],[6,ue.Struct],[8,ue.Module],[9,ue.Property],[12,ue.Unit],[13,ue.Value],[14,ue.Constant],[15,ue.Enum],[16,ue.EnumMember],[17,ue.Keyword],[28,ue.Snippet],[18,ue.Text],[19,ue.Color],[20,ue.File],[21,ue.Reference],[23,ue.Folder],[10,ue.Event],[11,ue.Operator],[24,ue.TypeParameter],[25,ue.User],[26,ue.Issue]]);function s(n){return r.get(n)??ue.Property}e.to=s})(tf||(tf={}));var Cv;(function(e){function t(i,r){const s=new od(i.label);return s.insertText=i.insertText,s.kind=tf.to(i.kind),s.tags=i.tags?.map(ef.to),s.detail=i.detail,s.documentation=kn(i.documentation)?de.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,Je.isIRange(i.range)?s.range=M.to(i.range):typeof i.range=="object"&&(s.range={inserting:M.to(i.range.insert),replacing:M.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new Hn(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof ye?new Ms(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>Lt.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(Cv||(Cv={}));var rf;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:de.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:kn(r.documentation)?de.to(r.documentation):r.documentation}}e.to=i})(rf||(rf={}));var sf;(function(e){function t(r){return{label:r.label,documentation:de.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(rf.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:kn(r.documentation)?de.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(rf.to):[],activeParameter:r.activeParameter}}e.to=i})(sf||(sf={}));var Cl;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(sf.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(sf.to):[]}}e.to=i})(Cl||(Cl={}));var $v;(function(e){function t(i,r){const s=new nd(ze.to(r.position),typeof r.label=="string"?r.label:r.label.map(Iv.to.bind(void 0,i)),r.kind&&nf.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(Lt.to),s.tooltip=kn(r.tooltip)?de.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})($v||($v={}));var Iv;(function(e){function t(i,r){const s=new sd(r.label);return s.tooltip=kn(r.tooltip)?de.to(r.tooltip):r.tooltip,Em.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=bi.to(r.location)),s}e.to=t})(Iv||(Iv={}));var nf;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(nf||(nf={}));var Kn;(function(e){function t(r){return{range:M.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?y.parse(r.url,!0):y.revive(r.url)}catch{}const n=new cd(M.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(Kn||(Kn={}));var of;(function(e){function t(r){const s=new ud(r.label);return r.textEdit&&(s.textEdit=Lt.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>Lt.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?Lt.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>Lt.from(s)):void 0}}e.from=i})(of||(of={}));var ya;(function(e){function t(r){return new ra(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(ya||(ya={}));var Dv;(function(e){function t(r){return{range:M.from(r.range)}}e.from=t;function i(r){return new Zc(M.to(r.range))}e.to=i})(Dv||(Dv={}));var af;(function(e){function t(i){switch(i){case 2:return Ko.AfterDelay;case 1:return Ko.Manual;case 3:case 4:return Ko.FocusOut}}e.to=t})(af||(af={}));var Sa;(function(e){function t(r){switch(r){case lr.Off:return 0;case lr.Relative:return 2;case lr.Interval:return 3;case lr.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return lr.Off;case 2:return lr.Relative;case 3:return lr.Interval;case 1:default:return lr.On}}e.to=i})(Sa||(Sa={}));var xa;(function(e){function t(r){if(r===cr.CRLF)return 1;if(r===cr.LF)return 0}e.from=t;function i(r){if(r===1)return cr.CRLF;if(r===0)return cr.LF}e.to=i})(xa||(xa={}));var cf;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case js.SourceControl:return 3;case js.Window:return 10;case js.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(cf||(cf={}));var lf;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=uf.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=uf.to(r.kind)),s}e.to=i})(lf||(lf={}));var uf;(function(e){function t(r){if(r)switch(r){case ss.Comment:return Fo.Comment;case ss.Imports:return Fo.Imports;case ss.Region:return Fo.Region}}e.from=t;function i(r){if(r)switch(r.value){case Fo.Comment.value:return ss.Comment;case Fo.Imports.value:return ss.Imports;case Fo.Region.value:return ss.Region}}e.to=i})(uf||(uf={}));var $l;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?M.from(i.selection):void 0,override:typeof i.override=="boolean"?V2.id:void 0}}e.from=t})($l||($l={}));var Li;(function(e){function t(n){return n instanceof aa?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new aa(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new aa(y.revive(n.baseUri),n.pattern)}e.to=s})(Li||(Li={}));var Pv;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Li.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(Pv||(Pv={}));var Ur;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new Tr(r.start,r.end)}e.to=i})(Ur||(Ur={}));var Ea;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(Ea||(Ea={}));var Il;(function(e){function t(r){switch(r){case Un.Markup:return zo.Markup;case Un.Code:default:return zo.Code}}e.from=t;function i(r){switch(r){case zo.Markup:return Un.Markup;case zo.Code:default:return Un.Code}}e.to=i})(Il||(Il={}));var Ws;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)Qh.validate(n),s.cells.push(ka.from(n));return s}e.from=t;function i(r){const s=new l8(r.cells.map(ka.to));return cg(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(Ws||(Ws={}));var ka;(function(e){function t(r){return{cellKind:Il.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:Ea.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(Vs.from):[]}}e.from=t;function i(r){return new Qh(Il.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(Vs.to):void 0,r.metadata,r.internalMetadata?Ea.to(r.internalMetadata):void 0)}e.to=i})(ka||(ka={}));var Ca;(function(e){function t(r){return{mime:r.mime,valueBytes:ne.wrap(r.data)}}e.from=t;function i(r){return new u8(r.valueBytes.buffer,r.mime)}e.to=i})(Ca||(Ca={}));var Vs;(function(e){function t(r){return{outputId:r.id,items:r.items.map(Ca.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map(Ca.to);return new Zh(s,r.outputId,r.metadata)}e.to=i})(Vs||(Vs={}));var hf;(function(e){function t(s){return r(s)?{include:Li.from(s.include)??void 0,exclude:Li.from(s.exclude)??void 0}:Li.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Li.to(s.include),exclude:Li.to(s.exclude)}:Li.to(s)}e.to=i;function r(s){const n=s;return n?!Et(n.include)&&!Et(n.exclude):!1}})(hf||(hf={}));var Av;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Cd.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(Av||(Av={}));var Tv;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(Tv||(Tv={}));var Rv;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(Rv||(Rv={}));var df;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new x8(y.revive(r.uri),r.provides)}e.to=i})(df||(df={}));var $a;(function(e){function t(r){return{message:de.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:M.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&ze.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new Ad(typeof r.message=="string"?r.message:de.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?bi.to(r.location):void 0,s}e.to=i})($a||($a={}));var fr;(function(e){e.namespace=Ph,e.denamespace=S9})(fr||(fr={}));var Lv;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:Ia.from(i.kind)}}e.from=t})(Lv||(Lv={}));var Ia;(function(e){const t={[fa.Coverage]:8,[fa.Debug]:4,[fa.Run]:2};function i(r){return t.hasOwnProperty(r)?t[r]:2}e.from=i})(Ia||(Ia={}));var qs;(function(e){function t(r){const s=qh(r).controllerId;return{extId:Ne.fromExtHostTestItem(r,s).toString(),label:r.label,uri:y.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>fr.namespace(s,n.id)),range:Je.lift(M.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&de.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Ne.fromString(r.extId).localId,label:r.label,uri:y.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=fr.denamespace(s);return new pl(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:M.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(qs||(qs={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new pl(r.id)}e.to=i}(fr||(fr={}));var Nv;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...qs.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map($a.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new N2;for(const a of r.items)s.insert(Ne.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(Oi)}}e.to=i})(Nv||(Nv={}));var Dl;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?ze.from(a):M.from(a)}function r(a){if(a)return"endLineNumber"in a?M.to(a):ze.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new k8(a.count,r(a.location),a.branches?.map(l=>new C8(l.count,r(l.location),l.label)))}else return new $8(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return Rd(l.statementCoverage),Rd(l.branchCoverage),Rd(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Ld&&l.includesTests.length?l.includesTests.map(u=>Ne.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Dl||(Dl={}));var Mv;(function(e){function t(i){switch(i){case 1:return Qc.Invoke;case 2:return Qc.Automatic}}e.to=t})(Mv||(Mv={}));var eo;(function(e){function t(r){const s=new z1(Ji.to(r.kind),r.name,r.detail||"",y.revive(r.uri),M.to(r.range),M.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:Ji.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:M.from(r.range),selectionRange:M.from(r.selectionRange),tags:r.tags?.map(os.from)}}e.from=i})(eo||(eo={}));var ff;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(ff||(ff={}));var to;(function(e){function t(n,o,a){const c=o.fileData;return c?new KT(new eR(c.name,y.revive(c.uri),c.id,ng(()=>a(c.id)))):n===$r.uriList&&o.uriListData?new pd(s(o.uriListData)):new pd(o.asString)}e.to=t;async function i(n,o,a=ni()){const c=await o.asString();if(n===$r.uriList)return{id:a,asString:c,fileData:void 0,uriListData:r(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function r(n){return nm.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return nm.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(to||(to={}));var Da;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,to.to(a,c,n)]);return new na(o)}e.toDataTransfer=t;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await to.from(o,a)]))}}e.from=i;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await to.from(o,a,a.id)]))}}e.fromList=r})(Da||(Da={}));var pf;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(pf||(pf={}));var Pa;(function(e){function t(r){switch(r){case 0:return Ti.System;case 1:return Ti.User;case 2:return Ti.Assistant}}e.to=t;function i(r){switch(r){case Ti.System:return 0;case Ti.User:return 1;case Ti.Assistant:return 2}return 1}e.from=i})(Pa||(Pa={}));var W8;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new pt(a.value,a.audience);if(a.type==="tool_result"){const c=ft(a.value.map(l=>l.type==="text"?new pt(l.value,l.audience):l.type==="prompt_tsx"?new Fr(l.value):void 0));return new Sl(a.toolCallId,c,a.isError)}else{if(a.type==="image_url")return;if(a.type==="tool_use")return new Zn(a.toolCallId,a.name,a.parameters)}}).filter(a=>a!==void 0),n=Pa.to(r.role);return new U8(n,s,r.name)}e.to=t;function i(r){const s=Pa.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new pt(o)]);const a=o.map(c=>{if(c instanceof Sl)return{type:"tool_result",toolCallId:c.callId,value:ft(c.content.map(l=>l instanceof pt?{type:"text",value:l.value,audience:l.audience}:l instanceof Fr?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof Zn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof pt)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(W8||(W8={}));var gf;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new pt(a.value,a.audience);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new pt(l.value,l.audience):l.type==="data"?new hr(l.data.buffer,l.mimeType):new Fr(l.value));return new av(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new hr(a.value.data.buffer,a.value.mimeType):a.type==="data"?new hr(a.data.buffer,a.mimeType):a.type==="thinking"?new ga(a.value,a.id,a.metadata):new Zn(a.toolCallId,a.name,a.parameters)}),n=Pa.to(r.role);return new j8(n,s,r.name)}e.to=t;function i(r){const s=Pa.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new pt(o)]);const a=o.map(c=>{if(c instanceof av||c instanceof Sl)return{type:"tool_result",toolCallId:c.callId,value:ft(c.content.map(l=>l instanceof pt?{type:"text",value:l.value,audience:l.audience}:l instanceof Fr?{type:"prompt_tsx",value:l.value}:l instanceof hr?{type:"data",mimeType:l.mimeType,data:ne.wrap(l.data),audience:l.audience}:void 0)),isError:c.isError};if(c instanceof hr)return yR(c)?{type:"image_url",value:{mimeType:c.mimeType,data:ne.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:ne.wrap(c.data),audience:c.audience};if(c instanceof Zn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof pt)return{type:"text",value:c.value};if(c instanceof ga)return{type:"thinking",value:c.value,id:c.id,metadata:c.metadata};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(gf||(gf={}));function yR(e){switch(e.mimeType){case zs.PNG:case zs.JPEG:case zs.GIF:case zs.WEBP:case zs.BMP:return!0;default:return!1}}var Pl;(function(e){function t(r){return{kind:"markdownContent",content:de.from(r.value)}}e.from=t;function i(r){return new Md(de.to(r.content))}e.to=i})(Pl||(Pl={}));var mf;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value,isEdit:r.isEdit}}e.from=t;function i(r){return new Hd(y.revive(r.uri),r.isEdit)}e.to=i})(mf||(mf={}));var vf;(function(e){function t(r){return{kind:"markdownVuln",content:de.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new ml(de.to(r.content),r.vulnerabilities)}e.to=i})(vf||(vf={}));var wf;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:de.from(i.message),data:i.data,buttons:i.buttons}}e.from=t})(wf||(wf={}));var Al;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:Jr(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=Jt(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Od(a,o)}e.to=i})(Al||(Al={}));var Fv;(function(e){function t(r){return{kind:"multiDiffData",multiDiffData:{title:r.title,resources:r.value.map(s=>({originalUri:s.originalUri,modifiedUri:s.modifiedUri,goToFileUri:s.goToFileUri,added:s.added,removed:s.removed}))}}}e.from=t;function i(r){const s=r.multiDiffData.resources.map(n=>({originalUri:n.originalUri?y.revive(n.originalUri):void 0,modifiedUri:n.modifiedUri?y.revive(n.modifiedUri):void 0,goToFileUri:n.goToFileUri?y.revive(n.goToFileUri):void 0,added:n.added,removed:n.removed}));return new K1(s,r.multiDiffData.title)}e.to=i})(Fv||(Fv={}));var Aa;(function(e){function t(r){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?Yn.from(r.value):Or.from(r.value)}}e.from=t;function i(r){const s=Jt(r);return new vl(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Yn.to(s.inlineReference):Or.to(s.inlineReference),r.name)}e.to=i})(Aa||(Aa={}));var Tl;(function(e){function t(r){return{kind:"progressMessage",content:de.from(r.value)}}e.from=t;function i(r){return new ev(r.content.value)}e.to=i})(Tl||(Tl={}));var Rl;(function(e){function t(r){return{kind:"thinking",value:r.value,id:r.id,metadata:r.metadata}}e.from=t;function i(r){return new pa(r.value??"",r.id,r.metadata)}e.to=i})(Rl||(Rl={}));var Ll;(function(e){function t(r){return{kind:"warning",content:de.from(r.value)}}e.from=t;function i(r){return new wl(r.content.value)}e.to=i})(Ll||(Ll={}));var Ov;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(Ov||(Ov={}));var Uv;(function(e){function t(i){return{kind:"pullRequest",author:i.author,title:i.title,description:i.description,uri:i.uri,linkTag:i.linkTag}}e.from=t})(Uv||(Uv={}));var jv;(function(e){function t(r){return{kind:"move",uri:r.uri,range:M.from(r.range)}}e.from=t;function i(r){return new _d(y.revive(r.uri),M.to(r.range))}e.to=i})(jv||(jv={}));var Nl;(function(e){function t(r){return{kind:"prepareToolInvocation",toolName:r.toolName}}e.from=t;function i(r){return new yl(r.toolName)}e.to=i})(Nl||(Nl={}));var Hv;(function(e){function t(n){return{kind:"toolInvocationSerialized",toolCallId:n.toolCallId,toolId:n.toolName,invocationMessage:n.invocationMessage?de.from(n.invocationMessage):n.toolName,originMessage:n.originMessage?de.from(n.originMessage):void 0,pastTenseMessage:n.pastTenseMessage?de.from(n.pastTenseMessage):void 0,isConfirmed:n.isConfirmed,isComplete:n.isComplete??!0,source:Rn.External,toolSpecificData:n.toolSpecificData?i(n.toolSpecificData):void 0,presentation:void 0}}e.from=t;function i(n){return"command"in n&&"language"in n?{kind:"terminal",command:n.command,language:n.language}:"commandLine"in n&&"language"in n?{kind:"terminal",commandLine:n.commandLine,language:n.language}:n}function r(n){const o=new rv(n.toolId||n.toolName,n.toolCallId,n.isError);return n.invocationMessage&&(o.invocationMessage=n.invocationMessage),n.originMessage&&(o.originMessage=n.originMessage),n.pastTenseMessage&&(o.pastTenseMessage=n.pastTenseMessage),n.isConfirmed!==void 0&&(o.isConfirmed=n.isConfirmed),n.isComplete!==void 0&&(o.isComplete=n.isComplete),n.toolSpecificData&&(o.toolSpecificData=s(n.toolSpecificData)),o}e.to=r;function s(n){return n.kind==="terminal"?{command:n.command,language:n.language}:n.kind==="terminal2"?{commandLine:n.commandLine,language:n.language}:n}})(Hv||(Hv={}));var bf;(function(e){function t(i){return{kind:"progressTask",content:de.from(i.value)}}e.from=t})(bf||(bf={}));var Bv;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?de.from(i):void 0}}e.from=t})(Bv||(Bv={}));var Ml;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new jd(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Ml||(Ml={}));var yf;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>Lt.from(s)),done:r.isDone}}e.from=t;function i(r){const s=new bl(y.revive(r.uri),r.edits.map(n=>Lt.to(n)));return s.isDone=r.done,s}e.to=i})(yf||(yf={}));var Sf;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(ka.from)}}e.from=t})(Sf||(Sf={}));var xf;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(Sf.from),done:i.isDone}}e.from=t})(xf||(xf={}));var io;(function(e){function t(r){const s=$t.isThemeIcon(r.iconPath)?r.iconPath:y.isUri(r.iconPath)?{light:y.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&y.isUri(r.iconPath.light)&&y.isUri(r.iconPath.dark)?{light:y.revive(r.iconPath.light),dark:y.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:y.isUri(r.value.value)||!r.value.value?r.value.value:Or.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:y.isUri(r.value)||typeof r.value=="string"?r.value:Or.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=Jt(r),n=o=>y.isUri(o)?o:Or.to(o);return new Jn(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(io||(io={}));var Ef;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(Ef||(Ef={}));var Fl;(function(e){function t(s,n,o){return s instanceof Md?Pl.from(s):s instanceof vl?Aa.from(s):s instanceof Jn?io.from(s):s instanceof ev?Tl.from(s):s instanceof pa?Rl.from(s):s instanceof Od?Al.from(s):s instanceof K1?Fv.from(s):s instanceof jd?Ml.from(s,n,o):s instanceof bl?yf.from(s):s instanceof zd?xf.from(s):s instanceof ml?vf.from(s):s instanceof Hd?mf.from(s):s instanceof wl?Ll.from(s):s instanceof Fd?wf.from(s):s instanceof Bd?Ef.from(s):s instanceof _d?jv.from(s):s instanceof tv?Ov.from(s):s instanceof yl?Nl.from(s):s instanceof iv?Uv.from(s):s instanceof rv?Hv.from(s):{kind:"markdownContent",content:de.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return io.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Pl.to(s);case"inlineReference":return Aa.to(s);case"progressMessage":return;case"treeData":return Al.to(s);case"command":return Ml.to(s,n)}}e.toContent=r})(Fl||(Fl={}));var Ta;(function(e){function t(i,r,s,n,o,a,c){const l=[],u=[];for(const p of i.variables.variables)p.kind==="tool"?l.push(p):p.kind==="toolset"?l.push(...p.value):u.push(p);const h={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:u.map(p=>Cf.to(p,n,c)).filter(Oi),toolReferences:l.map(Ol.to),location:kf.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),tools:o,model:s,editedFileEvents:i.editedFileEvents,modeInstructions:i.modeInstructions};return Ge(a,"chatParticipantPrivate")||(delete h.id,delete h.attempt,delete h.enableCommandDetection,delete h.isParticipantDetected,delete h.location,delete h.location2,delete h.editedFileEvents),Ge(a,"chatParticipantAdditions")||(delete h.acceptedConfirmationData,delete h.rejectedConfirmationData,delete h.tools),h}e.to=t})(Ta||(Ta={}));var _v;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(r=>y.revive(r))}}e.to=t})(_v||(_v={}));var kf;(function(e){function t(r){switch(r){case ai.Notebook:return ur.Notebook;case ai.Terminal:return ur.Terminal;case ai.Panel:return ur.Panel;case ai.Editor:return ur.Editor}}e.to=t;function i(r){switch(r){case ur.Notebook:return ai.Notebook;case ur.Terminal:return ai.Terminal;case ur.Panel:return ai.Panel;case ur.Editor:return ai.Editor}}e.from=i})(kf||(kf={}));var Cf;(function(e){function t(i,r,s){let n=i.value;if(!n){let o;try{o=JSON.stringify(i)}catch{o=`kind=${i.kind}, id=${i.id}, name=${i.name}`}s.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${o}`);return}if(Eg(n))n=y.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&Eg(n.uri))n=Or.to(Jt(n));else if(K2(i)){const o=i.references?.[0]?.reference;n=new F8(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),o&&y.isUri(o)?o:void 0)}else if(i.kind==="diagnostic"){const o=i.filterSeverity&&xl.to(i.filterSeverity),a=i.filterUri&&y.revive(i.filterUri).toString();n=new O8(r.map(([c,l])=>i.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||i.filterRange&&!Je.areIntersectingOrTouching(i.filterRange,M.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:n,modelDescription:i.modelDescription}}e.to=t})(Cf||(Cf={}));var Ol;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Ol||(Ol={}));var zv;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(zv||(zv={}));var Ra;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion,details:s.details}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion,details:s.details}}e.from=i;function r(s){return Ro(s,n=>{if(n.$mid===20)return new qd(Ro(n.content,r));if(n.$mid===21)return new pt(n.value);if(n.$mid===22)return new ga(n.value,n.id,n.metadata);if(n.$mid===23)return new Fr(n.value)})}})(Ra||(Ra={}));var Wv;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=Ra.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:pf.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",Mr.Accepted],["rejected",Mr.Rejected],["saved",Mr.Saved]]).get(r.action.outcome)??Mr.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:r.action.kind==="chatEditingHunkAction"?{action:{kind:"chatEditingHunkAction",outcome:new Map([["accepted",Mr.Accepted],["rejected",Mr.Rejected]]).get(r.action.outcome)??Mr.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits,lineCount:r.action.lineCount,linesAdded:r.action.linesAdded,linesRemoved:r.action.linesRemoved},result:n}:{action:r.action,result:n}}e.to=t})(Wv||(Wv={}));var $f;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})($f||($f={}));var If;(function(e){function t(i){return{...i,documentation:de.fromStrict(i.documentation)}}e.from=t})(If||(If={}));var Vv;(function(e){function t(i,r){return Array.isArray(i)?{items:i.map(s=>If.from(s))}:{items:i.items.map(s=>If.from(s)),resourceRequestConfig:i.resourceRequestConfig?qv.from(i.resourceRequestConfig,r):void 0}}e.from=t})(Vv||(Vv={}));var qv;(function(e){function t(i,r){return{...i,pathSeparator:r,cwd:i.cwd}}e.from=t})(qv||(qv={}));var Gv;(function(e){function t(i){return{kind:Qv.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(Gv||(Gv={}));var Qv;(function(e){function t(i){switch(i){case 0:return _n.Word;case 1:return _n.Line;case 2:return _n.Suggest;default:return _n.Unknown}}e.to=t})(Qv||(Qv={}));var Jv;(function(e){function t(i,r){if(i.kind===ph.Ignored){const s=i.supersededBy?r(i.supersededBy):void 0;return{kind:Xo.Ignored,supersededBy:s,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===ph.Accepted)return{kind:Xo.Accepted};return{kind:Xo.Rejected}}e.to=t})(Jv||(Jv={}));var Zv;(function(e){function t(r){return r===is.Label?is.Label:is.Code}e.from=t;function i(r){switch(r){case xm.Label:return is.Label;default:return is.Code}}e.to=i})(Zv||(Zv={}));var Yv;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(Yv||(Yv={}));var Xv;(function(e){function t(i){return i.type==="mcp"?new _8(i.label,i.serverLabel||i.label,i.instructions):i.type==="extension"?new B8(i.extensionId.value,i.label):void 0}e.to=t})(Xv||(Xv={}));var V8;(function(e){function t(r){return new qd(r.content.map(s=>s.kind==="text"?new pt(s.value,s.audience):new Fr(s.value)))}e.to=t;function i(r,s){r.toolResultMessage&&T(s,"chatParticipantPrivate");const n=o=>{o.audience&&T(s,"languageModelToolResultAudience")};return{content:r.content.map(o=>{if(o instanceof pt)return n(o),{kind:"text",value:o.value,audience:o.audience};if(o instanceof Fr)return{kind:"promptTsx",value:o.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:de.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(o=>y.isUri(o)?o:Or.from(o))}}e.from=i})(V8||(V8={}));var Df;(function(e){function t(r){return new H8(r.content.map(s=>s.kind==="text"?new pt(s.value,s.audience):s.kind==="data"?new hr(s.value.data.buffer,s.value.mimeType,s.audience):new Fr(s.value)))}e.to=t;function i(r,s){r.toolResultMessage&&T(s,"chatParticipantPrivate");const n=l=>{l.audience&&T(s,"languageModelToolResultAudience")};let o=!1,a;Array.isArray(r.toolResultDetails)?a=r.toolResultDetails?.map(l=>y.isUri(l)?l:Or.from(l)):r.toolResultDetails2&&(a={output:{type:"data",mimeType:r.toolResultDetails2.mime,value:ne.wrap(r.toolResultDetails2.value)}},o=!0);const c={content:r.content.map(l=>{if(l instanceof pt)return n(l),{kind:"text",value:l.value,audience:l.audience};if(l instanceof Fr)return{kind:"promptTsx",value:l.value};if(l instanceof hr)return n(l),o=!0,{kind:"data",value:{mimeType:l.mimeType,data:ne.wrap(l.data)},audience:l.audience};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:de.fromStrict(r.toolResultMessage),toolResultDetails:a};return o?new ei(c):c}e.from=i})(Df||(Df={}));var Pf;(function(e){function t(i){return i}e.fromThemeIcon=t})(Pf||(Pf={}));var Kv;(function(e){function t(r){return{query:r.query,kind:i(r.kind),settings:r.settings}}e.fromSettingsSearchResult=t;function i(r){switch(r){case Ls.EMBEDDED:return Ls.EMBEDDED;case Ls.LLM_RANKED:return Ls.LLM_RANKED;case Ls.CANCELED:return Ls.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(Kv||(Kv={}));var Ul;(function(e){function t(r){return!!r.uri}function i(r){return Nc.toSerialized(t(r)?{type:2,uri:r.uri,headers:Object.entries(r.headers)}:{type:1,cwd:r.cwd?.fsPath,args:r.args,command:r.command,env:r.env,envFile:void 0})}e.from=i})(Ul||(Ul={}));var Gs=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},e0=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},t0=class{constructor(e){this.keyword=e}},as;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(as||(as={}));var Af;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(Af||(Af={}));var q8=2e4,G8="\u27EA ",Q8=" characters skipped \u27EB",SR=(G8.length+Q8.length+5)*2,rz=H("searchService"),J8;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(J8||(J8={}));var Z8;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(Z8||(Z8={}));function Y8(e){return!!e.rangeLocations&&!!e.previewText}var X8;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(X8||(X8={}));var xR=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&ER(s)){e=sD(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+SR){const p=G8+(u-a)+Q8;n+=p+e.slice(u,h),o+=u-(a+p.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new kR(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=ig(t,a=>({preview:new K8(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function ER(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var K8=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},kR=class extends K8{constructor(e,t,i){super(e,t,e,i)}},eS;(function(e){e.List="list",e.Tree="tree"})(eS||(eS={}));var tS;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(tS||(tS={}));var iS;(function(e){e.Auto="auto",e.Manual="manual",e.RunOnEmpty="runOnEmpty"})(iS||(iS={}));function CR(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=En(s,it(i)),s=En(s,it(r),!0),s}function rS(e,t){return e.excludePattern&&Mc(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Mc(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(Ku(t,r)){const s=fc(r,t);return!i.includePattern||!!Mc(i.includePattern,s)}else return!1}):!1:!0}var sS;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(sS||(sS={}));function La(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var nS=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>_o(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=_o(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return Is(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>$R(t)||e,!1)}};function $R(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function IR(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?oS(r):{})),t.then(r=>!!r[i]))}function DR(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?oS(r):{}}return!!t[i]}}function oS(e){const t={};for(const i of e)t[i]=!0;return t}function aS(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var i0={matchLines:100,charsPerLine:1e4},PR=!1,AR=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},ro;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(ro||(ro={}));var TR=class s${static{this.INSTANCE=new s$}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=ro.Uninitialized}g(){if(this.d===ro.Uninitialized){if(globalThis.define){this.d=ro.InitializedExternal;return}}else return;this.d=ro.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new AR(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${q.vscodeFileResource}://${M4}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===ro.InitializedExternal)return new Promise(o=>{const a=ni();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=y.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},r0=new Map;async function s0(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const r=t?`${e}/${t}`:e;if(r0.has(r))return r0.get(r);let s;if(/^\w[\w\d+.-]*:\/\//.test(r))s=r;else{const c=`${PR&&i&&!ko?wD:vD}/${r}`;s=F4.asBrowserUri(c).toString(!0)}const n=TR.INSTANCE.load(s);return r0.set(r,n),n}var Tf="utf8",n0="utf8bom",Rf="utf16be",Lf="utf16le",Nf=[254,255],o0=[255,254],jl=[239,187,191],RR=512,LR=512,NR=512*8,MR=512*128,cS;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(cS||(cS={}));var FR=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},OR=class n${static async create(t){let i;if(t!==Tf)i=(await s0("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(lS(t));else{const r=new TextDecoder;i={write(s){return r.decode(s,{stream:!0})},end(){return r.decode()}}}return new n$(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function UR(e,t){const i=t.minBytesRequiredForDetection??t.guessEncoding?NR:LR;return new Promise((r,s)=>{const n=Cy(h=>h.join("")),o=[];let a=0,c;const l=new lt,u=async()=>{try{const h=await GR({buffer:ne.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(h.seemsBinary&&t.acceptTextOnly)throw new FR("Stream is binary but only text is accepted for decoding",1);h.encoding=await t.overwriteEncoding(h.encoding),c=await OR.create(h.encoding);const p=c.write(ne.concat(o).buffer);n.write(p),o.length=0,a=0,r({stream:n,detected:h})}catch(h){l.cancel(),n.destroy(),s(h)}};$y(e,{onData:async h=>{c?n.write(c.write(h.buffer)):(o.push(h),a+=h.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:h=>n.error(h),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function jR(e,t,i){const s=(await s0("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(lS(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Tf:case n0:return ne.wrap(Uint8Array.from(jl));case Rf:return ne.wrap(Uint8Array.from(Nf));case Lf:return ne.wrap(Uint8Array.from(o0))}const c=s.end();return c&&c.length>0?(n=!0,ne.wrap(c)):null}return n=!0,ne.wrap(s.write(a))}}}function lS(e){return e===n0||e===null?Tf:e}function HR(e,t){if(!e||t<Nf.length)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(i===Nf[0]&&r===Nf[1])return Rf;if(i===o0[0]&&r===o0[1])return Lf;if(t<jl.length)return null;const s=e.readUInt8(2);return i===jl[0]&&r===jl[1]&&s===jl[2]?n0:null}var BR=["ascii","utf-16","utf-32"];async function _R(e,t){const i=await s0("jschardet","dist/jschardet.min.js"),r=e.slice(0,MR),s=qR(r.buffer);t&&(t=ft(t.map(a=>VR(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(s,t?{detectEncodings:t}:void 0)}catch{return null}if(!n||!n.encoding)return null;const o=n.encoding.toLowerCase();return 0<=BR.indexOf(o)?null:WR(n.encoding)}var zR={ibm866:"cp866",big5:"cp950"};function uS(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function WR(e){const t=uS(e);return zR[t]||t}function VR(e){const t=uS(e),i=QR[t];return i?i.guessableName:void 0}function qR(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function GR({buffer:e,bytesRead:t},i,r){let s=HR(e,t),n=!1;if(s!==Rf&&s!==Lf&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<RR;l++){const u=l%2===1,h=e.readUInt8(l)===0;if(h&&(c=!0),o&&(u&&!h||!u&&h)&&(o=!1),a&&(u&&h||!u&&!h)&&(a=!1),h&&!o&&!a)break}c&&(o?s=Lf:a?s=Rf:n=!0)}return i&&!n&&!s&&e?_R(e.slice(0,t),r).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:s}}var a0={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},QR=(()=>{const e={};for(const t in a0)a0[t].guessableName&&(e[t]=a0[t]);return e})(),sz=H("textFileService"),hS;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(hS||(hS={}));var dS;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(dS||(dS={}));var fS;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(fS||(fS={}));var pS;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(pS||(pS={}));function JR(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function Hl(e,t,i){return new gc(r=>c0(r,i)).isEqual(e,t)}function ZR(e,t,i){return Hl(e.uri,t.uri,i)?0:mn(e.uri.toString(),t.uri.toString())}function YR(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:Hl(e.uri,t.uri,i)?mn(e.name,t.name):mn(e.uri.toString(),t.uri.toString())}function gS(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return u3(s,n,(o,a)=>i(o,a,r))}function c0(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var l0=class Jb extends NP{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],p=i;i?a.forEach((S,E)=>{const C=y.revive(S.uri),P=Jb.o(r||i,C,s);P?(P.name=S.name,P.index=S.index,h.push(P)):h.push({uri:C,name:S.name,index:E})}):h.push(...a.map(({uri:S,name:E,index:C})=>({uri:y.revive(S),name:E,index:C}))),h.sort((S,E)=>S.index<E.index?-1:1);const f=new Jb(n,o,h,!!l,c?y.revive(c):null,!!u,S=>c0(S,s)),{added:m,removed:w}=gS(p?p.workspaceFolders:[],f.workspaceFolders,ZR,s);return{workspace:f,added:m,removed:w}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(Hl(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new O5(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=Ps.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=Mg(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},u0=class{constructor(t,i,r,s,n){this.c=new D,this.onDidChangeWorkspace=this.c.event,this.g=new D,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new oc,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new AP,this.k=new kr,this.o=t.getProxy(V.MainThreadWorkspace),this.q=t.getProxy(V.MainThreadMessageService);const o=i.workspace;this.l=o?new l0(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>c0(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:q.untitled,path:Jr(Mg(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(h=>Hl(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||Ng(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||Ng(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((p,f)=>f!==u&&Hl(h.uri,p.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=gS(o,a,YR,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,h=>{this.n=void 0;const p={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(TP.Error,d(2976,null,u,h.toString()),p,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=y.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=j4(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=l0.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=l0.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}findFiles(t,i,r,s,n=st.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:r,useExcludeSettings:a?as.FilesExclude:as.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=st.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,s)}async z(t,i,r){if(r.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=mS(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===as.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==as.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Mf(Li.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,r)}async A(t,i){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,i).then(n=>Array.isArray(n)?n.map(o=>y.revive(o)):[]))??[])).flat()}findTextInFiles2(t,i,r,s=st.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${r.value}, entryPoint: findTextInFiles2`);const n=p=>{if(!i)return{folder:void 0,options:{}};const f=p?Mf(Li.from(p)):void 0,m=i.exclude?mS(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===as.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==as.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:f?.pattern,excludePattern:m},folder:f?.folder}},a=(i?.include?.map(p=>n(p))??[n(void 0)]).filter(p=>!!p),c=new he,l=c.add(new D),u=this.findTextInFilesBase(t,a,(p,f)=>l.fire({result:p,uri:f}),s);return{results:new mc(async p=>{c.add(l.event(f=>{const m=f.result,w=f.uri;Y8(m)?p.emitOne(new Gs(w,m.rangeLocations.map(S=>({previewRange:new ye(S.preview.startLineNumber,S.preview.startColumn,S.preview.endLineNumber,S.preview.endColumn),sourceRange:new ye(S.source.startLineNumber,S.source.startColumn,S.source.endLineNumber,S.source.endColumn)})),m.previewText)):p.emitOne(new e0(w,m.text,m.lineNumber))})),await u}),complete:u.then(p=>(c.dispose(),{limitHit:p?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=st.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=Jt(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=st.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=Mf(Li.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,p)=>{Y8(h)?r({uri:p,preview:{text:h.previewText,matches:ig(h.rangeLocations,f=>new ye(f.preview.startLineNumber,f.preview.startColumn,f.preview.endLineNumber,f.preview.endColumn))},ranges:ig(h.rangeLocations,f=>new ye(f.source.startLineNumber,f.source.startColumn,f.source.endLineNumber,f.source.endColumn))}):r({uri:p,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return y.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return y.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),ce(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(y.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),ce(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(y.revive(t),{targetScheme:i},r)}async decode(t,i){const[r,s]=this.F(i),n=await this.o.$resolveDecoding(r,s),o=(await UR(B3(ne.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(r,a,s)})).stream;return A3(o,a=>a.join(""))}async encode(t,i){const[r,s]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(r,s);if(n===Tf&&!o)return ne.fromString(t).buffer;const a=await jR(JR(t),n,{addBOM:o});return H3(a).buffer}F(t){const i=Eg(t?.uri)?t.uri:void 0,r=typeof t?.encoding=="string"?t.encoding:void 0;return[i,r?{encoding:r}:void 0]}};u0=__decorate([__param(0,Le),__param(1,Tt),__param(2,Lo),__param(3,_e),__param(4,rh)],u0);var cs=H("IExtHostWorkspace");function Mf(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=y.revive(e.baseUri)),{pattern:t,folder:i}}function mS(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=Mf(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var vS;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(vS||(vS={}));var wS;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(wS||(wS={}));var bS;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(bS||(bS={}));var h0;(function(e){e.DEFAULT={allowTrailingComma:!0}})(h0||(h0={}));function XR(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(w){let S=0,E=0;for(;S<w;){const C=e.charCodeAt(i);if(C>=48&&C<=57)E=E*16+C-48;else if(C>=65&&C<=70)E=E*16+C-65+10;else if(C>=97&&C<=102)E=E*16+C-97+10;else break;i++,S++}return S<w&&(E=-1),E}function l(w){i=w,s="",n=0,o=16,a=0}function u(){const w=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&Na(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&Na(e.charCodeAt(i)))for(i++;i<e.length&&Na(e.charCodeAt(i));)i++;else return a=3,e.substring(w,i);let S=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&Na(e.charCodeAt(i))){for(i++;i<e.length&&Na(e.charCodeAt(i));)i++;S=i}else a=3;return e.substring(w,S)}function h(){let w="",S=i;for(;;){if(i>=r){w+=e.substring(S,i),a=2;break}const E=e.charCodeAt(i);if(E===34){w+=e.substring(S,i),i++;break}if(E===92){if(w+=e.substring(S,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const P=c(4);P>=0?w+=String.fromCharCode(P):a=4;break}default:a=5}S=i;continue}if(E>=0&&E<=31)if(Ff(E)){w+=e.substring(S,i),a=2;break}else a=6;i++}return w}function p(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let w=e.charCodeAt(i);if(d0(w)){do i++,s+=String.fromCharCode(w),w=e.charCodeAt(i);while(d0(w));return o=15}if(Ff(w))return i++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(w){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=h(),o=10;case 47:{const S=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!Ff(e.charCodeAt(i));)i++;return s=e.substring(S,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const E=r-1;let C=!1;for(;i<E;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,C=!0;break}i++}return C||(i++,a=1),s=e.substring(S,i),o=13}return s+=String.fromCharCode(w),i++,o=16}case 45:if(s+=String.fromCharCode(w),i++,i===r||!Na(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&f(w);)i++,w=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),i++,o=16}}function f(w){if(d0(w)||Ff(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=p();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>i,scan:t?m:p,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function d0(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Ff(e){return e===10||e===13||e===8232||e===8233}function Na(e){return e>=48&&e<=57}var yS;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(yS||(yS={}));function KR(e,t,i=h0.DEFAULT){const r=XR(e,!1);function s(G){return G?()=>G(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(G){return G?me=>G(me,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),p=n(t.onSeparator),f=s(t.onComment),m=n(t.onError),w=i&&i.disallowComments,S=i&&i.allowTrailingComma;function E(){for(;;){const G=r.scan();switch(r.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:w||C(11);break;case 2:C(12);break;case 6:C(16);break}switch(G){case 12:case 13:w?C(10):f();break;case 16:C(1);break;case 15:case 14:break;default:return G}}}function C(G,me=[],xe=[]){if(m(G),me.length+xe.length>0){let ke=r.getToken();for(;ke!==17;){if(me.indexOf(ke)!==-1){E();break}else if(xe.indexOf(ke)!==-1)break;ke=E()}}}function P(G){const me=r.getTokenValue();return G?h(me):a(me),E(),!0}function Z(){switch(r.getToken()){case 11:{let G=0;try{G=JSON.parse(r.getTokenValue()),typeof G!="number"&&(C(2),G=0)}catch{C(2)}h(G);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return E(),!0}function W(){return r.getToken()!==10?(C(3,[],[2,5]),!1):(P(!1),r.getToken()===6?(p(":"),E(),B()||C(4,[],[2,5])):C(5,[],[2,5]),!0)}function oe(){o(),E();let G=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(G||C(4,[],[]),p(","),E(),r.getToken()===2&&S)break}else G&&C(6,[],[]);W()||C(4,[],[2,5]),G=!0}return c(),r.getToken()!==2?C(7,[2],[]):E(),!0}function O(){l(),E();let G=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(G||C(4,[],[]),p(","),E(),r.getToken()===4&&S)break}else G&&C(6,[],[]);B()||C(4,[],[4,5]),G=!0}return u(),r.getToken()!==4?C(8,[4],[]):E(),!0}function B(){switch(r.getToken()){case 3:return O();case 1:return oe();case 10:return P(!0);default:return Z()}}return E(),r.getToken()===17?i.allowEmptyContent?!0:(C(4,[],[]),!1):B()?(r.getToken()!==17&&C(9,[],[]),!0):(C(4,[],[]),!1)}function Bl(e){return Object.isFrozen(e)?e:tm(e)}var Ma=class po{static createEmptyModel(t){return new po({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(i=>{if(i instanceof po)return i;const r=new eL("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Mh(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Bl(r.rawConfiguration.getValue(t))},get override(){return i?Bl(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Bl(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new po(n,a,[],void 0,r.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Bl(s):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?Mh(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return wo(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return wo(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=it(this.contents),r=it(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>Fi(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=wo(c.keys)):r.push(it(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new po(i,s,r,!n.length||n.every(o=>o instanceof po)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of wo([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=it(n),this.i(n,o)):n=o),r[s]=n}return new po(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&xt(t[r])&&xt(i[r])){this.i(t[r],i[r]);continue}t[r]=it(i[r])}}j(t){let i=null,r=null;const s=n=>{n&&(r?this.i(r,n):r=it(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),dT(this.contents,t),Pr.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>Fi(r.identifiers,Hc(t))),1))}k(t,i,r){if(F9(this.contents,t,i,s=>this.f.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),Pr.test(t)){const s=Hc(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:Qm(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Fi(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},eL=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||Ma.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!Et(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new Ma(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{KR(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=Vt.as(qo.Configuration),r=i.getConfigurationProperties(),s=i.getExcludedConfigurationProperties(),n=this.j(e,r,s,!0,t);e=n.raw;const o=Qm(e,l=>this.g.error(`Conflict in settings file ${this.f}: ${l}`)),a=Object.keys(e),c=this.m(e,l=>this.g.error(`Conflict in settings file ${this.f}: ${l}`));return{contents:o,keys:a,overrides:c,restricted:n.restricted,hasExcludedProperties:n.hasExcludedProperties}}j(e,t,i,r,s){let n=!1;if(!s?.scopes&&!s?.skipRestricted&&!s?.skipUnregistered&&!s?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:n};const o={},a=[];for(const c in e)if(Pr.test(c)&&r){const l=this.j(e[c],t,i,!1,s);o[c]=l.raw,n=n||l.hasExcludedProperties,a.push(...l.restricted)}else{const l=t[c];l?.restricted&&a.push(c),this.l(c,l,i,s)?o[c]=e[c]:n=!0}return{raw:o,restricted:a,hasExcludedProperties:n}}l(e,t,i,r){if(r.exclude?.includes(e))return!1;if(r.include?.includes(e))return!0;if(r.skipRestricted&&t?.restricted||r.skipUnregistered&&!t)return!1;const s=t??i[e],n=s?typeof s.scope<"u"?s.scope:4:void 0;return n===void 0||r.scopes===void 0?!0:r.scopes.includes(n)}m(e,t){const i=[];for(const r of Object.keys(e))if(Pr.test(r)){const s={};for(const n in e[r])s[n]=e[r][n];i.push({identifiers:Hc(r),keys:Object.keys(s),contents:Qm(s,t)})}return i}},tL=class{constructor(e,t,i,r,s,n,o,a,c,l,u,h,p){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=p}get value(){return Bl(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},f0=class o${constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Bt,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=Ma.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new tL(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=Qs(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of Hc(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!mi(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=Qs(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Qs(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Qs(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Qs(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Qs(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Qs(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=Qs(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new Ma(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);if(i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){s=s.merge();for(const n of this.l.keys)s.setValue(n,this.l.getValue(n))}return s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,h)=>(u.set(y.revive(h[0]),this.E(h[1],i)),u),new Bt);return new o$(r,s,n,o,a,c,l,Ma.createEmptyModel(i),new Bt,i)}static E(t,i){return new Ma(t.contents,t.keys,t.overrides,t.raw,i)}},iL=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=f0.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!mi(o,a)}return!0}};function Qs(e,t){const{added:i,removed:r,updated:s}=SS(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=SS({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function SS(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Mh(t.contents,n),a=Mh(e.contents,n);mi(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function Of(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function rL(e){return e instanceof y}function sL(e){return e&&e.uri instanceof y&&e.languageId&&typeof e.languageId=="string"}function nL(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function oL(e){return e&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function xS(e){if(rL(e))return{resource:e};if(sL(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(nL(e))return{overrideIdentifier:e.languageId};if(oL(e))return{resource:e.uri};if(e===null)return{resource:null}}var p0=class{constructor(t,i,r){this.a=t.getProxy(V.MainThreadConfiguration),this.c=i,this.b=r,this.d=new kr,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new aL(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};p0=__decorate([__param(0,Le),__param(1,cs),__param(2,_e)],p0);var aL=class{constructor(e,t,i,r){this.a=new D,this.b=e,this.f=r,this.c=t,this.e=f0.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=f0.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=xS(t)||{},s=this.g(this.e.getValue(e,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case oa.Global:return 2;case oa.Workspace:return 5;case oa.WorkspaceFolder:return 6}}const o={has(a){return typeof Of(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=Of(s,a);if(typeof l>"u")l=c;else{let u;const h=(p,f)=>{if(xt(p)){let m;const w=()=>{u=u||it(s),m=m||Of(u,f)};return new Proxy(p,{get:(S,E)=>{if(typeof E=="string"&&E.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||Of(u,f),m[E];const C=S[E];return typeof E=="string"?h(C,`${f}.${E}`):C},set:(S,E,C)=>(w(),m&&(m[E]=C),!0),deleteProperty:(S,E)=>(w(),m&&delete m[E],!0),defineProperty:(S,E,C)=>(w(),m&&Object.defineProperty(m,E,C),!0)})}return Array.isArray(p)?it(p):p};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:it(c.policy?.value??c.default?.value),globalLocalValue:it(c.userLocal?.value),globalRemoteValue:it(c.userRemote?.value),globalValue:it(c.user?.value??c.application?.value),workspaceValue:it(c.workspace?.value),workspaceFolderValue:it(c.workspaceFolder?.value),defaultLanguageValue:it(c.default?.override),globalLocalLanguageValue:it(c.userLocal?.override),globalRemoteLanguageValue:it(c.userRemote?.override),globalLanguageValue:it(c.user?.override??c.application?.override),workspaceLanguageValue:it(c.workspace?.override),workspaceFolderLanguageValue:it(c.workspaceFolder?.override),languageIds:it(c.overrideIdentifiers)}}};return typeof s=="object"&&En(o,s,!1),Object.freeze(o)}g(e){const t=i=>xt(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=Pr.test(e)?5:this.d.get(e),s=i?`[${i.value}] `:"";if(r===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new iL(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,xS(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},ls=H("IExtHostConfiguration"),cL=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},_l=class a$ extends te{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.B(new D),this.onDidChange=this.c.event,this.f=0,this.g=i,this.r()}r(){this.g.sort(uL),this.h=new Ds,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const r of i)this.m.has(r)||this.m.set(r,[]),this.m.get(r).push(t)}}set(t){return this.g=t,this.r(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=kS(this.g,i),this.g=this.g.concat(t);const r=a$.s(this.g);return this.g=kS(this.g,r.map(s=>s.identifier)),this.r(),this.f++,this.c.fire(void 0),new cL(this.f,r)}static s(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new Ds;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(Ve.toKey(a.identifier),Ve.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new lL(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},lL=class{constructor(e,t){this.versionId=e,this.extensions=t}},ES;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(ES||(ES={}));function uL(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=Oe.basename(e.extensionLocation.path),n=Oe.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function kS(e,t){const i=new bn(t);return e.filter(r=>!i.has(r.identifier))}var Uf=class c${static{this.NONE=new c$(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},g0=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Uf(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},jf=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},hL=class extends jf{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,te.None)}},dL=class extends jf{constructor(){super(!1,null,Uf.NONE,{activate:void 0,deactivate:void 0},void 0,te.None)}},Hf=class extends jf{constructor(e){super(!0,e,Uf.NONE,{activate:void 0,deactivate:void 0},void 0,te.None)}},m0=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new Ds,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Hf(n));return this.c.onExtensionActivationError(t.id,n,new t8(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new Hf(l));return this.c.onExtensionActivationError(i.identifier,l,new t8(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new v0(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return _l.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};m0=__decorate([__param(3,_e)],m0);var v0=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new kr,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new Hf(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new Hf(i),this.b&&xr(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};v0=__decorate([__param(6,_e)],v0);var CS=class{constructor(e,t){this.c=t,this.b=new D,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(V.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},w0=H("IExtHostStorage"),$S=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new wn(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new Zr;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},fL=class extends $S{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},jr,b0=jr=class{constructor(t,i){this.b=new Map,this.c=new OD,this.a=t.getProxy(V.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===Uo.Readonly?1:void 0}}catch(n){jr.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return jr.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return jr.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return jr.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,ne.wrap(n))}catch(o){return jr.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return jr.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return jr.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return jr.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(((await t.stat(r)).type&Pn.Directory)===0)throw Rt.FileExists(`Unable to create folder '${r.scheme===q.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(mh(n)!==be.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(mh(o)!==be.FileExists)throw o}}}static e(t){if(t instanceof Rt)throw t;if(t instanceof B6)switch(t.code){case be.FileExists:throw Rt.FileExists(t.message);case be.FileNotFound:throw Rt.FileNotFound(t.message);case be.FileNotADirectory:throw Rt.FileNotADirectory(t.message);case be.FileIsADirectory:throw Rt.FileIsADirectory(t.message);case be.NoPermissions:throw Rt.NoPermissions(t.message);case be.Unavailable:throw Rt.Unavailable(t.message);default:throw new Rt(t.message,t.name)}if(!(t instanceof Error))throw new Rt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Rt.Unavailable(t.message);switch(t.name){case be.FileExists:throw Rt.FileExists(t.message);case be.FileNotFound:throw Rt.FileNotFound(t.message);case be.FileNotADirectory:throw Rt.FileNotADirectory(t.message);case be.FileIsADirectory:throw Rt.FileIsADirectory(t.message);case be.NoPermissions:throw Rt.NoPermissions(t.message);case be.Unavailable:throw Rt.Unavailable(t.message);default:throw new Rt(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?Be:SD,isReadonly:!!r?.isReadonly}),ce(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??Be}};b0=jr=__decorate([__param(0,Le),__param(1,Lo)],b0);var Bf=H("IExtHostConsumerFileSystem"),y0=H("IExtensionStoragePaths"),S0=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(y.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};S0=__decorate([__param(0,Tt),__param(1,_e),__param(2,Bf)],S0);var hz=H("tunnelService"),dz=H("sharedTunnelsService"),IS;(function(e){e.Http="http",e.Https="https"})(IS||(IS={}));var so;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(so||(so={}));var DS;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(DS||(DS={}));function pL(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var x0=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function PS(e){return x0.indexOf(e)>=0}var E0=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function AS(e){return E0.indexOf(e)>=0}var gL=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new D,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},TS=class extends te{constructor(t,i){super(),this.r=t,this.s=i,this.a=new D,this.onTunnelOpened=this.a.event,this.b=new D,this.onTunnelClosed=this.b.event,this.c=new D,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(AS(t)||PS(t))&&(t=x0[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const p=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(p),p}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.y(t,i,s)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];PS(t)?(r.push(...x0),r.push(...E0)):AS(t)&&r.push(...E0);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!pL(t)}G(t,i,r,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==so.Private:void 0,protocol:a},p=t.forwardPort(h,u);return p?(this.z(i,r,p),p.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),p}};TS=__decorate([__param(0,_e),__param(1,Uc)],TS);var mL=class extends gL{},k0;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?so.Public:so.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==so.ConstantPrivate&&r.privacy!==so.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(k0||(k0={}));var C0=H("IExtHostTunnelService"),$0=class extends te{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new D,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(V.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new mL(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Ie(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,st.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(ce(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2974,null),themeIcon:"lock"},{id:"public",label:d(2975,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return ce(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),k0.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};$0=__decorate([__param(0,Le),__param(1,Tt),__param(2,_e)],$0);function vL(e){return[...e.entries()]}function wL(e){return e?[...e.entries()]:[]}var bL=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},no=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},Fa=(e,t)=>e===t,Js={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:Fa,description:Fa,sortText:Fa,busy:Fa,error:Fa,canResolveChildren:Fa,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},Oa=e=>t=>({op:4,update:e(t)}),yL=(e,t)=>({range:(()=>{let i;const r=Oa(s=>({range:Je.lift(M.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),Js.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:no(e,t,Js.label,Oa(i=>({label:i}))),description:no(e,void 0,Js.description,Oa(i=>({description:i}))),sortText:no(e,void 0,Js.sortText,Oa(i=>({sortText:i}))),canResolveChildren:no(e,!1,Js.canResolveChildren,i=>({op:2,state:i})),busy:no(e,!1,Js.busy,Oa(i=>({busy:i}))),error:no(e,void 0,Js.error,Oa(i=>({error:de.fromStrict(i)||null}))),tags:no(e,[],Js.tags,(i,r)=>({op:1,new:i.map(fr.from),old:r.map(fr.from)}))}),SL=e=>{const t=Ne.fromString(e.extId),i=new zl(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return i.range=M.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>fr.to({id:S9(r).tagId})),i},RS=e=>{let t;for(const i of e.tests){const r=SL(i.item);qh(r).parent=t,t=r}return t},zl=class l${constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=BT(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof I0?void 0:n.parent}},children:{value:HT(n,qh,l$),enumerable:!0,writable:!1},...yL(n,r)})}},I0=class extends zl{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},xL=class extends OT{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:qh,getChildren:r=>r.children,root:new I0(e,t),toITestItem:qs.from})}},D0=class extends te{constructor(t,i,r){super(),this.n=i,this.a=this.B(new D),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new D),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(r.createLogger(s,{name:d(2971,null,this.h?" (Not Sent)":""),hidden:!0,group:CT}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new LS(i,r,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.c=r??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.n.version,i["common.vscodereleasedate"]=this.n.date,i["common.isnewappinstall"]=NS(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case ac.Web:i["common.uikind"]="web";break;case ac.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=jg(IT(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};D0=__decorate([__param(1,Tt),__param(2,Sn)],D0);var LS=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new D,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=e8(t,[]),this.c&&(t=En(t,this.c)),this.b||(t=En(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=e8(i,[]),s=new Error(r.message,{cause:r.cause});s.stack=r.stack,s.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function NS(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var _f=H("IExtHostTelemetry"),P0=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(V.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(V.MainThreadTelemetry),this.converter=new EL(this,s=>{const n=this.c.get(s);return n?.result===fe.Void?n:void 0},i),this.f=[{processArgument(s){return Jt(s)}},{processArgument(s){return Ro(s,function(n){if(Je.isIRange(n))return M.to(n);if(Hi.isIPosition(n))return ze.to(n);if(Je.isIRange(n.range)&&y.isUri(n.uri))return bi.to(n);if(n instanceof ne)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Ie(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Ie(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=Ro(i,function(o){if(o instanceof $e)return ze.from(o);if(o instanceof ye)return M.from(o);if(o instanceof Bi)return bi.from(o);if(Tr.isNotebookRange(o))return Ur.from(o);if(o instanceof ArrayBuffer)return s=!0,ne.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,ne.wrap(o);if(o instanceof ne)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new ei(n):n,r);return Jt(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{Ey(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=hn.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(xr(l)||this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(Ao(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&(i.startsWith("code.copilot.logStructured")||this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new Zm(i),duration:r}))}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};P0=__decorate([__param(0,Le),__param(1,_e),__param(2,_f)],P0);var oo=H("IExtHostCommands"),EL=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${ni()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(rc(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(ce(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},F=class Ni{static{this.Uri=new Ni("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new Ni("position","A position in a text document",t=>$e.isPosition(t),ze.from)}static{this.Range=new Ni("range","A range in a text document",t=>ye.isRange(t),M.from)}static{this.Selection=new Ni("selection","A selection in a text document",t=>Ar.isSelection(t),dr.from)}static{this.Number=new Ni("number","",t=>typeof t=="number",t=>t)}static{this.String=new Ni("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Ni(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Ni("item","A call hierarchy item",t=>t instanceof a1,Xn.from)}static{this.TypeHierarchyItem=new Ni("item","A type hierarchy item",t=>t instanceof z1,eo.from)}static{this.TestItem=new Ni("testItem","A VS Code TestItem",t=>t instanceof zl,qs.from)}static{this.TestProfile=new Ni("testProfile","A VS Code test profile",t=>t instanceof E8,Lv.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Ni(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Ni(t??this.name,i??this.description,this.validate,this.convert)}},fe=class u${static{this.Void=new u$("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},pe=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Ua=H("IExtHostTerminalService"),MS=class extends te{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.s=this.B(new D),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:OS(e.iconPath)??void 0,color:No.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0,shellIntegrationNonce:e.shellIntegrationNonce??void 0})}async createExtensionTerminal(e,t,i,r,s,n){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:No.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,i),isTransient:!0,shellIntegrationNonce:n??void 0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:It.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},A0=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new D,this.onProcessData=this.a.event,this.b=new D,this.d=new D,this.onDidChangeProperty=this.d.event,this.f=new D,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}sendSignal(e){}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},kL=1,T0=class extends te{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new xo),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new D,this.onDidCloseTerminal=this.I.event,this.J=new D,this.onDidOpenTerminal=this.J.event,this.L=new D,this.onDidChangeActiveTerminal=this.L.event,this.M=new D,this.onDidChangeTerminalDimensions=this.M.event,this.N=new D,this.onDidChangeTerminalState=this.N.event,this.O=new D,this.onDidChangeShell=this.O.event,this.P=new D({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new D({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=r.getProxy(V.MainThreadTerminalService),this.y=new bL(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new MS(this.a,ni(),t,t.name),s=new A0(t.pty);return r.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,OS(t.iconPath),$L(t.color),t.shellIntegrationNonce).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(r),r.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new A0(i),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.Q.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new MS(this.a,t,n,r);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:d(2972,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const r=new he;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof A0&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,r){if(this.D.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.D.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Ie(()=>{this.D.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...r){if(this.C.has(i.id))throw new Error(`Terminal completion provider "${i.id}" already registered`);return this.C.set(i.id,i),this.a.$registerCompletionProvider(i.id,t.identifier.value,...r),new Ie(()=>{this.C.delete(i.id),this.a.$unregisterCompletionProvider(i.id)})}async $provideTerminalCompletions(t,i){const r=new lt().token;if(r.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,i,r);if(n==null)return;const o=!Kt||this.activeTerminal.state?.shell==="gitbash"?"/":"\\";return Vv.from(n,o)}$acceptTerminalShellType(t,i){const r=this.getTerminalById(t);r?.setShellType(i)&&this.N.fire(r.value)}registerTerminalQuickFixProvider(t,i,r){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,r),this.a.$registerQuickFixProvider(t,i),new Ie(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new lt().token;if(r.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new he;if(this.w.value=o,!Array.isArray(n))return n?$f.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=$f.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new lt().token;let s=await this.D.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Ie(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new lt;this.H.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.z)c.push(Po.withAsyncBody(async p=>{n.token.onCancellationRequested(()=>p({provider:h,links:[]}));const f=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||p({provider:h,links:f})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(p=>{const f={id:kL++,startIndex:p.startIndex,length:p.length,label:p.tooltip};return u.set(f.id,{provider:h.provider,link:p}),f}));return this.G.set(t,u),o}$activateLink(t,i){const r=this.G.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}W(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}X(t,i){const r=this.Y(t,i);return r!==null?t[r]:null}Y(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new FS),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const r=vL(i.map),s=wL(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.B(new FS(i[1]));this.$(r,s)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};T0=__decorate([__param(1,oo),__param(2,Le)],T0);var FS=class extends te{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new D,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new CL(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Qo.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Qo.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Qo.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?US(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,US(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},CL=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new D}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},R0=class extends T0{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new eg}createTerminalFromOptions(t,i){throw new eg}};R0=__decorate([__param(0,oo),__param(1,Le)],R0);function OS(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function $L(e){return No.isThemeColor(e)?e:void 0}function US(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var IL=H("progressService"),jS;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(jS||(jS={}));var yz=Object.freeze({total(){},worked(){},done(){}}),L0=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},HS=class extends te{constructor(t,i){super(),this.a=new Zr,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(ce(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};HS=__decorate([__param(1,IL)],HS);var xz=H("editorProgressService"),DL={label:d(6068,null),order:Number.MAX_SAFE_INTEGER},BS="__";function PL(e){return typeof e=="object"&&e!==null&&"wwwAuthenticate"in e&&typeof e.wwwAuthenticate=="string"}var Ez=H("IAuthenticationService"),kz=H("IAuthenticationExtensionsService"),N0="/.well-known",Cz=`${N0}/oauth-protected-resource`,AL=`${N0}/oauth-authorization-server`,_S=`${N0}/openid-configuration`,TL=" ",zS;(function(e){e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedGrantType="unsupported_grant_type",e.InvalidScope="invalid_scope"})(zS||(zS={}));var WS;(function(e){e.AuthorizationPending="authorization_pending",e.SlowDown="slow_down",e.AccessDenied="access_denied",e.ExpiredToken="expired_token"})(WS||(WS={}));var VS;(function(e){e.InvalidRedirectUri="invalid_redirect_uri",e.InvalidClientMetadata="invalid_client_metadata",e.InvalidSoftwareStatement="invalid_software_statement",e.UnapprovedSoftwareStatement="unapproved_software_statement"})(VS||(VS={}));function RL(e){if(typeof e!="object"||e===null)return!1;const t=e;return!(!t.resource||t.scopes_supported!==void 0&&!Array.isArray(t.scopes_supported))}var LL=["issuer","authorization_endpoint","token_endpoint","registration_endpoint","jwks_uri"];function NL(e){if(typeof e!="object"||e===null)return!1;const t=e;if(!t.issuer)throw new Error("Authorization server metadata must have an issuer");for(const i of LL)if(t[i]){if(typeof t[i]!="string")throw new Error(`Authorization server metadata '${i}' must be a string`);if(!t[i].startsWith("https://")&&!t[i].startsWith("http://"))throw new Error(`Authorization server metadata '${i}' must start with http:// or https://`)}return!0}function ML(e){return typeof e!="object"||e===null?!1:e.client_id!==void 0}function qS(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.access_token!==void 0&&t.token_type!==void 0}function GS(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function FL(e){return typeof e!="object"||e===null?!1:e.error!==void 0}function OL(e){return{issuer:e.toString(),authorization_endpoint:new URL("/authorize",e).toString(),token_endpoint:new URL("/token",e).toString(),registration_endpoint:new URL("/register",e).toString(),response_types_supported:["code","id_token","id_token token"]}}var QS=["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"],JS=33418;async function ZS(e,t,i){if(!e.registration_endpoint)throw new Error("Server does not support dynamic registration");const r=await fetch(e.registration_endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:t,client_uri:"https://code.visualstudio.com",grant_types:e.grant_types_supported?e.grant_types_supported.filter(n=>QS.includes(n)):QS,response_types:["code"],redirect_uris:["https://insiders.vscode.dev/redirect","https://vscode.dev/redirect","http://localhost/","http://127.0.0.1/",`http://localhost:${JS}/`,`http://127.0.0.1:${JS}/`],scope:i?.join(TL),token_endpoint_auth_method:"none",application_type:"native"})});if(!r.ok){const n=await r.text();let o=n;try{const a=JSON.parse(n);FL(a)&&(o=`${a.error}${a.error_description?`: ${a.error_description}`:""}`)}catch{}throw new Error(`Registration to ${e.registration_endpoint} failed: ${o}`)}const s=await r.json();if(ML(s))return s;throw new Error(`Invalid authorization dynamic client registration response: ${JSON.stringify(s)}`)}function UL(e){const t=[],i=[];let r="",s=!1;for(let o=0;o<e.length;o++){const a=e[o];a==='"'?(s=!s,r+=a):a===","&&!s?(r.trim()&&i.push(r.trim()),r=""):r+=a}r.trim()&&i.push(r.trim());let n;for(const o of i)if(!o.includes("="))n&&t.push(n),n={scheme:o.trim(),params:{}};else{const c=o.indexOf(" ");if(c>0){const l=o.substring(0,c),u=o.substring(c+1);if(!l.includes("=")&&u.includes("=")){n&&t.push(n),n={scheme:l.trim(),params:{}};const h=u.indexOf("=");if(h>0){const p=u.substring(0,h).trim(),f=u.substring(h+1).trim().replace(/^"|"$/g,"");p&&f!==void 0&&(n.params[p]=f)}continue}}if(n){const l=o.indexOf("=");if(l>0){const u=o.substring(0,l).trim(),h=o.substring(l+1).trim().replace(/^"|"$/g,"");u&&h!==void 0&&(n.params[u]=h)}}}return n&&t.push(n),t}function YS(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format: token must have three parts separated by dots");const[i,r,s]=t;try{if(typeof JSON.parse(Eo(i).toString())!="object")throw new Error("Invalid JWT token format: header is not a JSON object");const o=JSON.parse(Eo(r).toString());if(typeof o!="object")throw new Error("Invalid JWT token format: payload is not a JSON object");return o}catch(n){throw n instanceof Error?new Error(`Failed to parse JWT token: ${n.message}`):new Error("Failed to parse JWT token")}}var M0,F0=class{static{M0=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new D,this.onDidChangeWindowState=this.c.event,this.f=M0.a,t.handle&&(this.d=Eo(t.handle).buffer),this.b=i.getProxy(V.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:s})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?Eo(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Zu(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===q.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(Zu(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return y.from(r)}};F0=M0=__decorate([__param(0,Tt),__param(1,Le)],F0);var zf=H("IExtHostWindow"),O0,U0=class{static{O0=this}static{this.a=0}constructor(t){this.c=new bn,this.d=new Map,this.b=t.getProxy(V.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=O0.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),ce(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(y.revive(i))}catch(s){Ot(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}};U0=O0=__decorate([__param(0,Le)],U0);var Wf=H("IExtHostUrlsService");function XS(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function j0(e,t,i){return XS((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function jL(e,t,i){return XS((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}var Vf=H("IExtHostProgress"),H0=class{constructor(t){this.b=0,this.c=new Map,this.a=t.getProxy(V.MainThreadProgress)}async withProgress(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i,c={label:t.displayName||t.name,id:t.identifier.value};return this.a.$startProgress(s,{location:cf.from(o),title:n,source:c,cancellable:a},t.isUnderDevelopment?void 0:t.identifier.value).catch(Kp),this.d(s,r,!!a)}async withProgressFromSource(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i;return this.a.$startProgress(s,{location:cf.from(o),title:n,source:t,cancellable:a},void 0).catch(Kp),this.d(s,r,!!a)}d(t,i,r){let s;r&&(s=new lt,this.c.set(t,s));const n=a=>{this.a.$progressEnd(a),this.c.delete(a),s?.dispose()};let o;try{o=i(new KS(this.a,t),r&&s?s.token:st.None)}catch(a){throw n(t),a}return o.then(a=>n(t),a=>n(t)),o}$acceptProgressCanceled(t){const i=this.c.get(t);i&&(i.cancel(),this.c.delete(t))}};H0=__decorate([__param(0,Le)],H0);function HL(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var KS=class extends L0{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([jL(100,(e,t)=>HL(e,t),()=>Object.create(null))],KS.prototype,"throttledReport",null);var B0=H("IExtHostAuthentication"),_0=class{constructor(t,i,r,s,n,o,a){this.l=i,this.m=r,this.n=s,this.o=n,this.p=o,this.q=a,this.c=z0,this.f=new Map,this.g=new PD,this.h=new D,this.j=new BL,this.k=new D,this.d=t.getProxy(V.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return ht.chain(this.h.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=Ve.toKey(t.identifier),a=Object.keys(s).sort().map(l=>`${l}:${!!s[l]}`).join(", ");"challenge"in r&&typeof r.challenge=="string"&&!r.wwwAuthenticate&&(r={wwwAuthenticate:r.challenge,scopes:r.scopes});let c;if(PL(r)){const l=r,u=l.wwwAuthenticate,h=l.scopes?[...l.scopes].sort().join(" "):"";c=`${n} ${i} challenge:${u} ${h} ${a}`}else{const l=[...r].sort().join(" ");c=`${n} ${i} ${l} ${a}`}return await this.j.getOrCreate(c,async()=>{await this.d.$ensureProvider(i);const l=t.displayName||t.name;return this.d.$getSession(i,r,n,l,s)})}async getAccounts(t){return await this.d.$ensureProvider(t),await this.d.$getAccounts(t)}registerAuthenticationProvider(t,i,r,s){return this.g.queue(t,async()=>{if(this.f.get(t)){this.q.error(`An authentication provider with id '${t}' is already registered. The existing provider will not be replaced.`);return}const n=r.onDidChangeSessions(o=>this.d.$sendDidChangeSessions(t,o));this.f.set(t,{label:i,provider:r,disposable:n,options:s??{supportsMultipleAccounts:!1}}),await this.d.$registerAuthenticationProvider(t,i,s?.supportsMultipleAccounts??!1,s?.supportedAuthorizationServers,s?.supportsChallenges)}),new Ie(()=>{this.g.queue(t,async()=>{const n=this.f.get(t);n&&(n.disposable?.dispose(),this.f.delete(t),await this.d.$unregisterAuthenticationProvider(t))})})}$createSession(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$removeSession(t,i){return this.g.queue(t,async()=>{const r=this.f.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$getSessions(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$getSessionsFromChallenges(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s){const n=s.provider;if(typeof n.getSessionsFromChallenges=="function")return r.authorizationServer=y.revive(r.authorizationServer),await n.getSessionsFromChallenges(i,r);throw new Error(`Authentication provider with handle: ${t} does not support getSessionsFromChallenges`)}throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$createSessionFromChallenges(t,i,r){return this.g.queue(t,async()=>{const s=this.f.get(t);if(s){const n=s.provider;if(typeof n.createSessionFromChallenges=="function")return r.authorizationServer=y.revive(r.authorizationServer),await n.createSessionFromChallenges(i,r);throw new Error(`Authentication provider with handle: ${t} does not support createSessionFromChallenges`)}throw new Error(`Unable to find authentication provider with handle: ${t}`)})}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(BS)||this.h.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}$onDidUnregisterAuthenticationProvider(t){return this.g.queue(t,async()=>{const i=this.f.get(t);i&&(i.disposable?.dispose(),this.f.delete(t))})}async $registerDynamicAuthProvider(t,i,r,s,n,o){if(!s){const c=y.revive(t);if(i.registration_endpoint)try{const l=await ZS(i,this.l.environment.appName,r?.scopes_supported);s=l.client_id,n=l.client_secret}catch(l){this.q.warn(`Dynamic registration failed for ${c.toString()}: ${l.message}. Prompting user for client ID and client secret...`)}if(!s){this.q.info(`Prompting user for client registration details for ${c.toString()}`);const l=await this.d.$promptForClientRegistration(c.toString());if(!l)throw new Error("User did not provide client details");s=l.clientId,n=l.clientSecret,this.q.info(`User provided client registration for ${c.toString()}`),n?this.q.trace(`User provided client secret for ${c.toString()}`):this.q.trace(`User did not provide client secret for ${c.toString()}`)}}const a=new this.c(this.m,this.n,this.l,this.o,this.p,this.d,y.revive(t),i,r,s,n,this.k,o||[]);return await this.g.queue(a.id,async()=>{this.f.set(a.id,{label:a.label,provider:a,disposable:Ie.from(a,a.onDidChangeSessions(c=>this.d.$sendDidChangeSessions(a.id,c)),a.onDidChangeClientId(()=>this.d.$sendDidChangeDynamicProviderInfo({providerId:a.id,clientId:a.clientId,clientSecret:a.clientSecret}))),options:{supportsMultipleAccounts:!1}}),await this.d.$registerDynamicAuthenticationProvider(a.id,a.label,a.authorizationServer,a.clientId,a.clientSecret)}),a.id}async $onDidChangeDynamicAuthProviderTokens(t,i,r){this.k.fire({authProviderId:t,clientId:i,tokens:r})}};_0=__decorate([__param(0,Le),__param(1,Tt),__param(2,zf),__param(3,Wf),__param(4,Vf),__param(5,Sn),__param(6,_e)],_0);var BL=class{constructor(){this.c=new Map}getOrCreate(e,t){const i=this.c.get(e);if(i)return i;const r=t().finally(()=>this.c.delete(e));return this.c.set(e,r),r}},z0=class{constructor(t,i,r,s,n,o,a,c,l,u,h,p,f){this.k=t,this.l=i,this.m=r,this.n=s,this.o=o,this.authorizationServer=a,this.p=c,this.q=l,this.r=u,this.s=h,this.c=new D,this.onDidChangeSessions=this.c.event,this.d=new D,this.onDidChangeClientId=this.d.event;const m=a.toString(!0);this.id=l?.resource?m+" "+l?.resource:m,this.label=l?.resource_name??this.authorizationServer.authority,this.h=n.createLogger(this.id,{name:this.label}),this.j=new he,this.j.add(this.c);const w=ht.chain(p.event,S=>S.filter(E=>E.authProviderId===this.id&&E.clientId===u).map(E=>E.tokens));this.f=this.j.add(new _L({onDidChange:w,set:S=>o.$setSessionsForDynamicAuthProvider(this.id,this.clientId,S)},f,this.h)),this.j.add(this.f.onDidChangeSessions(S=>this.c.fire(S))),this.g=[],c.authorization_endpoint&&this.g.push({label:d(2953,null),handler:(S,E,C)=>this.u(S,E,C)})}get clientId(){return this.r}get clientSecret(){return this.s}async getSessions(t,i){if(this.h.info(`Getting sessions for scopes: ${t?.join(" ")??"all"}`),!t)return this.f.sessions;const r=[...t].sort(),s=t.join(" ");let n=this.f.sessions.filter(o=>Fi([...o.scopes].sort(),r));if(this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n.length){const o=[],a=[],c=new Map(this.f.tokens.map(l=>[l.access_token,l]));for(const l of n){const u=c.get(l.accessToken);if(u&&u.expires_in){const h=Date.now(),p=u.expires_in*1e3;if(h>u.created_at+p-5*60*1e3){if(this.h.info(`Token for session ${l.id} is about to expire, refreshing...`),a.push(u),!u.refresh_token){this.h.warn(`No refresh token available for scopes ${l.scopes.join(" ")}. Throwing away token.`);continue}try{const f=await this.z(u.refresh_token);f.scope!==s&&(this.h.warn(`Token scopes '${f.scope}' do not match requested scopes '${s}'. Overwriting token with what was requested...`),f.scope=s),this.h.info(`Successfully created a new token for scopes ${l.scopes.join(" ")}.`),o.push(f)}catch(f){this.h.error(`Failed to refresh token: ${f}`)}}}}return(o.length||a.length)&&(this.f.update({added:o,removed:a}),n=this.f.sessions.filter(l=>Fi([...l.scopes].sort(),r))),this.h.info(`Found ${n.length} sessions for scopes: ${s}`),n}return[]}async createSession(t,i){this.h.info(`Creating session for scopes: ${t.join(" ")}`);let r;for(let n=0;n<this.g.length;n++){const{handler:o}=this.g[n];try{if(r=await this.n.withProgressFromSource({label:this.label,id:this.id},{location:js.Notification,title:d(2954,null,this.label),cancellable:!0},(a,c)=>o(t,a,c)),r)break}catch(a){const c=this.g[n+1]?.label;if(!c)break;const l=xr(a)?d(2955,null,this.label,c):d(2956,null,this.label,c);if(!await this.o.$showContinueNotification(l))throw new ki;this.h.error(`Failed to create token via flow '${c}': ${a}`)}}if(!r)throw new Error("Failed to create authentication token");r.scope!==t.join(" ")&&(this.h.warn(`Token scopes '${r.scope}' do not match requested scopes '${t.join(" ")}'. Overwriting token with what was requested...`),r.scope=t.join(" ")),this.f.update({added:[{...r,created_at:Date.now()}],removed:[]});const s=this.f.sessions.find(n=>n.accessToken===r.access_token);return this.h.info(`Created session for scopes: ${r.scope}`),s}async removeSession(t){this.h.info(`Removing session with id: ${t}`);const i=this.f.sessions.find(s=>s.id===t);if(!i){this.h.error(`Session with id ${t} not found`);return}const r=this.f.tokens.find(s=>s.access_token===i.accessToken);if(!r){this.h.error(`Failed to retrieve token for removed session: ${i.id}`);return}this.f.update({added:[],removed:[r]}),this.h.info(`Removed token for session: ${i.id} with scopes: ${i.scopes.join(" ")}`)}dispose(){this.j.dispose()}async u(t,i,r){if(!this.p.authorization_endpoint)throw new Error("Authorization Endpoint required");if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=this.v(64),n=await this.w(s),o=this.v(32),a=y.parse(`${this.m.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/authorize?nonce=${o}`);let c;try{c=await this.l.createAppUri(a)}catch(S){throw new Error(`Failed to create external URI: ${S}`)}const l=new URL(this.p.authorization_endpoint);l.searchParams.append("client_id",this.r),l.searchParams.append("response_type","code"),l.searchParams.append("state",c.toString()),l.searchParams.append("code_challenge",n),l.searchParams.append("code_challenge_method","S256");const u=t.join(" ");u&&l.searchParams.append("scope",u),this.q?.resource&&l.searchParams.append("resource",this.q.resource);const h="https://vscode.dev/redirect";l.searchParams.append("redirect_uri",h);const p=this.x(a);if(this.h.info(`Opening authorization URL for scopes: ${u}`),this.h.trace(`Authorization URL: ${l.toString()}`),!await this.k.openUri(l.toString(),{}))throw new ki;i.report({message:d(2957,null)});let m;try{m=(await Fg(p,r)).code}catch(S){throw xr(S)?(this.h.info("Authorization code request was cancelled by the user."),S):(this.h.error(`Failed to receive authorization code: ${S}`),new Error(`Failed to receive authorization code: ${S}`))}return this.h.info(`Authorization code received for scopes: ${u}`),await this.y(m,s,h)}v(t){const i=new Uint8Array(t);return crypto.getRandomValues(i),Array.from(i).map(r=>r.toString(16).padStart(2,"0")).join("").substring(0,t)}async w(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return Fu(ne.wrap(new Uint8Array(s)),!1,!1).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async x(t){const i=await this.o.$waitForUriHandler(t),r=/[?&]code=([^&]+)/.exec(i.query||"");if(!r||r.length<2)throw new Error("Authentication failed: No authorization code received");return{code:r[1]}}async y(t,i,r){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=new URLSearchParams;s.append("client_id",this.r),s.append("grant_type","authorization_code"),s.append("code",t),s.append("redirect_uri",r),s.append("code_verifier",i),this.q?.resource&&s.append("resource",this.q.resource),this.s&&s.append("client_secret",this.s),this.h.info("Exchanging authorization code for token..."),this.h.trace(`Url: ${this.p.token_endpoint}`),this.h.trace(`Token request body: ${s.toString()}`);let n;try{n=await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:s.toString()})}catch(a){throw this.h.error(`Failed to exchange authorization code for token: ${a}`),new Error(`Failed to exchange authorization code for token: ${a}`)}if(!n.ok){const a=await n.text();throw new Error(`Token exchange failed: ${n.status} ${n.statusText} - ${a}`)}const o=await n.json();if(qS(o))return this.h.info("Successfully exchanged authorization code for token."),o;throw GS(o)&&o.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.A(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(o)}`)}async z(t){if(!this.p.token_endpoint)throw new Error("Token endpoint not available in server metadata");const i=new URLSearchParams;i.append("client_id",this.r),i.append("grant_type","refresh_token"),i.append("refresh_token",t),this.q?.resource&&i.append("resource",this.q.resource),this.s&&i.append("client_secret",this.s);const s=await(await fetch(this.p.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:i.toString()})).json();if(qS(s))return{...s,created_at:Date.now()};throw GS(s)&&s.error==="invalid_client"?(this.h.warn(`Client ID (${this.r}) was invalid, generated a new one.`),await this.A(),new Error("Client ID was invalid, generated a new one. Please try again.")):new Error(`Invalid authorization token response: ${JSON.stringify(s)}`)}async A(){try{const t=await ZS(this.p,this.m.environment.appName,this.q?.scopes_supported);this.r=t.client_id,this.s=t.client_secret,this.d.fire()}catch(t){this.h.info(`Dynamic registration failed for ${this.authorizationServer.toString()}: ${t}. Prompting user for client ID and client secret.`);try{const i=await this.o.$promptForClientRegistration(this.authorizationServer.toString());if(!i)throw new Error("User did not provide client details");this.r=i.clientId,this.s=i.clientSecret,this.h.info(`User provided client ID for ${this.authorizationServer.toString()}`),i.clientSecret?this.h.info(`User provided client secret for ${this.authorizationServer.toString()}`):this.h.info(`User did not provide client secret for ${this.authorizationServer.toString()} (optional)`),this.d.fire()}catch{throw this.h.error(`Failed to fetch new client ID and user did not provide one: ${t}`),new Error(`Failed to fetch new client ID and user did not provide one: ${t}`)}}}};z0=__decorate([__param(0,zf),__param(1,Wf),__param(2,Tt),__param(3,Vf),__param(4,Sn)],z0);var _L=class{constructor(e,t,i){this.h=e,this.j=i,this.f=new D,this.onDidChangeSessions=this.f.event,this.g=new he,this.c=fA("tokens",t),this.d=$7({equalsFn:(r,s)=>Fi(r,s,(n,o)=>n.accessToken===o.accessToken)},r=>this.c.read(r).map(s=>this.l(s))),this.g.add(this.k()),this.g.add(this.h.onDidChange(r=>this.c.set(r,void 0)))}get tokens(){return this.c.get()}get sessions(){return this.d.get()}dispose(){this.g.dispose()}update({added:e,removed:t}){this.j.trace(`Updating tokens: added ${e.length}, removed ${t.length}`);const i=[...this.c.get()];for(const r of t){const s=i.findIndex(n=>n.access_token===r.access_token);s!==-1&&i.splice(s,1)}for(const r of e){const s=i.findIndex(n=>n.access_token===r.access_token);s===-1?i.push(r):i[s]=r}(e.length||t.length)&&(this.c.set(i,void 0),this.h.set(i)),this.j.trace(`Tokens updated: ${i.length} tokens stored.`)}k(){let e=[];return k7(t=>{this.j.trace("Checking for session changes...");const i=this.d.read(t);if(e===i){this.j.trace("No session changes detected.");return}if(!i||i.length===0){this.j.trace("All sessions removed."),e.length>0&&(this.f.fire({added:[],removed:e,changed:[]}),e=[]);return}const r=[],s=[];for(const n of i)e.some(a=>a.accessToken===n.accessToken)||r.push(n);for(const n of e)i.some(a=>a.accessToken===n.accessToken)||s.push(n);(r.length>0||s.length>0)&&(this.j.trace(`Sessions changed: added ${r.length}, removed ${s.length}`),this.f.fire({added:r,removed:s,changed:[]})),e=i})}l(e){let t;if(e.id_token)try{t=YS(e.id_token)}catch{}if(!t)try{t=YS(e.access_token)}catch{}const i=e.scope?e.scope.split(" "):t?.scope?t.scope.split(" "):[];return{id:_g(e.access_token,0).toString(),accessToken:e.access_token,account:{id:t?.sub||"unknown",label:t?.preferred_username||t?.name||t?.email||"MCP"},scopes:i,idToken:e.id_token}}},W0,V0=H("IExtHostLanguageModels"),zL=class{constructor(){this.a=new BD,this.b=!1;const e=this;this.apiObject={get stream(){return e.a.asyncIterable},get text(){return mc.map(e.a.asyncIterable,t=>{if(t instanceof pt)return t.value}).coalesce()}}}handleResponsePart(e){if(this.b)return;const t=[];for(const i of fi.wrap(e)){let r;i.type==="text"?r=new pt(i.value,i.audience):i.type==="thinking"?r=new ga(i.value,i.id,i.metadata):i.type==="data"?r=new hr(i.data.buffer,i.mimeType,i.audience):r=new Zn(i.toolCallId,i.name,i.parameters),t.push(r)}this.a.emitMany(t)}reject(e){this.b=!0,this.a.reject(e)}resolve(){this.b=!0,this.a.resolve()}},q0=class{static{W0=this}static{this.a=1}constructor(t,i,r){this.l=i,this.n=r,this.c=new D,this.d=new D,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new Ds,this.j=new Map,this.k=new Map,this.v=new Set,this.b=t.getProxy(V.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModelChatProvider(t,i,r){this.f.set(i,{extension:t,provider:r}),this.b.$registerLanguageModelProvider(i);let s;return r.onDidChangeLanguageModelChatInformation&&(s=r.onDidChangeLanguageModelChatInformation(()=>{this.b.$onLMProviderChange(i)})),ce(()=>{this.f.delete(i),this.o(i),s?.dispose(),this.b.$unregisterProvider(i)})}o(t){this.g.forEach((i,r)=>{i.metadata.vendor===t&&this.g.delete(r)})}async $provideLanguageModelChatInfo(t,i,r){const s=this.f.get(t);if(!s)return[];this.o(t);const n=(s.provider.provideLanguageModelChatInformation?await s.provider.provideLanguageModelChatInformation(i,r):await s.provider.prepareLanguageModelChatInformation(i,r))??[],o=n.map(a=>{let c;return a.requiresAuthorization&&Ge(s.extension,"chatProvider")&&(c={providerLabel:s.extension.displayName||s.extension.name,accountLabel:typeof a.requiresAuthorization=="object"?a.requiresAuthorization.label:void 0}),{metadata:{extension:s.extension.identifier,id:a.id,vendor:t,name:a.name??"",family:a.family??"",detail:a.detail,tooltip:a.tooltip,version:a.version,maxInputTokens:a.maxInputTokens,maxOutputTokens:a.maxOutputTokens,auth:c,isDefault:a.isDefault,isUserSelectable:a.isUserSelectable,statusIcon:a.statusIcon,modelPickerCategory:a.category??DL,capabilities:a.capabilities?{vision:a.capabilities.imageInput,toolCalling:!!a.capabilities.toolCalling,agentMode:!!a.capabilities.toolCalling}:void 0},identifier:`${t}/${a.id}`}});for(let a=0;a<o.length;a++)this.g.set(o[a].identifier,{metadata:o[a].metadata,info:n[a]});return o}async $startChatRequest(t,i,r,s,n,o){const a=this.g.get(t);if(!a)throw new Error("Model not found");const c=this.f.get(a.metadata.vendor);if(!c)throw new Error(`Language model provider for '${a.metadata.id}' not found.`);const l=[],u=()=>{l.length>0&&(this.b.$reportResponsePart(i,new ei(l)),l.length=0)},h=new wn(u,30),p=w=>{l.push(w)>30?(u(),h.cancel()):h.schedule()},f=new L0(async w=>{if(o.isCancellationRequested){this.l.warn(`[CHAT](${c.extension.identifier.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let S;if(w instanceof Zn?S={type:"tool_use",name:w.name,parameters:w.input,toolCallId:w.callId}:w instanceof pt?S={type:"text",value:w.value,audience:w.audience}:w instanceof hr?S={type:"data",mimeType:w.mimeType,data:ne.wrap(w.data),audience:w.audience}:w instanceof ga&&(S={type:"thinking",value:w.value,id:w.id,metadata:w.metadata}),!S){this.l.warn(`[CHAT](${c.extension.identifier.value}) UNKNOWN part ${JSON.stringify(w)}`);return}p(S)});let m;try{m=c.provider.provideLanguageModelChatResponse(a.info,s.value.map(gf.to),{...n,modelOptions:n.modelOptions??{},requestInitiator:Ve.toKey(r),toolMode:n.toolMode??Gd.Auto},f,o)}catch(w){throw w}Promise.resolve(m).then(()=>{u(),this.b.$reportResponseDone(i,void 0)},w=>{u(),this.b.$reportResponseDone(i,vo(w))})}$provideTokenLength(t,i,r){const s=this.g.get(t);if(!s)return Promise.resolve(0);const n=this.f.get(s.metadata.vendor);return n?Promise.resolve(n.provider.provideTokenCount(s.info,i,r)):Promise.resolve(0)}async getDefaultLanguageModel(t,i){let r;i&&await this.selectLanguageModels(t,{});for(const[s,n]of this.g)if(n.metadata.isDefault){r=s;break}return r?this.getLanguageModelByIdentifier(t,r):this.getDefaultLanguageModel(t,!0)}async getLanguageModelByIdentifier(t,i){const r=this.g.get(i);if(!r)return;this.s(t.identifier,r.metadata)&&await this.t(r.metadata);let s;if(!s){const n=this;s={id:r.info.id,vendor:r.metadata.vendor,family:r.info.family,version:r.info.version,name:r.info.name,capabilities:{supportsImageToText:r.metadata.capabilities?.vision??!1,supportsToolCalling:!!r.metadata.capabilities?.toolCalling},maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw ns.NotFound(i);return n.u(i,o,a??st.None)},sendRequest(o,a,c){if(!n.g.has(i))throw ns.NotFound(i);return n.p(t,i,o,a??{},c??st.None)}},Object.freeze(s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[],n=r.map(a=>this.getLanguageModelByIdentifier(t,a)),o=await Promise.all(n);for(const a of o)a&&s.push(a);return s}async p(t,i,r,s,n){const o=this.q(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw ns.NotFound(`Language model '${i}' is unknown.`);if(this.s(a,c)&&(!await this.r(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw ns.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new zL;this.j.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new ei(o),s,n)}catch(h){throw this.j.delete(l),ns.tryDeserialize(h)??h}return u.apiObject}q(t,i){const r=[];for(const s of i)s.role===Ti.System&&T(t,"languageModelSystem"),r.push(gf.from(s));return r}async $acceptResponsePart(t,i){const r=this.j.get(t);r&&r.res.handleResponsePart(i.value)}async $acceptResponseDone(t,i){const r=this.j.get(t);r&&(this.j.delete(t),i?r.res.reject(ns.tryDeserialize(i)??ay(i)):r.res.resolve())}async r(t,i,r,s){const n=BS+i.identifier.value;if(await this.n.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?d(2963,null,i.displayName,r):void 0;return await this.n.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}s(t,i){return!!i.auth&&!Ve.equals(i.extension,t)}async t(t){if(t.auth)for(const i of this.v)try{await this.r(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.l.error("Fake Auth request failed"),this.l.error(r)}}async u(t,i,r){const s=this.g.get(t);if(!s)throw ns.NotFound(`Language model '${t}' is unknown.`);return this.f.get(s.metadata.vendor)?.provider.provideTokenCount(s.info,i,r)??0}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.h.get(r)??new bn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.v.add(t);const i=ht.signal(ht.filter(this.c.event,s=>Ve.equals(s.from,t.identifier))),r=ht.signal(this.d.event);return{get onDidChange(){return ht.any(i,r)},canSendRequest(s){return!0}}}fileIsIgnored(t,i,r=st.None){return T(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}async $isFileIgnored(t,i,r){const s=this.k.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(i),r)??!1}registerIgnoredFileProvider(t,i){T(t,"chatParticipantPrivate");const r=W0.a++;return this.b.$registerFileIgnoreProvider(r),this.k.set(r,i),ce(()=>{this.b.$unregisterFileIgnoreProvider(r),this.k.delete(r)})}};q0=W0=__decorate([__param(0,Le),__param(1,_e),__param(2,B0)],q0);function Wl(e,t=Kt){return hD(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function WL(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var ex;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(ex||(ex={}));var VL=60,qL=VL*60,G0=qL*24,Rz=G0*7,Lz=G0*30,Nz=G0*365;function GL(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var qf={DateTimeFormat(e,t){return new At(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new At(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new At(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new At(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(Es,t)}})},NumberFormat(e,t){return new At(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},tx;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(tx||(tx={}));function ix(e){return e<0?0:e>255?255:e|0}function ja(e){return e<0?0:e>4294967295?4294967295:e|0}var rx=class h${constructor(t){const i=ix(t);this.c=i,this.a=h$.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=ix(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},sx;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(sx||(sx={}));var nx;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})(nx||(nx={}));var QL=class extends rx{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=qf.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.value.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},ox=new sg(10);function JL(e,t){const i=`${e}/${t.join(",")}`;let r=ox.get(i);return r||(r=new QL(e,t),ox.set(i,r)),r}var Q0;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(Q0||(Q0={}));var ax;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(ax||(ax={}));var cx;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(cx||(cx={}));var lx;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(lx||(lx={}));var ux;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(ux||(ux={}));var hx;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(hx||(hx={}));var dx;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(dx||(dx={}));var fx;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(fx||(fx={}));var px;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(px||(px={}));var J0=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},gx;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(gx||(gx={}));var mx;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(mx||(mx={}));var vx;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(vx||(vx={}));var ZL=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},YL=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},wx=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=bx(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=zI(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new ZL(t,this.wordSeparators?JL(this.wordSeparators,[]):null,i?this.searchString:null)}};function bx(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function yx(e,t,i){if(!i)return new J0(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new J0(e,r)}function XL(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function KL(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function Sx(e,t,i,r,s){return XL(e,t,i,r,s)&&KL(e,t,i,r,s)}var eN=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){E4(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||Sx(this._wordSeparators,e,t,r,s))return i}while(i);return null}},xx=H("IUriIdentityService");function Ex(e){return e.scheme!==q.file&&e.scheme!==q.vscodeRemote}function tN(e){if(e.folders.length)return e.folders.every(t=>Ex(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&Ex(e.configuration))return e.configuration}function iN(e){return tN(e)?.scheme}var Z0=H("environmentService"),Mz=Z0,rN=Z0,kx=H("remoteAgentService"),Fz=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await nr(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},Y0,sN=H("pathService"),Cx=Y0=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||hc)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===q.file||t.scheme===q.vscodeRemote?uD(r??Jr(t),i===1):!0}get defaultUriScheme(){return Y0.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return q.vscodeRemote;const r=iN(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:q.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?Ct:Oe)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:q.file,authority:i,path:t,query:"",fragment:""})}};Cx=Y0=__decorate([__param(1,kx),__param(2,rN),__param(3,rm)],Cx);function nN(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var $x=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(sm),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(sm),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(Gf),!t.length)return{}}else t=Gf(t);return i?this.parseSearchPaths(t):{pattern:X0(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=ft(this.c.groups.flatMap(f=>f.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(f=>rS(c,f.fsPath)),p=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(p)),{...c,...p}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>rS(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new Bt,s={};let n=!1;return t.forEach(o=>{if(o.scheme===q.walkThrough)return;if(xD(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=fc(c.fsPath,o.fsPath);bo(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(I4(t.pattern,!0))return!0}else if(I4(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&bx(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>Wu(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:aN(t)).map(h=>{const p=this.f.resolvedUserHome;return p?WL(h,p.scheme===q.file?p.fsPath:p.path):h}),n=fy(s,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>$g(h,"/")).map(h=>$g(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),cN(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=X0(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:CR(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=oN(s);return o&&(o=K0(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?X0(s.pattern):void 0})}),Array.from(r.values())}q(t){if(Wu(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==q.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:y.file($o(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=Gf(t),t.startsWith("../")||t===".."){const s=Oe.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=K0(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${gn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Oi);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&K0(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(15100,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(sm(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=y.isUri(t)?t:t.uri;let a=i.excludePattern?.map(f=>{const m=i.excludePattern&&nN(f)?f.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const f=r.searchPaths.filter(m=>U4(m.searchPath,o))[0];if(f&&!f.pattern)return null;f&&(n=f.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=y.isUri(t)?Jr(t):t.name,p=a.map(f=>Object.keys(u).length>0?{folder:f,pattern:u}:void 0).filter(f=>f);return{folder:o,folderName:s?h:void 0,excludePattern:p,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};$x=__decorate([__param(0,Uc),__param(1,rm),__param(2,lT),__param(3,_e),__param(4,sN),__param(5,xx)],$x);function oN(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function X0(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function aN(e){return Om(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function cN(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function Gf(e){return e.replace(/\\/g,"/")}function K0(e){return Gf(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var lN=7e3;function uN(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):r.push(h)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=$D(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>hN(e,u,a))).then(()=>{}),l=dN(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function hN(e,t,i){for(const r of e.folders)if(await e.exists(_t(y.revive(r),t))){i(`workspaceContains:${t}`);return}}async function dN(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new lt,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},lN);let a=!1;try{a=await n}catch(c){xr(c)||Ot(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var Ix=class{constructor(e){this.b=new D,this.onDidChangePassword=this.b.event,this.a=e.getProxy(V.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}keys(e){return this.a.$getKeys(e)}},ew=H("IExtHostSecretState"),fN=class{#e;constructor(e,t){this.disposables=new he,this.a=e,this.b=Ve.toKey(e.identifier),this.#e=t,this.onDidChange=ht.map(ht.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.b),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.b,e)}store(e,t){return this.#e.store(this.b,e,t)}delete(e){return this.#e.delete(this.b,e)}keys(){return T(this.a,"secretStorageKeys"),this.#e.keys(this.b)||[]}},tw=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(V.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===Es}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return b4(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),b4(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(i)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};tw=__decorate([__param(0,Tt),__param(1,Le),__param(2,_e)],tw);var iw=H("IExtHostLocalizationService"),rw=H("IExtHostManagedSockets"),sw=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(V.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new pN(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new he;return this.d.set(i,new gN(i,r,s)),s.add(ce(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,ne.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};sw=__decorate([__param(0,Le)],sw);var pN=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},gN=class extends te{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},nw,Dx=H("IHostUtils"),ow=nw=class extends te{constructor(t,i,r,s,n,o,a,c,l,u,h,p,f){super(),this.Y=p,this.Z=f,this.a=this.B(new D),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(V.MainThreadWorkspace),this.z=this.g.getProxy(V.MainThreadTelemetry),this.C=this.g.getProxy(V.MainThreadExtensionService),this.D=new kr,this.F=new kr,this.G=new kr,this.H=new kr,this.I=new vN(this.f.extensions.activationEvents),this.L=new _l(this.I,this.f.extensions.allExtensions);const m=new bn(this.f.extensions.myExtensions);this.J=new _l(this.I,Tx(this.L,m)),dn&&(this.s.info(`Creating extension host with the following global extensions: ${Ha(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Ha(this.J)}`)),this.M=new CS(this.g,this.s),this.N=new Ix(this.g),this.O=c,this.h=this.q.add(t.createChild(new Kg([w0,this.M],[ew,this.N]))),this.P=this.B(new m0(this.J,this.L,{onExtensionActivationError:(w,S,E)=>{this.C.$onExtensionActivationError(w,vo(S),E)},actualActivateExtension:async(w,S)=>{if(_l.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,S),new dL;const E=this.J.getExtensionDescription(w);return this.fb(E,S)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.D.open(),await this.j.waitForInitializeCall(),pi("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Ot(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),Xp(s=>{this.s.error(s)}),this.g.dispose();const r=this.$();Promise.race([nr(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new Ve(i.identifier.value),extensionLocation:y.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===q.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return y.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new mN(t))),this.Q}async db(t){const i=Ps.forUris(r=>yD.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.xb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{r.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=Ax(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=Ax(t,i);this.z.$publicLog2("activatePlugin",r);const s=this.xb(t);if(!s)return Promise.resolve(new hL(Uf.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=this.vb(t),o=new he,a=new g0(i.startup);return Promise.all([n?this.zb(t,_t(t.extensionLocation,s),a):this.yb(t,_t(t.extensionLocation,s),a),this.ib(t,o)]).then(c=>(pi(`code/extHost/willActivateExtension/${t.identifier.value}`),nw.jb(this.s,t.identifier,c[0],c[1],o,a))).then(c=>(pi(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new fL(t,this.M)),n=i.add(new $S(t.identifier.value,!1,this.M)),o=i.add(new fN(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?da.Test:da.Development:da.Production,c=this.f.remote.isRemote?Qn.Workspace:Qn.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const p=Ge(t,"ipc")?this.f.messagePorts?.get(Ve.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(f){return xg(t.extensionLocation.fsPath,f)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return xg(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Vl(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return T(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!p)return;const f=ht.buffer(ht.fromDOMEventEmitter(p,"message",m=>m.data));p.start(),h={onDidReceiveMessage:f,postMessage:p.postMessage.bind(p)}}return h}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new jf(!1,null,o.build(),r,a,ce(()=>{n.dispose(),qi(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=r.activate.apply(globalThis,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(o).then(a=>(n.activateResolveStop(),a))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const s=Date.now();Gy(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(nI()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,nr(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await uN(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(d(2959,null));const r=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(r,i.path)?this.zb(null,i,new g0(!1)):this.yb(null,i,new g0(!1)));if(!n||typeof n.run!="function")throw new Error(d(2960,null,i.toString()));return new Promise((o,a)=>{const c=(h,p)=>{h?(dn&&this.s.error("Test runner called back with error",h),a(h)):(dn&&(p?this.s.info(`Test runner called back with ${p} failures.`):this.s.info("Test runner called back with successful outcome.")),o(typeof p=="number"&&p>0?1:0))},l=sr(i),u=n.run(l,c);u&&u.then&&u.then(()=>{dn&&this.s.info("Test runner finished successfully."),o(0)}).catch(h=>{dn&&this.s.error("Test runner finished with error",h),a(h instanceof Error&&h.stack?h.stack:String(h))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),nr(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,ce(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new Go("Not an authority that can be resolved!",es.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=hn.create(!1),s=()=>`[resolveAuthority(${a8(t)},${i})][${r.elapsed()}ms] `,n=C=>this.s.info(`${s()}${C}`),o=C=>this.s.warn(`${s()}${C}`),a=(C,P=void 0)=>this.s.error(`${s()}${C}`,P),c=C=>{if(C instanceof Go)return{type:"error",error:{code:C._code,message:C._message,detail:C._detail}};throw C},l=async C=>{n(`activating resolver for ${C}...`);const{resolver:P,authorityPrefix:Z}=await this.ub(C);if(!P)throw a(`no resolver for ${Z}`),new Go(`No remote extension installed to resolve ${Z}.`,es.NoResolverFound);return{resolver:P,authorityPrefix:Z,remoteAuthority:C}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async C=>{if(!(C instanceof Go)||C._code!==es.InvalidAuthority)throw C;return o(`resolving nested authorities failed: ${C.message}`),[await l(t)]})}catch(C){return c(C)}const p=new UD;p.cancelAndSet(()=>n("waiting..."),1e3);let f,m;for(const[C,{authorityPrefix:P,resolver:Z,remoteAuthority:W}]of h.entries())try{if(C===h.length-1)n("invoking final resolve()..."),pi(`code/extHost/willResolveAuthority/${P}`),f=await Z.resolve(W,{resolveAttempt:i,execServer:m}),pi(`code/extHost/didResolveAuthorityOK/${P}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(Z,Xh.isManagedResolvedAuthority(f)?f:void 0));else{if(n(`invoking resolveExecServer() for ${W}`),pi(`code/extHost/willResolveExecServer/${P}`),m=await Z.resolveExecServer?.(W,{resolveAttempt:i,execServer:m}),!m)throw new Go(`Exec server was not available for ${W}`,es.NoResolverFound);pi(`code/extHost/didResolveExecServerOK/${P}`)}}catch(oe){return pi(`code/extHost/didResolveAuthorityError/${P}`),a("returned an error",oe),p.dispose(),c(oe)}p.dispose();const w={environmentTunnels:f.environmentTunnels,features:f.tunnelFeatures?{elevation:f.tunnelFeatures.elevation,privacyOptions:f.tunnelFeatures.privacyOptions,protocol:f.tunnelFeatures.protocol===void 0?!0:f.tunnelFeatures.protocol}:void 0},S={extensionHostEnv:f.extensionHostEnv,isTrusted:f.isTrusted,authenticationSession:f.authenticationSessionForInitializingExtensions?{id:f.authenticationSessionForInitializingExtensions.id,providerId:f.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${Xh.isManagedResolvedAuthority(f)?"managed authority":`${f.host}:${f.port}`}`);let E;if(Xh.isManagedResolvedAuthority(f)){const C=i;this.Y.setFactory(C,f.makeConnection),E={authority:t,connectTo:new _T(C),connectionToken:f.connectionToken}}else E={authority:t,connectTo:new zT(f.host,f.port),connectionToken:f.connectionToken};return{type:"ok",value:{authority:E,options:S,tunnelInformation:w}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${a8(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=y.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await Qt(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=Px(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),dn&&(this.s.info(`$startExtensionHost: global extensions: ${Ha(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Ha(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=Px(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),dn&&(this.s.info(`$deltaExtensions: global extensions: ${Ha(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Ha(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=ne.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?this.xb(t):i,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};ow=nw=__decorate([__param(0,wc),__param(1,Dx),__param(2,Le),__param(3,cs),__param(4,ls),__param(5,_e),__param(6,Tt),__param(7,y0),__param(8,C0),__param(9,Ua),__param(10,iw),__param(11,rw),__param(12,V0)],ow);function Px(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new _l(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new bn(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=Tx(s,n);return{globalRegistry:s,myExtensions:o}}function Ax(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Ha(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Zs=H("IExtHostExtensionService"),Vl=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=$o(sr(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function Tx(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var mN=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},vN=class{constructor(e){this.a=new Ds,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},ql=H("IExtHostApiDeprecationService"),aw=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(V.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};aw=__decorate([__param(0,Le),__param(1,_e)],aw);var zz=Object.freeze(new class{report(e,t,i){}}),Rx=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(_e),r=e.get(Le).getProxy(V.MainThreadErrors);Xp(s=>{t.error(s);const n=vo(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(_e),i=e.get(Le),r=e.get(Zs),s=e.get(_f),n=e.get(ql),o=i.getProxy(V.MainThreadExtensionService),a=i.getProxy(V.MainThreadErrors),c=await r.getExtensionRegistry(),l=await r.getExtensionPathIndex(),u=new WeakMap;function h(m,w){if(u.has(m))return u.get(m).stack;let S="",E,C;for(const Z of w)S+=`
	at ${Z.toString()}`,C=Z.getFileName(),!E&&C&&(E=l.findSubstr(y.file(C)));const P=`${m.name||"Error"}: ${m.message||""}${S}`;return u.set(m,{extensionIdentifier:E?.identifier,stack:P}),P}const p=Symbol("prepareStackTrace wrapped");let f=h;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return f},set(m){if(m===h||!m||m[p]){f=m||h;return}f=function(w,S){return h(w,S),m.call(Error,w,S)},Object.assign(f,{[p]:!0})}}),Xp(m=>{cy.is(m)||t.error(m);const w=vo(m);let S;if(m instanceof o5?S=m.extension:S=u.get(m)?.extensionIdentifier,!!S)if(cy.is(m)){const E=c.getExtensionDescription(S);E&&n.report(m.name,E,`${m.message}
 FROM: ${m.stack}`)}else{o.$onExtensionRuntimeError(S,w);const E=s.onExtensionError(S,m);t.trace("forwarded error to extension?",E,S)}}),ic.addListener(m=>{a.$onUnexpectedError(m)})}},wN=class d${constructor(t,i,r,s,n){this.a=r,this.b=new JD(t,null,s),i=d$.e(i,this.b);const o=new Kg(...SP());o.set(Tt,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Le,new CP(this.b)),o.set(rh,new $P(s)),o.set(Dx,r);const a=new kP(o,!0);a.invokeFunction(Rx.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(_e)),pi("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Zs)),this.c.initialize(),a.invokeFunction(Rx.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(V.MainThreadExtensionService);return y.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>y.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=y.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}},bN=function(t){const i=r=>{globalThis.removeEventListener("message",i);const s=r.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",i)}.toString(),yN=class extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=`((${bN})('${t}'))`,s=new Blob([r],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:i};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},Wz=new U("inOutput",!1),Vz=new U("activeLogOutput",!1),qz=new U("activeLogOutput.isLog",!1),Gz=new U("activeLogOutput.levelSettable",!1),Qz=new U("activeLogOutput.level",""),Jz=new U("activeLogOutput.levelIsDefault",!1),Zz=new U("outputView.scrollLock",!1),Yz=new U("activeOutputChannel",""),Xz=new U("output.filter.trace",!0),Kz=new U("output.filter.debug",!0),eW=new U("output.filter.info",!0),tW=new U("output.filter.warning",!0),iW=new U("output.filter.error",!0),rW=new U("outputFilterFocus",!1),sW=new U("output.filter.categories",""),nW=H("outputService"),Gl;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(Gl||(Gl={}));var SN={OutputChannels:"workbench.contributions.outputChannels"};function xN(e){return Array.isArray(e.source)}var EN=class extends te{constructor(){super(...arguments),this.a=new Map,this.b=this.B(new D),this.onDidRegisterChannel=this.b.event,this.c=this.B(new D),this.onDidRemoveChannel=this.c.event,this.f=this.B(new D),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&xN(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};Vt.add(SN.OutputChannels,new EN);var Lx=class extends S5{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.r=i,this.s=r,this.extension=s,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(ce(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,Gl.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,Gl.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=ne.fromString(t).byteLength,mP(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,Gl.Append))}},kN=class extends Lx{appendLine(e){this.append(e)}},cw=class{constructor(t,i,r,s,n,o){this.i=i,this.j=r,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(V.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${GL(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=He(i)?i:void 0;if(He(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>Ve.equals(r.identifier,u))?.[1];a&&(o=yP(a));const c=new he,l=s?this.o(t,o,r,c):this.n(t,n,r,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(ce(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,r,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(ce(()=>this.l.deregisterLogger(o))),new Lx(c,t,a,this.a,r)}async o(t,i,r,s){const n=await this.p(r),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${r.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:r.identifier.value}));return s.add(ce(()=>this.l.deregisterLogger(a))),new kN(c,t,l,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(r)}catch(s){if(mh(s)!==be.FileExists)throw s}return r})())}return i}q(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}r(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new D);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};cw=__decorate([__param(0,Le),__param(1,Tt),__param(2,Bf),__param(3,Lo),__param(4,Sn),__param(5,_e)],cw);var Nx=H("IExtHostOutputService"),Ql,lw=class{static{Ql=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(V.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=Ql.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=Vi(n);if(o.length<=Ql.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:BI(u.path,"/")})),c=l3(a,(u,h)=>u.rank-h.rank||mn(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const p of u){const f=Io(p.uri.path);if(h!==f&&(h=f,l.push(p.uri)>=Ql.d))break e}}this.g.$onDidChange(r,l)});return new Ie(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),r));if(!u)return;try{M1.validate(u),u.badge&&typeof u.badge!="string"&&T(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};lw=Ql=__decorate([__param(0,Le),__param(1,_e)],lw);var Mx=H("IExtHostDecorations"),CN=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=ja(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=ja(e),t=ja(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=ja(e),t=ja(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=ja(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new $N(r,e-n)}},$N=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},IN=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new Hi(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new CN(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=S4(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},Fx="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function DN(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of Fx)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var PN=DN();function Ox(e){let t=PN;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var Ux=new xs;Ux.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function jx(e,t,i,r,s){if(t=Ox(t),s||(s=fi.first(Ux)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),jx(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=AN(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function AN(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var uw=new Map;function TN(e,t){t?uw.set(e,t):uw.delete(e)}function RN(e){return uw.get(e)}var LN=class extends IN{constructor(e,t,i,r,s,n,o,a,c=!0){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.r=a,this.s=c,this.n=!1}dispose(){si(!this.n),this.n=!0,this.q=!1}equalLines(e){return Fi(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===q.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.t()},getText(t){return t?e.u(t):e.getText()},get eol(){return e.c===`
`?cr.LF:cr.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.v(t)},offsetAt(t){return e.w(t)},positionAt(t){return e.x(t)},validateRange(t){return e.y(t)},validatePosition(t){return e.z(t)},getWordRangeAtPosition(t,i){return e.A(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){si(!this.n),this.p=e}_acceptIsDirty(e){si(!this.n),this.q=e}_acceptEncoding(e){si(!this.n),this.r=e}t(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}u(e){const t=this.y(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}v(e){let t;if(e instanceof $e?t=e.line:typeof e=="number"?t=e:!this.s&&$e.isPosition(e)&&(t=e.line),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new NN(t,this.b[t],t===this.b.length-1)}w(e){return e=this.z(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}x(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new $e(t.index,Math.min(t.remainder,i))}y(e){if(this.s){if(!(e instanceof ye))throw new Error("Invalid argument")}else if(!ye.isRange(e))throw new Error("Invalid argument");const t=this.z(e.start),i=this.z(e.end);return t===e.start&&i===e.end?e:new ye(t.line,t.character,i.line,i.character)}z(e){if(this.s){if(!(e instanceof $e))throw new Error("Invalid argument")}else if(!$e.isPosition(e))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new $e(t,i):e}A(e,t){const i=this.z(e);if(!t)t=RN(this.p);else if(y4(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=jx(i.character+1,Ox(t),this.b[i.line],0);if(r)return new ye(i.line,r.startColumn-1,i.line,r.endColumn-1)}},NN=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new ye(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new ye(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},Qf=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},cW=new Qf("id#"),MN=class f${static{this.c=new Qf("TextEditorDecorationType")}constructor(t,i,r){const s=f$.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,mv.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},FN=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof $e)i=new ye(e,e);else if(e instanceof ye)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new ye(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof ye)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==cr.LF&&e!==cr.CRLF)throw Ce("endOfLine");this.h=e}},ON=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=Sa.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:Sa.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=Sa.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},UN=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=s,this.d=new ON(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new on("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Ar))throw Ce("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Ar)))throw Ce("selections");l.length===0&&(l=[new Ar(0,0,0,0)]),c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new on("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new on("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new FN(r.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let p;if(!u||Array.isArray(u)&&u.length===0)p=c.c.map(f=>M.from(f));else if(u instanceof $e){const{lineNumber:f,column:m}=ze.from(u);p=[{startLineNumber:f,startColumn:m,endLineNumber:f,endColumn:m}]}else if(u instanceof ye)p=[M.from(u)];else{p=[];for(const f of u)if(f instanceof ye)p.push(M.from(f));else{const{lineNumber:m,column:w}=ze.from(f);p.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,r.value.version,l.value,p,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(z8(u))return t.$trySetDecorations(e,l.key,bR(u));{const p=new Array(4*u.length);for(let f=0,m=u.length;f<m;f++){const w=u[f];p[4*f]=w.start.line+1,p[4*f+1]=w.start.character+1,p[4*f+2]=w.end.line+1,p[4*f+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,p)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,M.from(l),u||ad.Default))},show(l){t.$tryShowEditor(e,It.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){si(!this.g),this.g=!0}_acceptOptions(e){si(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){si(!this.g),this.e=e}_acceptViewColumn(e){si(!this.g),this.f=e}_acceptSelections(e){si(!this.g),this.c=e}_acceptDiffInformation(e){si(!this.g),this.j=e}async m(){const e=this.c.map(dr.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:M.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?xa.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},jN=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},hw=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Bt,this.d=new D,this.e=new D,this.f=new D,this.g=new D,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==q.vscodeNotebookCell&&o.scheme!==q.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new jN(new LN(this.h.getProxy(V.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);si(this.c.has(o),`document '${o}' does not exist`),si(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new UN(n.id,this.h.getProxy(V.MainThreadTextEditors),this.i,new At(()=>a.document),n.selections.map(dr.to),n.options,n.visibleRanges.map(l=>M.to(l)),typeof n.editorPosition=="number"?It.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(si(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),qi(i),qi(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return fi.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};hw=__decorate([__param(0,Le),__param(1,_e)],hw);var Ba=H("IExtHostDocumentsAndEditors"),uW=H("productService"),HN="vscode://schemas/vscode-product",BN={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authProviderSpecific:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authProviderSpecific.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},authenticationChallenges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authenticationChallenges.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatOutputRenderer:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatOutputRenderer.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:10},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts",version:4},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatSessionsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatSessionsProvider.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribSecondarySidebar:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSecondarySidebar.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},dataChannels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.dataChannels.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:3},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageModelThinkingPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelThinkingPart.d.ts",version:1},languageModelToolResultAudience:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelToolResultAudience.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},remoteCodingAgents:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.remoteCodingAgents.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmProviderOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmProviderOptions.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},secretStorageKeys:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.secretStorageKeys.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskExecutionTerminal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskExecutionTerminal.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textDocumentChangeReason:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textDocumentChangeReason.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Jf=Object.freeze(BN),dw=Vt.as(Fh.JSONContribution),_N=class Wp{static a(t){const i=new bn;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new Wp(i,[]);if(!i||!i.length)return new Wp([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Wp(n,o)}constructor(t,i){this.added=t,this.removed=i}},zN=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=_N.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Ot(e)}}},WN={type:"string",enum:["ui","workspace"],enumDescriptions:[d(14792,null),d(14793,null)]},Hx="vscode://schemas/vscode-extensions",fw={properties:{engines:{type:"object",description:d(14794,null),properties:{vscode:{type:"string",description:d(14795,null),default:"^1.22.0"}}},publisher:{description:d(14796,null),type:"string"},displayName:{description:d(14797,null),type:"string"},categories:{description:d(14798,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:r5},{type:"string",const:"Languages",deprecationMessage:d(14799,null)}]}},galleryBanner:{type:"object",description:d(14800,null),properties:{color:{description:d(14801,null),type:"string"},theme:{description:d(14802,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(14803,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(14804,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(14805,null)},enabledApiProposals:{markdownDescription:d(14806,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Jf).map(e=>e),markdownEnumDescriptions:Object.values(Jf).map(e=>e.proposal)}},api:{markdownDescription:d(14807,null),type:"string",enum:["none"],enumDescriptions:[d(14808,null)]},activationEvents:{description:d(14809,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(14810,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(14811,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(14812,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(14813,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(14814,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(14815,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(14816,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(14817,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(14818,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(14819,null),body:"onStartupFinished"},{label:"onTaskType",description:d(14820,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(14821,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(14822,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(14823,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(14824,null)},{label:"onUri",body:"onUri",description:d(14825,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(14826,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(14827,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(14828,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(14829,null)},{label:"onRenderer",description:d(14830,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(14831,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(14832,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(14833,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(14834,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(14835,null)},{label:"onLanguageModelChatProvider",body:"onLanguageModelChatProvider:${1:vendor}",description:d(14836,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(14837,null)},{label:"onTerminal",body:"onTerminal:{1:shellType}",description:d(14838,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(14839,null)},{label:"onTerminalShellIntegration",body:"onTerminalShellIntegration:${1:shellType}",description:d(14840,null)},{label:"onMcpCollection",description:d(14841,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:d(14842,null),body:"*"}]}},badges:{type:"array",description:d(14843,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(14844,null)},href:{type:"string",description:d(14845,null)},description:{type:"string",description:d(14846,null)}}}},markdown:{type:"string",description:d(14847,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(14848,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(14849,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Jm}},extensionPack:{description:d(14850,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:Jm}},extensionKind:{description:d(14851,null),type:"array",items:WN,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(14852,null)},{body:["workspace"],description:d(14853,null)},{body:["ui","workspace"],description:d(14854,null)},{body:["workspace","ui"],description:d(14855,null)},{body:[],description:d(14856,null)}]},capabilities:{description:d(14857,null),type:"object",properties:{virtualWorkspaces:{description:d(14858,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(14859,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14860,null),d(14861,null),d(14862,null)]},description:{type:"string",markdownDescription:d(14863,null)}}},untrustedWorkspaces:{description:d(14864,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(14865,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14866,null),d(14867,null),d(14868,null)]},restrictedConfigurations:{description:d(14869,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(14870,null)}}}}},sponsor:{description:d(14871,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(14872,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(14873,null),type:"string"},"vscode:uninstall":{description:d(14874,null),type:"string"}}},icon:{type:"string",description:d(14875,null)},l10n:{type:"string",description:d(14876,null)},pricing:{type:"string",markdownDescription:d(14877,null),enum:["Free","Trial"],default:"Free"}}},VN=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new zN(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&RT.register(e.extensionPoint,e.activationEventsGenerator),fw.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,dw.registerSchema(Hx,fw),t}getExtensionPoints(){return Array.from(this.a.values())}},Bx={ExtensionsRegistry:"ExtensionsRegistry"};Vt.add(Bx.ExtensionsRegistry,new VN);var qN=Vt.as(Bx.ExtensionsRegistry);dw.registerSchema(Hx,fw),dw.registerSchema(HN,{properties:{extensionEnabledApiProposals:{description:d(14878,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Jf),markdownEnumDescriptions:Object.values(Jf).map(e=>e.proposal)}}]}}}});var GN={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(12029,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(12030,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(12031,null),default:""}}},pw;(function(e){function t(i,r,s){if(!i)return;const n=He(i.type)?i.type:void 0;if(!n||n.length===0){s.error(d(12032,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)He(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?it(i.properties):{},when:i.when?Wt.deserialize(i.when):void 0}}e.from=t})(pw||(pw={}));var QN=qN.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:d(12033,null),type:"array",items:GN}}),JN=class{constructor(){this.d=new D,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{QN.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=pw.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=it(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},ZN=new JN,YN={IconContribution:"base.contributions.icons"},_x;(function(e){function t(i,r){let s=i.defaults;for(;$t.isThemeIcon(s);){const n=_a.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(_x||(_x={}));var zx;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>He(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>He(n.format)&&He(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=i})(zx||(zx={}));var XN=/^([\w_-]+)$/,KN=d(2587,null),eM=class extends te{constructor(){super(),this.a=this.B(new D),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2588,null),pattern:XN.source,patternErrorMessage:KN},fontCharacter:{type:"string",description:d(2589,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${$t.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;$t.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${$t.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!$t.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},_a=new eM;Vt.add(YN.IconContribution,_a);function Jl(e,t,i,r){return _a.registerIcon(e,t,i,r)}function tM(){const e=WP();for(const t in e){const i="\\"+e[t].toString(16);_a.registerIcon(t,{fontCharacter:i})}}tM();var Wx="vscode://schemas/icons",Vx=Vt.as(Fh.JSONContribution);Vx.registerSchema(Wx,_a.getIconSchema());var qx=new wn(()=>Vx.notifySchemaChanged(Wx),200);_a.onDidChange(()=>{qx.isScheduled()||qx.schedule()});var hW=Jl("widget-close",ie.close,d(2590,null)),dW=Jl("goto-previous-location",ie.arrowUp,d(2591,null)),fW=Jl("goto-next-location",ie.arrowDown,d(2592,null)),pW=$t.modify(ie.sync,"spin"),gW=$t.modify(ie.loading,"spin"),iM="settings",mW=new U("taskRunning",!1,d(12034,null)),vW=new U("taskTerminalActive",!1,d(12035,null)),wW=Hu(12038,"Tasks"),Zf;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(Zf||(Zf={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(Zf||(Zf={}));var Gx;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(Gx||(Gx={}));var Zl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Zl||(Zl={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Zl||(Zl={}));var Yl;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Yl||(Yl={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Yl||(Yl={}));var Xl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Xl||(Xl={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Xl||(Xl={}));var Qx;(function(e){e.defaults={echo:!0,reveal:Zl.Always,revealProblems:Yl.Never,focus:!1,panel:Xl.Shared,showReuseMessage:!0,clear:!1}})(Qx||(Qx={}));var Yf;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(Yf||(Yf={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(Yf||(Yf={}));var Jx;(function(e){function t(i){return He(i)?i:i.value}e.value=t})(Jx||(Jx={}));var Zx;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return He(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(Zx||(Zx={}));var Yx;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(Yx||(Yx={}));var Xx;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(Xx||(Xx={}));var Kx;(function(e){e.parallel="parallel",e.sequence="sequence"})(Kx||(Kx={}));var gw;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(gw||(gw={}));var eE;(function(e){e.terminateNewest="terminateNewest",e.terminateOldest="terminateOldest",e.prompt="prompt",e.warn="warn",e.silent="silent"})(eE||(eE={}));var tE;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:gw.default,instanceLimit:1,instancePolicy:"prompt"}})(tE||(tE={}));var Xf;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(Xf||(Xf={})),function(e){e._default=e.Terminal}(Xf||(Xf={}));var iE;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(iE||(iE={}));var rE;(function(e){e.SingleRun="singleRun",e.Background="background"})(rE||(rE={}));var Ys;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(Ys||(Ys={}));var sE;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(sE||(sE={}));var nE;(function(e){function t(l){return{taskId:l._id,taskName:l.configurationProperties.name,runType:l.configurationProperties.isBackground?"background":"singleRun",group:l.configurationProperties.group,__task:l}}function i(l,u,h){return{...t(l),kind:Ys.Start,terminalId:u,resolvedVariables:h}}e.start=i;function r(l,u,h){return{...t(l),kind:Ys.ProcessStarted,terminalId:u,processId:h}}e.processStarted=r;function s(l,u,h){return{...t(l),kind:Ys.ProcessEnded,terminalId:u,exitCode:h}}e.processEnded=s;function n(l,u,h){return{...t(l),kind:Ys.Terminated,exitReason:h,terminalId:u}}e.terminated=n;function o(l,u,h){return{...t(u),kind:l,terminalId:h}}e.general=o;function a(l,u,h){return{...t(l),kind:Ys.ProblemMatcherEnded,hasErrors:u}}e.problemMatcherEnded=a;function c(){return{kind:Ys.Changed}}e.changed=c})(nE||(nE={}));var Kf;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(Kf||(Kf={}));var oE;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(oE||(oE={}));var aE;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(aE||(aE={}));var cE;(function(e){function t(i,r){const s=ZN.get(i.type);if(s===void 0){const c=it(i);return delete c._key,Kf.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=it(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(d(12036,null,JSON.stringify(i,void 0,0),c));return}}}return Kf.create(n)}e.createTaskIdentifier=t})(cE||(cE={}));var bW=Jl("rerun-task",ie.refresh,d(12037,null)),ep;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(ep||(ep={}));var tp;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(tp||(tp={}));var mw;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(mw||(mw={}));var Kl;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=mw.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new sa(s.process,s.args,s.options)}e.to=r})(Kl||(Kl={}));var vw;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(vw||(vw={}));var eu;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=vw.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Wn(s.commandLine,s.options):new Wn(s.command,s.args?s.args:[],s.options)}e.to=r})(eu||(eu={}));var us;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(us||(us={}));var lE;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Us.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=iM),{id:i._id,workspaceFolder:s}}e.from=t})(lE||(lE={}));var ww;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(ww||(ww={}));var Xs;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof sa?o=Kl.from(s.execution):s.execution instanceof Wn?o=eu.from(s.execution):s.execution&&s.execution instanceof k1&&(o=us.from(s.execution));const a=ep.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Us.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:ww.from(s.group),presentationOptions:tp.from(s.presentationOptions),problemMatchers:Vi(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;Kl.is(s.execution)?a=Kl.to(s.execution):eu.is(s.execution)?a=eu.to(s.execution):us.is(s.execution)&&(a=us.to(s._id,o));const c=ep.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=Us.Workspace),!c||!l)return;const u=new hd(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=tl.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new tl(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=tp.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(Xs||(Xs={}));var bw;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(bw||(bw={}));var yw=class{#e;constructor(e,t,i){this._id=t,this.b=i,this.#e=e}get task(){return this.b}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}get terminal(){return this.a}set terminal(e){this.a=e}},Sw=class{constructor(t,i,r,s,n,o,a,c){this.q=new D,this.r=new D,this.s=new D,this.u=new D,this.v=new D,this.w=new D,this.a=t.getProxy(V.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Ie(()=>{});const s=this.z();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Ie(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(bw.from(t)).then(async i=>{const r=[];for(const s of i){const n=await Xs.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof yw))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id;const n=await this.B(t),o=this.e.getTerminalById(i)?.value;n&&(n.terminal=o),this.q.fire({execution:n})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=Qt(()=>r.provider.provideTasks(st.None)).then(o=>this.x(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await Xs.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,st.None);if(!n)return;this.C(n,r);const o=Xs.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return us.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new an("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new yw(this,t.id,i)):s=Xs.to(t.task,this.b,this.m).then(n=>{if(!n)throw new an("Unexpected: Task does not exist.");return new yw(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};Sw=__decorate([__param(0,Le),__param(1,Tt),__param(2,cs),__param(3,Ba),__param(4,ls),__param(5,Ua),__param(6,_e),__param(7,ql)],Sw);var xw=class extends Sw{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(q.vscodeRemote,{scheme:q.vscodeRemote,authority:"",platform:dI(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=Xs.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(us.is(r.execution))await this.A(r,i,!1);else throw new eg;const s=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}x(t,i,r,s){const n=[];if(s)for(const o of s){if(this.C(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Xs.from(o,r.extension);a&&us.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async y(t){if(us.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};xw=__decorate([__param(0,Le),__param(1,Tt),__param(2,cs),__param(3,Ba),__param(4,ls),__param(5,Ua),__param(6,_e),__param(7,ql)],xw);var uE=H("IExtHostTask"),rM=class{constructor(){this.f=new Map,this.m=[],this.n=new D,this.o=new D,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(7190,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await nr(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await nr(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function sM(e){return e.type&&(e.label||e.program||e.runtime)}var nM=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function oM(e){return!!(e&&e.match(nM))}function hE(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(oM(e.path))return y.parse(e.path);if(Wu(e.path))return y.file(e.path)}return e.path}function dE(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===q.file?t.fsPath:t.toString()}return e.path}function aM(e,t){const i=t?hE:dE,r=it(e);return fE(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function cM(e,t){const i=t?hE:dE,r=it(e);return fE(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function fE(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var tu=H("IExtHostEditorTabs"),pE=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new W1(y.revive(this.b.input.uri));case 2:return new Nd(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new I8(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new V1(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new D8(this.b.input.viewType);case 4:return new q1(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new G1(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new P8;case 9:return new A8(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new T8;case 11:return new R8(this.b.input.diffEditors.map(e=>new Nd(y.revive(e.original),y.revive(e.modified))));default:return}}},lM=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new pE(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return It.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new pE(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},Ew=class{constructor(t){this.b=new D,this.c=new D,this.e=[],this.a=t.getProxy(V.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return bo(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?uM(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=p3(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new lM(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=bo(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};Ew=__decorate([__param(0,Le)],Ew);function uM(e){return e.tabs!==void 0}var hM=0,gE=new WeakMap,ip=H("IExtHostTesting"),kw=class extends te{constructor(t,i,r,s){super(),this.C=i,this.D=r,this.F=s,this.f=this.B(new D),this.g=new Map,this.w=this.B(new D),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(V.MainThreadTesting),this.m=new vM(this.h),this.j=new pM(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Ne.root(a))?.collection.tree.get(a)?.actual??RS(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Ne.root(c))?.collection.tree.get(c)?.actual??RS({$mid:16,tests:[o]}),message:$a.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Ne.root(a));if(c)return Ne.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Oi)||[],exclude:n?.exclude.map(o).filter(Oi)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new he,o=n.add(new xL(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let f=0;s&&(f|=2);const m=p.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(f|=8),m?.provideRelatedCode&&(f|=4)),f},h={items:o.root.children,get label(){return r},set label(f){r=f,o.root.label=f,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(f){s=f,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return p.relatedCodeProvider},set relatedCodeProvider(f){T(t,"testRelatedCode"),p.relatedCodeProvider=f,l.$updateController(i,{capabilities:u()})},createRunProfile:(f,m,w,S,E,C)=>{let P=bc(f);for(;a.has(P);)P++;return new bE(this.h,a,c,this.w.event,i,P,f,m,w,S,E,C)},createTestItem(f,m,w){return new zl(i,f,m,w)},createTestRun:(f,m,w=!0)=>this.j.createTestRun(t,i,o,f,m,w),invalidateTestResults:f=>{if(f===void 0)this.h.$markTestRetired(void 0);else{const m=f instanceof Array?f:[f];this.h.$markTestRetired(m.map(w=>Ne.fromExtHostTestItem(w,i).toString()))}},set resolveHandler(f){o.resolveHandler=f},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},p={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(ce(()=>l.$unregisterTestController(i))),this.g.set(i,p),n.add(ce(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(f=>l.$publishDiff(i,f.map(Nh.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=st.None){const r=vE(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:Ia.from(r.kind),targets:[{testIds:t.include?.map(n=>Ne.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=ze.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Ne.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Ne.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(bi.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Dl.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=Nv.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=st.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Dl.to))),gE.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Ne.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>Nh.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new lt(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>gE.get(o)===t.resultId),s=r&&wM(Ne.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=hM++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(f=>n.tree.get(f)).filter(Oi),u=t.excludeExtIds.map(f=>s.collection.tree.get(f)).filter(Oi).filter(f=>l.some(m=>m.fullId.compare(f.fullId)===2));if(!l.length)return{};const h=new Pd(l.some(f=>f.actual instanceof I0)?void 0:l.map(f=>f.actual),u.map(f=>f.actual),c,i),p=aT(t)&&this.j.prepareForMainThreadTestRun(a,h,wE.fromInternal(t,s.collection),c,r);try{return await c.runHandler(h,r),{}}catch(f){return{error:String(f)}}finally{p&&p.hasRunningTasks&&!r.isCancellationRequested&&await ht.toPromise(p.onEnd)}}};kw=__decorate([__param(0,Le),__param(1,_e),__param(2,oo),__param(3,Ba)],kw);var dM=1e4,mE;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(mE||(mE={}));var fM=class extends te{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,s,n){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new D),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new lt(n));const o=this.B(new wn(()=>this.I(),dM));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new D;this.y=a.event,this.B(ce(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Ne.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Ld){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=ni(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map($a.from):[$a.from(u)];if(l.uri&&l.range){const p={range:M.from(l.range),uri:l.uri};for(const f of h)f.location=f.location||p}this.D.$appendTestMessagesInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new lt(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Ld?l.includesTests:[];if(u.length)for(const f of u)this.L(f);const h=l.uri.toString(),p=new Ne([t,r,h]).toString();this.z.set(p,{report:l,extIds:u.map(f=>Ne.fromExtHostTestItem(f,i).toString())}),this.D.$appendCoverage(t,r,Dl.fromFile(i,p,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,i).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,r,Ne.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,r,ne.fromString(l),u&&bi.from(u),h&&Ne.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof zl))throw new Vh(e.id);if(this.j.has(Ne.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=qs.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},pM=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Ne.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=wE.fromPublic(t,i,r,n),c=vE(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:Ia.from(c.kind),id:c.profileId},exclude:r.exclude?.map(u=>Ne.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Ne.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return ht.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new fM(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},vE=e=>{if(e.profile){if(!(e.profile instanceof bE))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},wE=class Zb{static fromPublic(t,i,r,s){return new Zb(t,ni(),s,i)}static fromInternal(t,i){return new Zb(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},gM=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,qs.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Ne.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},mM=class extends cT{constructor(){super(...arguments),this.z=new D,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:qs.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new gM(this.z)}},vM=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:ng(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new mM({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},iu=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},bE=class extends E8{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,iu(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,iu(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),iu(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,iu(this,this.#e,this.#r,{tag:e?fr.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,iu(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return ht.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Oi))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const p=Ia.from(a);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?fr.namespace(this.controllerId,u.id):null,label:o,group:p,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}};function wM(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var kW=H("configurationResolverService"),tt;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(tt||(tt={}));var bM=Object.values(tt).filter(e=>typeof e=="string"),yi=class extends an{constructor(e,t){super(t),this.variable=e}},yE=class Yb{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof Yb)return t;const i=new Yb(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=Kt?"windows":Ui?"osx":ks?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(r=>t[r]=t[i][r]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let r=i+2,s=1;for(;r<t.length;){if(t[r]==="{")s++;else if(t[r]==="}"&&(s--,s===0))break;r++}if(s!==0)return;const n=t.slice(i,r+1),o=t.substring(i+2,r),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:r}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:r}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const r=t[i];typeof r=="string"?this.h(t,i,r):this.g(r)}return}for(const[i,r]of Object.entries(t))this.h(t,i,i,!0),typeof r=="string"?this.h(t,i,r):this.g(r)}}h(t,i,r,s,n){let o=0;for(;o<r.length;){const a=r.indexOf("${",o);if(a===-1)break;const c=this.f(r,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:s};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(h=>h(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=r=>{t.set(r.id,r)};for(const r of this.a.values())r.resolved===void 0&&t.set(r.replacement.id,r.replacement);for(this.d.add(i);;){const r=fi.first(t);if(!r)break;const[s,n]=r;yield n,t.delete(s)}this.d.delete(i)}resolved(){return fi.map(fi.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const r=this.a.get(t.id);if(r&&(r.resolved=i,i.value!==void 0))for(const s of r.locations||fi.empty())this.j(t,s,i)}j(t,{replaceKeyName:i,propertyName:r,object:s},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof r=="string"){const a=s[r],c=r.replaceAll(t.id,n.value);delete s[r],s[c]=a,this.m(s,r,c),this.h(s,c,n.value,!0,o)}else s[r]=s[r].replaceAll(t.id,n.value),this.h(s,r,n.value,!1,o);o.pop()}}m(t,i,r){for(const s of this.a.values())for(const n of s.locations)n.object===t&&n.propertyName===i&&(n.propertyName=r)}toObject(){return this.c?this.b.value:this.b}},yM=class{constructor(e,t,i,r){this.h=new Map,this.resolvableVariables=new Set(bM),this.a=e,this.b=t,this.g=i,r&&(this.c=r.then(s=>this.i(s)))}i(e){if(Kt){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const r=yE.parse(i);for(const s of r.unresolved()){const n=await this.l(s,t?.uri,e);n!==void 0&&r.resolve(s,String(n))}return r.toObject()}async resolveAsync(e,t){const i=yE.parse(t);for(const r of i.unresolved()){const s=await this.l(r,e?.uri);s!==void 0&&i.resolve(r,String(s))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,r){const s={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const h=this.a.getFilePath();if(h)return Wl(h);throw new yi(u,d(14588,null,e.id))},c=u=>{const h=a(u);if(this.a.getWorkspaceFolderPathForFile){const p=this.a.getWorkspaceFolderPathForFile();if(p)return Wl(p)}throw new yi(u,d(14589,null,e.id,Di(h)))},l=u=>{if(o){const h=this.a.getFolderUri(o);if(h)return h;throw new yi(u,d(14590,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new yi(u,d(14591,null,u)):new yi(u,d(14592,null,u))};switch(n){case"env":if(o){if(s.env){const u=s.env[Kt?o.toLowerCase():o];if(He(u))return u}return""}throw new yi(tt.Env,d(14593,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(Et(u))throw new yi(tt.Config,d(14594,null,e.id,o));if(xt(u))throw new yi(tt.Config,d(14595,null,e.id,o));return u}throw new yi(tt.Config,d(14596,null,e.id));case"command":return this.m(tt.Command,e.id,o,r,"command");case"input":return this.m(tt.Input,e.id,o,r,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new yi(tt.ExtensionInstallFolder,d(14597,null,e.id,o));return this.j(u.extensionLocation)}throw new yi(tt.ExtensionInstallFolder,d(14598,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(tt.WorkspaceFolder);return u?Wl(this.j(u)):void 0}case"cwd":{if(!t&&!o)return Co();const u=l(tt.Cwd);return u?Wl(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(tt.WorkspaceFolderBasename);return u?Wl(Di(this.j(u))):void 0}case"userHome":if(s.userHome)return s.userHome;throw new yi(tt.UserHome,d(14599,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new yi(tt.LineNumber,d(14600,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(d(14601,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new yi(tt.SelectedText,d(14602,null,e.id))}case"file":return a(tt.File);case"fileWorkspaceFolder":return c(tt.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return Di(c(tt.FileWorkspaceFolderBasename));case"relativeFile":return t||o?fc(this.j(l(tt.RelativeFile)),a(tt.RelativeFile)):a(tt.RelativeFile);case"relativeFileDirname":{const u=Io(a(tt.RelativeFileDirname));if(t||o){const h=fc(this.j(l(tt.RelativeFileDirname)),u);return h.length===0?".":h}return u}case"fileDirname":return Io(a(tt.FileDirname));case"fileExtname":return Vu(a(tt.FileExtname));case"fileBasename":return Di(a(tt.FileBasename));case"fileBasenameNoExtension":{const u=Di(a(tt.FileBasenameNoExtension));return u.slice(0,u.length-Vu(u).length)}case"fileDirnameBasename":return Di(Io(a(tt.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return ir;default:try{return this.m(tt.Unknown,e.id,o,r,void 0)}catch{return e.id}}}}m(e,t,i,r,s){if(i&&r){const n=s===void 0?r[i]:r[s+":"+i];if(typeof n=="string")return n;throw new yi(e,d(14603,null,t))}return t}},Cw=H("IExtHostVariableResolverProvider"),SM=class extends yM{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Nd||l.input instanceof G1)return l.input.modified;if(l.input instanceof W1||l.input instanceof q1||l.input instanceof V1)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>Co(),getExecPath:()=>dc.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return $o(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return $o(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(dc))}},$w=class extends te{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new At(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new SM(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};$w=__decorate([__param(0,Zs),__param(1,cs),__param(2,Ba),__param(3,ls),__param(4,tu)],$w);var SE=H("IExtHostDebugService"),Iw=class extends te{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Z=i,this.$=r,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new D),this.z=this.B(new D),this.C=this.B(new D),this.F=this.B(new D),this.u=t.getProxy(V.MainThreadDebugService),this.I=this.B(new D),this.L=this.B(new D),this.G=new EM(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(V.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const r=this.hb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=Ve.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.u.$registerDebugVisualizerTree(n,!!r.editItem),ce(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.fb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),Yv.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,y.parse(s)}else{if(r.path)return y.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)sM(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.db.executeCommand(r.command,...r.arguments||[])}hb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.hb(r),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=Ve.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.u.$registerDebugVisualizer(s,i),ce(()=>{this.u.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof qn){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof Gn&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const r=i.filter(o=>o instanceof qn).map(o=>o.id),s=i.filter(o=>o instanceof Gn).map(o=>o.id),n=i.filter(o=>o instanceof gd).map(o=>o.id);return this.u.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.eb.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===Ed.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Ie(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Ie(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Ie(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,s),new Ie(()=>{this.j=this.j.filter(n=>n.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Ie(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Ie(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.yb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAsync(r,i)}ib(t,i){if(t instanceof sl)return new CM(t.implementation)}jb(){}async $startDASession(t,i){const r=this,s=await this.xb(i);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const p=await this.U.sign(u.arguments.value);h.body={signature:p},a.sendResponse(h)}else throw new Error("no signer")}catch(p){h.success=!1,h.message=p.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=cM(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}r.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=aM(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new Gn(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new gd(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new qn(new Bi(c,new $e(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}iR(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof Gn&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof qn&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Bi(y.revive(n.uri),new $e(n.line,n.character))}s.push(o)}}}this.wb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.xb(t.sessionId);t.kind==="thread"?i=new y8(r.api,t.threadId):i=new b8(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return Qt(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return Qt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return Qt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.qb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(i);return this.ub(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(s)}kb(t){if(t instanceof md)return this.lb(t);if(t instanceof rl)return this.mb(t);if(t instanceof vd)return this.nb(t);if(t instanceof sl)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}tb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>Qt(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=ft(n);if(o.length>0)return new kM(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new rl(r));if(t){const n=await this.$.getExtensionRegistry();return Qt(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,s))}vb(t,i){}wb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async xb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;i=new xM(this.u,t.id,t.type,t.name,r,t.configuration,s?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=y.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let r,s;return"id"in i?s=$t.asClassName(i):r=i,{iconPath:r,iconClass:s}}Cb(t){if(t instanceof ci)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?y.file(i):i,light:typeof r=="string"?y.file(r):r}}};Iw=__decorate([__param(0,Le),__param(1,cs),__param(2,Zs),__param(3,ls),__param(4,tu),__param(5,Cw),__param(6,oo),__param(7,ip)],Iw);var xM=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},EM=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},kM=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},CM=class extends rM{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Dw=class extends Iw{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};Dw=__decorate([__param(0,Le),__param(1,cs),__param(2,Zs),__param(3,ls),__param(4,tu),__param(5,Cw),__param(6,oo),__param(7,ip)],Dw);function $M(e){return"uri"in e&&"ranges"in e&&"preview"in e}function IM(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var xE=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=IM(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>ft(s).flat())}};function DM(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:PM(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function PM(e){return{matchLines:e?.matchLines??i0.matchLines,charsPerLine:e?.charsPerLine??i0.charsPerLine}}function AM(e){if($M(e)){const t=Vi(e.ranges).map((i,r)=>{const n=Vi(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new Gs(e.uri,t,e.preview.text)}else return new e0(e.uri,e.text,e.lineNumber)}var TM=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{RM(a)&&i.report(AM(a))};return(async()=>ft(await Promise.all(DM(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:ft(Vi(a.message))}))}};function RM(e){if(LM(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function LM(e){return!!e.preview}var EE=class extends Ps{constructor(e,t,i=()=>!1){const r=new P5(i,()=>!1);super(r);const s=new Bt;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},NM=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&_o(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&_o(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=Di(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(Ao(n)))})})}async q(e,t){const i=new lt,r=e.map(l=>this.r(l)),s=this.o instanceof xE?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??q8,session:s},o=l=>{const u=new nS(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new EE(e,o);let c;try{this.j.add(i),c=hn.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=hn.create();return this.h&&!this.f||(l&&l.forEach(p=>{const f=a.findQueryFragmentAwareSubstr(p),m=Oe.relative(f.folder.path,p.path);if(f.noSiblingsClauses){const w=Di(p.path);this.w(t,{base:f.folder,relativePath:m,basename:w});return}this.u(f.tree,f.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(p=>{this.v(p.tree,p.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=La(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:La(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:La(this.l.excludePattern,void 0)}]);const r=aS(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=Di(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=Di(n),a=Io(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=DR(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:p,basename:f}=h;if(i.matchesExcludesSync(p,f,n!==f?c:void 0))continue;const m=t[p];if(m)o(m);else{if(p===n)continue;s.w(r,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},MM=class{constructor(){this.a=new Object,this.tokenSource=new lt}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},FM=class p${constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new NM(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,p$.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new MM),this.b.get(t)}d(t){return t.relativePath?{resource:_t(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},kE=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const r=this.j.folderQueries||[],s=new lt(t);return new Promise((n,o)=>{this.b=new UM(e);let a=!1;const c=(l,u)=>{if(!(l instanceof t0)&&!a&&!this.c){const h=this.l(l);l instanceof Gs&&typeof this.j.maxResults=="number"&&this.d+h>this.j.maxResults&&(this.c=!0,a=!0,s.cancel(),l=this.m(l,this.j.maxResults-this.d));const p=this.l(l);this.d+=p;const f=l instanceof Gs;(p>0||!f)&&this.b.add(l,u)}};this.n(r,c,s.token,i).then(l=>{s.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{s.dispose();const u=Ao(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Gs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Gs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,r){const s=new EE(e,(u,h)=>({queryTester:new nS(this.j,u),folder:u.folder,folderIdx:h}),()=>!0),n=[],o={report:u=>{if(u instanceof t0)r?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const h=s.findQueryFragmentAwareSubstr(u.uri),p=h.folder.scheme===q.file?IR(()=>this.g.readdir(Mg(u.uri))):void 0,f=j4(h.folder,u.uri);if(f){const m=h.queryTester.includedInQuery(f,Di(f),p);Is(m)?n.push(m.then(w=>{w&&t(u,h.folderIdx)})):m&&t(u,h.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??q8,previewOptions:this.j.previewOptions??i0,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults(OM(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=La(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:La(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:La(this.j.excludePattern,void 0)}]);const r=aS(i);return{folder:y.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function OM(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var UM=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new HM(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!U4(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(jM(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function jM(e){return e instanceof Gs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var HM=class Xb{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<Xb.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},Xb.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=void 0))}},CE=H("IExtHostSearch"),Pw=class{constructor(t,i,r){this.o=t,this.q=i,this.s=r,this.c=this.o.getProxy(V.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new FM}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new TM(i)),this.c.$registerTextSearchProvider(r,this.t(t)),ce(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.t(t)),ce(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.t(t)),ce(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new xE(i)),this.c.$registerFileSearchProvider(r,this.t(t)),ce(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.t(t)),ce(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=Aw(r),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=Aw(r);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=Aw(r);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new kE({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}w(t,i){return new kE({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};Pw=__decorate([__param(0,Le),__param(1,rh),__param(2,_e)],Pw);function Aw(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(BM),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function BM(e){return Jt(e)}var Tw=class extends wP{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>Jt(r))),this.c=t.getProxy(V.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(y.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}t(t,i,r){return new _M(this.c,t,i,r)}};Tw=__decorate([__param(0,Le),__param(1,Tt)],Tw);var _M=class extends S5{constructor(e,t,i,r){super(r?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(i),this.s.$createLogger(t,r).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.w(i):this.r.push(...i)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},$E=H("IExtHostTerminalShellIntegration"),Rw=class extends te{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new D,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new D,this.onDidStartTerminalShellExecution=this.f.event,this.g=new D,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(V.MainThreadTerminalShellIntegration),this.B(ce(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let s=this.b.get(t);s||(s=new zM(i.value,this.f),this.b.set(t,s),s.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=s.value),this.c.fire({terminal:r,shellIntegration:s.value})}$shellExecutionStart(t,i,r,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.startShellExecution(o,this.j(n))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,r,s){this.b.get(t)?.setEnv(i,r,s)}$cwdChange(t,i){this.b.get(t)?.setCwd(this.j(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}j(t){return t?y.file(t):void 0}};Rw=__decorate([__param(0,Le),__param(1,Ua)],Rw);var zM=class extends te{get currentExecution(){return this.f}constructor(e,t){super(),this.s=e,this.t=t,this.a=[],this.store=this.B(new he),this.j=this.B(new D),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.B(new D),this.onDidRequestShellExecution=this.m.event,this.n=this.B(new D),this.onDidRequestEndExecution=this.n.event,this.r=this.B(new D),this.onDidRequestNewExecution=this.r.event;const i=this;this.value={get cwd(){return i.h},get env(){if(i.g)return Object.freeze({isTrusted:i.g.isTrusted,value:Object.freeze({...i.g.value})})},executeCommand(r,s){let n=r;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;i.m.fire(n);const o={value:n,confidence:el.High,isTrusted:!0};return i.requestNewShellExecution(o,i.h).value}}}requestNewShellExecution(e,t){const i=new IE(e,t??this.h);return rp(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:rp(e.value)}),this.a.push(i),this.r.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const r=DE(this.c.unresolvedCommandLines,e);if(r){this.c.unresolvedCommandLines=r.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===el.High)for(const[r,s]of this.a.entries())if(s.value.commandLine.value===e.value){i=s,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=s,this.a.splice(r,1);break}else{const n=DE(rp(s.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=s,this.a.splice(r,1);break}}else i=this.a.shift();i||(i=new IE(e,t??this.h)),this.f=i,this.t.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const r=this.f;this.b=r,this.f=void 0,r.flush().then(()=>{this.b===r&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:r.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const r={};for(let s=0;s<e.length;s++)r[e[s]]=t[s];this.g={value:r,isTrusted:i},this.u()}setCwd(e){let t=!1;y.isUri(this.h)?t=!y.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.u())}u(){this.j.fire({terminal:this.s,shellIntegration:this.value})}},IE=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return mc.EMPTY;this.a=new WM}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},WM=class extends te{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new kr);const e=this.a,t=new mc(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function rp(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function DE(e,t){if(e.length===0)return!1;const i=[...e],r=rp(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===r[0];)i.shift(),r.shift();if(r.length===0)return{unresolvedCommandLines:i}}return!1}var PE;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(PE||(PE={}));var Lw=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),r=e.indexOf(10,t),s=i===-1?r:r===-1?i:Math.min(i,r);if(s===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,s)),this.j(n),this.f.length=0,t=s+(e[s]===13&&e[s+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const r=e.indexOf(":");r===-1?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},Nw=H("IExtHostMpcService"),Mw=class extends te{constructor(t,i,r){super(),this.h=i,this.j=r,this.c=new Set,this.f=this.B(new Lu),this.g=new Map,this.b=t.getProxy(V.MainThreadMcp)}$startMcp(t,i){this.n(t,Nc.fromSerialized(i))}n(t,i){if(i.type===2){this.f.set(t,new GM(t,i,this.b,this.h));return}throw new Error("not implemented")}$stopMcp(t){this.f.has(t)&&(this.f.deleteAndDispose(t),this.b.$onDidChangeState(t,{state:0}))}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const r=this.g.get(t);if(!r)return;const s=r.servers.find(o=>o.label===i);if(!s)return;if(!r.provider.resolveMcpServerDefinition)return Ul.from(s);const n=await r.provider.resolveMcpServerDefinition(s,st.None);return n?Ul.from(n):void 0}registerMcpConfigurationProvider(t,i,r){const s=new he,n=t.contributes?.mcpServerDefinitionProviders?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.mcpServerDefinitionProviders array within your package.json, but "${i}" was not`);const o={id:AA(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof r.resolveMcpServerDefinition=="function",extensionId:t.identifier.value,configTarget:this.j.remote.isRemote?4:2},a=async()=>{const l=await r.provideMcpServerDefinitions(st.None);this.g.set(o.id,{servers:l??[],provider:r});const u=[];for(const h of l??[]){let p=Ve.toKey(t.identifier)+"/"+h.label;if(u.some(f=>f.id===p)){let f=2;for(;u.some(m=>m.id===p+f);)f++;p=p+f}u.push({id:p,label:h.label,cacheNonce:h.version||"$$NONE",launch:Ul.from(h)})}this.b.$upsertMcpCollection(o,u)};s.add(ce(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),r.onDidChangeMcpServerDefinitions&&s.add(r.onDidChangeMcpServerDefinitions(a)),r.onDidChangeServerDefinitions&&s.add(r.onDidChangeServerDefinitions(a)),r.onDidChange&&s.add(r.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),s}};Mw=__decorate([__param(0,Le),__param(1,_e),__param(2,Tt)],Mw);var AE;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(AE||(AE={}));var VM=5,qM=[301,302,303,307,308],GM=class extends te{constructor(e,t,i,r){super(),this.j=e,this.n=t,this.r=i,this.t=r,this.a=new DD,this.b=new Zr,this.c={value:0},this.f=new lt,this.g=new AbortController,this.B(ce(()=>{this.g.abort(),this.f.dispose(!0)})),this.r.$onDidChangeState(this.j,{state:2})}async send(e){try{this.c.value===0?await this.a.queue(()=>this._send(e)):await this._send(e)}catch(t){const i=`Error sending message to ${this.n.uri}: ${String(t)}`;this.r.$onDidChangeState(this.j,{state:3,message:i})}}_send(e){return this.c.value===2?this.H(this.c.endpoint,e):this.u(e,this.c.value===1?this.c.sessionId:void 0)}async u(e,t){const i=new TextEncoder().encode(e),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(r["Mcp-Session-Id"]=t),await this.J(r);const s=await this.N(this.n.uri.toString(!0),{method:"POST",headers:r,body:i},r),n=this.c.value===0,o=s.headers.get("Mcp-Session-Id");if(o&&(this.c={value:1,sessionId:o}),this.c.value===0&&s.status>=400&&s.status<500&&s.status!==401&&s.status!==403){this.L(we.Info,`${s.status} status sending message to ${this.n.uri}, will attempt to fall back to legacy SSE`),this.w(e);return}if(s.status>=300){const a=this.c.value===1&&!!this.c.sessionId&&(s.status===400||s.status===404);this.r.$onDidChangeState(this.j,{state:3,message:`${s.status} status sending message to ${this.n.uri}: ${await this.M(s)}`+(a?"; will retry with new session ID":""),shouldRetry:a});return}this.c.value===0&&(this.c={value:1,sessionId:void 0}),n&&this.F(),await this.D(s,e)}async w(e){const t=await this.G();t&&(this.c={value:2,endpoint:t},await this.H(t,e))}async y(e,t){let i;if(t.headers.has("WWW-Authenticate")){const l=t.headers.get("WWW-Authenticate"),u=UL(l);for(const h of u)if(h.scheme==="Bearer"&&h.params.resource_metadata){i=h.params.resource_metadata;break}}let r,s,n;if(i){const l=await this.z(i);if(new URL(l.resource).toString()!==new URL(e).toString())throw new Error(`Protected Resource Metadata resource "${l.resource}" does not match MCP server resolved resource "${e}". The MCP server must follow OAuth spec https://datatracker.ietf.org/doc/html/rfc9728#PRConfigurationValidation`);r=l.authorization_servers?.[0],s=l.scopes_supported,n=l}const o=new URL(t.url).origin;let a={};r||(r=o,a={...Object.fromEntries(this.n.headers)});try{const l=await this.C(r,a);this.h={authorizationServer:y.parse(r),serverMetadata:l,resourceMetadata:n};return}catch(l){this.L(we.Warning,`Error populating auth metadata: ${String(l)}`)}const c=OL(new URL(o));c.scopes_supported=s??c.scopes_supported??[],this.h={authorizationServer:y.parse(o),serverMetadata:c,resourceMetadata:n}}async z(e){const t=new URL(e),i=new URL(this.n.uri.toString(!0));let r={};t.origin===i.origin&&(r={...Object.fromEntries(this.n.headers)});const s=await this.O(e,{method:"GET",headers:{...r,Accept:"application/json","MCP-Protocol-Version":Bo.LATEST_PROTOCOL_VERSION}});if(s.status!==200)throw new Error(`Failed to fetch resource metadata: ${s.status} ${await this.M(s)}`);const n=await s.json();if(RL(n))return n;throw new Error(`Invalid resource metadata. Expected to follow shape of https://datatracker.ietf.org/doc/html/rfc9728#name-protected-resource-metadata (Hints: is scopes_supported an array? Is resource a string?). Current payload: ${JSON.stringify(n)}`)}async C(e,t){const i=new URL(e),r=i.pathname==="/"?"":i.pathname,s=new URL(AL,e).toString()+r;let n=await this.O(s,{method:"GET",headers:{...t,Accept:"application/json","MCP-Protocol-Version":Bo.LATEST_PROTOCOL_VERSION}});if(n.status!==200){const a=new URL(_S,e).toString()+r;if(n=await this.O(a,{method:"GET",headers:{...t,Accept:"application/json","MCP-Protocol-Version":Bo.LATEST_PROTOCOL_VERSION}}),n.status!==200&&(n=await this.O(y.joinPath(y.parse(e),_S).toString(!0),{method:"GET",headers:{...t,Accept:"application/json","MCP-Protocol-Version":Bo.LATEST_PROTOCOL_VERSION}}),n.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${n.status} ${await this.M(n)}`)}const o=await n.json();if(NL(o))return o;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(o)}`)}async D(e,t){if(e.status===202)return;const i=e.headers.get("Content-Type")?.toLowerCase()||"";if(i.startsWith("text/event-stream")){const r=new Lw(s=>{if(s.type==="message")this.r.$onDidReceiveMessage(this.j,s.data);else if(s.type==="endpoint")throw this.L(we.Warning,`Received SSE endpoint from a POST to ${this.n.uri}, will fall back to legacy SSE`),this.w(t),new ki});try{await this.I(r,e)}catch(s){this.L(we.Warning,`Error reading SSE stream: ${String(s)}`)}}else if(i.startsWith("application/json"))this.r.$onDidReceiveMessage(this.j,await e.text());else{const r=await e.text();QM(r)?this.r.$onDidReceiveMessage(this.j,r):this.L(we.Warning,`Unexpected ${e.status} response for request: ${r}`)}}async F(){let e;for(let t=0;!this.q.isDisposed;t++){await nr(Math.min(t*1e3,3e4),this.f.token);let i;try{const s={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.J(s),this.c.value===1&&this.c.sessionId!==void 0&&(s["Mcp-Session-Id"]=this.c.sessionId),e&&(s["Last-Event-ID"]=e),i=await this.N(this.n.uri.toString(!0),{method:"GET",headers:s},s)}catch{this.L(we.Info,`Error connecting to ${this.n.uri} for async notifications, will retry`);continue}if(i.status>=400){this.L(we.Debug,`${i.status} status connecting to ${this.n.uri} for async notifications; they will be disabled: ${await this.M(i)}`);return}i.headers.get("content-type")?.toLowerCase().includes("text/event-stream")&&(t=0);const r=new Lw(s=>{s.type==="message"&&this.r.$onDidReceiveMessage(this.j,s.data),s.id&&(e=s.id)});try{await this.I(r,i)}catch(s){this.L(we.Info,`Error reading from async stream, we will reconnect: ${s}`)}}}async G(){const e=new Zr,t={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.J(t);let i;try{if(i=await this.N(this.n.uri.toString(!0),{method:"GET",headers:t},t),i.status>=300){this.r.$onDidChangeState(this.j,{state:3,message:`${i.status} status connecting to ${this.n.uri} as SSE: ${await this.M(i)}`});return}}catch(s){this.r.$onDidChangeState(this.j,{state:3,message:`Error connecting to ${this.n.uri} as SSE: ${s}`});return}const r=new Lw(s=>{s.type==="message"?this.r.$onDidReceiveMessage(this.j,s.data):s.type==="endpoint"&&e.complete(new URL(s.data,this.n.uri.toString(!0)).toString())});return this.B(ce(()=>e.cancel())),this.I(r,i).catch(s=>{this.r.$onDidChangeState(this.j,{state:3,message:`Error reading SSE stream: ${String(s)}`})}),e.p}async H(e,t){const i=new TextEncoder().encode(t),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length)};await this.J(r);const s=await this.O(e,{method:"POST",headers:r,body:i});s.status>=300&&this.L(we.Warning,`${s.status} status sending message to ${this.b}: ${await this.M(s)}`)}async I(e,t){if(!t.body)return;const i=t.body.getReader();let r;do{try{r=await Fg(i.read(),this.f.token)}catch(s){if(i.cancel(),this.q.isDisposed)return;throw s}r.value&&e.feed(r.value)}while(!r.done)}async J(e){if(this.h)try{const t=await this.r.$getTokenFromServerMetadata(this.j,this.h.authorizationServer,this.h.serverMetadata,this.h.resourceMetadata);t&&(e.Authorization=`Bearer ${t}`)}catch(t){this.L(we.Warning,`Error getting token from server metadata: ${String(t)}`)}return e}L(e,t){this.q.isDisposed||this.r.$onDidPublishLog(this.j,e,t)}async M(e){try{return await e.text()}catch{return e.statusText}}async N(e,t,i){const r=()=>this.O(e,t);let s=await r();return s.status===401&&(this.h||(await this.y(e,s),await this.J(i),i.Authorization&&(t.headers=i,s=await r()))),s}async O(e,t){if(Xg(this.t.getLevel(),we.Trace)){const s={...t,headers:{...t.headers}};s.body&&(s.body=new TextDecoder().decode(s.body)),s.headers?.Authorization&&(s.headers.Authorization="***"),this.L(we.Trace,`Fetching ${e} with options: ${JSON.stringify(s)}`)}let i=e,r;for(let s=0;s<VM&&(r=await fetch(i,{...t,signal:this.g.signal,redirect:"manual"}),!!qM.includes(r.status));s++){const n=r.headers.get("location");if(!n)break;const o=new URL(n,i).toString();this.L(we.Trace,`Redirect (${r.status}) from ${i} to ${o}`),i=o,(r.status===303||(r.status===301||r.status===302)&&t.method==="POST")&&(t.method="GET",delete t.body)}if(Xg(this.t.getLevel(),we.Trace)){const s={};r.headers.forEach((n,o)=>{s[o]=n}),this.L(we.Trace,`Fetched ${i}: ${JSON.stringify({status:r.status,headers:s})}`)}return r}};function QM(e){try{return JSON.parse(e),!0}catch{return!1}}var TE=H("IExtHostDataChannels"),JM=class{constructor(){this.a=new Map}createDataChannel(e,t){T(e,"dataChannels");let i=this.a.get(t);return i||(i=new ZM(t),this.a.set(t,i)),i}$onDidReceiveData(e,t){const i=this.a.get(e);i&&i._fireDidReceiveData(t)}},ZM=class extends te{constructor(e){super(),this.b=e,this.a=new D,this.onDidReceiveData=this.a.event,this.B(this.a)}_fireDidReceiveData(e){this.a.fire({data:e})}toString(){return`DataChannel(${this.b})`}};qe(iw,tw,1),qe(Sn,Tw,1),qe(ql,aw,1),qe(oo,P0,0),qe(Vf,H0,0),qe(V0,q0,0),qe(ls,p0,0),qe(Bf,b0,0),qe(ip,kw,0),qe(SE,Dw,0),qe(Mx,lw,0),qe(Ba,hw,0),qe(rw,sw,0),qe(Lo,MP,0),qe(Nx,cw,1),qe(CE,Pw,0),qe(w0,CS,0),qe(uE,xw,0),qe(Ua,R0,0),qe($E,Rw,0),qe(C0,$0,0),qe(zf,F0,0),qe(Wf,U0,0),qe(cs,u0,0),qe(ew,Ix,0),qe(tu,Ew,0),qe(Cw,$w,0),qe(Nw,Mw,0),qe(TE,JM,0);var YM=class extends te{constructor(e,t=[]){super(),this.a=new vP([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Fw=class extends YM{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?d(2964,null):d(t?2965:2966,null);super(i.createLogger(s,{name:n}))}};Fw=__decorate([__param(1,Sn),__param(2,Tt)],Fw);var RE={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},LE;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(LE||(LE={}));var XM=8,KM=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Ye=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return np(e,t)}compute(e,t,i){return i}},sp=class{constructor(e,t){this.newValue=e,this.didChange=t}};function np(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new sp(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&Fi(e,t);return new sp(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=np(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new sp(e,i)}var Ks=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return np(e,t)}validate(e){return this.defaultValue}},za=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return np(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function J(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var ae=class extends za{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return J(e,this.defaultValue)}};function eF(e,t,i,r){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(r,s),s|0)}var Re=class g$ extends za{static clampedInt(t,i,r,s){return eF(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return g$.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Hr=class m$ extends za{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,s,n,o,a){typeof n<"u"&&(n.type="number",n.default=r,n.minimum=o,n.maximum=a),super(t,i,r,n),this.validationFn=s,this.minimum=o,this.maximum=a}validate(t){return this.validationFn(m$.float(t,this.defaultValue))}},li=class v$ extends za{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return v$.string(t,this.defaultValue)}};function Xe(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var Ke=class extends za{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this.c=r}validate(e){return Xe(e,this.defaultValue,this.c)}},ru=class extends Ye{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function tF(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var iF=class extends Ye{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(312,null),d(313,null),d(314,null)],default:"auto",tags:["accessibility"],description:d(315,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},rF=class extends Ye{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(29,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(316,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(317,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:J(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:J(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},NE;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(NE||(NE={}));function sF(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var pr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(pr||(pr={}));function ME(e){switch(e){case"line":return pr.Line;case"block":return pr.Block;case"underline":return pr.Underline;case"line-thin":return pr.LineThin;case"block-outline":return pr.BlockOutline;case"underline-thin":return pr.UnderlineThin}}var nF=class extends Ks{constructor(){super(161)}compute(e,t,i){const r=["monaco-editor"];return t.get(48)&&r.push(t.get(48)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(82)==="default"?r.push("mouse-default"):t.get(82)==="copy"&&r.push("mouse-copy"),t.get(126)&&r.push("showUnused"),t.get(156)&&r.push("showDeprecated"),r.join(" ")}},oF=class extends ae{constructor(){super(45,"emptySelectionClipboard",!0,{description:d(318,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},aF=class extends Ye{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(50,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(319,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(320,null),d(321,null),d(322,null)],description:d(323,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(324,null),d(325,null),d(326,null)],description:d(327,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(328,null),included:Ui},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(329,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(330,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(331,null),d(332,null)],description:d(333,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(334,null),d(335,null)],description:d(336,null)},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:d(337,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:J(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:J(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Xe(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Xe(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:J(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:J(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:J(t.loop,this.defaultValue.loop),history:Xe(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Xe(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},cF=class Ja extends Ye{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(60,"fontLigatures",Ja.OFF,{anyOf:[{type:"boolean",description:d(338,null)},{type:"string",description:d(339,null)}],description:d(340,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Ja.OFF:t==="true"?Ja.ON:t:t?Ja.ON:Ja.OFF}},lF=class Za extends Ye{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(63,"fontVariations",Za.OFF,{anyOf:[{type:"boolean",description:d(341,null)},{type:"string",description:d(342,null)}],description:d(343,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Za.OFF:t==="true"?Za.TRANSLATE:t:t?Za.TRANSLATE:Za.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},uF=class extends Ks{constructor(){super(59)}compute(e,t,i){return e.fontInfo}},hF=class extends Ks{constructor(){super(160)}compute(e,t,i){return e.inputMode==="overtype"?t.get(91):t.get(34)}},dF=class extends Ks{constructor(){super(169)}compute(e,t){return e.editContextSupported&&t.get(44)}},fF=class extends Ks{constructor(){super(171)}compute(e,t){return e.accessibilitySupport===2?t.get(7):t.get(6)}},pF=class extends za{constructor(){super(61,"fontSize",ds.fontSize,{type:"number",minimum:6,maximum:100,default:ds.fontSize,description:d(344,null)})}validate(e){const t=Hr.float(e,this.defaultValue);return t===0?ds.fontSize:Hr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},gF=class Ya extends Ye{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(62,"fontWeight",ds.fontWeight,{anyOf:[{type:"number",minimum:Ya.d,maximum:Ya.e,errorMessage:d(345,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:Ya.c}],default:ds.fontWeight,description:d(346,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Re.clampedInt(t,ds.fontWeight,Ya.d,Ya.e))}},mF=class extends Ye{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(347,null),d(348,null),d(349,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(67,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(350,null)},"editor.gotoLocation.multipleDefinitions":{description:d(351,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(352,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(353,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(354,null),...t},"editor.gotoLocation.multipleReferences":{description:d(355,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:d(356,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:d(357,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:d(358,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:d(359,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:d(360,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Xe(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Xe(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Xe(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Xe(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Xe(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Xe(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Xe(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:li.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:li.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:li.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:li.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:li.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:li.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},vF=class extends Ye{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(69,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(361,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(362,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(363,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,markdownDescription:d(364,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(365,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),delay:Re.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:J(t.sticky,this.defaultValue.sticky),hidingDelay:Re.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:J(t.above,this.defaultValue.above)}}},FE;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(FE||(FE={}));var wF=class Vp extends Ks{constructor(){super(164)}compute(t,i,r){return Vp.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let p=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const f=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,S=t.verticalScrollbarWidth,E=t.viewLineCount,C=t.remainingWidth,P=t.isViewportWrapping,Z=h?2:3;let W=Math.floor(n*s);const oe=W/n;let O=!1,B=!1,G=Z*p,me=p/n,xe=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:ge,extraLinesBeforeFirstLine:Ee,extraLinesBeyondLastLine:De,desiredRatio:nt,minimapLineCount:yt}=Vp.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(E/yt>1)O=!0,B=!0,p=1,G=1,me=p/n;else{let dt=!1,ii=p+1;if(m==="fit"){const Mt=Math.ceil((Ee+E+De)*G);P&&a&&C<=i.stableFitRemainingWidth?(dt=!0,ii=i.stableFitMaxMinimapScale):dt=Mt>W}if(m==="fill"||dt){O=!0;const Mt=p;G=Math.min(c*n,Math.max(1,Math.floor(1/nt))),P&&a&&C<=i.stableFitRemainingWidth&&(ii=i.stableFitMaxMinimapScale),p=Math.min(ii,Math.max(1,Math.floor(G/Z))),p>Mt&&(xe=Math.min(2,p/Mt)),me=p/n/xe,W=Math.ceil(Math.max(ge,Ee+E+De)*G),P?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=C,i.stableFitMaxMinimapScale=p):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const ke=Math.floor(f*me),j=Math.min(ke,Math.max(0,Math.floor((C-S-2)*me/(l+me)))+XM);let _=Math.floor(n*j);const z=_/n;_=Math.floor(_*xe);const Q=h?1:2,Y=w==="left"?0:r-j-S;return{renderMinimap:Q,minimapLeft:Y,minimapWidth:j,minimapHeightIsEditorHeight:O,minimapIsSampling:B,minimapScale:p,minimapLineHeight:G,minimapCanvasInnerWidth:_,minimapCanvasInnerHeight:W,minimapCanvasOuterWidth:z,minimapCanvasOuterHeight:oe}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(153),p=h==="inherit"?t.get(152):h,f=p==="inherit"?t.get(148):p,m=t.get(151),w=i.isDominatedByLongLines,S=t.get(66),E=t.get(76).renderType!==0,C=t.get(77),P=t.get(118),Z=t.get(95),W=t.get(81),oe=t.get(116),O=oe.verticalScrollbarSize,B=oe.verticalHasArrows,G=oe.arrowSize,me=oe.horizontalScrollbarSize,xe=t.get(52),ke=t.get(125)!=="never";let j=t.get(74);xe&&ke&&(j+=16);let _=0;if(E){const bs=Math.max(o,C);_=Math.round(bs*c)}let z=0;S&&(z=n*i.glyphMarginDecorationLaneCount);let Q=0,Y=Q+z,ge=Y+_,Ee=ge+j;const De=r-z-_-j;let nt=!1,yt=!1,We=-1;t.get(2)===2&&p==="inherit"&&w?(nt=!0,yt=!0):f==="on"||f==="bounded"?yt=!0:f==="wordWrapColumn"&&(We=m);const dt=Vp.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:P,paddingTop:Z.top,paddingBottom:Z.bottom,minimap:W,verticalScrollbarWidth:O,viewLineCount:u,remainingWidth:De,isViewportWrapping:yt},i.memory||new KM);dt.renderMinimap!==0&&dt.minimapLeft===0&&(Q+=dt.minimapWidth,Y+=dt.minimapWidth,ge+=dt.minimapWidth,Ee+=dt.minimapWidth);const ii=De-dt.minimapWidth,Mt=Math.max(1,Math.floor((ii-O-2)/a)),zi=B?G:0;return yt&&(We=Math.max(1,Mt),f==="bounded"&&(We=Math.min(We,m))),{width:r,height:s,glyphMarginLeft:Q,glyphMarginWidth:z,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:Y,lineNumbersWidth:_,decorationsLeft:ge,decorationsWidth:j,contentLeft:Ee,contentWidth:ii,minimap:dt,viewportColumn:Mt,isWordWrapMinified:nt,isViewportWrapping:yt,wrappingColumn:We,verticalScrollbarWidth:O,horizontalScrollbarHeight:me,overviewRuler:{top:zi,width:O,height:s-2*zi,right:0}}}},bF=class extends Ye{constructor(){super(155,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(366,null),d(367,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(368,null)}})}validate(e){return Xe(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},hs;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(hs||(hs={}));var yF=class extends Ye{constructor(){const e={enabled:hs.OnCode};super(73,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[hs.Off,hs.OnCode,hs.On],default:e.enabled,enumDescriptions:[d(369,null),d(370,null),d(371,null)],description:d(372,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Xe(e.enabled,this.defaultValue.enabled,[hs.Off,hs.OnCode,hs.On])}}},SF=class extends Ye{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(130,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(373,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(374,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(375,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(376,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),maxLineCount:Re.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Xe(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:J(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},xF=class extends Ye{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(158,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(377,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(378,null),d(379,null,Ui?"Ctrl+Option":"Ctrl+Alt"),d(380,null,Ui?"Ctrl+Option":"Ctrl+Alt"),d(381,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(382,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(383,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(384,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(385,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Xe(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Re.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:li.string(t.fontFamily,this.defaultValue.fontFamily),padding:J(t.padding,this.defaultValue.padding),maximumLength:Re.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},EF=class extends Ye{constructor(){super(74,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Re.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Re.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},kF=class extends Hr{constructor(){super(75,"lineHeight",ds.lineHeight,e=>Hr.clamp(e,0,150),{markdownDescription:d(386,null)},0,150)}compute(e,t,i){return e.fontInfo.lineHeight}},CF=class extends Ye{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:"none",renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(81,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(387,null)},"editor.minimap.autohide":{type:"string",enum:["none","mouseover","scroll"],enumDescriptions:[d(388,null),d(389,null),d(390,null)],default:e.autohide,description:d(391,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(392,null),d(393,null),d(394,null)],default:e.size,description:d(395,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(396,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(397,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(398,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(399,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(400,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(401,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(402,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(403,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(404,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(405,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const r=e.markSectionHeaderRegex;if(typeof r=="string")try{new RegExp(r,"d"),i=r}catch{}return{enabled:J(t.enabled,this.defaultValue.enabled),autohide:Xe(t.autohide,this.defaultValue.autohide,["none","mouseover","scroll"]),size:Xe(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Xe(t.side,this.defaultValue.side,["right","left"]),showSlider:Xe(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:J(t.renderCharacters,this.defaultValue.renderCharacters),scale:Re.clampedInt(t.scale,1,1,3),maxColumn:Re.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:J(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:J(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:Hr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Hr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function $F(e){return e==="ctrlCmd"?Ui?"metaKey":"ctrlKey":"altKey"}var IF=class extends Ye{constructor(){super(95,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(406,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(407,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Re.clampedInt(t.top,0,0,1e3),bottom:Re.clampedInt(t.bottom,0,0,1e3)}}},DF=class extends Ye{constructor(){const e={enabled:!0,cycle:!0};super(97,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(408,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(409,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),cycle:J(t.cycle,this.defaultValue.cycle)}}},PF=class extends Ks{constructor(){super(162)}compute(e,t,i){return e.pixelRatio}},AF=class extends Ye{constructor(){super(99,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},TF=class extends Ye{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(410,null),d(411,null),d(412,null)]}];super(101,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(413,null)},comments:{anyOf:t,default:e.comments,description:d(414,null)},other:{anyOf:t,default:e.other,description:d(415,null)}},default:e,markdownDescription:d(416,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=Xe(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=Xe(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=Xe(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},OE;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(OE||(OE={}));var RF=class extends Ye{constructor(){super(76,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(417,null),d(418,null),d(419,null),d(420,null)],default:"on",description:d(421,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},LF=class extends Ye{constructor(){const e=[],t={type:"number",description:d(422,null)};super(115,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(423,null),format:"color-hex"}}}]},default:e,description:d(424,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Re.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Re.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},NF=class extends Ye{constructor(){super(104,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function UE(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var MF=class extends Ye{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(116,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(425,null),d(426,null),d(427,null)],default:"auto",description:d(428,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(429,null),d(430,null),d(431,null)],default:"auto",description:d(432,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(433,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(434,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(435,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(436,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Re.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Re.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Re.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:UE(t.vertical,this.defaultValue.vertical),horizontal:UE(t.horizontal,this.defaultValue.horizontal),useShadows:J(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:J(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:J(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:J(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:J(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Re.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Re.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:J(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:J(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},gr="inUntrustedWorkspace",ao={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},FF=class extends Ye{constructor(){const e={nonBasicASCII:gr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:gr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(141,"unicodeHighlight",e,{[ao.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gr],default:e.nonBasicASCII,description:d(437,null)},[ao.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(438,null)},[ao.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(439,null)},[ao.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gr],default:e.includeComments,description:d(440,null)},[ao.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,gr],default:e.includeStrings,description:d(441,null)},[ao.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(442,null),additionalProperties:{type:"boolean"}},[ao.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(443,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(mi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(mi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new sp(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Wa(t.nonBasicASCII,gr,[!0,!1,gr]),invisibleCharacters:J(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:J(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Wa(t.includeComments,gr,[!0,!1,gr]),includeStrings:Wa(t.includeStrings,gr,[!0,!1,gr]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},OF=class extends Ye{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,minShowDelay:0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always"},triggerCommandOnProviderChange:!0,experimental:{suppressInlineSuggestions:"",showOnSuggestConflict:"never"}};super(71,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(444,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(445,null),d(446,null),d(447,null)],description:d(448,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(449,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(450,null)},"editor.inlineSuggest.minShowDelay":{type:"number",default:0,minimum:0,maximum:1e4,description:d(451,null)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"string",default:e.experimental.suppressInlineSuggestions,tags:["experimental"],description:d(452,null),experiment:{mode:"auto"}},"editor.inlineSuggest.triggerCommandOnProviderChange":{type:"boolean",default:e.triggerCommandOnProviderChange,tags:["experimental"],description:d(453,null),experiment:{mode:"auto"}},"editor.inlineSuggest.experimental.showOnSuggestConflict":{type:"string",default:e.experimental.showOnSuggestConflict,tags:["experimental"],enum:["always","never","whenSuggestListIsIncomplete"],description:d(454,null),experiment:{mode:"auto"}},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(455,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:d(456,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(457,null),enum:["auto","never"],enumDescriptions:[d(458,null),d(459,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(460,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),mode:Xe(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Xe(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:J(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:J(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:li.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:J(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),minShowDelay:Re.clampedInt(t.minShowDelay,0,0,1e4),edits:{enabled:J(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:J(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Xe(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:Xe(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"])},triggerCommandOnProviderChange:J(t.triggerCommandOnProviderChange,this.defaultValue.triggerCommandOnProviderChange),experimental:{suppressInlineSuggestions:li.string(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions),showOnSuggestConflict:Xe(t.experimental?.showOnSuggestConflict,this.defaultValue.experimental.showOnSuggestConflict,["always","never","whenSuggestListIsIncomplete"])}}}},UF=class extends Ye{constructor(){const e={enabled:RE.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:RE.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(21,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(461,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(462,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:J(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},jF=class extends Ye{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(22,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(463,null),d(464,null),d(465,null)],default:e.bracketPairs,description:d(466,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(467,null),d(468,null),d(469,null)],default:e.bracketPairsHorizontal,description:d(470,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(471,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(472,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(473,null),d(474,null),d(475,null)],default:e.highlightActiveIndentation,description:d(476,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Wa(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Wa(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:J(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:J(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Wa(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Wa(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var HF=class extends Ye{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(133,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(477,null),d(478,null)],default:e.insertMode,description:d(479,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(480,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(481,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(482,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(483,null),d(484,null),d(485,null),d(486,null)],default:e.selectionMode,markdownDescription:d(487,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(488,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(489,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(490,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(491,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(492,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(493,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(494,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(514,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(515,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(516,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(517,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(518,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(519,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(520,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(521,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(522,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(523,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(524,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Xe(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:J(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:J(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:J(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:J(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Xe(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:J(t.showIcons,this.defaultValue.showIcons),showStatusBar:J(t.showStatusBar,this.defaultValue.showStatusBar),preview:J(t.preview,this.defaultValue.preview),previewMode:Xe(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:J(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:J(t.showMethods,this.defaultValue.showMethods),showFunctions:J(t.showFunctions,this.defaultValue.showFunctions),showConstructors:J(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:J(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:J(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:J(t.showFields,this.defaultValue.showFields),showVariables:J(t.showVariables,this.defaultValue.showVariables),showClasses:J(t.showClasses,this.defaultValue.showClasses),showStructs:J(t.showStructs,this.defaultValue.showStructs),showInterfaces:J(t.showInterfaces,this.defaultValue.showInterfaces),showModules:J(t.showModules,this.defaultValue.showModules),showProperties:J(t.showProperties,this.defaultValue.showProperties),showEvents:J(t.showEvents,this.defaultValue.showEvents),showOperators:J(t.showOperators,this.defaultValue.showOperators),showUnits:J(t.showUnits,this.defaultValue.showUnits),showValues:J(t.showValues,this.defaultValue.showValues),showConstants:J(t.showConstants,this.defaultValue.showConstants),showEnums:J(t.showEnums,this.defaultValue.showEnums),showEnumMembers:J(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:J(t.showKeywords,this.defaultValue.showKeywords),showWords:J(t.showWords,this.defaultValue.showWords),showColors:J(t.showColors,this.defaultValue.showColors),showFiles:J(t.showFiles,this.defaultValue.showFiles),showReferences:J(t.showReferences,this.defaultValue.showReferences),showFolders:J(t.showFolders,this.defaultValue.showFolders),showTypeParameters:J(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:J(t.showSnippets,this.defaultValue.showSnippets),showUsers:J(t.showUsers,this.defaultValue.showUsers),showIssues:J(t.showIssues,this.defaultValue.showIssues)}}},BF=class extends Ye{constructor(){super(128,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(525,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(526,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:J(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:J(e.selectSubwords,this.defaultValue.selectSubwords)}}},_F=class extends Ye{constructor(){const e=[];super(146,"wordSegmenterLocales",e,{anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],description:d(527,null),type:"array",items:{type:"string"},default:e})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},jE;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(jE||(jE={}));var zF=class extends Ye{constructor(){super(154,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(528,null),d(529,null),d(530,null),d(531,null)],description:d(532,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},WF=class extends Ks{constructor(){super(165)}compute(e,t,i){const r=t.get(164);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},VF=class extends Ye{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(43,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(533,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(534,null),enum:["afterDrop","never"],enumDescriptions:[d(535,null),d(536,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),showDropSelector:Xe(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},qF=class extends Ye{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(96,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(537,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(538,null),enum:["afterPaste","never"],enumDescriptions:[d(539,null),d(540,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:J(t.enabled,this.defaultValue.enabled),showPasteSelector:Xe(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},GF="Consolas, 'Courier New', monospace",QF="Menlo, Monaco, 'Courier New', monospace",JF="'Droid Sans Mono', 'monospace', monospace",ds={fontFamily:Ui?QF:Kt?GF:JF,fontWeight:"normal",fontSize:Ui?12:14,lineHeight:0,letterSpacing:0},ZF=[];function A(e){return ZF[e.id]=e,e}var HE;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowOverflow=4]="allowOverflow",e[e.allowVariableLineHeights=5]="allowVariableLineHeights",e[e.allowVariableFonts=6]="allowVariableFonts",e[e.allowVariableFontsInAccessibilityMode=7]="allowVariableFontsInAccessibilityMode",e[e.ariaLabel=8]="ariaLabel",e[e.ariaRequired=9]="ariaRequired",e[e.autoClosingBrackets=10]="autoClosingBrackets",e[e.autoClosingComments=11]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=12]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=13]="autoClosingDelete",e[e.autoClosingOvertype=14]="autoClosingOvertype",e[e.autoClosingQuotes=15]="autoClosingQuotes",e[e.autoIndent=16]="autoIndent",e[e.autoIndentOnPaste=17]="autoIndentOnPaste",e[e.autoIndentOnPasteWithinString=18]="autoIndentOnPasteWithinString",e[e.automaticLayout=19]="automaticLayout",e[e.autoSurround=20]="autoSurround",e[e.bracketPairColorization=21]="bracketPairColorization",e[e.guides=22]="guides",e[e.codeLens=23]="codeLens",e[e.codeLensFontFamily=24]="codeLensFontFamily",e[e.codeLensFontSize=25]="codeLensFontSize",e[e.colorDecorators=26]="colorDecorators",e[e.colorDecoratorsLimit=27]="colorDecoratorsLimit",e[e.columnSelection=28]="columnSelection",e[e.comments=29]="comments",e[e.contextmenu=30]="contextmenu",e[e.copyWithSyntaxHighlighting=31]="copyWithSyntaxHighlighting",e[e.cursorBlinking=32]="cursorBlinking",e[e.cursorSmoothCaretAnimation=33]="cursorSmoothCaretAnimation",e[e.cursorStyle=34]="cursorStyle",e[e.cursorSurroundingLines=35]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=36]="cursorSurroundingLinesStyle",e[e.cursorWidth=37]="cursorWidth",e[e.cursorHeight=38]="cursorHeight",e[e.disableLayerHinting=39]="disableLayerHinting",e[e.disableMonospaceOptimizations=40]="disableMonospaceOptimizations",e[e.domReadOnly=41]="domReadOnly",e[e.dragAndDrop=42]="dragAndDrop",e[e.dropIntoEditor=43]="dropIntoEditor",e[e.editContext=44]="editContext",e[e.emptySelectionClipboard=45]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=46]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=47]="experimentalWhitespaceRendering",e[e.extraEditorClassName=48]="extraEditorClassName",e[e.fastScrollSensitivity=49]="fastScrollSensitivity",e[e.find=50]="find",e[e.fixedOverflowWidgets=51]="fixedOverflowWidgets",e[e.folding=52]="folding",e[e.foldingStrategy=53]="foldingStrategy",e[e.foldingHighlight=54]="foldingHighlight",e[e.foldingImportsByDefault=55]="foldingImportsByDefault",e[e.foldingMaximumRegions=56]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=57]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=58]="fontFamily",e[e.fontInfo=59]="fontInfo",e[e.fontLigatures=60]="fontLigatures",e[e.fontSize=61]="fontSize",e[e.fontWeight=62]="fontWeight",e[e.fontVariations=63]="fontVariations",e[e.formatOnPaste=64]="formatOnPaste",e[e.formatOnType=65]="formatOnType",e[e.glyphMargin=66]="glyphMargin",e[e.gotoLocation=67]="gotoLocation",e[e.hideCursorInOverviewRuler=68]="hideCursorInOverviewRuler",e[e.hover=69]="hover",e[e.inDiffEditor=70]="inDiffEditor",e[e.inlineSuggest=71]="inlineSuggest",e[e.letterSpacing=72]="letterSpacing",e[e.lightbulb=73]="lightbulb",e[e.lineDecorationsWidth=74]="lineDecorationsWidth",e[e.lineHeight=75]="lineHeight",e[e.lineNumbers=76]="lineNumbers",e[e.lineNumbersMinChars=77]="lineNumbersMinChars",e[e.linkedEditing=78]="linkedEditing",e[e.links=79]="links",e[e.matchBrackets=80]="matchBrackets",e[e.minimap=81]="minimap",e[e.mouseStyle=82]="mouseStyle",e[e.mouseWheelScrollSensitivity=83]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=84]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=85]="multiCursorMergeOverlapping",e[e.multiCursorModifier=86]="multiCursorModifier",e[e.multiCursorPaste=87]="multiCursorPaste",e[e.multiCursorLimit=88]="multiCursorLimit",e[e.occurrencesHighlight=89]="occurrencesHighlight",e[e.occurrencesHighlightDelay=90]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=91]="overtypeCursorStyle",e[e.overtypeOnPaste=92]="overtypeOnPaste",e[e.overviewRulerBorder=93]="overviewRulerBorder",e[e.overviewRulerLanes=94]="overviewRulerLanes",e[e.padding=95]="padding",e[e.pasteAs=96]="pasteAs",e[e.parameterHints=97]="parameterHints",e[e.peekWidgetDefaultFocus=98]="peekWidgetDefaultFocus",e[e.placeholder=99]="placeholder",e[e.definitionLinkOpensInPeek=100]="definitionLinkOpensInPeek",e[e.quickSuggestions=101]="quickSuggestions",e[e.quickSuggestionsDelay=102]="quickSuggestionsDelay",e[e.readOnly=103]="readOnly",e[e.readOnlyMessage=104]="readOnlyMessage",e[e.renameOnType=105]="renameOnType",e[e.renderRichScreenReaderContent=106]="renderRichScreenReaderContent",e[e.renderControlCharacters=107]="renderControlCharacters",e[e.renderFinalNewline=108]="renderFinalNewline",e[e.renderLineHighlight=109]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=110]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=111]="renderValidationDecorations",e[e.renderWhitespace=112]="renderWhitespace",e[e.revealHorizontalRightPadding=113]="revealHorizontalRightPadding",e[e.roundedSelection=114]="roundedSelection",e[e.rulers=115]="rulers",e[e.scrollbar=116]="scrollbar",e[e.scrollBeyondLastColumn=117]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=118]="scrollBeyondLastLine",e[e.scrollPredominantAxis=119]="scrollPredominantAxis",e[e.selectionClipboard=120]="selectionClipboard",e[e.selectionHighlight=121]="selectionHighlight",e[e.selectionHighlightMaxLength=122]="selectionHighlightMaxLength",e[e.selectionHighlightMultiline=123]="selectionHighlightMultiline",e[e.selectOnLineNumbers=124]="selectOnLineNumbers",e[e.showFoldingControls=125]="showFoldingControls",e[e.showUnused=126]="showUnused",e[e.snippetSuggestions=127]="snippetSuggestions",e[e.smartSelect=128]="smartSelect",e[e.smoothScrolling=129]="smoothScrolling",e[e.stickyScroll=130]="stickyScroll",e[e.stickyTabStops=131]="stickyTabStops",e[e.stopRenderingLineAfter=132]="stopRenderingLineAfter",e[e.suggest=133]="suggest",e[e.suggestFontSize=134]="suggestFontSize",e[e.suggestLineHeight=135]="suggestLineHeight",e[e.suggestOnTriggerCharacters=136]="suggestOnTriggerCharacters",e[e.suggestSelection=137]="suggestSelection",e[e.tabCompletion=138]="tabCompletion",e[e.tabIndex=139]="tabIndex",e[e.trimWhitespaceOnDelete=140]="trimWhitespaceOnDelete",e[e.unicodeHighlighting=141]="unicodeHighlighting",e[e.unusualLineTerminators=142]="unusualLineTerminators",e[e.useShadowDOM=143]="useShadowDOM",e[e.useTabStops=144]="useTabStops",e[e.wordBreak=145]="wordBreak",e[e.wordSegmenterLocales=146]="wordSegmenterLocales",e[e.wordSeparators=147]="wordSeparators",e[e.wordWrap=148]="wordWrap",e[e.wordWrapBreakAfterCharacters=149]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=150]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=151]="wordWrapColumn",e[e.wordWrapOverride1=152]="wordWrapOverride1",e[e.wordWrapOverride2=153]="wordWrapOverride2",e[e.wrappingIndent=154]="wrappingIndent",e[e.wrappingStrategy=155]="wrappingStrategy",e[e.showDeprecated=156]="showDeprecated",e[e.inertialScroll=157]="inertialScroll",e[e.inlayHints=158]="inlayHints",e[e.wrapOnEscapedLineFeeds=159]="wrapOnEscapedLineFeeds",e[e.effectiveCursorStyle=160]="effectiveCursorStyle",e[e.editorClassName=161]="editorClassName",e[e.pixelRatio=162]="pixelRatio",e[e.tabFocusMode=163]="tabFocusMode",e[e.layoutInfo=164]="layoutInfo",e[e.wrappingInfo=165]="wrappingInfo",e[e.defaultColorDecorators=166]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=167]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=168]="inlineCompletionsAccessibilityVerbose",e[e.effectiveEditContext=169]="effectiveEditContext",e[e.scrollOnMiddleClick=170]="scrollOnMiddleClick",e[e.effectiveAllowVariableFonts=171]="effectiveAllowVariableFonts"})(HE||(HE={}));var LW={acceptSuggestionOnCommitCharacter:A(new ae(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(541,null)})),acceptSuggestionOnEnter:A(new Ke(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(542,null),""],markdownDescription:d(543,null)})),accessibilitySupport:A(new iF),accessibilityPageSize:A(new Re(3,"accessibilityPageSize",500,1,1073741824,{description:d(544,null),tags:["accessibility"]})),allowOverflow:A(new ae(4,"allowOverflow",!0)),allowVariableLineHeights:A(new ae(5,"allowVariableLineHeights",!0,{description:d(545,null)})),allowVariableFonts:A(new ae(6,"allowVariableFonts",!0,{description:d(546,null)})),allowVariableFontsInAccessibilityMode:A(new ae(7,"allowVariableFontsInAccessibilityMode",!1,{description:d(547,null),tags:["accessibility"]})),ariaLabel:A(new li(8,"ariaLabel",d(548,null))),ariaRequired:A(new ae(9,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:A(new ae(12,"screenReaderAnnounceInlineSuggestion",!0,{description:d(549,null),tags:["accessibility"]})),autoClosingBrackets:A(new Ke(10,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(550,null),d(551,null),""],description:d(552,null)})),autoClosingComments:A(new Ke(11,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(553,null),d(554,null),""],description:d(555,null)})),autoClosingDelete:A(new Ke(13,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(556,null),""],description:d(557,null)})),autoClosingOvertype:A(new Ke(14,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(558,null),""],description:d(559,null)})),autoClosingQuotes:A(new Ke(15,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(560,null),d(561,null),""],description:d(562,null)})),autoIndent:A(new ru(16,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],tF,{enumDescriptions:[d(563,null),d(564,null),d(565,null),d(566,null),d(567,null)],description:d(568,null)})),autoIndentOnPaste:A(new ae(17,"autoIndentOnPaste",!1,{description:d(569,null)})),autoIndentOnPasteWithinString:A(new ae(18,"autoIndentOnPasteWithinString",!0,{description:d(570,null)})),automaticLayout:A(new ae(19,"automaticLayout",!1)),autoSurround:A(new Ke(20,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(571,null),d(572,null),d(573,null),""],description:d(574,null)})),bracketPairColorization:A(new UF),bracketPairGuides:A(new jF),stickyTabStops:A(new ae(131,"stickyTabStops",!1,{description:d(575,null)})),codeLens:A(new ae(23,"codeLens",!0,{description:d(576,null)})),codeLensFontFamily:A(new li(24,"codeLensFontFamily","",{description:d(577,null)})),codeLensFontSize:A(new Re(25,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(578,null)})),colorDecorators:A(new ae(26,"colorDecorators",!0,{description:d(579,null)})),colorDecoratorActivatedOn:A(new Ke(167,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(580,null),d(581,null),d(582,null)],description:d(583,null)})),colorDecoratorsLimit:A(new Re(27,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(584,null)})),columnSelection:A(new ae(28,"columnSelection",!1,{description:d(585,null)})),comments:A(new rF),contextmenu:A(new ae(30,"contextmenu",!0)),copyWithSyntaxHighlighting:A(new ae(31,"copyWithSyntaxHighlighting",!0,{description:d(586,null)})),cursorBlinking:A(new ru(32,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],sF,{description:d(587,null)})),cursorSmoothCaretAnimation:A(new Ke(33,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(588,null),d(589,null),d(590,null)],description:d(591,null)})),cursorStyle:A(new ru(34,"cursorStyle",pr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],ME,{description:d(592,null)})),overtypeCursorStyle:A(new ru(91,"overtypeCursorStyle",pr.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],ME,{description:d(593,null)})),cursorSurroundingLines:A(new Re(35,"cursorSurroundingLines",0,0,1073741824,{description:d(594,null)})),cursorSurroundingLinesStyle:A(new Ke(36,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(595,null),d(596,null)],markdownDescription:d(597,null)})),cursorWidth:A(new Re(37,"cursorWidth",0,0,1073741824,{markdownDescription:d(598,null)})),cursorHeight:A(new Re(38,"cursorHeight",0,0,1073741824,{markdownDescription:d(599,null)})),disableLayerHinting:A(new ae(39,"disableLayerHinting",!1)),disableMonospaceOptimizations:A(new ae(40,"disableMonospaceOptimizations",!1)),domReadOnly:A(new ae(41,"domReadOnly",!1)),dragAndDrop:A(new ae(42,"dragAndDrop",!0,{description:d(600,null)})),emptySelectionClipboard:A(new oF),dropIntoEditor:A(new VF),editContext:A(new ae(44,"editContext",!0,{description:d(601,null),included:bg||Xy||Vy})),renderRichScreenReaderContent:A(new ae(106,"renderRichScreenReaderContent",!1,{markdownDescription:d(602,null)})),stickyScroll:A(new SF),experimentalGpuAcceleration:A(new Ke(46,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(603,null),d(604,null)],description:d(605,null)})),experimentalWhitespaceRendering:A(new Ke(47,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(606,null),d(607,null),d(608,null)],description:d(609,null)})),extraEditorClassName:A(new li(48,"extraEditorClassName","")),fastScrollSensitivity:A(new Hr(49,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(610,null)})),find:A(new aF),fixedOverflowWidgets:A(new ae(51,"fixedOverflowWidgets",!1)),folding:A(new ae(52,"folding",!0,{description:d(611,null)})),foldingStrategy:A(new Ke(53,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(612,null),d(613,null)],description:d(614,null)})),foldingHighlight:A(new ae(54,"foldingHighlight",!0,{description:d(615,null)})),foldingImportsByDefault:A(new ae(55,"foldingImportsByDefault",!1,{description:d(616,null)})),foldingMaximumRegions:A(new Re(56,"foldingMaximumRegions",5e3,10,65e3,{description:d(617,null)})),unfoldOnClickAfterEndOfLine:A(new ae(57,"unfoldOnClickAfterEndOfLine",!1,{description:d(618,null)})),fontFamily:A(new li(58,"fontFamily",ds.fontFamily,{description:d(619,null)})),fontInfo:A(new uF),fontLigatures2:A(new cF),fontSize:A(new pF),fontWeight:A(new gF),fontVariations:A(new lF),formatOnPaste:A(new ae(64,"formatOnPaste",!1,{description:d(620,null)})),formatOnType:A(new ae(65,"formatOnType",!1,{description:d(621,null)})),glyphMargin:A(new ae(66,"glyphMargin",!0,{description:d(622,null)})),gotoLocation:A(new mF),hideCursorInOverviewRuler:A(new ae(68,"hideCursorInOverviewRuler",!1,{description:d(623,null)})),hover:A(new vF),inDiffEditor:A(new ae(70,"inDiffEditor",!1)),inertialScroll:A(new ae(157,"inertialScroll",!1,{description:d(624,null)})),letterSpacing:A(new Hr(72,"letterSpacing",ds.letterSpacing,e=>Hr.clamp(e,-5,20),{description:d(625,null)})),lightbulb:A(new yF),lineDecorationsWidth:A(new EF),lineHeight:A(new kF),lineNumbers:A(new RF),lineNumbersMinChars:A(new Re(77,"lineNumbersMinChars",5,1,300)),linkedEditing:A(new ae(78,"linkedEditing",!1,{description:d(626,null)})),links:A(new ae(79,"links",!0,{description:d(627,null)})),matchBrackets:A(new Ke(80,"matchBrackets","always",["always","near","never"],{description:d(628,null)})),minimap:A(new CF),mouseStyle:A(new Ke(82,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:A(new Hr(83,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(629,null)})),mouseWheelZoom:A(new ae(84,"mouseWheelZoom",!1,{markdownDescription:d(Ui?630:631,null)})),multiCursorMergeOverlapping:A(new ae(85,"multiCursorMergeOverlapping",!0,{description:d(632,null)})),multiCursorModifier:A(new ru(86,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],$F,{markdownEnumDescriptions:[d(633,null),d(634,null)],markdownDescription:d(635,null)})),multiCursorPaste:A(new Ke(87,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(636,null),d(637,null)],markdownDescription:d(638,null)})),multiCursorLimit:A(new Re(88,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(639,null)})),occurrencesHighlight:A(new Ke(89,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(640,null),d(641,null),d(642,null)],markdownDescription:d(643,null)})),occurrencesHighlightDelay:A(new Re(90,"occurrencesHighlightDelay",0,0,2e3,{description:d(644,null),tags:["preview"]})),overtypeOnPaste:A(new ae(92,"overtypeOnPaste",!0,{description:d(645,null)})),overviewRulerBorder:A(new ae(93,"overviewRulerBorder",!0,{description:d(646,null)})),overviewRulerLanes:A(new Re(94,"overviewRulerLanes",3,0,3)),padding:A(new IF),pasteAs:A(new qF),parameterHints:A(new DF),peekWidgetDefaultFocus:A(new Ke(98,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(647,null),d(648,null)],description:d(649,null)})),placeholder:A(new AF),definitionLinkOpensInPeek:A(new ae(100,"definitionLinkOpensInPeek",!1,{description:d(650,null)})),quickSuggestions:A(new TF),quickSuggestionsDelay:A(new Re(102,"quickSuggestionsDelay",10,0,1073741824,{description:d(651,null),experiment:{mode:"auto"}})),readOnly:A(new ae(103,"readOnly",!1)),readOnlyMessage:A(new NF),renameOnType:A(new ae(105,"renameOnType",!1,{description:d(652,null),markdownDeprecationMessage:d(653,null)})),renderControlCharacters:A(new ae(107,"renderControlCharacters",!0,{description:d(654,null),restricted:!0})),renderFinalNewline:A(new Ke(108,"renderFinalNewline",ks?"dimmed":"on",["off","on","dimmed"],{description:d(655,null)})),renderLineHighlight:A(new Ke(109,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(656,null)],description:d(657,null)})),renderLineHighlightOnlyWhenFocus:A(new ae(110,"renderLineHighlightOnlyWhenFocus",!1,{description:d(658,null)})),renderValidationDecorations:A(new Ke(111,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:A(new Ke(112,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(659,null),d(660,null),d(661,null),""],description:d(662,null)})),revealHorizontalRightPadding:A(new Re(113,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:A(new ae(114,"roundedSelection",!0,{description:d(663,null)})),rulers:A(new LF),scrollbar:A(new MF),scrollBeyondLastColumn:A(new Re(117,"scrollBeyondLastColumn",4,0,1073741824,{description:d(664,null)})),scrollBeyondLastLine:A(new ae(118,"scrollBeyondLastLine",!0,{description:d(665,null)})),scrollOnMiddleClick:A(new ae(170,"scrollOnMiddleClick",!1,{description:d(666,null)})),scrollPredominantAxis:A(new ae(119,"scrollPredominantAxis",!0,{description:d(667,null)})),selectionClipboard:A(new ae(120,"selectionClipboard",!0,{description:d(668,null),included:ks})),selectionHighlight:A(new ae(121,"selectionHighlight",!0,{description:d(669,null)})),selectionHighlightMaxLength:A(new Re(122,"selectionHighlightMaxLength",200,0,1073741824,{description:d(670,null)})),selectionHighlightMultiline:A(new ae(123,"selectionHighlightMultiline",!1,{description:d(671,null)})),selectOnLineNumbers:A(new ae(124,"selectOnLineNumbers",!0)),showFoldingControls:A(new Ke(125,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(672,null),d(673,null),d(674,null)],description:d(675,null)})),showUnused:A(new ae(126,"showUnused",!0,{description:d(676,null)})),showDeprecated:A(new ae(156,"showDeprecated",!0,{description:d(677,null)})),inlayHints:A(new xF),snippetSuggestions:A(new Ke(127,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(678,null),d(679,null),d(680,null),d(681,null)],description:d(682,null)})),smartSelect:A(new BF),smoothScrolling:A(new ae(129,"smoothScrolling",!1,{description:d(683,null)})),stopRenderingLineAfter:A(new Re(132,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:A(new HF),inlineSuggest:A(new OF),inlineCompletionsAccessibilityVerbose:A(new ae(168,"inlineCompletionsAccessibilityVerbose",!1,{description:d(684,null)})),suggestFontSize:A(new Re(134,"suggestFontSize",0,0,1e3,{markdownDescription:d(685,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:A(new Re(135,"suggestLineHeight",0,0,1e3,{markdownDescription:d(686,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:A(new ae(136,"suggestOnTriggerCharacters",!0,{description:d(687,null)})),suggestSelection:A(new Ke(137,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(688,null),d(689,null),d(690,null)],description:d(691,null)})),tabCompletion:A(new Ke(138,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(692,null),d(693,null),d(694,null)],description:d(695,null)})),tabIndex:A(new Re(139,"tabIndex",0,-1,1073741824)),trimWhitespaceOnDelete:A(new ae(140,"trimWhitespaceOnDelete",!1,{description:d(696,null)})),unicodeHighlight:A(new FF),unusualLineTerminators:A(new Ke(142,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(697,null),d(698,null),d(699,null)],description:d(700,null)})),useShadowDOM:A(new ae(143,"useShadowDOM",!0)),useTabStops:A(new ae(144,"useTabStops",!0,{description:d(701,null)})),wordBreak:A(new Ke(145,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(702,null),d(703,null)],description:d(704,null)})),wordSegmenterLocales:A(new _F),wordSeparators:A(new li(147,"wordSeparators",Fx,{description:d(705,null)})),wordWrap:A(new Ke(148,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(706,null),d(707,null),d(708,null),d(709,null)],description:d(710,null)})),wordWrapBreakAfterCharacters:A(new li(149,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:A(new li(150,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:A(new Re(151,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(711,null)})),wordWrapOverride1:A(new Ke(152,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:A(new Ke(153,"wordWrapOverride2","inherit",["off","on","inherit"])),wrapOnEscapedLineFeeds:A(new ae(159,"wrapOnEscapedLineFeeds",!1,{markdownDescription:d(712,null)})),effectiveCursorStyle:A(new hF),editorClassName:A(new nF),defaultColorDecorators:A(new Ke(166,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(713,null),d(714,null),d(715,null)],description:d(716,null)})),pixelRatio:A(new PF),tabFocusMode:A(new ae(163,"tabFocusMode",!1,{markdownDescription:d(717,null)})),layoutInfo:A(new wF),wrappingInfo:A(new WF),wrappingIndent:A(new zF),wrappingStrategy:A(new bF),effectiveEditContextEnabled:A(new dF),effectiveAllowVariableFonts:A(new fF)};function BE(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=BE(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let p;if(typeof a=="string"?p=a:p={...a,base:$o(a.base)},p===t.fsPath||Mc(p,t.fsPath))h=10;else return 0}return h}else return 0}}function _E(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(_E):!!e.notebookType}var Ow;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Ow||(Ow={}));var NW=H("editSessionIdentityService"),Uw;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Uw||(Uw={}));var MW=new U("debugType",void 0,{type:"string",description:d(7191,null)}),FW=new U("debugConfigurationType",void 0,{type:"string",description:d(7192,null)}),OW=new U("debugState","inactive",{type:"string",description:d(7193,null)}),YF="debugUx",UW=new U(YF,"default",{type:"string",description:d(7194,null)}),jW=new U("hasDebugged",!1,{type:"boolean",description:d(7195,null)}),HW=new U("inDebugMode",!1,{type:"boolean",description:d(7196,null)}),BW=new U("inDebugRepl",!1,{type:"boolean",description:d(7197,null)}),_W=new U("breakpointWidgetVisible",!1,{type:"boolean",description:d(7198,null)}),zW=new U("inBreakpointWidget",!1,{type:"boolean",description:d(7199,null)}),WW=new U("breakpointsFocused",!0,{type:"boolean",description:d(7200,null)}),VW=new U("watchExpressionsFocused",!0,{type:"boolean",description:d(7201,null)}),qW=new U("watchExpressionsExist",!1,{type:"boolean",description:d(7202,null)}),GW=new U("variablesFocused",!0,{type:"boolean",description:d(7203,null)}),QW=new U("expressionSelected",!1,{type:"boolean",description:d(7204,null)}),JW=new U("breakpointInputFocused",!1,{type:"boolean",description:d(7205,null)}),ZW=new U("callStackItemType",void 0,{type:"string",description:d(7206,null)}),YW=new U("callStackSessionIsAttach",!1,{type:"boolean",description:d(7207,null)}),XW=new U("callStackItemStopped",!1,{type:"boolean",description:d(7208,null)}),KW=new U("callStackSessionHasOneThread",!1,{type:"boolean",description:d(7209,null)}),eV=new U("callStackFocused",!0,{type:"boolean",description:d(7210,null)}),tV=new U("watchItemType",void 0,{type:"string",description:d(7211,null)}),iV=new U("canViewMemory",void 0,{type:"boolean",description:d(7212,null)}),rV=new U("breakpointItemType",void 0,{type:"string",description:d(7213,null)}),sV=new U("breakpointItemBytes",void 0,{type:"boolean",description:d(7214,null)}),nV=new U("breakpointHasModes",!1,{type:"boolean",description:d(7215,null)}),oV=new U("breakpointSupportsCondition",!1,{type:"boolean",description:d(7216,null)}),aV=new U("loadedScriptsSupported",!1,{type:"boolean",description:d(7217,null)}),cV=new U("loadedScriptsItemType",void 0,{type:"string",description:d(7218,null)}),lV=new U("focusedSessionIsAttach",!1,{type:"boolean",description:d(7219,null)}),uV=new U("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(7220,null)}),hV=new U("stepBackSupported",!1,{type:"boolean",description:d(7221,null)}),dV=new U("restartFrameSupported",!1,{type:"boolean",description:d(7222,null)}),fV=new U("stackFrameSupportsRestart",!1,{type:"boolean",description:d(7223,null)}),pV=new U("jumpToCursorSupported",!1,{type:"boolean",description:d(7224,null)}),gV=new U("stepIntoTargetsSupported",!1,{type:"boolean",description:d(7225,null)}),mV=new U("breakpointsExist",!1,{type:"boolean",description:d(7226,null)}),vV=new U("debuggersAvailable",!1,{type:"boolean",description:d(7227,null)}),wV=new U("debugExtensionAvailable",!0,{type:"boolean",description:d(7228,null)}),bV=new U("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(7229,null)}),yV=new U("debugSetVariableSupported",!1,{type:"boolean",description:d(7230,null)}),SV=new U("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(7231,null)}),xV=new U("debugSetExpressionSupported",!1,{type:"boolean",description:d(7232,null)}),EV=new U("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(7233,null)}),kV=new U("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(7234,null)}),CV=new U("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(7235,null)}),$V=new U("terminateDebuggeeSupported",!1,{type:"boolean",description:d(7236,null)}),IV=new U("suspendDebuggeeSupported",!1,{type:"boolean",description:d(7237,null)}),DV=new U("terminateThreadsSupported",!1,{type:"boolean",description:d(7238,null)}),PV=new U("variableEvaluateNamePresent",!1,{type:"boolean",description:d(7239,null)}),AV=new U("variableIsReadonly",!1,{type:"boolean",description:d(7240,null)}),TV=new U("variableValue",!1,{type:"string",description:d(7241,null)}),RV=new U("variableType",!1,{type:"string",description:d(7242,null)}),LV=new U("variableInterfaces",!1,{type:"array",description:d(7243,null)}),NV=new U("variableName",!1,{type:"string",description:d(7244,null)}),MV=new U("variableLanguage",!1,{type:"string",description:d(7245,null)}),FV=new U("variableExtensionId",!1,{type:"string",description:d(7246,null)}),OV=new U("exceptionWidgetVisible",!1,{type:"boolean",description:d(7247,null)}),UV=new U("multiSessionRepl",!1,{type:"boolean",description:d(7248,null)}),jV=new U("multiSessionDebug",!1,{type:"boolean",description:d(7249,null)}),HV=new U("disassembleRequestSupported",!1,{type:"boolean",description:d(7250,null)}),BV=new U("disassemblyViewFocus",!1,{type:"boolean",description:d(7251,null)}),_V=new U("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(7252,null)}),zV=new U("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(7253,null)}),WV={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(7255,null)},zE;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(zE||(zE={}));var WE;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(WE||(WE={}));var VE;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(VE||(VE={}));var op;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(op||(op={}));var qE;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(qE||(qE={}));var VV=H("debugService"),GE;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(GE||(GE={}));var QE;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(QE||(QE={}));var JE;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(JE||(JE={}));var ZE;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(ZE||(ZE={}));var YE;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(YE||(YE={}));var XF=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Ie(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},XE;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(XE||(XE={}));function KE(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function KF(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return Yy()||KE(t),ne.wrap(t)}function eO(e){const t=e.buffer;if(Yy()||KE(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function jw(e){const t=new Uint32Array(tO(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return KF(t)}function tO(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function ek(e){const t=eO(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var iO=[new pe("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[F.Uri,F.Position],new fe("A promise that resolves to an array of DocumentHighlight-instances.",mr(ba.to))),new pe("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[F.Uri],new fe("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(tg(e))return;class i extends Vc{constructor(){super(...arguments),this.containerName=""}static to(s){const n=new i(s.name,Ji.to(s.kind),s.containerName||"",new Bi(t[0],M.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=M.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new pe("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[F.Uri,new F("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",mr(Lt.to))),new pe("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[F.Uri,F.Range,new F("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",mr(Lt.to))),new pe("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[F.Uri,F.Position,new F("ch","Trigger character",e=>typeof e=="string",e=>e),new F("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",mr(Lt.to))),new pe("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",en)),new pe("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location-instances.",mr(bi.to))),new pe("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Location-instances.",mr(bi.to))),new pe("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Hover-instances.",mr(kl.to))),new pe("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[F.Uri,F.Position],new fe("A promise that resolves to an array of Hover-instances.",mr(kl.to))),new pe("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[F.Uri,new F("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>$e.isPosition(t)),e=>e.map(ze.from))],new fe("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Zc(M.to(r),i);return i}))),new pe("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[F.String.with("query","Search string")],new fe("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Yn.to))),new pe("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[F.Uri,F.Position],new fe("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Xn.to))),new pe("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[F.CallHierarchyItem],new fe("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(wv.to))),new pe("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[F.CallHierarchyItem],new fe("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(bv.to))),new pe("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[F.Uri,F.Position],new fe("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:M.to(e.range),placeholder:e.text}})),new pe("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[F.Uri,F.Position,F.String.with("newName","The new symbol name")],new fe("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Ri.to(e)}})),new pe("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[F.Uri,F.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new fe("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Kn.to))),new pe("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[F.Uri],new fe("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new L1(e.tokenTypes,e.tokenModifiers)})),new pe("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[F.Uri],new fe("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=ek(e);if(t.type==="full")return new ua(t.data,void 0)})),new pe("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[F.Uri,F.Range.optional()],new fe("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new L1(e.tokenTypes,e.tokenModifiers)})),new pe("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[F.Uri,F.Range],new fe("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=ek(e);if(t.type==="full")return new ua(t.data,void 0)})),new pe("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[F.Uri,F.Position,F.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),F.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new fe("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Yo([]);const r=e.suggestions.map(s=>Cv.to(s,i));return new Yo(r,e.incomplete)})),new pe("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[F.Uri,F.Position,F.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new fe("A promise that resolves to SignatureHelp.",e=>{if(e)return Cl.to(e)})),new pe("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[F.Uri,F.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new fe("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>mr(r=>new rd(M.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new pe("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[F.Uri,new F("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>ye.isRange(e),e=>Ar.isSelection(e)?dr.from(e):M.from(e)),F.String.with("kind","Code action kind to return code actions for").optional(),F.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new fe("A promise that resolves to an array of Command-instances.",(e,t,i)=>mr(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new Jc(r.title,r.kind?new ut(r.kind):void 0);return r.edit&&(s.edit=Ri.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new pe("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[F.Uri],new fe("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new ld(M.to(t.range),ya.to(t.color))):[])),new pe("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new F("color","The color to show and insert",e=>e instanceof ra,ya.from),new F("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:M.from(e.range)}))],new fe("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(of.to):[])),new pe("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[F.Uri,F.Range],new fe("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map($v.to.bind(void 0,i)))),new pe("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[F.Uri],new fe("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(lf.to)})),new pe("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new fe("A promise that resolves to an array of NotebookContentProvider static info objects.",mr(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>hf.to(t))})))),new pe("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[F.Uri,F.Range,new F("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof ye,e=>Kd.from(e))],new fe("A promise that resolves to an array of InlineValue objects",e=>e.map(Xd.to))),new pe("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new F("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&dD(e,q.http,q.https),e=>e),new F("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[It.from(e),void 0]:[It.from(e.viewColumn),$l.from(e)])).optional(),F.String.with("label","").optional()],fe.Void),new pe("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[F.Uri.with("resource","Resource to open"),F.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new F("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[It.from(e),void 0]:[It.from(e.viewColumn),$l.from(e)])).optional()],fe.Void),new pe("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[F.Uri.with("left","Left-hand side resource of the diff editor"),F.Uri.with("right","Right-hand side resource of the diff editor"),F.String.with("title","Human readable title for the diff editor").optional(),new F("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[It.from(e.viewColumn),$l.from(e)]).optional()],fe.Void),new pe("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[F.String.with("title","Human readable title for the changes editor"),new F("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!y.isUri(i)||!y.isUri(r)&&r!==void 0&&r!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],fe.Void),new pe("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[F.Uri,F.Position],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(eo.to))),new pe("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[F.TypeHierarchyItem],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(eo.to))),new pe("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[F.TypeHierarchyItem],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(eo.to))),new pe("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[F.TestItem],fe.Void),new pe("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[F.TestProfile,F.Arr(F.TestItem)],fe.Void),new pe("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[F.Arr(F.TestItem)],fe.Void),new pe("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[F.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],fe.Void),new pe("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[F.String.with("name","The context key name"),new F("value","The context key value",()=>!0,e=>e)],fe.Void),new pe("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new F("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?M.from(e.initialRange):void 0,initialSelection:Ar.isSelection(e.initialSelection)?dr.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?ze.from(e.position):void 0}})],fe.Void)],rO=class{static register(e){iO.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",dP)}};function mr(e){return t=>{if(Array.isArray(t))return t.map(e)}}function en(e){if(!Array.isArray(e))return;const t=[];for(const i of e)O2(i)?t.push(El.to(i)):t.push(bi.to(i));return t}var Hw=class{constructor(t,i){this.a=t.getProxy(V.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new ei(Ri.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};Hw=__decorate([__param(0,Le)],Hw);function sO(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var tk;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(tk||(tk={}));var ik;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(ik||(ik={}));var rk;(function(e){e[e.NoReason=0]="NoReason",e[e.FilteredContentRetry=1]="FilteredContentRetry",e[e.CopyrightContentRetry=2]="CopyrightContentRetry"})(rk||(rk={}));var sk;(function(e){e[e.Denied=0]="Denied",e[e.ConfirmationNotNeeded=1]="ConfirmationNotNeeded",e[e.Setting=2]="Setting",e[e.LmServicePerTool=3]="LmServicePerTool",e[e.UserAction=4]="UserAction",e[e.Skipped=5]="Skipped"})(sk||(sk={}));var ap;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(ap||(ap={}));var nk;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(nk||(nk={}));var ok;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(ok||(ok={}));var nO=H("IChatService"),Bw=class{constructor(e,t,i,r,s){this.j=e,this.l=t,this.m=i,this.n=r,this.o=s,this.b=hn.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let i=function(l){if(s.c){const u=new Error("Response stream has been closed");throw Error.captureStackTrace(u,l),u}},r=function(l,u){if(o.push(u!==void 0?[l,u]:l)===1&&queueMicrotask(()=>{s.m.$handleProgressChunk(s.l.requestId,o).finally(()=>{a.forEach(p=>p()),a.length=0}),o.length=0}),u!==void 0)return new Promise(p=>{a.push(p)})};var e=i,t=r;const s=this;this.b.reset();let n=0;const o=[],a=[],c=(l,u)=>{if(typeof this.d>"u"&&(l.kind==="markdownContent"||l.kind==="markdownVuln"||l.kind==="prepareToolInvocation")&&(this.d=this.b.elapsed()),u){const h=n++,p=r(l,h),f={report:m=>{p.then(()=>{Ai.isMarkdownString(m.value)?r(Ll.from(m),h):r(io.from(m),h)})}};Promise.all([p,u(f)]).then(([m,w])=>{r(Bv.from(w),h)})}else r(l)};this.g=Object.freeze({clearToPreviousToolInvocation(l){return i(this.markdown),r({kind:"clearToPreviousToolInvocation",reason:l}),this},markdown(l){i(this.markdown);const u=new Md(l),h=Pl.from(u);return c(h),this},markdownWithVulnerabilities(l,u){i(this.markdown),u&&T(s.j,"chatParticipantAdditions");const h=new ml(l,u),p=vf.from(h);return c(p),this},codeblockUri(l,u){i(this.codeblockUri),T(s.j,"chatParticipantAdditions");const h=new Hd(l,u),p=mf.from(h);return c(p),this},filetree(l,u){i(this.filetree);const h=new Od(l,u),p=Al.from(h);return c(p),this},anchor(l,u){const h=new vl(l,u);return this.push(h)},button(l){i(this.anchor);const u=new jd(l),h=Ml.from(u,s.n,s.o);return c(h),this},progress(l,u){i(this.progress);const h=new Ud(l,u),p=u?bf.from(h):Tl.from(h);return c(p,u),this},thinkingProgress(l){i(this.thinkingProgress),T(s.j,"chatParticipantAdditions");const u=new pa(l.text??"",l.id,l.metadata),h=Rl.from(u);return c(h),this},warning(l){i(this.progress),T(s.j,"chatParticipantAdditions");const u=new wl(l),h=Ll.from(u);return c(h),this},reference(l,u){return this.reference2(l,u)},reference2(l,u,h){if(i(this.reference),typeof l=="object"&&"variableName"in l&&T(s.j,"chatParticipantAdditions"),typeof l=="object"&&"variableName"in l&&!l.value){const p=s.l.variables.variables.find(f=>f.name===l.variableName);if(p){let f;if(p.references?.length)f=p.references.map(m=>({kind:"reference",reference:{variableName:l.variableName,value:m.reference}}));else{const m=new Jn(l,u,h);f=[io.from(m)]}return f.forEach(m=>c(m)),this}}else{const p=new Jn(l,u,h),f=io.from(p);c(f)}return this},codeCitation(l,u,h){i(this.codeCitation),T(s.j,"chatParticipantAdditions");const p=new Bd(l,u,h),f=Ef.from(p);c(f)},textEdit(l,u){i(this.textEdit),T(s.j,"chatParticipantAdditions");const h=new bl(l,u);h.isDone=u===!0?!0:void 0;const p=yf.from(h);return c(p),this},notebookEdit(l,u){i(this.notebookEdit),T(s.j,"chatParticipantAdditions");const h=new zd(l,u),p=xf.from(h);return c(p),this},confirmation(l,u,h,p){i(this.confirmation),T(s.j,"chatParticipantAdditions");const f=new Fd(l,u,h,p),m=wf.from(f);return c(m),this},prepareToolInvocation(l){i(this.prepareToolInvocation),T(s.j,"chatParticipantAdditions");const u=new yl(l),h=Nl.from(u);return c(h),this},push(l){if(i(this.push),(l instanceof bl||l instanceof zd||l instanceof ml||l instanceof wl||l instanceof Fd||l instanceof Bd||l instanceof _d||l instanceof tv||l instanceof pa||l instanceof iv||l instanceof Ud)&&T(s.j,"chatParticipantAdditions"),l instanceof Jn)this.reference2(l.value,l.iconPath,l.options);else if(l instanceof Ud){const u=l.task?bf.from(l):Tl.from(l);c(u,l.task)}else if(l instanceof pa){const u=Rl.from(l);c(u)}else if(l instanceof vl){const u=Aa.from(l);if(l.resolve){T(s.j,"chatParticipantAdditions"),u.resolveId=ni();const h=new lt;l.resolve(h.token).then(()=>{const p=Aa.from(l);s.m.$handleAnchorResolve(s.l.requestId,u.resolveId,p)}).then(()=>h.dispose(),()=>h.dispose()),s.o.add(ce(()=>h.dispose(!0)))}c(u)}else if(l instanceof yl){T(s.j,"chatParticipantAdditions");const u=Nl.from(l);return c(u),this}else{const u=Fl.from(l,s.n,s.o);c(u)}return this}})}return this.g}},oO=class Cu extends te{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,i,r,s,n,o,a){super(),this.C=i,this.D=r,this.F=s,this.G=n,this.H=o,this.I=a,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new Lu),this.u=this.B(new Lu),this.w=new Set,this.y=this.B(new D),this.onDidChangeChatRequestTools=this.y.event,this.z=this.B(new D),this.onDidDisposeChatSession=this.z.event,this.g=t.getProxy(V.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:c=>sO(c)?null:c})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=Cu.b++,n=new ak(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=Cu.b++,o=new ak(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=Cu.j++;return this.m.set(r,new aO(t,i)),this.g.$registerChatParticipantDetectionProvider(r),ce(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}registerRelatedFilesProvider(t,i,r){const s=Cu.n++;return this.s.set(s,new cO(t,i)),this.g.$registerRelatedFilesProvider(s,r),ce(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,i,r){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=_v.to(i);return await s.provider.provideRelatedFiles(n,r)??void 0}async $detectChatParticipant(t,i,r,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.J(i,r,o.extension),u=await this.L(a,o.extension),h=Ta.to(a,c,u,this.M(o.extension),this.N(o.extension,a.userSelectedTools),o.extension,this.C);return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:kf.to(s.location)},n)}async J(t,i,r){const s=Jt(t),n=await this.O(r,s.agentId,i);let o;if(s.locationData?.type===ai.Editor){const a=this.F.getDocument(s.locationData.document);o=new N8(a,dr.to(s.locationData.selection),M.to(s.locationData.wholeRange))}else if(s.locationData?.type===ai.Notebook){const a=this.F.getDocument(s.locationData.sessionInputUri);o=new M8(a)}else s.locationData?.type,ai.Terminal;return{request:s,location:o,history:n}}async L(t,i){let r;if(t.userSelectedModelId&&(r=await this.G.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.G.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $setRequestTools(t,i){const r=[...this.w].find(s=>s.requestId===t);if(r){r.extRequest.tools.clear();for(const[s,n]of this.N(r.extension,i))r.extRequest.tools.set(s,n);this.y.fire(r.extRequest)}}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.J(i,r,n.extension);let h=this.t.get(c.sessionId);h||(h=new he,this.t.set(c.sessionId,h)),o=new Bw(n.extension,c,this.g,this.D.converter,h);const p=await this.L(c,n.extension),f=Ta.to(c,l,p,this.M(n.extension),this.N(n.extension,c.userSelectedTools),n.extension,this.C);a={requestId:i.requestId,extRequest:f,extension:n.extension},this.w.add(a);const m=n.invoke(f,{history:u},o.apiObject,s);return await lO(1e3,Promise.resolve(m).then(w=>{if(w?.metadata)try{JSON.stringify(w.metadata)}catch(E){const C=`result.metadata MUST be JSON.stringify-able. Got error: ${E.message}`;return this.C.error(`[${n.extension.identifier.value}] [@${n.id}] ${C}`,n.extension),{errorDetails:{message:C},timings:o?.timings,nextQuestion:w.nextQuestion}}let S;return w?.errorDetails&&(S={...w.errorDetails,responseIsIncomplete:!0}),(S?.responseIsRedacted||S?.isQuotaExceeded||S?.confirmationButtons||S?.code)&&T(n.extension,"chatParticipantPrivate"),{errorDetails:S,timings:o?.timings,metadata:w?.metadata,nextQuestion:w?.nextQuestion,details:w?.details}}),s)}catch(c){this.C.error(c,n.extension),c instanceof ns&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:Ao(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}M(t){return Ge(t,"chatReferenceDiagnostic")?this.H.getDiagnostics():[]}N(t,i){if(!i)return new Map;const r=new Map;for(const s of this.I.getTools(t))typeof i[s.name]=="boolean"&&r.set(s.name,i[s.name]);return r}async O(t,i,r){const s=[];for(const n of r.history){const o=Ra.to(n.result),a=i===n.request.agentId?o:{...o,metadata:void 0},c=[],l=[];for(const f of n.request.variables.variables)if(f.kind==="tool")l.push(Ol.to(f));else if(f.kind==="toolset")l.push(...f.value.map(Ol.to));else{const m=Cf.to(f,this.M(t),this.C);m&&c.push(m)}const u=Ge(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,h=new Wd(n.request.message,n.request.command,c,n.request.agentId,l,u);s.push(h);const p=ft(n.response.map(f=>Fl.toContent(f,this.D.converter)));s.push(new L8(p,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t),this.z.fire(t)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=Jt(t),c=await this.O(o.extension,o.id,s),l=Ra.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||fi.some(this.c.values(),p=>p.id===u.participant&&Ve.equals(p.extension.identifier,o.extension.identifier));return h||this.C.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>pf.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=Ra.to(i);let o;switch(r.direction){case ap.Down:o=gl.Unhelpful;break;case ap.Up:o=gl.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Ge(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=Wv.to(i,r,this.D.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new he,this.u.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>zv.from(a,this.D.converter,n))}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.O(s.extension,s.id,{history:i});return await s.provideTitle({history:n},r)}async $provideChatSummary(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.O(s.extension,s.id,{history:i});return await s.provideSummary({history:n},r)}},aO=class{constructor(e,t){this.extension=e,this.provider=t}},cO=class{constructor(e,t){this.extension=e,this.provider=t}},ak=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.w=i,this.x=r,this.y=s,this.j=new D,this.l=new D,this.u=new D}acceptFeedback(e){this.j.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.u.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideTitle(e,t){if(this.q)return await this.q.provideChatTitle(e,t)??void 0}async provideSummary(e,t){if(this.s)return await this.s.provideChatSummary(e,t)??void 0}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.w.$updateAgent(this.x,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof ci?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:de.from(this.d),helpTextPostfix:!this.g||typeof this.g=="string"?this.g:de.from(this.g),supportIssueReporting:this.m,requester:this.t,additionalWelcomeMessage:!this.o||typeof this.o=="string"?this.o:de.from(this.o)}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.y},set requestHandler(s){Sy(typeof s=="function","Invalid request handler"),r.y=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return T(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){T(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextPostfix(){return T(r.extension,"defaultChatParticipant"),r.g},set helpTextPostfix(s){T(r.extension,"defaultChatParticipant"),r.g=s,i()},get supportIssueReporting(){return T(r.extension,"chatParticipantPrivate"),r.m},set supportIssueReporting(s){T(r.extension,"chatParticipantPrivate"),r.m=s,i()},get onDidReceiveFeedback(){return r.j.event},set participantVariableProvider(s){if(T(r.extension,"chatParticipantAdditions"),r.n=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.w.$registerAgentCompletionsProvider(r.x,r.id,s.triggerCharacters)}else r.w.$unregisterAgentCompletionsProvider(r.x,r.id)},get participantVariableProvider(){return T(r.extension,"chatParticipantAdditions"),r.n},set additionalWelcomeMessage(s){T(r.extension,"defaultChatParticipant"),r.o=s,i()},get additionalWelcomeMessage(){return T(r.extension,"defaultChatParticipant"),r.o},set titleProvider(s){T(r.extension,"defaultChatParticipant"),r.q=s,i()},get titleProvider(){return T(r.extension,"defaultChatParticipant"),r.q},set summarizer(s){T(r.extension,"defaultChatParticipant"),r.s=s},get summarizer(){return T(r.extension,"defaultChatParticipant"),r.s},get onDidChangePauseState(){return T(r.extension,"chatParticipantAdditions"),r.u.event},onDidPerformAction:Ge(this.extension,"chatParticipantAdditions")?this.l.event:void 0,set requester(s){r.t=s,i()},get requester(){return r.t},dispose(){e=!0,r.b=void 0,r.j.dispose(),r.w.$unregisterAgent(r.x)}}}invoke(e,t,i,r){return this.y(e,t,i,r)}};function lO(e,t,i){return new Promise((r,s)=>{const n=i.onCancellationRequested(async()=>{n.dispose(),await nr(e),r(void 0)});t.then(r,s).finally(()=>n.dispose())})}var uO=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadChatStatus)}createChatStatusItem(e,t){const i=hO(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const r={id:i,title:"",description:"",detail:""};let s=!1,n=!1;const o=()=>{if(s)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,r)},a=Object.freeze({id:t,get title(){return r.title},set title(c){r.title=c,o()},get description(){return r.description},set description(c){r.description=c,o()},get detail(){return r.detail},set detail(c){r.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{s=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function hO(e,t){return`${Ve.toKey(e)}.${t}`}var dO=class{constructor(e){const t=e.getProxy(V.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},ck="vscode-cdn.net",fO=`vscode-resource.${ck}`,_w=`'self' https://*.${ck}`;function su(e,t){return e.scheme===q.http||e.scheme===q.https?e:(t&&t.authority&&t.isRemote&&e.scheme===q.file&&(e=y.from({scheme:q.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:q.https,authority:`${e.scheme}+${pO(e.authority)}.${fO}`,path:e.path,fragment:e.fragment,query:e.query}))}function pO(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var gO=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new he,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const p of this.e.getVisibleTextEditors(!0))if(p.value===e){n=p;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new D,l=new D,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(p){return su(p,o.f)}get cspSource(){return _w}set options(p){this.b=p,o.d.$setOptions(a,p)}get options(){return this.b}set html(p){this.a=p,o.d.$setHtml(a,p)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(p){return o.d.$postMessage(a,p)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},mO=class w${static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Vi(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(Lt.from)})},notebookEdit:(c,l)=>{l=Vi(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(Sf.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionId,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=w$.a++;return this.b.$registerCodeMapperProvider(r,t.displayName??t.name),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}};function vO(e,t,i){const r=e.getProxy(V.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new Ds,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,S=this.b.get(w.commentControlHandle);if(!S)return w;const E=S.getCommentThread(w.commentThreadHandle);return E?E.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);return S?m.$mid===8?S.value:{thread:S.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);if(!S)return m;const E=m.commentUniqueId,C=S.getCommentByUniqueId(E);return C||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const S=w.getCommentThread(m.thread.commentThreadHandle);if(!S)return m;const E=m.text,C=m.commentUniqueId,P=S.getCommentByUniqueId(C);return P?(typeof P.body=="string"?P.body=E:P.body=new Ai(E),P):m}return m}})}createCommentController(m,w,S){const E=s.a++,C=new o(m,E,w,S);this.b.set(C.handle,C);const P=this.c.get(m.identifier)||[];return P.push(C),this.c.set(m.identifier,P),C.value}async $createCommentThreadTemplate(m,w,S,E){const C=this.b.get(m);C&&C.$createCommentThreadTemplate(w,S,E)}async $setActiveComment(m,w){const S=this.b.get(m);S&&S.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,S){const E=this.b.get(m);E&&E.$updateCommentThreadTemplate(w,S)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,S){this.b.get(m)?.$updateCommentThread(w,S)}async $provideCommentingRanges(m,w,S){const E=this.b.get(m);if(!E||!E.commentingRangeProvider)return Promise.resolve(void 0);const C=await i.ensureDocumentData(y.revive(w));return Qt(async()=>{const P=await E.commentingRangeProvider?.provideCommentingRanges(C.document,S);let Z;return Array.isArray(P)?Z={ranges:P,fileComments:!1}:P?Z={ranges:P.ranges||[],fileComments:P.enableFileComments||!1}:Z=P??void 0,Z}).then(P=>{let Z;return P&&(Z={ranges:P.ranges.map(W=>M.from(W)),fileComments:P.fileComments}),Z})}$toggleReaction(m,w,S,E,C){const P=this.b.get(m);return!P||!P.reactionHandler?Promise.resolve(void 0):Qt(()=>{const Z=P.getCommentThread(w);if(Z){const W=Z.getCommentByUniqueId(E.uniqueIdInThread);if(P!==void 0&&W&&P.reactionHandler)return P.reactionHandler(W,l(C))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g!==m&&(this.g=m,this.b.collapsibleState=m,this.c.fire())}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(T(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,S,E,C,P,Z,W,oe){this.m=w,this.n=S,this.o=E,this.p=C,this.q=P,this.extensionDescription=Z,this.r=W,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new D,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new xo,this.l.value=new he,this.n===void 0&&(this.n=`${m}.${this.handle}`),r.$createCommentThread(w,this.handle,this.n,this.o,M.from(this.p),this.q.map(B=>a(this,B,this.k,this.extensionDescription)),Z.identifier,this.r,oe),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(w,this.handle)}});const O=this;this.value={get uri(){return O.uri},get range(){return O.range},set range(B){O.range=B},get comments(){return O.comments},set comments(B){O.comments=B},get collapsibleState(){return O.collapsibleState},set collapsibleState(B){O.collapsibleState=B},get canReply(){return O.canReply},set canReply(B){O.canReply=B},get contextValue(){return O.contextValue},set contextValue(B){O.contextValue=B},get label(){return O.label},set label(B){O.label=B},get state(){return O.state},set state(B){O.state=B},reveal:(B,G)=>O.reveal(B,G),hide:()=>O.hide(),dispose:()=>{O.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new he);const m=S=>Object.prototype.hasOwnProperty.call(this.b,S),w={};m("range")&&(w.range=M.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(S=>a(this,S,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=p(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const S=w[0],E=w[1];if(m===E)return S}}async reveal(m,w){T(this.extensionDescription,"commentReveal");let S;m&&m.body!==void 0?S=m:w=w??m;let E=S?this.k.get(S):void 0;E??=this.k.get(this.q[0]);let C=!0,P=!1;return w?.focus===ul.Reply?(P=!0,C=!1):w?.focus===ul.Comment&&(C=!1),r.$revealCommentThread(this.m,this.handle,E,{preserveFocus:C,focusReply:P})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([j0(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&T(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return T(this.h,"activeComment"),this.e}get activeCommentThread(){return T(this.h,"activeComment"),this.f?.value}constructor(m,w,S,E){this.h=m,this.i=w,this.j=S,this.k=E,this.a=new Map,r.$registerCommentController(this.handle,S,E,this.h.identifier.value);const C=this;this.value=Object.freeze({id:C.id,label:C.label,get options(){return C.options},set options(P){C.options=P},get commentingRangeProvider(){return C.commentingRangeProvider},set commentingRangeProvider(P){C.commentingRangeProvider=P},get reactionHandler(){return C.reactionHandler},set reactionHandler(P){C.reactionHandler=P},get activeCommentThread(){return C.activeCommentThread},createCommentThread(P,Z,W){return C.createCommentThread(P,Z,W).value},dispose:()=>{C.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,S){const E=new n(this.id,this.handle,void 0,m,w,S,this.h,!1);return this.a.set(E.handle,E),E}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,S){const E=new n(this.id,this.handle,void 0,y.revive(m),M.to(w),[],this.h,!0,S);return E.collapsibleState=Oo.Expanded,this.a.set(E.handle,E),E}$updateCommentThreadTemplate(m,w){const S=this.a.get(m);S&&(S.range=M.to(w))}$updateCommentThread(m,w){const S=this.a.get(m);if(!S)return;(C=>Object.prototype.hasOwnProperty.call(w,C))("collapseState")&&(S.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(f,m,w,S){let E=w.get(m);return E||(E=++f.commentHandle,w.set(m,E)),m.state!==void 0&&T(S,"commentsDraftState"),m.reactions?.some(C=>C.reactors!==void 0)&&T(S,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:E,body:typeof m.body=="string"?m.body:de.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map(C=>c(C)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(f){return{label:f.label,iconPath:f.iconPath?Zd(f.iconPath):void 0,count:f.count,hasReacted:f.authorHasReacted,reactors:f.reactors&&f.reactors.length>0&&typeof f.reactors[0]!="string"?f.reactors.map(m=>m.name):f.reactors}}function l(f){return{label:f.label||"",count:f.count||0,iconPath:f.iconPath?y.revive(f.iconPath):"",authorHasReacted:f.hasReacted||!1,reactors:f.reactors?.map(m=>({name:m}))}}function u(f){if(f!==void 0)switch(f){case al.Expanded:return Oo.Expanded;case al.Collapsed:return Oo.Collapsed}return Oo.Collapsed}function h(f){let m;if(typeof f=="object"?m=f.resolved:m=f,m!==void 0)switch(m){case cl.Unresolved:return Tc.Unresolved;case cl.Resolved:return Tc.Resolved}return Tc.Unresolved}function p(f){let m;if(typeof f=="object"&&(m=f.applicability),m!==void 0)switch(m){case ll.Current:return Rc.Current;case ll.Outdated:return Rc.Outdated}return Rc.Current}return new s}var cp={},Me={exports:cp};(function(e,t){if(typeof cp=="object"&&typeof Me=="object")Me.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof cp=="object"?cp:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=Ue,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var $=Array.prototype.slice.call(arguments,0);$.unshift("SEMVER"),console.log.apply(console,$)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var p=l++;c[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var f=l++;c[f]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[p]+")";var S=l++;c[S]="(?:"+c[h]+"|"+c[p]+")";var E=l++;c[E]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var C=l++;c[C]="(?:-?("+c[S]+"(?:\\."+c[S]+")*))";var P=l++;c[P]="[0-9A-Za-z-]+";var Z=l++;c[Z]="(?:\\+("+c[P]+"(?:\\."+c[P]+")*))";var W=l++,oe="v?"+c[f]+c[E]+"?"+c[Z]+"?";c[W]="^"+oe+"$";var O="[v=\\s]*"+c[m]+c[C]+"?"+c[Z]+"?",B=l++;c[B]="^"+O+"$";var G=l++;c[G]="((?:<|>)?=?)";var me=l++;c[me]=c[h]+"|x|X|\\*";var xe=l++;c[xe]=c[u]+"|x|X|\\*";var ke=l++;c[ke]="[v=\\s]*("+c[xe]+")(?:\\.("+c[xe]+")(?:\\.("+c[xe]+")(?:"+c[E]+")?"+c[Z]+"?)?)?";var j=l++;c[j]="[v=\\s]*("+c[me]+")(?:\\.("+c[me]+")(?:\\.("+c[me]+")(?:"+c[C]+")?"+c[Z]+"?)?)?";var _=l++;c[_]="^"+c[G]+"\\s*"+c[ke]+"$";var z=l++;c[z]="^"+c[G]+"\\s*"+c[j]+"$";var Q=l++;c[Q]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var Y=l++;c[Y]="(?:~>?)";var ge=l++;c[ge]="(\\s*)"+c[Y]+"\\s+",a[ge]=new RegExp(c[ge],"g");var Ee=l++;c[Ee]="^"+c[Y]+c[ke]+"$";var De=l++;c[De]="^"+c[Y]+c[j]+"$";var nt=l++;c[nt]="(?:\\^)";var yt=l++;c[yt]="(\\s*)"+c[nt]+"\\s+",a[yt]=new RegExp(c[yt],"g");var We=l++;c[We]="^"+c[nt]+c[ke]+"$";var dt=l++;c[dt]="^"+c[nt]+c[j]+"$";var ii=l++;c[ii]="^"+c[G]+"\\s*("+O+")$|^$";var Mt=l++;c[Mt]="^"+c[G]+"\\s*("+oe+")$|^$";var zi=l++;c[zi]="(\\s*)"+c[G]+"\\s*("+O+"|"+c[ke]+")",a[zi]=new RegExp(c[zi],"g");var bs=l++;c[bs]="^\\s*("+c[ke]+")\\s+-\\s+("+c[ke]+")\\s*$";var Yt=l++;c[Yt]="^\\s*("+c[j]+")\\s+-\\s+("+c[j]+")\\s*$";var Xa=l++;c[Xa]="(<|>)?=?\\s*\\*";for(var Wr=0;Wr<35;Wr++)s(Wr,c[Wr]),a[Wr]||(a[Wr]=new RegExp(c[Wr]));function Mi($,R){if($ instanceof Ue)return $;if(typeof $!="string"||$.length>n||!(R?a[B]:a[W]).test($))return null;try{return new Ue($,R)}catch{return null}}function Ue($,R){if($ instanceof Ue){if($.loose===R)return $;$=$.version}else if(typeof $!="string")throw new TypeError("Invalid Version: "+$);if($.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof Ue))return new Ue($,R);s("SemVer",$,R),this.loose=R;var N=$.trim().match(R?a[B]:a[W]);if(!N)throw new TypeError("Invalid Version: "+$);if(this.raw=$,this.major=+N[1],this.minor=+N[2],this.patch=+N[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");N[4]?this.prerelease=N[4].split(".").map(function(ee){if(/^[0-9]+$/.test(ee)){var ve=+ee;if(ve>=0&&ve<o)return ve}return ee}):this.prerelease=[],this.build=N[5]?N[5].split("."):[],this.format()}t.parse=Mi,t.valid=function($,R){var N=Mi($,R);return N?N.version:null},t.clean=function($,R){var N=Mi($.trim().replace(/^[=v]+/,""),R);return N?N.version:null},t.SemVer=Ue,Ue.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},Ue.prototype.toString=function(){return this.version},Ue.prototype.compare=function($){return s("SemVer.compare",this.version,this.loose,$),$ instanceof Ue||($=new Ue($,this.loose)),this.compareMain($)||this.comparePre($)},Ue.prototype.compareMain=function($){return $ instanceof Ue||($=new Ue($,this.loose)),ys(this.major,$.major)||ys(this.minor,$.minor)||ys(this.patch,$.patch)},Ue.prototype.comparePre=function($){if($ instanceof Ue||($=new Ue($,this.loose)),this.prerelease.length&&!$.prerelease.length)return-1;if(!this.prerelease.length&&$.prerelease.length)return 1;if(!this.prerelease.length&&!$.prerelease.length)return 0;var R=0;do{var N=this.prerelease[R],ee=$.prerelease[R];if(s("prerelease compare",R,N,ee),N===void 0&&ee===void 0)return 0;if(ee===void 0)return 1;if(N===void 0)return-1;if(N!==ee)return ys(N,ee)}while(++R)},Ue.prototype.inc=function($,R){switch($){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R),this.inc("pre",R);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R),this.inc("pre",R);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var N=this.prerelease.length;--N>=0;)typeof this.prerelease[N]=="number"&&(this.prerelease[N]++,N=-2);N===-1&&this.prerelease.push(0)}R&&(this.prerelease[0]===R?isNaN(this.prerelease[1])&&(this.prerelease=[R,0]):this.prerelease=[R,0]);break;default:throw new Error("invalid increment argument: "+$)}return this.format(),this.raw=this.version,this},t.inc=function($,R,N,ee){typeof N=="string"&&(ee=N,N=void 0);try{return new Ue($,N).inc(R,ee).version}catch{return null}},t.diff=function($,R){if(go($,R))return null;var N=Mi($),ee=Mi(R);if(N.prerelease.length||ee.prerelease.length){for(var ve in N)if((ve==="major"||ve==="minor"||ve==="patch")&&N[ve]!==ee[ve])return"pre"+ve;return"prerelease"}for(var ve in N)if((ve==="major"||ve==="minor"||ve==="patch")&&N[ve]!==ee[ve])return ve},t.compareIdentifiers=ys;var Pe=/^[0-9]+$/;function ys($,R){var N=Pe.test($),ee=Pe.test(R);return N&&ee&&($=+$,R=+R),N&&!ee?-1:ee&&!N?1:$<R?-1:$>R?1:0}function er($,R,N){return new Ue($,N).compare(new Ue(R,N))}function Wi($,R,N){return er($,R,N)>0}function Sr($,R,N){return er($,R,N)<0}function go($,R,N){return er($,R,N)===0}function Du($,R,N){return er($,R,N)!==0}function Ka($,R,N){return er($,R,N)>=0}function ec($,R,N){return er($,R,N)<=0}function mo($,R,N,ee){var ve;switch(R){case"===":typeof $=="object"&&($=$.version),typeof N=="object"&&(N=N.version),ve=$===N;break;case"!==":typeof $=="object"&&($=$.version),typeof N=="object"&&(N=N.version),ve=$!==N;break;case"":case"=":case"==":ve=go($,N,ee);break;case"!=":ve=Du($,N,ee);break;case">":ve=Wi($,N,ee);break;case">=":ve=Ka($,N,ee);break;case"<":ve=Sr($,N,ee);break;case"<=":ve=ec($,N,ee);break;default:throw new TypeError("Invalid operator: "+R)}return ve}function ui($,R){if($ instanceof ui){if($.loose===R)return $;$=$.value}if(!(this instanceof ui))return new ui($,R);s("comparator",$,R),this.loose=R,this.parse($),this.semver===sn?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function($,R){return ys(R,$)},t.major=function($,R){return new Ue($,R).major},t.minor=function($,R){return new Ue($,R).minor},t.patch=function($,R){return new Ue($,R).patch},t.compare=er,t.compareLoose=function($,R){return er($,R,!0)},t.rcompare=function($,R,N){return er(R,$,N)},t.sort=function($,R){return $.sort(function(N,ee){return t.compare(N,ee,R)})},t.rsort=function($,R){return $.sort(function(N,ee){return t.rcompare(N,ee,R)})},t.gt=Wi,t.lt=Sr,t.eq=go,t.neq=Du,t.gte=Ka,t.lte=ec,t.cmp=mo,t.Comparator=ui;var sn={};function at($,R){if($ instanceof at)return $.loose===R?$:new at($.raw,R);if($ instanceof ui)return new at($.value,R);if(!(this instanceof at))return new at($,R);if(this.loose=R,this.raw=$,this.set=$.split(/\s*\|\|\s*/).map(function(N){return this.parseRange(N.trim())},this).filter(function(N){return N.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+$);this.format()}function jt($){return!$||$.toLowerCase()==="x"||$==="*"}function Jp($,R,N,ee,ve,Ft,Qe,Xt,gt,St,Ei,mt,Ht){return((R=jt(N)?"":jt(ee)?">="+N+".0.0":jt(ve)?">="+N+"."+ee+".0":">="+R)+" "+(Xt=jt(gt)?"":jt(St)?"<"+(+gt+1)+".0.0":jt(Ei)?"<"+gt+"."+(+St+1)+".0":mt?"<="+gt+"."+St+"."+Ei+"-"+mt:"<="+Xt)).trim()}function Zp($,R){for(var N=0;N<$.length;N++)if(!$[N].test(R))return!1;if(R.prerelease.length){for(N=0;N<$.length;N++)if(s($[N].semver),$[N].semver!==sn&&$[N].semver.prerelease.length>0){var ee=$[N].semver;if(ee.major===R.major&&ee.minor===R.minor&&ee.patch===R.patch)return!0}return!1}return!0}function tr($,R,N){try{R=new at(R,N)}catch{return!1}return R.test($)}function tc($,R,N,ee){var ve,Ft,Qe,Xt,gt;switch($=new Ue($,ee),R=new at(R,ee),N){case">":ve=Wi,Ft=ec,Qe=Sr,Xt=">",gt=">=";break;case"<":ve=Sr,Ft=Ka,Qe=Wi,Xt="<",gt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(tr($,R,ee))return!1;for(var St=0;St<R.set.length;++St){var Ei=R.set[St],mt=null,Ht=null;if(Ei.forEach(function(ri){ri.semver===sn&&(ri=new ui(">=0.0.0")),mt=mt||ri,Ht=Ht||ri,ve(ri.semver,mt.semver,ee)?mt=ri:Qe(ri.semver,Ht.semver,ee)&&(Ht=ri)}),mt.operator===Xt||mt.operator===gt||(!Ht.operator||Ht.operator===Xt)&&Ft($,Ht.semver)||Ht.operator===gt&&Qe($,Ht.semver))return!1}return!0}ui.prototype.parse=function($){var R=this.loose?a[ii]:a[Mt],N=$.match(R);if(!N)throw new TypeError("Invalid comparator: "+$);this.operator=N[1],this.operator==="="&&(this.operator=""),N[2]?this.semver=new Ue(N[2],this.loose):this.semver=sn},ui.prototype.toString=function(){return this.value},ui.prototype.test=function($){return s("Comparator.test",$,this.loose),this.semver===sn||(typeof $=="string"&&($=new Ue($,this.loose)),mo($,this.operator,this.semver,this.loose))},ui.prototype.intersects=function($,R){if(!($ instanceof ui))throw new TypeError("a Comparator is required");var N;if(this.operator==="")return N=new at($.value,R),tr(this.value,N,R);if($.operator==="")return N=new at(this.value,R),tr($.semver,N,R);var ee=!(this.operator!==">="&&this.operator!==">"||$.operator!==">="&&$.operator!==">"),ve=!(this.operator!=="<="&&this.operator!=="<"||$.operator!=="<="&&$.operator!=="<"),Ft=this.semver.version===$.semver.version,Qe=!(this.operator!==">="&&this.operator!=="<="||$.operator!==">="&&$.operator!=="<="),Xt=mo(this.semver,"<",$.semver,R)&&(this.operator===">="||this.operator===">")&&($.operator==="<="||$.operator==="<"),gt=mo(this.semver,">",$.semver,R)&&(this.operator==="<="||this.operator==="<")&&($.operator===">="||$.operator===">");return ee||ve||Ft&&Qe||Xt||gt},t.Range=at,at.prototype.format=function(){return this.range=this.set.map(function($){return $.join(" ").trim()}).join("||").trim(),this.range},at.prototype.toString=function(){return this.range},at.prototype.parseRange=function($){var R=this.loose;$=$.trim(),s("range",$,R);var N=R?a[Yt]:a[bs];$=$.replace(N,Jp),s("hyphen replace",$),$=$.replace(a[zi],"$1$2$3"),s("comparator trim",$,a[zi]),$=($=($=$.replace(a[ge],"$1~")).replace(a[yt],"$1^")).split(/\s+/).join(" ");var ee=R?a[ii]:a[Mt],ve=$.split(" ").map(function(Ft){return function(Qe,Xt){return s("comp",Qe),Qe=function(gt,St){return gt.trim().split(/\s+/).map(function(Ei){return function(mt,Ht){s("caret",mt,Ht);var ri=Ht?a[dt]:a[We];return mt.replace(ri,function(hi,Se,Te,x,Ze){var Dt;return s("caret",mt,hi,Se,Te,x,Ze),jt(Se)?Dt="":jt(Te)?Dt=">="+Se+".0.0 <"+(+Se+1)+".0.0":jt(x)?Dt=Se==="0"?">="+Se+"."+Te+".0 <"+Se+"."+(+Te+1)+".0":">="+Se+"."+Te+".0 <"+(+Se+1)+".0.0":Ze?(s("replaceCaret pr",Ze),Ze.charAt(0)!=="-"&&(Ze="-"+Ze),Dt=Se==="0"?Te==="0"?">="+Se+"."+Te+"."+x+Ze+" <"+Se+"."+Te+"."+(+x+1):">="+Se+"."+Te+"."+x+Ze+" <"+Se+"."+(+Te+1)+".0":">="+Se+"."+Te+"."+x+Ze+" <"+(+Se+1)+".0.0"):(s("no pr"),Dt=Se==="0"?Te==="0"?">="+Se+"."+Te+"."+x+" <"+Se+"."+Te+"."+(+x+1):">="+Se+"."+Te+"."+x+" <"+Se+"."+(+Te+1)+".0":">="+Se+"."+Te+"."+x+" <"+(+Se+1)+".0.0"),s("caret return",Dt),Dt})}(Ei,St)}).join(" ")}(Qe,Xt),s("caret",Qe),Qe=function(gt,St){return gt.trim().split(/\s+/).map(function(Ei){return function(mt,Ht){var ri=Ht?a[De]:a[Ee];return mt.replace(ri,function(hi,Se,Te,x,Ze){var Dt;return s("tilde",mt,hi,Se,Te,x,Ze),jt(Se)?Dt="":jt(Te)?Dt=">="+Se+".0.0 <"+(+Se+1)+".0.0":jt(x)?Dt=">="+Se+"."+Te+".0 <"+Se+"."+(+Te+1)+".0":Ze?(s("replaceTilde pr",Ze),Ze.charAt(0)!=="-"&&(Ze="-"+Ze),Dt=">="+Se+"."+Te+"."+x+Ze+" <"+Se+"."+(+Te+1)+".0"):Dt=">="+Se+"."+Te+"."+x+" <"+Se+"."+(+Te+1)+".0",s("tilde return",Dt),Dt})}(Ei,St)}).join(" ")}(Qe,Xt),s("tildes",Qe),Qe=function(gt,St){return s("replaceXRanges",gt,St),gt.split(/\s+/).map(function(Ei){return function(mt,Ht){mt=mt.trim();var ri=Ht?a[z]:a[_];return mt.replace(ri,function(hi,Se,Te,x,Ze,Dt){s("xRange",mt,hi,Se,Te,x,Ze,Dt);var K=jt(Te),je=K||jt(x),nn=je||jt(Ze);return Se==="="&&nn&&(Se=""),K?hi=Se===">"||Se==="<"?"<0.0.0":"*":Se&&nn?(je&&(x=0),nn&&(Ze=0),Se===">"?(Se=">=",je?(Te=+Te+1,x=0,Ze=0):nn&&(x=+x+1,Ze=0)):Se==="<="&&(Se="<",je?Te=+Te+1:x=+x+1),hi=Se+Te+"."+x+"."+Ze):je?hi=">="+Te+".0.0 <"+(+Te+1)+".0.0":nn&&(hi=">="+Te+"."+x+".0 <"+Te+"."+(+x+1)+".0"),s("xRange return",hi),hi})}(Ei,St)}).join(" ")}(Qe,Xt),s("xrange",Qe),Qe=function(gt,St){return s("replaceStars",gt,St),gt.trim().replace(a[Xa],"")}(Qe,Xt),s("stars",Qe),Qe}(Ft,R)}).join(" ").split(/\s+/);return this.loose&&(ve=ve.filter(function(Ft){return!!Ft.match(ee)})),ve=ve.map(function(Ft){return new ui(Ft,R)})},at.prototype.intersects=function($,R){if(!($ instanceof at))throw new TypeError("a Range is required");return this.set.some(function(N){return N.every(function(ee){return $.set.some(function(ve){return ve.every(function(Ft){return ee.intersects(Ft,R)})})})})},t.toComparators=function($,R){return new at($,R).set.map(function(N){return N.map(function(ee){return ee.value}).join(" ").trim().split(" ")})},at.prototype.test=function($){if(!$)return!1;typeof $=="string"&&($=new Ue($,this.loose));for(var R=0;R<this.set.length;R++)if(Zp(this.set[R],$))return!0;return!1},t.satisfies=tr,t.maxSatisfying=function($,R,N){var ee=null,ve=null;try{var Ft=new at(R,N)}catch{return null}return $.forEach(function(Qe){Ft.test(Qe)&&(ee&&ve.compare(Qe)!==-1||(ve=new Ue(ee=Qe,N)))}),ee},t.minSatisfying=function($,R,N){var ee=null,ve=null;try{var Ft=new at(R,N)}catch{return null}return $.forEach(function(Qe){Ft.test(Qe)&&(ee&&ve.compare(Qe)!==1||(ve=new Ue(ee=Qe,N)))}),ee},t.validRange=function($,R){try{return new at($,R).range||"*"}catch{return null}},t.ltr=function($,R,N){return tc($,R,"<",N)},t.gtr=function($,R,N){return tc($,R,">",N)},t.outside=tc,t.prerelease=function($,R){var N=Mi($,R);return N&&N.prerelease.length?N.prerelease:null},t.intersects=function($,R,N){return $=new at($,N),R=new at(R,N),$.intersects(R)},t.coerce=function($){if($ instanceof Ue)return $;if(typeof $!="string")return null;var R=$.match(a[Q]);return R==null?null:Mi((R[1]||"0")+"."+(R[2]||"0")+"."+(R[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(S){if(i===setTimeout)return setTimeout(S,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(S,0);try{return i(S,0)}catch{try{return i.call(null,S,0)}catch{return i.call(this,S,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var S=a(p);u=!0;for(var E=l.length;E;){for(c=l,l=[];++h<E;)c&&c[h].run();h=-1,E=l.length}c=null,u=!1,function(C){if(r===clearTimeout)return clearTimeout(C);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(C);try{r(C)}catch{try{return r.call(null,C)}catch{return r.call(this,C)}}}(S)}}function m(S,E){this.fun=S,this.array=E}function w(){}s.nextTick=function(S){var E=new Array(arguments.length-1);if(arguments.length>1)for(var C=1;C<arguments.length;C++)E[C-1]=arguments[C];l.push(new m(S,E)),l.length!==1||u||a(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(S){return[]},s.binding=function(S){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(S){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var GV=Me.exports.SEMVER_SPEC_VERSION,QV=Me.exports.parse,JV=Me.exports.valid,ZV=Me.exports.coerce,YV=Me.exports.clean,XV=Me.exports.inc,KV=Me.exports.major,eq=Me.exports.minor,tq=Me.exports.patch,iq=Me.exports.prerelease,rq=Me.exports.gt,sq=Me.exports.gte,nq=Me.exports.lt,oq=Me.exports.lte,aq=Me.exports.eq,cq=Me.exports.neq,lq=Me.exports.cmp,uq=Me.exports.compare,hq=Me.exports.rcompare,dq=Me.exports.compareIdentifiers,fq=Me.exports.rcompareIdentifiers,pq=Me.exports.compareBuild,gq=Me.exports.sort,mq=Me.exports.rsort,vq=Me.exports.diff,wq=Me.exports.validRange,bq=Me.exports.satisfies,yq=Me.exports.maxSatisfying,Sq=Me.exports.minSatisfying,xq=Me.exports.minVersion,Eq=Me.exports.gtr,kq=Me.exports.ltr,Cq=Me.exports.outside,$q=Me.exports.intersects,Iq=Me.exports.SemVer,Dq=Me.exports.Comparator,Pq=Me.exports.Range,lk=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,wO=/^-(\d{4})(\d{2})(\d{2})$/;function bO(e){return e=e.trim(),e==="*"||lk.test(e)}function uk(e){if(!bO(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(lk);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function hk(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=wO.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var yO=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function SO(e,t){if(t.serializeBuffersForPostMessage){const i=new yO,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=xO(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return ne.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function xO(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function EO(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var kO=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new D,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new D,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=Va(n),this.#d=CO(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,su(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===q.https||e.scheme===q.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+_w}return _w}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),mi(this.#o,e)||this.#t.$setOptions(this.#e,dk(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=SO(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===q.vscodeRemote,i=this.#s.extensionLocation.scheme===q.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=su(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=su(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function Va(e){try{const t=hk(uk(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function CO(e){try{const t=hk(uk(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var $O=class extends te{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(V.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=EO(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new kO(e,this.a,IO(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function lp(e){return{id:e.identifier,location:e.extensionLocation}}function dk(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||DO(e,t)}}function IO(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function DO(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var vr=class b${static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){b$.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},PO=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new vr("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=MO(this.document.uri)+this.a++;return _t(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},AO=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new PO(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},fk;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(fk||(fk={}));var TO=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Ie(()=>this.a.delete(e))}},RO=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new TO,this.c=new AO,this.a=e.getProxy(V.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new he;return LO(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(lp(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Va(e))):(s.add(this.b.addCustomProvider(t,e,i)),up(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(NO(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(lp(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Va(e))),Ie.from(s,new Ie(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return up(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:up(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=y.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=It.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=y.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,st.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,y.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!up(i))throw new Error("Custom document is not editable");return i}};function up(e){return!!e.onDidChangeCustomDocument}function LO(e){return typeof e.resolveCustomTextEditor=="function"}function NO(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function MO(e){const t=e.scheme===q.file||e.scheme===q.untitled?e.fsPath:e.toString();return bc(t)+""}var co,pk=class y${#e;#t;#i;constructor(t,i,r,s,n,o,a,c){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,r),this.#i=new Bt(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(y.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(y$.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[Zt.Error,Zt.Warning,Zt.Information,Zt.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...va.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:vi.Info,message:d(2958,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...va.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},zw=class{static{co=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Bt;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new eI({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=ht.map(this.h.event,co._mapper),this.f=t.getProxy(V.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(p,f){s.$changeMany(p,f),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,p,f.length===0?"CLEARING":f)}$clear(p){s.$clear(p),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,p)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+co.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+co.c++;while(r.has(u))}return new class extends pk{constructor(){super(i,u,co.e,co.d,p=>c.getDocument(p)?.version,a.extUri,l,n),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new pk(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(y.revive(i),r.map(va.to))}};zw=co=__decorate([__param(1,_e),__param(2,Lo)],zw);var FO=class{constructor(e){this.a=e.getProxy(V.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>y.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},OO=class S${static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(V.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(q).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=S$.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=S4(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Ot).finally(()=>{n===a&&(n=void 0)});n=a})}return new Ie(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(y.revive(i),st.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},UO=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new xs,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=y.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:af.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw Ru("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const p=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(f=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(p),u(f)}).catch(f=>{clearTimeout(p),h(f)})}).then(u=>{const h={edits:[]};for(const p of u)if(Array.isArray(p)&&p.every(f=>f instanceof Ms))for(const{newText:f,newEol:m,range:w}of p)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&M.from(w),text:f,eol:m&&xa.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new ei(h)):Promise.reject(new Error("concurrent_edits"))})}},jO=class{constructor(e,t){this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.e=new D,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidChangeDocumentWithReason=this.d.event,this.onDidSaveDocument=this.e.event,this.f=new he,this.i=new Map,this.g=e.getProxy(V.MainThreadDocuments),this.h=t,this.h.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.f),this.h.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.f)}dispose(){this.f.dispose()}getAllDocumentData(){return[...this.h.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.h.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.h.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let r=this.i.get(e.toString());return r?t?.encoding&&(r=r.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(r=this.g.$tryOpenDocument(e,t).then(s=>{this.i.delete(e.toString());const n=y.revive(s);return bo(this.h.getDocument(n))},s=>(this.i.delete(e.toString()),Promise.reject(s))),this.i.set(e.toString(),r)),r}createDocumentData(e){return this.g.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=y.revive(e),i=this.h.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.e.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptEncodingChanged(e,t){const i=y.revive(e),r=this.h.getDocument(i);if(!r)throw new Error("unknown document");r._acceptEncoding(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0}),this.d.fire({document:r.document,contentChanges:[],reason:void 0,detailedReason:void 0})}$acceptModelChanged(e,t,i){const r=y.revive(e),s=this.h.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Kc.Undo:t.isRedoing&&(n=Kc.Redo),this.c.fire(tm({document:s.document,contentChanges:t.changes.map(o=>({range:M.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n})),this.d.fire(tm({document:s.document,contentChanges:t.changes.map(o=>({range:M.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n,detailedReason:t.detailedReason?{source:t.detailedReason.source,metadata:t.detailedReason}:void 0}))}setWordDefinitionFor(e,t){TN(e,t)}},HO=class{constructor(e){this.b=new Map,this.c=new D,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(V.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),ce(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=st.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},BO=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Ie(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},gk;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(gk||(gk={}));var _O=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},mk=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new _O(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Ww=null;function zO(){return Ww===null&&(Ww=new mk([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Ww}var vk;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(vk||(vk={}));var nu=null;function WO(){if(nu===null){nu=new rx(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026|`;for(let i=0;i<e.length;i++)nu.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)nu.set(t.charCodeAt(i),2)}return nu}var VO=class Kb{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=zO()){const r=WO(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,p=1,f=!1,m=!1,w=!1,S=!1;for(;l<c;){let E=!1;const C=a.charCodeAt(l);if(p===13){let P;switch(C){case 40:f=!0,P=0;break;case 41:P=f?0:1;break;case 91:w=!0,m=!0,P=0;break;case 93:w=!1,P=m?0:1;break;case 123:S=!0,P=0;break;case 125:P=S?0:1;break;case 39:case 34:case 96:h===C?P=1:h===39||h===34||h===96?P=0:P=1;break;case 42:P=h===42?1:0;break;case 32:P=w?0:1;break;default:P=r.get(C)}P===1&&(s.push(Kb.a(r,a,n,u,l)),E=!0)}else if(p===12){let P;C===91?(m=!0,P=0):P=r.get(C),P===1?E=!0:p=13}else p=i.nextState(p,C),p===0&&(E=!0);E&&(p=1,f=!1,m=!1,S=!1,u=l+1,h=C),l++}p===13&&s.push(Kb.a(r,a,n,u,c))}return s}},qO=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?VI(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new mk(t)}}provideDocumentLinks(e){this.c();const t=[],i=VO.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=Kn.to(r);s.target&&t.push(s)}return t}},GO=class ey{constructor(t,i){this.i=i,this.b=new qO,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(V.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(ey.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(T(t,"fsChunks"),o+=4);let a;s.isReadonly&&kn(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:p,type:f}=h;if(p.scheme!==i)continue;let m;switch(f){case la.Changed:m=0;break;case la.Created:m=1;break;case la.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:p,type:m})}this.a.$onFileSystemChange(n,u)});return ce(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(y.revive(i))).then(r=>ey.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(y.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(y.revive(i))).then(r=>ne.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(y.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(y.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(y.revive(i),y.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(i),y.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(y.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(y.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=ne.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}},Tq=class x$ extends te{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.B(new xo),this.f=void 0,this.g=0}s(){const t=new he;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<x$.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function QO(e,t){return typeof t=="string"&&!t.startsWith(Ln)&&!Wu(t)?{base:e,pattern:t}:t}var JO=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o){this.a=Math.random(),this.b=new D,this.c=new D,this.d=new D,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=_o(n),c=typeof n=="string",l=!1,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const p of h.created){const f=y.revive(p);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.b.fire(f)}if(!o.ignoreChangeEvents)for(const p of h.changed){const f=y.revive(p);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.c.fire(f)}if(!o.ignoreDeleteEvents)for(const p of h.deleted){const f=y.revive(p);a(f.fsPath)&&(!c||i.getWorkspaceFolder(f))&&this.d.fire(f)}}});this.g=Ie.from(this.i(e,i,t,r,n,o,!1),this.b,this.c,this.d,u)}i(e,t,i,r,s,n,o){const a=Ie.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(V.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(Ln)||s.pattern.includes(Fm))&&(l=!0);const u=[];let h,p;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(p=14,n.ignoreChangeEvents&&(p&=-3),n.ignoreCreateEvents&&(p&=-5),n.ignoreDeleteEvents&&(p&=-9));else if(l&&u.length===0){const f=t.getWorkspaceFolder(y.revive(s.baseUri)),m=i.getConfiguration("files",f).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const f=t.getWorkspaceFolder(y.revive(s.baseUri));if(f){const m=i.getConfiguration("files",f).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const S=`${$g(w,"/")}/${Ln}`;h||(h=[]),h.push(QO(f.uri.fsPath,S))}}if(!h||h.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:p},!!o),Ie.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},ZO=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new At(()=>this.d.created.map(y.revive)),this.b=new At(()=>this.d.changed.map(y.revive)),this.c=new At(()=>this.d.deleted.map(y.revive)),this.session=this.d.session}},YO=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new D,this.b=new D,this.c=new D,this.d=new D,this.g=new oc,this.h=new oc,this.i=new oc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s){return new JO(this.j,t,e,i,this.a.event,Li.from(r),s)}$onFileEvent(e){this.a.fire(new ZO(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:y.revive(i.source),newUri:y.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Bn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=Ri.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},XO=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new pe("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new F("showOptions","Show Options",o=>!0,o=>o),new F("resource","Interactive resource Uri",o=>!0,o=>o),new F("controllerId","Notebook controller Id",o=>!0,o=>o),new F("title","Interactive editor title",o=>!0,o=>o)],new fe("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},KO=class{constructor(e){this.b=0,this.a=e.getProxy(V.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),ce(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},wk;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(wk||(wk={}));var eU=class Ki extends Je{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Ki.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new Ki(this.startLineNumber,this.startColumn,t,i):new Ki(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new Hi(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Hi(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new Ki(t,i,this.endLineNumber,this.endColumn):new Ki(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new Ki(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new Ki(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Ki(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Ki(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new Ki(t,i,r,s):new Ki(r,s,t,i)}},bk=class E${constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!tg(s))return s[0]instanceof Gc?s.map(vv.from):E$.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:Ji.from(s.kind),tags:s.tags?.map(os.from)||[],detail:"",containerName:s.containerName,range:M.from(s.location.range),selectionRange:M.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(Je.containsRange(o.range,n.range)&&!Je.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},hp=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new vr("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new he;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){if(!ye.isRange(r[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:M.from(r[a].range),command:this.g.toInternal(r[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function dp(e){return Array.isArray(e)?e.map(El.from):e?[El.from(e)]:[]}var yk=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDefinition(r,s,i);return dp(n)}},Sk=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDeclaration(r,s,i);return dp(n)}},xk=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideImplementation(r,s,i);return dp(n)}},Ek=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideTypeDefinition(r,s,i);return dp(n)}},Vw=class k${static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=ze.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,p=this.e.get(h);if(!p)throw new Error(`Hover with id ${h} not found`);const f={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:p};a=await this.h.provideHover(n,o,s,f)}else a=await this.h.provideHover(n,o,s);if(!a||tg(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new ye(o,o));const c=kl.from(a),l=this.d;if(this.e.size===k$.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},kk=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return yv.from(n)}},Ck=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,M.to(t),Kd.to(i),r);if(Array.isArray(n))return n.map(o=>Xd.from(o))}},$k=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(ba.from)}},Ik=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=ze.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(Sv.from)}},Dk=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:ft(n.ranges.map(M.from)),wordPattern:n.wordPattern}}},Pk=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=ze.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(bi.from)}},fp=class qp{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new vr("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=eU.isISelection(i)?dr.to(i):M.to(i),a=[];for(const f of this.j.getDiagnostics(t))if(o.intersection(f.range)&&a.push(f)>qp.d)break;const c={diagnostics:a,only:r.only?new ut(r.only):void 0,triggerKind:Mv.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!rc(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new he;this.f.set(u,h);const p=[];for(let f=0;f<l.length;f++){const m=l[f];if(m)if(qp.o(m)&&!(m instanceof Jc))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),p.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{const w=m;c.only&&(w.kind?c.only.contains(w.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${w.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const S=w.ranges??[];p.push({cacheId:[u,f],title:w.title,command:w.command&&this.h.toInternal(w.command,h),diagnostics:w.diagnostics&&w.diagnostics.map(va.from),edit:w.edit&&Ri.from(w.edit,void 0),kind:w.kind&&w.kind.value,isPreferred:w.isPreferred,isAI:Ge(this.m,"codeActionAI")?w.isAI:!1,ranges:Ge(this.m,"codeActionRanges")?ft(S.map(M.from)):void 0,disabled:w.disabled?.reason})}}return{cacheId:u,actions:p}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||qp.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=Ri.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},ou=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.e=new vr("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,r){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>M.to(u)),o=Da.toDataTransfer(i,()=>{throw new a3});if(await this.h.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof pd)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const p=ni();return c.set(p,h),[u,await to.from(u,h,p)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,r,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(p=>M.to(p)),c=r.items.map(([p,f])=>{const m=this.d?.get(f.id);return m?[p,m]:[p,to.to(p,f,async w=>(await this.f.$resolvePasteFileData(this.j,e,w)).buffer)]}),l=new na(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new Hs(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((p,f)=>({_cacheId:[h,f],title:p.title??d(2961,null,this.k.displayName||this.k.name),kind:p.kind,yieldTo:p.yieldTo?.map(m=>m.value),insertText:typeof p.insertText=="string"?p.insertText:{snippet:p.insertText.value},additionalEdit:p.additionalEdit?Ri.from(p.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.e.get(i,r);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?Ri.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},Ak=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(Lt.from)}},qw=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=M.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(Lt.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){Sy(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(M.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(Lt.from)}},Tk=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=ze.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(Lt.from)}},pp=class{constructor(e,t){this.e=e,this.f=t,this.d=new vr("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!rc(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Yn.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&En(e,Yn.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},gp=class ty{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=ze.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?Ri.from(a):void 0}catch(a){const c=ty.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=ze.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(ye.isRange(o)?(a=o,c=s.getText(o)):xt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:M.from(a),text:c}}catch(o){const a=ty.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Gw=class iy{static{this.d={[gh.Invoke]:ol.Invoke,[gh.Automatic]:ol.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=M.to(i);try{const a=iy.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(iy.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Qw=class{constructor(e,t){this.resultId=e,this.tokens=t}},Jw=class yr{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=yr.h(o),this.o(yr.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return yr.j(t)?yr.k(t)?t:new ua(new Uint32Array(t.data),t.resultId):yr.l(t)?yr.m(t)?t:new xd(t.edits.map(i=>new S8(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!yr.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new xd([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new xd([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(yr.j(t)){const r=this.e++;return this.d.set(r,new Qw(t.resultId,t.data)),jw({id:r,type:"full",data:t.data})}if(yr.l(t)){const r=this.e++;return yr.j(i)?this.d.set(r,new Qw(i.resultId,i.data)):this.d.set(r,new Qw(t.resultId)),jw({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},Rk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,M.to(t),i);return s?this.f(s):null}f(e){return jw({id:0,type:"full",data:e.data})}},au=class C${static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new vr("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=n.getWordRangeAtPosition(o)||new ye(o,o),c=a.with({end:o}),l=new hn,u=await this.h.provideCompletionItems(n,o,s,Ev.to(r));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Yo(u):u,p=C$.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),f=new he;this.e.set(p,f);const m=[],w={x:p,b:m,a:{replace:M.from(a),insert:M.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let S=0;S<h.items.length;S++){const E=h.items[S],C=this.l(E,[p,S],c,a);m.push(C)}return w}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!mi(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?tf.from(t.kind):void 0,m:t.tags&&t.tags.map(ef.from),c:t.detail,d:typeof t.documentation>"u"?void 0:de.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(Lt.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof Hn&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),ye.isRange(c)?a.j=M.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:M.from(c.inserting),replace:M.from(c.replacing)}),a}},lo=class{constructor(e,t,i,r){this.f=e,this.g=t,this.h=i,this.j=r,this.d=new tU,this.k={[fh.Automatic]:nl.Automatic,[fh.Explicit]:nl.Invoke},this.e=Ge(this.f,"inlineCompletionsAdditions")}get supportsHandleEvents(){return Ge(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=ze.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:M.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid,requestIssuedDateTime:i.requestIssuedDateTime,earliestShownDateTime:i.earliestShownDateTime},r);if(!o)return;const{resultItems:a,list:c}=Array.isArray(o)?{resultItems:o,list:void 0}:{resultItems:o.items,list:o},l=this.e?Array.isArray(o)?[]:o.commands||[]:[],u=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let h;return{pid:this.d.createReferenceId({dispose(){h?.dispose()},items:a,list:c}),languageId:s.languageId,items:a.map((f,m)=>{let w;f.command&&(h||(h=new he),w=this.j.toInternal(f.command,h));let S;f.action&&(h||(h=new he),S=this.j.toInternal(f.action,h));const E=f.insertText;return{insertText:typeof E=="string"?E:{snippet:E.value},filterText:f.filterText,range:f.range?M.from(f.range):void 0,showRange:this.e&&f.showRange?M.from(f.showRange):void 0,command:w,action:S,idx:m,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,displayLocation:f.displayLocation&&this.e?{range:M.from(f.displayLocation.range),label:f.displayLocation.label,kind:f.displayLocation.kind?Zv.from(f.displayLocation.kind):is.Code}:void 0,warning:f.warning&&this.e?{message:de.from(f.warning.message),icon:f.warning.icon?Pf.fromThemeIcon(f.warning.icon):void 0}:void 0,correlationId:this.e?f.correlationId:void 0,suggestionId:void 0}}),commands:l.map(f=>(h||(h=new he),kv.from(f,this.j,h))),suppressSuggestions:!1,enableForwardStability:u}}disposeCompletions(e,t){const i=this.d.get(e);if(this.h.handleListEndOfLifetime&&this.e&&i?.list){let n=function(o){switch(o.kind){case"lostRace":return{kind:rs.LostRace};case"tokenCancellation":return{kind:rs.TokenCancellation};case"other":return{kind:rs.Other};case"empty":return{kind:rs.Empty};case"notTaken":return{kind:rs.NotTaken};default:return{kind:rs.Other}}};var r=n;this.h.handleListEndOfLifetime(i.list,n(t))}this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,Gv.to(r)))}handleEndOfLifetime(e,t,i){const r=this.d.get(e)?.items[t];if(r&&this.h.handleEndOfLifetime&&this.e){const s=Jv.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(r,s)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},tU=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Zw=class{constructor(e,t){this.e=e,this.f=t,this.d=new vr("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=ze.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...Cl.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=Cl.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},mp=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new vr("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=M.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new he);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:de.fromStrict(e.tooltip),position:ze.from(e.position),textEdits:e.textEdits&&e.textEdits.map(Lt.from),kind:e.kind&&nf.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:de.fromStrict(n.tooltip)};Bi.isLocation(n.location)&&(o.location=bi.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},vp=class Gp{constructor(t,i){this.e=t,this.f=i,this.d=new vr("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(Gp.g).map(Kn.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!Gp.g(s[a]))continue;const c=Kn.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!Gp.g(s)))return Kn.from(s)}releaseLinks(t){this.d.delete(t)}},Yw=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:ya.from(n.color),range:M.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=M.to(t.range),n=ya.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(of.from)}},Lk=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map(lf.from)}},Nk=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(ze.to),n=await this.e.provideSelectionRanges(r,s,i);if(!rc(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Dv.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},cu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Qf(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>M.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>M.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Xn.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},lu=class{constructor(e,t){this.f=e,this.g=t,this.d=new Qf(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=eo.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},wp=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new vr("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=Da.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Vi(c),u=this.d.add(l);return l.map((h,p)=>({_cacheId:[u,p],title:h.title??d(2962,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(f=>f.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Ri.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Ri.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},uu=class{constructor(e,t){this.adapter=e,this.extension=t}},iU=class Ut extends te{static{this.f=0}get inlineCompletionsUnificationState(){return this.j}constructor(t,i,r,s,n,o,a,c){super(),this.n=i,this.s=r,this.t=s,this.u=n,this.w=o,this.y=a,this.z=c,this.h=new Map,this.m=this.B(new D),this.onDidChangeInlineCompletionsUnificationState=this.m.event,this.g=t.getProxy(V.MainThreadLanguageFeatures),this.j={codeUnification:!1,modelUnification:!1,expAssignments:[]}}C(t,i){return ma.from(t,this.n,i)}D(t){return new Ie(()=>{this.h.delete(t),this.g.$unregister(t)})}F(){return Ut.f++}async G(t,i,r,s,n,o=!1){const a=this.h.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.w.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{xr(u)||(this.w.error(`[${a.extension.identifier.value}] provider FAILED`),this.w.error(u),this.z.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.w.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),st.isCancellationToken(n)?Fg(l,n):l}H(t,i){const r=this.F();return this.h.set(r,new uu(t,i)),r}static I(t){return t.displayName||t.name}static J(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.H(new bk(this.s,r),t),o=s&&s.label||Ut.I(t);return this.g.$registerDocumentSymbolProvider(n,this.C(i,t),o),this.D(n)}$provideDocumentSymbols(t,i,r){return this.G(t,bk,s=>s.provideDocumentSymbols(y.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.F(),n=typeof r.onDidChangeCodeLenses=="function"?this.F():void 0;this.h.set(s,new uu(new hp(this.s,this.t.converter,r,t,this.z,this.w),t)),this.g.$registerCodeLensSupport(s,this.C(i,t),n);let o=this.D(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.g.$emitCodeLensEvent(n));o=Ie.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.G(t,hp,s=>s.provideCodeLenses(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.G(t,hp,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.G(t,hp,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.H(new yk(this.s,r),t);return this.g.$registerDefinitionSupport(s,this.C(i,t)),this.D(s)}$provideDefinition(t,i,r,s){return this.G(t,yk,n=>n.provideDefinition(y.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.H(new Sk(this.s,r),t);return this.g.$registerDeclarationSupport(s,this.C(i,t)),this.D(s)}$provideDeclaration(t,i,r,s){return this.G(t,Sk,n=>n.provideDeclaration(y.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.H(new xk(this.s,r),t);return this.g.$registerImplementationSupport(s,this.C(i,t)),this.D(s)}$provideImplementation(t,i,r,s){return this.G(t,xk,n=>n.provideImplementation(y.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.H(new Ek(this.s,r),t);return this.g.$registerTypeDefinitionSupport(s,this.C(i,t)),this.D(s)}$provideTypeDefinition(t,i,r,s){return this.G(t,Ek,n=>n.provideTypeDefinition(y.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.H(new Vw(this.s,r),t);return this.g.$registerHoverProvider(n,this.C(i,t)),this.D(n)}$provideHover(t,i,r,s,n){return this.G(t,Vw,o=>o.provideHover(y.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.G(t,Vw,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.H(new kk(this.s,r),t);return this.g.$registerEvaluatableExpressionProvider(n,this.C(i,t)),this.D(n)}$provideEvaluatableExpression(t,i,r,s){return this.G(t,kk,n=>n.provideEvaluatableExpression(y.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.F():void 0,o=this.H(new Ck(this.s,r),t);this.g.$registerInlineValuesProvider(o,this.C(i,t),n);let a=this.D(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.g.$emitInlineValuesEvent(n));a=Ie.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.G(t,Ck,o=>o.provideInlineValues(y.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.H(new $k(this.s,r),t);return this.g.$registerDocumentHighlightProvider(s,this.C(i,t)),this.D(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.H(new Ik(this.s,r,this.w),t);return this.g.$registerMultiDocumentHighlightProvider(s,this.C(i,t)),this.D(s)}$provideDocumentHighlights(t,i,r,s){return this.G(t,$k,n=>n.provideDocumentHighlights(y.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.G(t,Ik,o=>o.provideMultiDocumentHighlights(y.revive(i),r,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.H(new Dk(this.s,r),t);return this.g.$registerLinkedEditingRangeProvider(s,this.C(i,t)),this.D(s)}$provideLinkedEditingRanges(t,i,r,s){return this.G(t,Dk,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Ut.L(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.H(new Pk(this.s,r),t);return this.g.$registerReferenceSupport(s,this.C(i,t)),this.D(s)}$provideReferences(t,i,r,s,n){return this.G(t,Pk,o=>o.provideReferences(y.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new he,o=this.H(new fp(this.s,this.t.converter,this.u,r,this.w,t,this.y),t);return this.g.$registerCodeActionSupport(o,this.C(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.t.converter.toInternal(a.command,n)}))},Ut.I(t),Ut.J(t),!!r.resolveCodeAction),n.add(this.D(o)),n}$provideCodeActions(t,i,r,s,n){return this.G(t,fp,o=>o.provideCodeActions(y.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.G(t,fp,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.G(t,fp,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.H(new Ak(this.s,r),t);return this.g.$registerDocumentFormattingSupport(s,this.C(i,t),t.identifier,t.displayName||t.name),this.D(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.G(t,Ak,n=>n.provideDocumentFormattingEdits(y.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.H(new qw(this.s,r),t);return this.g.$registerRangeFormattingSupport(n,this.C(i,t),t.identifier,t.displayName||t.name,s),this.D(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.G(t,qw,o=>o.provideDocumentRangeFormattingEdits(y.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.G(t,qw,o=>o.provideDocumentRangesFormattingEdits(y.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.H(new Tk(this.s,r),t);return this.g.$registerOnTypeFormattingSupport(n,this.C(i,t),s,t.identifier),this.D(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.G(t,Tk,a=>a.provideOnTypeFormattingEdits(y.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.H(new pp(i,this.w),t);return this.g.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.D(r)}$provideWorkspaceSymbols(t,i,r){return this.G(t,pp,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.G(t,pp,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.G(t,pp,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.H(new gp(this.s,r,this.w),t);return this.g.$registerRenameSupport(s,this.C(i,t),gp.supportsResolving(r)),this.D(s)}$provideRenameEdits(t,i,r,s,n){return this.G(t,gp,o=>o.provideRenameEdits(y.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.G(t,gp,n=>n.resolveRenameLocation(y.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.H(new Gw(this.s,r,this.w),t);return this.g.$registerNewSymbolNamesProvider(s,this.C(i,t)),this.D(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.G(t,Gw,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.G(t,Gw,o=>o.provideNewSymbolNames(y.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.H(new Jw(this.s,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.F():void 0;this.g.$registerDocumentSemanticTokensProvider(n,this.C(i,t),s,o);let a=this.D(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.g.$emitDocumentSemanticTokensEvent(o));a=Ie.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.G(t,Jw,n=>n.provideDocumentSemanticTokens(y.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.G(t,Jw,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.H(new Rk(this.s,r),t);return this.g.$registerDocumentRangeSemanticTokensProvider(n,this.C(i,t),s),this.D(n)}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.G(t,Rk,n=>n.provideDocumentRangeSemanticTokens(y.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.H(new au(this.s,this.t.converter,r,this.y,t),t);return this.g.$registerCompletionsProvider(n,this.C(i,t),s,au.supportsResolving(r),t.identifier),this.D(n)}$provideCompletionItems(t,i,r,s,n){return this.G(t,au,o=>o.provideCompletionItems(y.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.G(t,au,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.G(t,au,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=typeof r.onDidChange=="function"&&Ge(t,"inlineCompletionsAdditions")?this.F():void 0,o=new lo(t,this.s,r,this.t.converter),a=this.H(o,t);let c=this.D(a);if(n!==void 0){const l=r.onDidChange(u=>this.g.$emitInlineCompletionsChange(n));c=Ie.from(c,l)}return this.g.$registerInlineCompletionsSupport(a,this.C(i,t),o.supportsHandleEvents,Ve.toKey(t.identifier.value),t.version,s?.groupId?Ve.toKey(s.groupId):void 0,s?.yieldTo?.map(l=>Ve.toKey(l))||[],s?.displayName,s?.debounceDelayMs,s?.excludes?.map(l=>Ve.toKey(l))||[],n),c}$provideInlineCompletions(t,i,r,s,n){return this.G(t,lo,o=>o.provideInlineCompletions(y.revive(i),r,s,n),void 0,void 0)}$handleInlineCompletionDidShow(t,i,r,s){this.G(t,lo,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.G(t,lo,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,r,s){this.G(t,lo,async n=>{n.handleEndOfLifetime(i,r,s)},void 0,void 0)}$handleInlineCompletionRejection(t,i,r){this.G(t,lo,async s=>{s.handleRejection(i,r)},void 0,void 0)}$freeInlineCompletionsList(t,i,r){this.G(t,lo,async s=>{s.disposeCompletions(i,r)},void 0,void 0)}$acceptInlineCompletionsUnificationState(t){this.j=t,this.m.fire()}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.H(new Zw(this.s,r),t);return this.g.$registerSignatureHelpProvider(o,this.C(i,t),n),this.D(o)}$provideSignatureHelp(t,i,r,s,n){return this.G(t,Zw,o=>o.provideSignatureHelp(y.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.G(t,Zw,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.F():void 0,n=this.H(new mp(this.s,this.t.converter,r,this.w,t),t);this.g.$registerInlayHintsProvider(n,this.C(i,t),typeof r.resolveInlayHint=="function",s,Ut.I(t));let o=this.D(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.g.$emitInlayHintsEvent(s));o=Ie.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.G(t,mp,n=>n.provideInlayHints(y.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.G(t,mp,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.G(t,mp,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.H(new vp(this.s,r),t);return this.g.$registerDocumentLinkProvider(s,this.C(i,t),typeof r.resolveDocumentLink=="function"),this.D(s)}$provideDocumentLinks(t,i,r){return this.G(t,vp,s=>s.provideLinks(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.G(t,vp,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.G(t,vp,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.H(new Yw(this.s,r),t);return this.g.$registerDocumentColorProvider(s,this.C(i,t)),this.D(s)}$provideDocumentColors(t,i,r){return this.G(t,Yw,s=>s.provideColors(y.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.G(t,Yw,n=>n.provideColorPresentations(y.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.F(),n=typeof r.onDidChangeFoldingRanges=="function"?this.F():void 0;this.h.set(s,new uu(new Lk(this.s,r),t)),this.g.$registerFoldingRangeProvider(s,this.C(i,t),t.identifier,n);let o=this.D(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.g.$emitFoldingRangeEvent(n));o=Ie.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.G(t,Lk,n=>n.provideFoldingRanges(y.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.H(new Nk(this.s,r,this.w),t);return this.g.$registerSelectionRangeProvider(s,this.C(i,t)),this.D(s)}$provideSelectionRanges(t,i,r,s){return this.G(t,Nk,n=>n.provideSelectionRanges(y.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.H(new cu(this.s,r),t);return this.g.$registerCallHierarchyProvider(s,this.C(i,t)),this.D(s)}$prepareCallHierarchy(t,i,r,s){return this.G(t,cu,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.G(t,cu,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.G(t,cu,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.G(t,cu,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.H(new lu(this.s,r),t);return this.g.$registerTypeHierarchyProvider(s,this.C(i,t)),this.D(s)}$prepareTypeHierarchy(t,i,r,s){return this.G(t,lu,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.G(t,lu,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.G(t,lu,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.G(t,lu,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.F();return this.h.set(n,new uu(new wp(this.g,this.s,r,n,t),t)),this.g.$registerDocumentOnDropEditProvider(n,this.C(i,t),s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.D(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.G(t,wp,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,y.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.G(t,wp,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.G(t,wp,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.F();return this.h.set(n,new uu(new ou(this.g,this.s,r,n,t),t)),this.g.$registerPasteEditProvider(n,this.C(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.D(n)}$prepareDocumentPaste(t,i,r,s,n){return this.G(t,ou,o=>o.prepareDocumentPaste(y.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.G(t,ou,c=>c.providePasteEdits(i,y.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.G(t,ou,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.G(t,ou,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static L(t){return{pattern:t.source,flags:t.flags}}static M(t){return{decreaseIndentPattern:Ut.L(t.decreaseIndentPattern),increaseIndentPattern:Ut.L(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Ut.L(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Ut.L(t.unIndentedLinePattern):void 0}}static N(t){return{beforeText:Ut.L(t.beforeText),afterText:t.afterText?Ut.L(t.afterText):void 0,previousLineText:t.previousLineText?Ut.L(t.previousLineText):void 0,action:t.action}}static O(t){return t.map(Ut.N)}static P(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>ia.toString(i)):void 0}}static Q(t){return t.map(Ut.P)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&y4(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.s.setWordDefinitionFor(i,s):this.s.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.y.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.y.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.F(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?Ut.L(r.wordPattern):void 0,indentationRules:r.indentationRules?Ut.M(r.indentationRules):void 0,onEnterRules:r.onEnterRules?Ut.O(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?Ut.Q(r.autoClosingPairs):void 0};return this.g.$setLanguageConfiguration(n,i,o),this.D(n)}$setWordDefinitions(t){for(const i of t)this.s.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},rU=H("notebookService"),sU=H("codeMapperService"),Mk="vscode_editFile",Xw="vscode_editFile_internal",nU={id:Xw,displayName:"",modelDescription:"",source:Rn.Internal},Kw=class{constructor(t,i,r){this.a=t,this.b=i,this.c=r}async invoke(t,i,r,s){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=y.revive(n.uri),a=_m.parse(o)?.notebook||o,c=this.a.getSession(t.context?.sessionId),l=c.getRequests().at(-1);c.acceptResponseProgress(l,{kind:"markdownContent",content:new Mo("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new Mo("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const h=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionId:t.context.sessionId},{textEdit:(f,m)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:f,edits:m})},notebookEdit(f,m){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:f,edits:m})}},s);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),h?.errorMessage)throw new Error(h.errorMessage);let p;return await new Promise(f=>{let m=!1;p=k7(w=>{const E=u.entries.read(w)?.find(C=>C.modifiedURI.toString()===a.toString());E&&(E.isCurrentlyBeingModifiedBy.read(w)?m=!0:m&&f(!0))})}).finally(()=>{p.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:Sh.Hidden}}};Kw=__decorate([__param(0,nO),__param(1,sU),__param(2,rU)],Kw);var oU="vscode_get_confirmation",aU={id:oU,displayName:"Confirmation Tool",modelDescription:"A tool that demonstrates different types of confirmations. Takes a title, message, and confirmation type (basic or terminal).",source:Rn.Internal,inputSchema:{type:"object",properties:{title:{type:"string",description:"Title for the confirmation dialog"},message:{type:"string",description:"Message to show in the confirmation dialog"},confirmationType:{type:"string",enum:["basic","terminal"],description:"Type of confirmation to show - basic for simple confirmation, terminal for terminal command confirmation"},terminalCommand:{type:"string",description:'Terminal command to show (only used when confirmationType is "terminal")'}},required:["title","message","confirmationType"],additionalProperties:!1}},cU=class{async prepareToolInvocation(e,t){const i=e.parameters;if(!i.title||!i.message)throw new Error("Missing required parameters for ConfirmationTool");const r=i.confirmationType??"basic";let s;return r==="terminal"?s={kind:"terminal",commandLine:{original:i.terminalCommand??""},language:"bash"}:s=void 0,{confirmationMessages:{title:i.title,message:new Mo(i.message),allowAutoConfirm:!1},toolSpecificData:s,presentation:Sh.HiddenAfterComplete}}async invoke(e,t,i,r){return{content:[{kind:"text",value:"yes"}]}}},hu;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(hu||(hu={}));var wr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(wr||(wr={}));var Lq=class $$ extends te{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new Uu),this.onDidChangeStorage=this.b.event,this.c=wr.None,this.f=new Map,this.g=this.B(new LD($$.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===wr.Closed)return;let r=!1;Et(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===wr.None&&(this.c=wr.Initialized,this.s.hint!==hu.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return Et(r)?i:r}getBoolean(t,i){const r=this.get(t);return Et(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return Et(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return Et(r)?i:p6(r)}async set(t,i,r=!1){if(this.c===wr.Closed)return;if(Et(i))return this.delete(t,r);const s=xt(i)||Array.isArray(i)?T2(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),this.D()}async delete(t,i=!1){if(!(this.c===wr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==wr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=wr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===wr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===hu.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===hu.STORAGE_IN_MEMORY}},Fk;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState",e.Mcp="mcp"})(Fk||(Fk={}));function lU(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.promptsHome)&&y.isUri(t.extensionsResource)&&y.isUri(t.mcpResource))}var uU=H("IUserDataProfilesService");function bp(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:_t(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:_t(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:_t(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:_t(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:_t(i,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:_t(i,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:_t(i,"extensions.json"),mcpResource:n&&s?.useDefaultFlags?.mcp?n.mcpResource:_t(i,"mcp.json"),cacheHome:_t(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var Ok=class extends te{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,r,s){super(),this.s=t,this.t=i,this.u=r,this.y=s,this.g=this.B(new D),this.onDidChangeProfiles=this.g.event,this.h=this.B(new D),this.onWillCreateProfile=this.h.event,this.j=this.B(new D),this.onWillRemoveProfile=this.j.event,this.m=this.B(new D),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=_t(this.s.userRoamingDataHome,"profiles"),this.f=_t(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const s of this.N()){if(!s.name||!He(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(bp(Jr(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:i,emptyWindows:r}}return this.z}D(){const t=bp("__default__profile__",d(2666,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${gn(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(bc(ni()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(bc(ni()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!He(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(r={...r,workspaces:[a]});const c=bp(t,i,_t(this.profilesHome,t),this.f,r,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await Po.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=bp(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.y.error(s)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(s){B2(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(y.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.u.extUri.isEqual(r.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return y.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.u.extUri.isEqual(s,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return RP(t)?t.uri:LP(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};Ok=__decorate([__param(0,Z0),__param(1,H2),__param(2,xx),__param(3,_e)],Ok);var hU="__$__isNewStorageMarker",yp="__$__targetStorageMarker",Uk=H("storageService"),qa;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(qa||(qa={}));var jk;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(jk||(jk={}));var Hk;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(Hk||(Hk={}));function dU(e){const t=e.get(yp);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var Mq=class I$ extends te{static{this.a=60*1e3}constructor(t={flushInterval:I$.a}){super(),this.b=this.B(new Uu),this.f=this.B(new Uu),this.onDidChangeTarget=this.f.event,this.g=this.B(new D),this.onWillSaveState=this.g.event,this.m=this.B(new xo),this.C=void 0,this.F=void 0,this.H=void 0,this.j=this.B(new wn(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,r){return ht.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.m.value=z4(()=>{this.r()&&this.flush(),this.j.schedule()})}r(){return!0}t(){qi([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{pi("code/willInitStorage");try{await this.O()}finally{pi("code/didInitStorage")}this.j.schedule()})()),this.h}u(t,i){const{key:r,external:s}=i;if(r===yp){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:s})}w(t){this.g.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if(Et(i)){this.remove(t,r,n);return}this.y(()=>{this.z(t,r,s),this.P(r)?.set(t,i,n)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,r)})}y(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const r=[],s=this.J(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}z(t,i,r,s=!1){const n=this.J(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.P(i)?.set(yp,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set(yp,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?dU(i):Object.create(null)}isNew(t){return this.getBoolean(hU,t)===!0}async flush(t=qa.NONE){this.g.fire({reason:t});const i=this.P(-1),r=this.P(0),s=this.P(1);switch(t){case qa.NONE:await Po.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case qa.SHUTDOWN:await Po.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,r=this.P(1)?.items??new Map;return fU(t,i,r,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(qa.NONE),lU(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||Bk(i)&&Bk(t))}N(t,i,r){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.u(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.u(r,{key:n,external:!0})})}};function Bk(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function fU(e,t,i,r,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,S)=>{a.set(S,w),c.set(S,o(w))});const l=new Map,u=new Map;t.forEach((w,S)=>{l.set(S,w),u.set(S,o(w))});const h=new Map,p=new Map;i.forEach((w,S)=>{h.set(S,w),p.set(S,o(w))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const f=[];if(a.forEach((w,S)=>{f.push({key:S,value:w})}),console.table(f),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((S,E)=>{w.push({key:E,value:S})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,S)=>{m.push({key:S,value:w})}),console.table(m),console.groupEnd(),console.log(p)}var pU=class ti{static{this.a=new Map}static{this.b=new Map}static{this.c=new Map}static{this.d="memento/"}constructor(t,i){this.f=i,this.e=ti.d+t}getMemento(t,i){switch(t){case 1:{let r=ti.c.get(this.e);return r||(r=new eb(this.e,t,i,this.f),ti.c.set(this.e,r)),r.getMemento()}case 0:{let r=ti.b.get(this.e);return r||(r=new eb(this.e,t,i,this.f),ti.b.set(this.e,r)),r.getMemento()}case-1:{let r=ti.a.get(this.e);return r||(r=new eb(this.e,t,i,this.f),ti.a.set(this.e,r)),r.getMemento()}}}onDidChangeValue(t,i){return this.f.onDidChangeValue(t,this.e,i)}saveMemento(){ti.c.get(this.e)?.save(),ti.b.get(this.e)?.save(),ti.a.get(this.e)?.save()}reloadMemento(t){let i;switch(t){case-1:i=ti.a.get(this.e);break;case 0:i=ti.b.get(this.e);break;case 1:i=ti.c.get(this.e);break}i?.reload()}static clear(t){switch(t){case 1:ti.c.clear();break;case 0:ti.b.clear();break;case-1:ti.a.clear();break}}},eb=class{constructor(e,t,i,r){this.b=e,this.c=t,this.d=i,this.e=r,this.a=this.f()}f(){try{return this.e.getObject(this.b,this.c,{})}catch(e){Ot(`[memento]: failed to parse contents: ${e} (id: ${this.b}, scope: ${this.c}, contents: ${this.e.get(this.b,this.c)})`)}return{}}getMemento(){return this.a}reload(){for(const e of Object.getOwnPropertyNames(this.a))delete this.a[e];Object.assign(this.a,this.f())}save(){cg(this.a)?this.e.remove(this.b,this.c):this.e.store(this.b,this.a,this.c,this.d)}},gU=H("chatTodoListService"),tb=class{constructor(t){this.a=new pU("chat-todo-list",t)}b(t){return this.a.getMemento(1,1)[t]||[]}c(t,i){const r=this.a.getMemento(1,1);r[t]=i,this.a.saveMemento()}getTodoList(t){return this.b(t)}setTodoList(t,i){this.c(t,i)}};tb=__decorate([__param(0,Uk)],tb);var _k=class extends te{constructor(t){super(),this.a=new tb(t)}getTodos(t){return this.a.getTodoList(t)}setTodos(t,i){this.a.setTodoList(t,i)}};_k=__decorate([__param(0,Uk)],_k);var Uq=new U("isMac",Ui,d(1834,null)),jq=new U("isLinux",ks,d(1835,null)),Hq=new U("isWindows",Kt,d(1836,null)),Bq=new U("isWeb",ko,d(1837,null)),_q=new U("isMacNative",Ui&&!ko,d(1838,null)),zq=new U("isIOS",gI,d(1839,null)),Wq=new U("isMobile",mI,d(1840,null)),Vq=new U("isDevelopment",!1,!0),qq=new U("productQualityType","",d(1841,null)),mU=new U("isSimulation",!1,d(1842,null)),vU="inputFocus",Gq=new U(vU,!1,d(1843,null)),wU="chat.todoListTool.enabled",bU="chat.todoListTool.writeOnly",yU="manage_todo_list";function zk(e){const t={todoList:{type:"array",description:e?"Complete array of all todo items. Must include ALL items - both existing and new.":"Complete array of all todo items (required for write operation, ignored for read). Must include ALL items - both existing and new.",items:{type:"object",properties:{id:{type:"number",description:"Unique identifier for the todo. Use sequential numbers starting from 1."},title:{type:"string",description:"Concise action-oriented todo label (3-7 words). Displayed in UI."},description:{type:"string",description:"Detailed context, requirements, or implementation notes. Include file paths, specific methods, or acceptance criteria."},status:{type:"string",enum:["not-started","in-progress","completed"],description:"not-started: Not begun | in-progress: Currently working (max 1) | completed: Fully finished with no blockers"}},required:["id","title","description","status"]}}},i=e?["todoList"]:[];return e||(t.operation={type:"string",enum:["write","read"],description:"write: Replace entire todo list with new content. read: Retrieve current todo list. ALWAYS provide complete list when writing - partial updates not supported."},i.unshift("operation")),{id:yU,toolReferenceName:"todos",when:Wt.or(Wt.equals(`config.${wU}`,!0),mU),canBeReferencedInPrompt:!0,icon:$t.fromId(ie.checklist.id),displayName:d(6153,null),userDescription:d(6154,null),modelDescription:`Manage a structured todo list to track progress and plan tasks throughout your coding session. Use this tool VERY frequently to ensure task visibility and proper planning.

When to use this tool:
- Complex multi-step work requiring planning and tracking
- When user provides multiple tasks or requests (numbered/comma-separated)
- After receiving new instructions that require multiple steps
- BEFORE starting work on any todo (mark as in-progress)
- IMMEDIATELY after completing each todo (mark completed individually)
- When breaking down larger tasks into smaller actionable steps
- To give users visibility into your progress and planning

When NOT to use:
- Single, trivial tasks that can be completed in one step
- Purely conversational/informational requests
- When just reading files or performing simple searches

CRITICAL workflow:
1. Plan tasks by writing todo list with specific, actionable items
2. Mark ONE todo as in-progress before starting work
3. Complete the work for that specific todo
4. Mark that todo as completed IMMEDIATELY
5. Move to next todo and repeat

Todo states:
- not-started: Todo not yet begun
- in-progress: Currently working (limit ONE at a time)
- completed: Finished successfully

IMPORTANT: Mark todos completed as soon as they are done. Do not batch completions.`,source:Rn.Internal,inputSchema:{type:"object",properties:t,required:i}}}var Qq=zk(!1),ib=class extends te{constructor(t,i,r,s){super(),this.a=t,this.b=i,this.c=r,this.f=s}async invoke(t,i,r,s){const n=t.parameters,a=t.context?.sessionId??n.chatSessionId??"default";this.c.debug(`ManageTodoListTool: Invoking with options ${JSON.stringify(n)}`);try{const c=this.a?"write":n.operation;return c?c==="read"?this.j(a):c==="write"?this.m(n,a):{content:[{kind:"text",value:"Error: Unknown operation"}]}:{content:[{kind:"text",value:"Error: operation parameter is required"}]}}catch(c){return{content:[{kind:"text",value:`Error: ${c instanceof Error?c.message:"Unknown error"}`}]}}}async prepareToolInvocation(t,i){const r=t.parameters,n=t.chatSessionId??r.chatSessionId??"default",o=this.b.getTodos(n);let a;switch(this.a?"write":r.operation){case"write":{r.todoList&&(a=this.g(o,r.todoList));break}case"read":{a=d(6155,null);break}default:break}const u=(r.todoList??o).map(h=>({id:h.id.toString(),title:h.title,description:h.description,status:h.status}));return{pastTenseMessage:new Mo(a??d(6156,null)),toolSpecificData:{kind:"todoList",sessionId:n,todoList:u}}}g(t,i){if(t.length===0)return i.length===1?d(6157,null):d(6158,null,i.length);const r=new Map(t.map(a=>[a.id,a])),s=i.filter(a=>{const c=r.get(a.id);return c&&c.status!=="in-progress"&&a.status==="in-progress"});if(s.length>0){const a=s[0],c=i.length,l=i.findIndex(u=>u.id===a.id)+1;return d(6159,null,l,c,a.title)}const n=i.filter(a=>{const c=r.get(a.id);return c&&c.status!=="completed"&&a.status==="completed"});if(n.length>0){const a=n[0],c=i.length,l=i.findIndex(u=>u.id===a.id)+1;return d(6160,null,l,c,a.title)}const o=i.filter(a=>!r.has(a.id));return o.length>0?o.length===1?d(6161,null):d(6162,null,o.length):d(6163,null)}h(t,i){return t.length===0?"No todo list found.":`# Todo List

${this.s(t)}`}j(t){const i=this.b.getTodos(t),r=this.h(i,t),s=this.r(i);return this.f.publicLog2("todoListToolInvoked",{operation:"read",notStartedCount:s.notStartedCount,inProgressCount:s.inProgressCount,completedCount:s.completedCount,chatSessionId:t}),{content:[{kind:"text",value:r}]}}m(t,i){if(!t.todoList)return{content:[{kind:"text",value:"Error: todoList is required for write operation"}]};const r=t.todoList.map(c=>({id:c.id,title:c.title,description:c.description,status:c.status})),s=this.b.getTodos(i),n=this.t(s,r);this.b.setTodos(i,r);const o=this.r(r),a=[];return r.length<3?a.push("Warning: Small todo list (<3 items). This task might not need a todo list."):r.length>10&&a.push("Warning: Large todo list (>10 items). Consider keeping the list focused and actionable."),n>3&&a.push("Warning: Did you mean to update so many todos at the same time? Consider working on them one by one."),this.f.publicLog2("todoListToolInvoked",{operation:"write",notStartedCount:o.notStartedCount,inProgressCount:o.inProgressCount,completedCount:o.completedCount,chatSessionId:i}),{content:[{kind:"text",value:`Successfully wrote todo list${a.length?`

`+a.join(`
`):""}`}]}}r(t){const i=t.filter(n=>n.status==="not-started").length,r=t.filter(n=>n.status==="in-progress").length,s=t.filter(n=>n.status==="completed").length;return{notStartedCount:i,inProgressCount:r,completedCount:s}}s(t){return t.length===0?"":t.map(i=>{let r;switch(i.status){case"completed":r="[x]";break;case"in-progress":r="[-]";break;case"not-started":default:r="[ ]";break}const s=[`- ${r} ${i.title}`];return i.description&&i.description.trim()&&s.push(`  - ${i.description.trim()}`),s.join(`
`)}).join(`
`)}t(t,i){let r=0;const s=Math.min(t.length,i.length);for(let c=0;c<s;c++){const l=t[c],u=i[c];(l.title!==u.title||(l.description??"")!==(u.description??"")||l.status!==u.status)&&r++}const n=Math.max(0,i.length-t.length),o=Math.max(0,t.length-i.length);return n+o+r}};ib=__decorate([__param(1,gU),__param(2,_e),__param(3,xT)],ib);var Wk=class extends te{static{this.ID="chat.builtinTools"}constructor(t,i,r){super(),this.a=r;const s=i.createInstance(Kw);this.B(t.registerTool(nU,s));const n=this.a.getValue(bU)===!0,o=zk(n),a=i.createInstance(ib,n);this.B(t.registerTool(o,a));const c=i.createInstance(cU);this.B(t.registerTool(aU,c))}};Wk=__decorate([__param(0,PA),__param(1,wc),__param(2,Uc)],Wk);var SU="vscode_fetchWebPage_internal",Vk=H("commandService"),rb=new class{constructor(){this.a=new Map,this.b=new D,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return k3(l,o),a(c,...l)}}const{id:i}=e;let r=this.a.get(i);r||(r=new xs,this.a.set(i,r));const s=r.unshift(e),n=ce(()=>{s(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),lg(n)}registerCommandAlias(e,t){return rb.registerCommand(e,(i,...r)=>i.get(Vk).executeCommand(t,...r))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return fi.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};rb.registerCommand("noop",()=>{});var qk;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(qk||(qk={}));function Gk(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new xp([Sp(i,t),Sp(r,t)]):new xp([Sp(i,t)])}else{const i=[];for(let r=0;r<e.length;r++)i.push(Sp(e[r],t));return new xp(i)}}function Sp(e,t){const i=!!(e&2048),r=!!(e&256),s=t===2?r:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:r,c=e&255;return new xU(s,n,o,a,c)}var xU=class D${constructor(t,i,r,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=r,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof D$&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",r=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${t}${i}${r}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new xp([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},xp=class{constructor(e){if(e.length===0)throw Ce("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},Qk;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(Qk||(Qk={}));var EU=class P${constructor(){this.c=new xs,this.d=[],this.e=null}static f(t){if(hc===1){if(t&&t.win)return t.win}else if(hc===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=P$.f(t),r=new he;if(i&&i.primary){const s=Gk(i.primary,hc);s&&r.add(this.g(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const o=i.secondary[s],a=Gk(o,hc);a&&r.add(this.g(a,t.id,t.args,t.weight,-s-1,t.when))}return r}setExtensionKeybindings(t){const i=[];let r=0;for(const s of t)s.keybinding&&(i[r++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return ug(this.registerKeybindingRule(t),rb.registerCommand(t))}g(t,i,r,s,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:r,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,ce(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort($U)),this.e.slice(0)}},kU=new EU,CU={EditorModes:"platform.keybindingsRegistry"};Vt.add(CU.EditorModes,kU);function $U(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var Ep;function IU(e){return e.command!==void 0}var du=class I{static{this.a=new Map}static{this.CommandPalette=new I("CommandPalette")}static{this.DebugBreakpointsContext=new I("DebugBreakpointsContext")}static{this.DebugCallStackContext=new I("DebugCallStackContext")}static{this.DebugConsoleContext=new I("DebugConsoleContext")}static{this.DebugVariablesContext=new I("DebugVariablesContext")}static{this.NotebookVariablesContext=new I("NotebookVariablesContext")}static{this.DebugHoverContext=new I("DebugHoverContext")}static{this.DebugWatchContext=new I("DebugWatchContext")}static{this.DebugToolBar=new I("DebugToolBar")}static{this.DebugToolBarStop=new I("DebugToolBarStop")}static{this.DebugDisassemblyContext=new I("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new I("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new I("DebugCreateConfiguration")}static{this.EditorContext=new I("EditorContext")}static{this.SimpleEditorContext=new I("SimpleEditorContext")}static{this.EditorContent=new I("EditorContent")}static{this.EditorLineNumberContext=new I("EditorLineNumberContext")}static{this.EditorContextCopy=new I("EditorContextCopy")}static{this.EditorContextPeek=new I("EditorContextPeek")}static{this.EditorContextShare=new I("EditorContextShare")}static{this.EditorTitle=new I("EditorTitle")}static{this.CompactWindowEditorTitle=new I("CompactWindowEditorTitle")}static{this.EditorTitleRun=new I("EditorTitleRun")}static{this.EditorTitleContext=new I("EditorTitleContext")}static{this.EditorTitleContextShare=new I("EditorTitleContextShare")}static{this.EmptyEditorGroup=new I("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new I("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new I("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new I("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new I("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new I("EditorActionsPositionSubmenu")}static{this.EditorSplitMoveSubmenu=new I("EditorSplitMoveSubmenu")}static{this.ExplorerContext=new I("ExplorerContext")}static{this.ExplorerContextShare=new I("ExplorerContextShare")}static{this.ExtensionContext=new I("ExtensionContext")}static{this.ExtensionEditorContextMenu=new I("ExtensionEditorContextMenu")}static{this.GlobalActivity=new I("GlobalActivity")}static{this.CommandCenter=new I("CommandCenter")}static{this.CommandCenterCenter=new I("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new I("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new I("LayoutControlMenu")}static{this.MenubarMainMenu=new I("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new I("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new I("MenubarDebugMenu")}static{this.MenubarEditMenu=new I("MenubarEditMenu")}static{this.MenubarCopy=new I("MenubarCopy")}static{this.MenubarFileMenu=new I("MenubarFileMenu")}static{this.MenubarGoMenu=new I("MenubarGoMenu")}static{this.MenubarHelpMenu=new I("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new I("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new I("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new I("PanelAlignmentMenu")}static{this.PanelPositionMenu=new I("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new I("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new I("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new I("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new I("MenubarSelectionMenu")}static{this.MenubarShare=new I("MenubarShare")}static{this.MenubarSwitchEditorMenu=new I("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new I("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new I("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new I("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new I("MenubarViewMenu")}static{this.MenubarHomeMenu=new I("MenubarHomeMenu")}static{this.OpenEditorsContext=new I("OpenEditorsContext")}static{this.OpenEditorsContextShare=new I("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new I("ProblemsPanelContext")}static{this.SCMInputBox=new I("SCMInputBox")}static{this.SCMChangeContext=new I("SCMChangeContext")}static{this.SCMResourceContext=new I("SCMResourceContext")}static{this.SCMResourceContextShare=new I("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new I("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new I("SCMResourceGroupContext")}static{this.SCMSourceControl=new I("SCMSourceControl")}static{this.SCMSourceControlInline=new I("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new I("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new I("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new I("SCMHistoryItemContext")}static{this.SCMHistoryItemChangeContext=new I("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemHover=new I("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new I("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new I("SCMQuickDiffDecorations")}static{this.SCMTitle=new I("SCMTitle")}static{this.SearchContext=new I("SearchContext")}static{this.SearchActionMenu=new I("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new I("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new I("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new I("StickyScrollContext")}static{this.TestItem=new I("TestItem")}static{this.TestItemGutter=new I("TestItemGutter")}static{this.TestProfilesContext=new I("TestProfilesContext")}static{this.TestMessageContext=new I("TestMessageContext")}static{this.TestMessageContent=new I("TestMessageContent")}static{this.TestPeekElement=new I("TestPeekElement")}static{this.TestPeekTitle=new I("TestPeekTitle")}static{this.TestCallStack=new I("TestCallStack")}static{this.TestCoverageFilterItem=new I("TestCoverageFilterItem")}static{this.TouchBarContext=new I("TouchBarContext")}static{this.TitleBar=new I("TitleBar")}static{this.TitleBarContext=new I("TitleBarContext")}static{this.TitleBarTitleContext=new I("TitleBarTitleContext")}static{this.TunnelContext=new I("TunnelContext")}static{this.TunnelPrivacy=new I("TunnelPrivacy")}static{this.TunnelProtocol=new I("TunnelProtocol")}static{this.TunnelPortInline=new I("TunnelInline")}static{this.TunnelTitle=new I("TunnelTitle")}static{this.TunnelLocalAddressInline=new I("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new I("TunnelOriginInline")}static{this.ViewItemContext=new I("ViewItemContext")}static{this.ViewContainerTitle=new I("ViewContainerTitle")}static{this.ViewContainerTitleContext=new I("ViewContainerTitleContext")}static{this.ViewTitle=new I("ViewTitle")}static{this.ViewTitleContext=new I("ViewTitleContext")}static{this.CommentEditorActions=new I("CommentEditorActions")}static{this.CommentThreadTitle=new I("CommentThreadTitle")}static{this.CommentThreadActions=new I("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new I("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new I("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new I("CommentThreadCommentContext")}static{this.CommentTitle=new I("CommentTitle")}static{this.CommentActions=new I("CommentActions")}static{this.CommentsViewThreadActions=new I("CommentsViewThreadActions")}static{this.InteractiveToolbar=new I("InteractiveToolbar")}static{this.InteractiveCellTitle=new I("InteractiveCellTitle")}static{this.InteractiveCellDelete=new I("InteractiveCellDelete")}static{this.InteractiveCellExecute=new I("InteractiveCellExecute")}static{this.InteractiveInputExecute=new I("InteractiveInputExecute")}static{this.InteractiveInputConfig=new I("InteractiveInputConfig")}static{this.ReplInputExecute=new I("ReplInputExecute")}static{this.IssueReporter=new I("IssueReporter")}static{this.NotebookToolbar=new I("NotebookToolbar")}static{this.NotebookToolbarContext=new I("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new I("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new I("NotebookCellTitle")}static{this.NotebookCellDelete=new I("NotebookCellDelete")}static{this.NotebookCellInsert=new I("NotebookCellInsert")}static{this.NotebookCellBetween=new I("NotebookCellBetween")}static{this.NotebookCellListTop=new I("NotebookCellTop")}static{this.NotebookCellExecute=new I("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new I("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new I("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new I("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new I("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new I("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new I("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new I("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new I("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new I("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new I("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new I("NotebookKernelSource")}static{this.BulkEditTitle=new I("BulkEditTitle")}static{this.BulkEditContext=new I("BulkEditContext")}static{this.TimelineItemContext=new I("TimelineItemContext")}static{this.TimelineTitle=new I("TimelineTitle")}static{this.TimelineTitleContext=new I("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new I("TimelineFilterSubMenu")}static{this.AccountsContext=new I("AccountsContext")}static{this.SidebarTitle=new I("SidebarTitle")}static{this.PanelTitle=new I("PanelTitle")}static{this.AuxiliaryBarTitle=new I("AuxiliaryBarTitle")}static{this.TerminalInstanceContext=new I("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new I("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new I("TerminalNewDropdownContext")}static{this.TerminalTabContext=new I("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new I("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new I("TerminalStickyScrollContext")}static{this.WebviewContext=new I("WebviewContext")}static{this.InlineCompletionsActions=new I("InlineCompletionsActions")}static{this.InlineEditsActions=new I("InlineEditsActions")}static{this.NewFile=new I("NewFile")}static{this.MergeInput1Toolbar=new I("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new I("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new I("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new I("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new I("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new I("InlineEditToolbar")}static{this.ChatContext=new I("ChatContext")}static{this.ChatCodeBlock=new I("ChatCodeblock")}static{this.ChatCompareBlock=new I("ChatCompareBlock")}static{this.ChatMessageTitle=new I("ChatMessageTitle")}static{this.ChatMessageFooter=new I("ChatMessageFooter")}static{this.ChatExecute=new I("ChatExecute")}static{this.ChatExecuteSecondary=new I("ChatExecuteSecondary")}static{this.ChatInput=new I("ChatInput")}static{this.ChatInputSide=new I("ChatInputSide")}static{this.ChatModePicker=new I("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new I("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new I("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new I("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new I("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new I("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new I("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new I("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new I("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new I("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new I("ChatInlineSymbolAnchorContext")}static{this.ChatMessageCheckpoint=new I("ChatMessageCheckpoint")}static{this.ChatMessageRestoreCheckpoint=new I("ChatMessageRestoreCheckpoint")}static{this.ChatEditingCodeBlockContext=new I("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new I("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new I("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new I("ChatToolOutputResourceToolbar")}static{this.ChatTextEditorMenu=new I("ChatTextEditorMenu")}static{this.ChatToolOutputResourceContext=new I("ChatToolOutputResourceContext")}static{this.ChatMultiDiffContext=new I("ChatMultiDiffContext")}static{this.ChatSessionsMenu=new I("ChatSessionsMenu")}static{this.ChatConfirmationMenu=new I("ChatConfirmationMenu")}static{this.AccessibleView=new I("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new I("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new I("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new I("DiffEditorSelectionToolbar")}static for(t){return I.a.get(t)??new I(t)}constructor(t){if(I.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);I.a.set(t,this),this.id=t}},Yq=H("menuService"),fu=class ry{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new ry(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const r of t)r instanceof ry&&i.add(r.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},Xq=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new tI({merge:fu.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(fu.for(du.CommandPalette)),lg(ce(()=>{this.a.delete(e.id)&&this.c.fire(fu.for(du.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new xs,this.b.set(e,i));const r=i.push(t);return this.c.fire(fu.for(e)),lg(ce(()=>{r(),this.c.fire(fu.for(e))}))}appendMenuItems(e){const t=new he;for(const{id:i,item:r}of e)t.add(this.appendMenuItem(i,r));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===du.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)IU(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,r)=>{t.has(r)||e.push({command:i})})}},Jk=Ep=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,r,s,n,o,a){this.hideActions=s,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=Ep.label(t,r),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&$t.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=$t.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new Ep(i,void 0,r,s,void 0,o,a):void 0,this.a=r,this.class=c&&$t.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};Jk=Ep=__decorate([__param(5,pP),__param(6,Vk)],Jk);var eG=Hu(8086,"Extensions"),Zk;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(Zk||(Zk={}));var Yk;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(Yk||(Yk={}));var Xk=H("extensionsWorkbenchService"),Kk;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})(Kk||(Kk={}));var eC=class extends te{constructor(t,i){super(),this.a=t,this.B(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?AT(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};eC=__decorate([__param(1,Xk)],eC);var iG=new U("defaultExtensionViews",!0),rG=new U("hasOutdatedExtensions",!1),sG=new U("hasGallery",!1),nG=new U("extensionsGalleryStatus","unavailable"),oG=new U("extensionResultListFocused ",!0),aG=new U("searchMcpServers",!1),cG=new du("extensionsSearchActionsMenu"),lG=new du("extensionsFilterSubMenu"),tC="vscode_searchExtensions_internal",uG={id:tC,toolReferenceName:"extensions",canBeReferencedInPrompt:!0,icon:$t.fromId(ie.extensions.id),displayName:d(8107,null),modelDescription:d(8108,null),userDescription:d(8109,null),source:Rn.Internal,inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:r5},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},iC=class{constructor(t){this.a=t}async invoke(t,i,r,s){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:d(8110,null)}]};const o=new Map,a=u=>{for(const h of u)h.deprecationInfo||h.isMalicious||o.set(h.identifier.id.toLowerCase(),{id:h.identifier.id,name:h.displayName,description:h.description,installed:h.state===1,installCount:h.installCount??0,rating:h.rating??0,categories:h.categories??[],tags:h.gallery?.tags??[]})},c=async u=>{const h=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},s);h.firstPage.length&&a(h.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(h=>({id:h})),s);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let h=n.category?`category:"${n.category}"`:"";h=u?`${h} ${u}`.trim():h,await c(h)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{type:"embed",isText:!0,value:JSON.stringify(l.map(u=>u.id))}]}}}};iC=__decorate([__param(0,Xk)],iC);var rC=class{constructor(e){this.b=new At(()=>{const t=this;return Object.freeze({get name(){return t.a.id},get description(){return t.a.modelDescription},get inputSchema(){return t.a.inputSchema},get tags(){return t.a.tags??[]},get source(){}})}),this.c=new At(()=>{const t=this,i=Xv.to(t.a.source);return Object.freeze({get name(){return t.a.id},get description(){return t.a.modelDescription},get inputSchema(){return t.a.inputSchema},get tags(){return t.a.tags??[]},get source(){return i}})}),this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){return this.b.value}get apiObjectWithChatParticipantAdditions(){return this.c.value}},DU=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(V.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const r of i)this.d.set(r.id,new rC(Jt(r)))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i,r){const s=ni();i.tokenizationOptions&&this.c.set(s,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!DA(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===Xw||t===Mk)&&!Ge(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:s,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:Ge(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:Ge(e,"chatParticipantPrivate")?i.chatInteractionId:void 0},r),o=n instanceof ei?n.value:n;return Df.to(Jt(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const r=this.d.get(i.id);r?r.update(i):this.d.set(i.id,new rC(Jt(i)))}for(const i of t)this.d.delete(i)}getTools(e){const t=Ge(e,"chatParticipantPrivate");return Array.from(this.d.values()).map(i=>t?i.apiObjectWithChatParticipantAdditions:i.apiObject).filter(i=>{switch(i.name){case Xw:case Mk:case SU:case tC:return Ge(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,toolInvocationToken:e.context};Ge(i.extension,"chatParticipantPrivate")&&(r.chatRequestId=e.chatRequestId,r.chatInteractionId=e.chatInteractionId,r.chatSessionId=e.context?.sessionId),Ge(i.extension,"chatParticipantAdditions")&&e.modelId&&(r.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=st.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let s;Ge(i.extension,"toolProgress")&&(s={report:o=>{this.b.$acceptToolProgress(e.callId,{message:de.fromStrict(o.message),increment:o.increment,total:100})}});const n=await CD(Promise.resolve(i.tool.invoke(r,t,s)),t);if(!n)throw new ki;return Df.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const s={input:t.parameters,chatRequestId:t.chatRequestId,chatSessionId:t.chatSessionId,chatInteractionId:t.chatInteractionId};if(r.tool.prepareInvocation){const n=await r.tool.prepareInvocation(s,i);return n?((n.pastTenseMessage||n.presentation)&&T(r.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:de.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:de.from(n.confirmationMessages.message)}:void 0,invocationMessage:de.fromStrict(n.invocationMessage),pastTenseMessage:de.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),ce(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},PU=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(V.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=ze.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:_s.Other,range:e.getWordRangeAtPosition(t)??new ye(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:M.to(s.range),type:pv.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Jo.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new he,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=ND(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:ma.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Jo.Error?bt.Error:a.severity===Jo.Warning?bt.Warning:bt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(p){a.name=p,u()},get selector(){return a.selector},set selector(p){a.selector=p,u()},get text(){return a.text},set text(p){a.text=p,u()},set text2(p){T(e,"languageStatusText"),a.text=p,u()},get text2(){return T(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(p){a.detail=p,u()},get severity(){return a.severity},set severity(p){a.severity=p,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(p){a.accessibilityInformation=p,u()},get command(){return a.command},set command(p){a.command=p,u()},get busy(){return a.busy},set busy(p){a.busy=p,u()}};return u(),h}};function AU(e){return e&&e.title}var sb=class{constructor(t,i){this.b=i,this.a=t.getProxy(V.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||AU(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&T(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:p,isCloseAffordance:f}=h;c.push({title:p,isCloseAffordance:!!f,handle:u}),f&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};sb=__decorate([__param(1,_e)],sb);var nb=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new Tr(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},ob=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=y.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(Vs.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(Ea.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Il.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(Vs.to)}setOutputItems(e,t,i){const r=i.map(Ca.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>m6(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=KA(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(Ea.to(e))}setMime(e){}},TU=class A${static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=A$.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===q.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===ar.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===ar.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===ar.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===ar.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===ar.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===ar.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===ar.ChangeCellMime?this.w(a.index,a.mime):a.kind===ar.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===ar.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(p=>{const f=new ob(this,this.l,p);return i||n.push(ob.asModelAddData(p)),f}),u=new nb(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const p of h)o.push(p.uri),u.deletedItems.push(p.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new nb(t,i,n.map(a=>a.apiCell),[]),new nb(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},ab=class T${static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(Tr.isNotebookRange))throw Ce("selections");t.e=i.length===0?[new Tr(0,0)]:i,t.h(t.e)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,Ur.from(i),r??$d.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},T$.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t}h(t){this.c.$trySetSelections(this.id,t.map(Ur.from))}_acceptViewColumn(t){this.f=t}},cb=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==re)return lb(this.right);let e=this;for(;e.parent!==re&&e.parent.left!==e;)e=e.parent;return e.parent===re?re:e.parent}prev(){if(this.left!==re)return nC(this.left);let e=this;for(;e.parent!==re&&e.parent.right!==e;)e=e.parent;return e.parent===re?re:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},sC;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(sC||(sC={}));var re=new cb(null,0);re.parent=re,re.left=re,re.right=re,re.color=0;function lb(e){for(;e.left!==re;)e=e.left;return e}function nC(e){for(;e.right!==re;)e=e.right;return e}function ub(e){return e===re?0:e.size_left+e.piece.length+ub(e.right)}function hb(e){return e===re?0:e.lf_left+e.piece.lineFeedCnt+hb(e.right)}function db(){re.parent=re}function pu(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==re&&(i.left.parent=t),i.parent=t.parent,t.parent===re?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function gu(e,t){const i=t.left;t.left=i.right,i.right!==re&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===re?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function kp(e,t){let i,r;if(t.left===re?(r=t,i=r.right):t.right===re?(r=t,i=r.left):(r=lb(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),db(),e.root.parent=re;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,mu(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,mu(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==re&&(r.left.parent=r),r.right!==re&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,mu(e,r)),t.detach(),i.parent.left===i){const o=ub(i),a=hb(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,fs(e,i.parent,c,l)}}if(mu(e,i.parent),s){db();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,pu(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,gu(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,pu(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,gu(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,pu(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,gu(e,i.parent),i=e.root));i.color=0,db()}function oC(e,t){for(mu(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,pu(e,t)),t.parent.color=0,t.parent.parent.color=1,gu(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,gu(e,t)),t.parent.color=0,t.parent.parent.color=1,pu(e,t.parent.parent))}e.root.color=0}function fs(e,t,i,r){for(;t!==e.root&&t!==re;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function mu(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=ub(t.left)-t.size_left,r=hb(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var ps=65535;function aC(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var RU=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function gs(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?aC(i):i}function LU(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new RU(aC(e),r,s,n,o);return e.length=0,a}var Si=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},uo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},NU=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==re&&e.iterate(e.root,i=>(i!==re&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},MU=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},FU=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new uo("",[0])],this.g={line:0,column:0},this.root=re,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=gs(e[s].buffer));const o=new Si(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new MU(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=ps,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new uo(u,gs(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new uo(a,gs(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new NU(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===re)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==re;)if(r.left!==re&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==re;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new Hi(i+1,o+1)}return new Hi(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===re){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new Hi(i+1,n+1)}else t=t.right;return new Hi(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==re;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===re)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(r&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let p=l+1;p<u;p++)i=this.f?a.substring(c[p],c[p+1]-this.e):a.substring(c[p],c[p+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===re)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],p=this.u(e.piece.bufferIndex,e.piece.start),f=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const S={line:0,column:0};let E,C;t._wordSeparators?(E=h.buffer.substring(f,m),C=P=>P+f,t.reset(0)):(E=h.buffer,C=P=>P,t.reset(f));do if(w=t.next(E),w){if(C(w.index)>=m)return l;this.s(e,C(w.index)-p,S);const P=this.t(e.piece.bufferIndex,s,S),Z=S.line===s.line?S.column-s.column+r:S.column+1,W=Z+w[0].length;if(u[l++]=yx(new Je(i+P,Z,i+P,W),w,a),C(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new eN(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let h=e.startLineNumber,p=a.node;for(;p!==c.node;){const m=this.t(p.piece.bufferIndex,l,p.piece.end);if(m>=1){const S=this.a[p.piece.bufferIndex].lineStarts,E=this.u(p.piece.bufferIndex,p.piece.start),C=S[l.line+m],P=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(p,o,h,P,l,this.s(p,C-E),t,i,r,n,s),n>=r)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const S=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,S,e.endLineNumber,w,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,i,r),n>=r)return s;h++,a=this.H(h,1),p=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,i,r),s}const f=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,f,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,p=h.length,f=i.length;let m=-p;for(;(m=i.indexOf(h,m+p))!==-1;)if((!l||Sx(l,i,f,m,p))&&(o[n++]=new J0(new Je(r,m+1+s,r,m+1+p+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=yx(new Je(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==re){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<ps){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new Si(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const m={line:u.start.line+1,column:0};u=new Si(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const m=this.s(r,s-1);this.C(r,m),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let p=r;for(let f=0;f<h.length;f++)p=this.S(p,h[f]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===re)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const h=this.s(s,i.remainder),p=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const f=s.next();kp(this,s),this.N(f),this.y();return}this.D(s,p),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,p),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==re&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new Si(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,fs(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,p=0;for(;c<=l&&(u=c+(l-c)/2|0,p=n[u],u!==l);)if(h=n[u+1],a<p)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-p,null):{line:u,column:a-p}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)kp(this,e[t])}w(e){if(e.length>ps){const l=[];for(;e.length>ps;){const h=e.charCodeAt(ps-1);let p;h===13||h>=55296&&h<=56319?(p=e.substring(0,ps-1),e=e.substring(ps-1)):(p=e.substring(0,ps),e=e.substring(ps));const f=gs(p);l.push(new Si(this.a.length,{line:0,column:0},{line:f.length-1,column:p.length-f[f.length-1]},f.length-1,p.length)),this.a.push(new uo(p,f))}const u=gs(e);return l.push(new Si(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new uo(e,u)),l}let t=this.a[0].buffer.length;const i=gs(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new Si(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==re;)if(i.left!==re&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==re;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==re;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new Si(i.bufferIndex,i.start,n,a,u),fs(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new Si(i.bufferIndex,n,i.end,o,u),fs(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new Si(r.bufferIndex,r.start,c,l,u),fs(this,e,u-o,l-a);const h=new Si(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),p=this.S(e,h);this.N(p)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=gs(t,!1);for(let p=0;p<s.length;p++)s[p]+=r;if(i){const p=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-p}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new Si(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,fs(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==re;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==re;)if(i.left!==re&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==re;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===re||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===re||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new Si(e.piece.bufferIndex,e.piece.start,s,o,n),fs(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new Si(t.piece.bufferIndex,a,t.piece.end,l,c),fs(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)kp(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)kp(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new Si(r.bufferIndex,s,r.end,o,n),fs(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===re)return t(re);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===re)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new cb(t,1);if(i.left=re,i.right=re,i.parent=re,i.size_left=0,i.lf_left=0,this.root===re)this.root=i,i.color=0;else if(e.right===re)e.right=i,i.parent=e;else{const s=lb(e.right);s.left=i,i.parent=s}return oC(this,i),i}T(e,t){const i=new cb(t,1);if(i.left=re,i.right=re,i.parent=re,i.size_left=0,i.lf_left=0,this.root===re)this.root=i,i.color=0;else if(e.left===re)e.left=i,i.parent=e;else{const r=nC(e.left);r.right=i,i.parent=r}return oC(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},cC;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(cC||(cC={}));function fb(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var pb;function OU(){return pb||(pb=new TextDecoder("UTF-16LE")),pb}function UU(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?jU(e,t,i):OU().decode(r)}function jU(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=N3(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function Cp(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var HU=class zr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Cp(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Cp(this.oldText)}")`:`(replace@${this.oldPosition} "${Cp(this.oldText)}" with "${Cp(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;Mu(t,s,r),r+=4;for(let n=0;n<s;n++)M3(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=Nu(t,i);return i+=4,UU(t,i,r)}writeSize(){return 8+zr.a(this.oldText)+zr.a(this.newText)}write(t,i){return Mu(t,this.oldPosition,i),i+=4,Mu(t,this.newPosition,i),i+=4,i=zr.c(t,this.oldText,i),i=zr.c(t,this.newText,i),i}static read(t,i,r){const s=Nu(t,i);i+=4;const n=Nu(t,i);i+=4;const o=zr.d(t,i);i+=zr.a(o);const a=zr.d(t,i);return i+=zr.a(a),r.push(new zr(s,o,n,a)),i}},BU=class $u extends te{get onDidChangeContent(){return this.m.event}constructor(t,i,r,s,n,o,a){super(),this.m=this.B(new D),this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new FU(t,r,a)}equals(t){return!(t instanceof $u)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new Je(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)Yu(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Ig(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=WI(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const S=t[w];a&&S._isTracked&&(a=!1);const E=S.range;if(S.text){let oe=!0;o||(oe=!YI(S.text),o=oe),!s&&oe&&(s=C4(S.text)),!n&&oe&&(n=$4(S.text))}let C="",P=0,Z=0,W=0;if(S.text){let oe;[P,Z,W,oe]=fb(S.text);const O=this.getEOL();oe===0||oe===(O===`\r
`?2:1)?C=S.text:C=S.text.replace(/\r\n|\r|\n/g,O)}c[w]={sortIndex:w,identifier:S.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:C,eolCount:P,firstLineLength:Z,lastLineLength:W,forceMoveMarkers:!!S.forceMoveMarkers,isAutoWhitespaceEdit:S.isAutoWhitespaceEdit||!1}}c.sort($u.u);let l=!1;for(let w=0,S=c.length-1;w<S;w++){const E=c[w].range.getEndPosition(),C=c[w+1].range.getStartPosition();if(C.isBeforeOrEqual(E)){if(C.isBefore(E))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?$u._getInverseEditRanges(c):[],h=[];if(i)for(let w=0;w<c.length;w++){const S=c[w],E=u[w];if(S.isAutoWhitespaceEdit&&S.range.isEmpty())for(let C=E.startLineNumber;C<=E.endLineNumber;C++){let P="";C===E.startLineNumber&&(P=this.getLineContent(S.range.startLineNumber),Ig(P)!==-1)||h.push({lineNumber:C,oldContent:P})}}let p=null;if(r){let w=0;p=[];for(let S=0;S<c.length;S++){const E=c[S],C=u[S],P=this.getValueInRange(E.range),Z=E.rangeOffset+w;w+=E.text.length-P.length,p[S]={sortIndex:E.sortIndex,identifier:E.identifier,range:C,text:P,textChange:new HU(E.rangeOffset,P,Z,E.text)}}l||p.sort((S,E)=>S.sortIndex-E.sortIndex)}this.g=s,this.h=n,this.j=o;const f=this.t(c);let m=null;if(i&&h.length>0){h.sort((w,S)=>S.lineNumber-w.lineNumber),m=[];for(let w=0,S=h.length;w<S;w++){const E=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===E)continue;const C=h[w].oldContent,P=this.getLineContent(E);P.length===0||P===C||Ig(P)!==-1||m.push(E)}}return this.m.fire(),new YL(p,f,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new Je(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let f=0,m=t.length;f<m;f++){const w=t[f],S=w.range;i=i||w.forceMoveMarkers,c.push(this.getValueInRange(new Je(o,a,S.startLineNumber,S.startColumn))),w.text.length>0&&c.push(w.text),o=S.endLineNumber,a=S.endColumn}const l=c.join(""),[u,h,p]=fb(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:p,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort($u.w);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Je(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=fb(i);let c;if(i.length>0){const l=n+1;l===1?c=new Je(r,s,r,s+o):c=new Je(r,s,r+l-1,a+1)}else c=new Je(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const p=c.eolCount+1;p===1?h=new Je(l,u,l,u+c.firstLineLength):h=new Je(l,u,l+p-1,c.lastLineLength+1)}else h=new Je(l,u,l,u);r=h.endLineNumber,s=h.endColumn,i.push(h),n=c}return i}static u(t,i){const r=Je.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=Je.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},_U=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=gs(o);i[s]=new uo(o,a)}const r=new BU(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},lC=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&rD(e)&&(this.b=iD,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=LU(this.e,e);this.a.push(new uo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=C4(e)),this.k||(this.k=$4(e)))}finish(e=!0){return this.o(),new _U(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=gs(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},zU=class extends te{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new Je(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new lC;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new lC;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.B(s),r})),this.a}findInInputs(e){const i=new wx(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new wx(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function uC(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new xR(a.join(`
`)+`
`,o.map(u=>new Je(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var fG=Object.freeze({id:"application",order:100,title:d(4311,null),type:"object"}),WU=Object.freeze({id:"workbench",order:7,title:d(4312,null),type:"object"}),VU=Object.freeze({id:"security",scope:1,title:d(4313,null),type:"object",order:7}),pG=Object.freeze({id:"problems",title:d(4314,null),type:"object",order:101}),qU=Object.freeze({id:"window",order:8,title:d(4315,null),type:"object"}),GU={ConfigurationMigration:"base.contributions.configuration.migration"},QU=class{constructor(){this.migrations=[],this.a=new D,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},$p=new QU;Vt.add(GU.ConfigurationMigration,$p);var hC=class extends te{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,$p.migrations)})),this.c($p.migrations),this.B($p.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const p of h??[])c.push([p,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>mi(h,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};hC=__decorate([__param(0,Uc),__param(1,rm)],hC);var dC=class extends te{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new Zr,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!Kt&&(await this.b.getEnvironment())?.os!==1)return;Vt.as(qo.Configuration).registerConfiguration({...VU,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4316,null)},default:[],markdownDescription:d(4317,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4318,null),scope:3}}})}};dC=__decorate([__param(0,kx)],dC);var vu="window.newWindowProfile",fC=class extends te{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(vu)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=Vt.as(qo.Configuration),i={...qU,properties:{[vu]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),d(4319,null)],description:d(4320,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(vu);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(vu);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(vu,i?.name)}};fC=__decorate([__param(0,uU),__param(1,Uc)],fC);var wG=H("editorResolverService"),JU=Vt.as(qo.Configuration),ZU={...WU,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(14658,null),additionalProperties:{type:"string"}}}};JU.registerConfiguration(ZU);var gb;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(gb||(gb={}));var pC;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(pC||(pC={}));function YU(e,t){if(new Set([q.extension,q.webviewPanel,q.vscodeWorkspaceTrust,q.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Oe.sep)>=0?`${t.scheme}:${t.path}`:Jr(t);return Mc(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var XU=class Iu{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Bt,this.h=new Map,this.j=new D,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new D,this.onDidOpenNotebookDocument=this.m.event,this.n=new D,this.onDidCloseNotebookDocument=this.n.event,this.o=new D,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new vr("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(V.MainThreadNotebook),this.c=t.getProxy(V.MainThreadNotebookDocuments),this.d=t.getProxy(V.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,p=this.g.get(l)?.getCell(u);if(p)return p.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),Iu.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>hf.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?gb.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=Iu.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?Iu.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Ie(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Ws.from(t.content)});return y.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(r));return bo(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:It.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(Ur.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=y.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new he,h=this.p.add([u]),f=(Array.isArray(l)?l:[l]).map(m=>Av.from(m,this.i,u));return{cacheId:h,items:f}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(Zu(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,Rv.from(s),Iu.w(t,n)),ce(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new ei(Ws.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Ws.to(i.value),r);return ne.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=y.revive(i),a=this.y.get(t);this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`);try{if(!a)throw new mb("NO serializer found");const c=this.g.get(o);if(!c)throw new mb("Document NOT found");if(c.versionId!==r)throw new mb("Document version mismatch, expected: "+r+", actual: "+c.versionId);if(!this.s.value.isWritableFileSystem(o.scheme))throw new vh(d(2967,null,this.A(o)),6);const l={metadata:R5(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Qh(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=R5(m.metadata,S=>!(a.options?.transientCellMetadata??{})[S]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new ki;const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new ki;this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),p=await this.s.value.stat(o),f={name:h.basename(o),isFile:(p.type&Pn.File)!==0,isDirectory:(p.type&Pn.Directory)!==0,isSymbolicLink:(p.type&Pn.SymbolicLink)!==0,mtime:p.mtime,ctime:p.ctime,size:p.size,readonly:!!((p.permissions??0)&Uo.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((p.permissions??0)&Uo.Locked),etag:G6({mtime:p.mtime,size:p.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),f}catch(c){if(c instanceof vh)return{...c,message:c.message};throw c}}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new vy;await(async(p,f,m)=>{await Promise.all(p.map(async w=>await Promise.all(w.filenamePatterns.map(S=>{const E={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:S};return this.t.doInternalFileSearchWithCustomCallback(E,f,C=>{C.forEach(P=>{a.has(P)||s.some(W=>w.isFromSettings&&!W.isFromSettings?!1:W.filenamePatterns.some(oe=>YU(oe,P)))||a.add(P)})}).catch(C=>{if(C.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw C})}))))})(r,n,i);const l=new Bt;let u=!1;const h=Array.from(a).map(async p=>{const f=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((E,C)=>E+C.cellResults.length,0)>i.maxResults){u=!0;return}const m=[],w=this.g.get(p);if(w)w.apiNotebook.getCells().forEach(C=>m.push({input:C.document.getText(),outputs:C.outputs.flatMap(P=>P.items.map(Z=>Z.data.toString()))}));else{const E=await this.s.value.readFile(p),C=ne.fromString(E.toString()),P=await o.deserializeNotebook(C.buffer,n);if(n.isCancellationRequested)return;Ws.from(P).cells.forEach(W=>m.push({input:W.source,outputs:W.outputs.flatMap(oe=>oe.items.map(O=>O.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((E,C)=>{const P=i.contentPattern.pattern,Z=new zU(E.input,void 0,E.outputs),W=Z.findInInputs(P),oe=Z.findInOutputs(P),O=oe.flatMap(B=>uC(B.matches,B.textBuffer)).map((B,G)=>(B.webviewIndex=G,B));if(W.length>0||oe.length>0){const B={index:C,contentResults:uC(W,Z.inputTextBuffer),webviewResults:O};f.push(B)}});const S={resource:p,cellResults:f};l.set(p,S);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==_2&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==G6({mtime:i.mtime,size:r.size}))throw new vh(d(2968,null),3,i)}A(t){return t.scheme===q.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new ab(i,this.d,t,r.visibleRanges.map(Ur.to),r.selections.map(Ur.to),typeof r.viewColumn=="number"?It.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=y.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new TU(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>ob.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=y.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=F.String.with("notebookType","A notebook type"),r=new pe("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new F("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>ne.wrap(n))],new fe("Notebook Data",n=>Ws.to(n.value))),s=new pe("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new F("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new ei(Ws.from(n)))],new fe("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},mb=class extends Error{constructor(e){super(e),this.name="NotebookSaveError"}},KU=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new oc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=y.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:af.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Bn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=Ri.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new ei(o))}},ej=class{constructor(e){this.c=e,this.a=new D,this.onDidSaveNotebookDocument=this.a.event,this.b=new D,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},vb=class{constructor(t,i){this.c=t,this.d=i,this.a=new D,this.b=new D,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(Ur.to)),i.selections&&r._acceptSelections(i.selections.selections.map(Ur.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(It.to(t[i]))}};vb=__decorate([__param(0,_e)],vb);var Ga;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(Ga||(Ga={}));var yG=H("INotebookExecutionService"),tj=100,gC;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(gC||(gC={}));var SG=H("INotebookKernelService"),xG=H("INotebookKernelHistoryService"),wb=class{constructor(t,i,r,s,n){this.l=i,this.m=r,this.n=s,this.o=n,this.b=new Bt,this.c=new Bt,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.q=0,this.r={},this.a=t.getProxy(V.MainThreadNotebookKernels);const o=new pe("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new F("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.m.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.m.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],fe.Void),a=new pe("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[F.Uri],new fe("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.n.registerApiCommand(o),this.n.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const W of this.j.values())if(W.controller.id===i&&Ve.equals(t.identifier,W.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.o.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${f.id}' of extension: '${t.identifier}'`);let u=!1;const h=new D,p=new D,f={id:Ip(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(df.from):[]};let m=n??l,w,S;this.a.$addKernel(a,f).catch(W=>{console.log(W),u=!0});let E=0;const C=()=>{if(u)return;const W=++E;Promise.resolve().then(()=>{W===E&&this.a.$updateKernel(a,f)})},P=new Bt,Z={get id(){return i},get notebookType(){return f.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return f.label},set label(W){f.label=W??t.displayName??t.name,C()},get detail(){return f.detail??""},set detail(W){f.detail=W,C()},get description(){return f.description??""},set description(W){f.description=W,C()},get supportedLanguages(){return f.supportedLanguages},set supportedLanguages(W){f.supportedLanguages=W,C()},get supportsExecutionOrder(){return f.supportsExecutionOrder??!1},set supportsExecutionOrder(W){f.supportsExecutionOrder=W,C()},get rendererScripts(){return f.preloads?f.preloads.map(df.to):[]},get executeHandler(){return m},set executeHandler(W){m=W??l},get interruptHandler(){return w},set interruptHandler(W){w=W,f.supportsInterrupt=!!W,C()},set variableProvider(W){T(t,"notebookVariableProvider"),S=W,f.hasVariableProvider=!!W,W?.onDidChangeVariables(oe=>c.a.$variablesUpdated(oe.uri)),C()},get variableProvider(){return S},createNotebookCellExecution(W){if(u)throw new Error("notebook controller is DISPOSED");if(!P.has(W.notebook.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(oe=>oe.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.notebook.uri.toString()}`);return c._createNotebookCellExecution(W,Ip(t.identifier,this.id))},createNotebookExecution(W){if(T(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!P.has(W.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(P.keys()).map(oe=>oe.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.uri.toString()}`);return c._createNotebookExecution(W,Ip(t.identifier,this.id))},dispose:()=>{u||(this.o.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),p.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(W,oe){oe===Id.Hidden&&T(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,W.uri,oe)},onDidReceiveMessage:p.event,postMessage(W,oe){return T(t,"notebookMessaging"),c.a.$postMessage(a,oe&&c.m.getIdByEditor(oe),W)},asWebviewUri(W){return T(t,"notebookMessaging"),su(W,c.l.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:Z,onDidReceiveMessage:p,onDidChangeSelection:h,associatedNotebooks:P}),Z}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return Ip(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.o.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.o.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new he;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>Tv.from(o,this.n.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.m.getNotebookDocument(y.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.o.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.o.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.o.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.m.getNotebookDocument(y.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.r[s],!h)return}else this.r={};const p=n==="named"?fl.Named:fl.Indexed,f=u.provideVariables(l.apiNotebook,h,p,o,a);let m=0;for await(const w of f){if(a.isCancellationRequested)return;const S={id:this.q++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.r[S.id]=w.variable,this.a.$receiveVariable(i,S),m++>=tj)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.m.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new ij(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===br.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.m.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new sj(i,r,this.a),o=n.onDidChangeState(()=>{n.state===ms.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};wb=__decorate([__param(4,_e)],wb);var br;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(br||(br={}));var ij=class R$ extends te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=R$.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=br.Init,this.g=this.B(new lt),this.h=new nj(10,s=>this.s(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new ei(i))}t(){if(this.f===br.Init)throw new Error("Must call start before modifying cell output");if(this.f===br.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=Zh.ensureUniqueMimeTypes(i.items,!0);return r===i.items?Vs.from(i):Vs.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const s=this.w(i),n=this.y(Vi(t));return this.r({editType:Ga.Output,cellHandle:s,append:r,outputs:n})}async C(t,i,r){return t=Zh.ensureUniqueMimeTypes(Vi(t),!0),this.r({editType:Ga.OutputItems,items:t.map(Ca.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:Ga.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===br.Resolved||t.f===br.Started)throw new Error("Cannot call start again");t.f=br.Started,t.c.fire(),t.s({editType:Ga.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===br.Resolved)throw new Error("Cannot call resolve twice");t.f=br.Resolved,t.c.fire(),t.h.flush();const o=rj(n);t.n.$completeExecution(t.b,new ei({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,s){return t.t(),t.z(r,s,!0)},replaceOutput(r,s){return t.t(),t.z(r,s,!1)},appendOutputItems(r,s){return t.t(),t.C(r,s,!0)},replaceOutputItems(r,s){return t.t(),t.C(r,s,!1)}})}};function rj(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,i=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>i(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var ms;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(ms||(ms={}));var sj=class L$ extends te{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=L$.a++,this.c=new D,this.onDidChangeState=this.c.event,this.f=ms.Init,this.g=this.B(new lt),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===ms.Resolved||this.f===ms.Started)throw new Error("Cannot call start again");this.f=ms.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===ms.Resolved)throw new Error("Cannot call resolve twice");this.f=ms.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},nj=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new Zr,this.b=Date.now(),nr(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Ip(e,t){return`${e.value}/${t}`}var oj=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(V.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{ab.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&ab.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new D({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},aj=class{constructor(e){this.b=new Map,this.a=e.getProxy(V.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(T(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),ce(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(He(t)?t:y.revive(t),i)}},cj=class N${static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=y.revive(i),n=this.c.get(t);return n?Qt(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s,n,o){const a=N$.a++;this.c.set(a,r);const c=Ve.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,ma.from(i,this.d),`${c}.${s}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function lj(e,t,i){const r=e.getProxy(V.MainThreadQuickOpen);class s{constructor(f,m){this.e=new Map,this.f=0,this.a=f,this.b=m}showQuickPick(f,m,w,S=st.None){this.c=void 0;const E=Promise.resolve(m),C=++this.f,P=r.$show(C,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},S),Z={},W=P.then(()=>Z);return Promise.race([W,E]).then(oe=>{if(oe===Z)return;const O=Ge(f,"quickPickItemTooltip");return E.then(B=>{const G=[];for(let me=0;me<B.length;me++){const xe=B[me];if(typeof xe=="string")G.push({label:xe,handle:me});else if(xe.kind===dl.Separator)G.push({type:"separator",label:xe.label});else{xe.tooltip&&!O&&console.warn(`Extension '${f.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${f.identifier.value}`);const ke=xe.iconPath?l(xe.iconPath):void 0;G.push({label:xe.label,iconPath:ke?.iconPath,iconClass:ke?.iconClass,description:xe.description,detail:xe.detail,picked:xe.picked,alwaysShow:xe.alwaysShow,tooltip:O?de.fromStrict(xe.tooltip):void 0,handle:me})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=me=>{w.onDidSelectItem(B[me])}),r.$setItems(C,G),P.then(me=>{if(typeof me=="number")return B[me];if(Array.isArray(me))return me.map(xe=>B[xe])})})}).then(void 0,oe=>{if(!xr(oe))return r.$setError(C,oe),Promise.reject(oe)})}$onItemSelected(f){this.c?.(f)}showInput(f,m=st.None){return this.d=f?.validateInput,r.$input(f,typeof this.d=="function",m).then(void 0,w=>{if(!xr(w))return Promise.reject(w)})}async $validateInput(f){if(!this.d)return;const m=await this.d(f);if(!m||typeof m=="string")return m;let w;switch(m.severity){case ha.Info:w=bt.Info;break;case ha.Warning:w=bt.Warning;break;case ha.Error:w=bt.Error;break;default:w=m.message?bt.Error:bt.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(f,m=st.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[f]);if(!w)return;const S=await this.a.getWorkspaceFolders2();if(S)return S.find(E=>E.uri.toString()===w.uri.toString())}createQuickPick(f){const m=new u(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(f){const m=new h(f,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(f,m){this.e.get(f)?._fireDidChangeValue(m)}$onDidAccept(f){this.e.get(f)?._fireDidAccept()}$onDidChangeActive(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(f,m){const w=this.e.get(f);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(f,m){this.e.get(f)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(f,m,w){const S=this.e.get(f);S instanceof u&&S._fireDidTriggerItemButton(m,w)}$onDidHide(f){this.e.get(f)?._fireDidHide()}}class n{static{this.a=1}constructor(f,m){this.y=f,this.z=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new D,this.r=new D,this.s=new D,this.t=new D,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(f){this.b=f,this.A({title:f})}get step(){return this.c}set step(f){this.c=f,this.A({step:f})}get totalSteps(){return this.d}set totalSteps(f){this.d=f,this.A({totalSteps:f})}get enabled(){return this.g}set enabled(f){this.g=f,this.A({enabled:f})}get busy(){return this.j}set busy(f){this.j=f,this.A({busy:f})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(f){this.k=f,this.A({ignoreFocusOut:f})}get value(){return this.l}set value(f){this.l=f,this.A({value:f})}get valueSelection(){return this.m}set valueSelection(f){this.m=f,this.A({valueSelection:f})}get placeholder(){return this.n}set placeholder(f){this.n=f,this.A({placeholder:f})}get buttons(){return this.o}set buttons(f){const m=Ge(this.y,"quickInputButtonLocation");!m&&f.some(w=>w.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=f.slice(),this.p.clear(),f.forEach((w,S)=>{const E=w===hl.Back?-1:S;this.p.set(E,w)}),this.A({buttons:f.map((w,S)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===hl.Back?-1:S,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(f){this.l=f,this.r.fire(f)}_fireDidTriggerButton(f){const m=this.p.get(f);m&&this.s.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=qi(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),r.$dispose(this._id))}A(f){if(!this.w){for(const m of Object.keys(f)){const w=f[m];this.v[m]=w===void 0?null:w}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){r.$createOrUpdate(this.v),this.v={id:this._id}}}function o(p){if(p instanceof ci)return{id:p.id};const f=c(p),m=a(p);return{dark:typeof f=="string"?y.file(f):f,light:typeof m=="string"?y.file(m):m}}function a(p){return typeof p=="object"&&"light"in p?p.light:p}function c(p){return typeof p=="object"&&"dark"in p?p.dark:p}function l(p){const f=o(p);let m,w;return"id"in f?w=$t.asClassName(f):m=f,{iconPath:m,iconClass:w}}class u extends n{constructor(f,m){super(f,m),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new D,this.M=[],this.N=new D,this.O=new D,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(f){this.C=f.slice(),this.D.clear(),this.E.clear(),f.forEach((S,E)=>{this.D.set(E,S),this.E.set(S,E)});const m=Ge(this.y,"quickPickItemTooltip"),w=[];for(let S=0;S<f.length;S++){const E=f[S];if(E.kind===dl.Separator)w.push({type:"separator",label:E.label});else{E.tooltip&&!m&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const C=E.iconPath?l(E.iconPath):void 0;w.push({handle:S,label:E.label,iconPath:C?.iconPath,iconClass:C?.iconClass,description:E.description,detail:E.detail,picked:E.picked,alwaysShow:E.alwaysShow,tooltip:m?de.fromStrict(E.tooltip):void 0,buttons:E.buttons?.map((P,Z)=>({...l(P.iconPath),tooltip:P.tooltip,handle:Z}))})}}this.A({items:w})}get canSelectMany(){return this.F}set canSelectMany(f){this.F=f,this.A({canSelectMany:f})}get matchOnDescription(){return this.G}set matchOnDescription(f){this.G=f,this.A({matchOnDescription:f})}get matchOnDetail(){return this.H}set matchOnDetail(f){this.H=f,this.A({matchOnDetail:f})}get sortByLabel(){return this.I}set sortByLabel(f){this.I=f,this.A({sortByLabel:f})}get keepScrollPosition(){return this.J}set keepScrollPosition(f){this.J=f,this.A({keepScrollPosition:f})}get activeItems(){return this.K}set activeItems(f){this.K=f.filter(m=>this.E.has(m)),this.A({activeItems:this.K.map(m=>this.E.get(m))})}get selectedItems(){return this.M}set selectedItems(f){this.M=f.filter(m=>this.E.has(m)),this.A({selectedItems:this.M.map(m=>this.E.get(m))})}_fireDidChangeActive(f){const m=ft(f.map(w=>this.D.get(w)));this.K=m,this.L.fire(m)}_fireDidChangeSelection(f){const m=ft(f.map(w=>this.D.get(w)));this.M=m,this.N.fire(m)}_fireDidTriggerItemButton(f,m){const w=this.D.get(f);if(!w||!w.buttons||!w.buttons.length)return;const S=w.buttons[m];S&&this.O.fire({button:S,item:w})}}class h extends n{constructor(f,m){super(f,m),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(f){this.C=f,this.A({password:f})}get prompt(){return this.D}set prompt(f){this.D=f,this.A({prompt:f})}get validationMessage(){return this.E}set validationMessage(f){this.E=f,f?typeof f=="string"?this.A({validationMessage:f,severity:bt.Error}):this.A({validationMessage:f.message,severity:f.severity??bt.Error}):this.A({validationMessage:void 0,severity:bt.Ignore})}}return new s(t,i)}var mC=new At(()=>{const e=qf.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),kG=new At(()=>({collator:qf.Collator(void 0,{numeric:!0}).value})),CG=new At(()=>({collator:qf.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function uj(e,t,i=!1){const r=e||"",s=t||"",n=mC.value.collator.compare(r,s);return mC.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function hj(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Dp(e,t,i=!1){const r=e.split(ir),s=t.split(ir),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return uj(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=hj(r[l],s[l],i);if(u!==0)return u}}function vC(e){return e instanceof y}function dj(e,t){return e.scheme===q.file&&t.scheme===q.file&&ks?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function bb(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||$t.isThemeIcon(e.iconPath)?e.iconPath:void 0}function tn(e){if(e){if(y.isUri(e))return e;if($t.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function fj(e){const t=tn(e.authorIcon),i=e.references?.map(r=>({...r,icon:tn(r.icon)}));return{...e,authorIcon:t,references:i}}function yb(e){return e?{...e,icon:tn(e.icon)}:void 0}function Sb(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Dp(i,r)}function pj(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=Sb(e,t),i!==0)return i;if(e.light&&t.light)i=Sb(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=Sb(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function gj(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(vC(r)&&vC(s)&&dj(r,s)))return r<s?-1:1}return 0}function wC(e,t){let i=Dp(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=gj(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=pj(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=Dp(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=Dp(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function mj(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function vj(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?mj(e.arguments,t.arguments):e.arguments===t.arguments)}function wj(e,t){return Fi(e,t,vj)}var bj=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return T(this.l,"scmValidation"),this.h}set validateInput(e){if(T(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return T(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new D,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){T(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},yj=class M${static{this.d=0}get disposed(){return this.m}get id(){return this.x}get label(){return this.y}set label(t){this.y=t,this.u.$updateGroupLabel(this.w,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.u.$updateGroup(this.w,this.handle,this.features)}get hideWhenEmpty(){return this.t}set hideWhenEmpty(t){this.t=t,this.u.$updateGroup(this.w,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.u=t,this.v=i,this.w=r,this.x=s,this.y=n,this.multiDiffEditorEnableViewChanges=o,this.z=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new D,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new D,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.t=void 0,this.handle=M$.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?Qt(()=>this.v.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(wC),r=uy(this.p,t,wC).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const B=new he;h=this.v.converter.toInternal(c.command,B),this.k.set(l,B)}else this.j.set(l,c.command);const p=Ge(this.z,"scmMultiDiffEditor"),f=p?c.multiDiffEditorOriginalUri:void 0,m=p?c.multiFileDiffEditorModifiedUri:void 0,w=bb(c.decorations),S=c.decorations&&bb(c.decorations.light)||w,E=c.decorations&&bb(c.decorations.dark)||w,C=[S,E],P=c.decorations&&c.decorations.tooltip||"",Z=c.decorations&&!!c.decorations.strikeThrough,W=c.decorations&&!!c.decorations.faded,oe=c.contextValue||"";return{rawResource:[l,u,C,P,Z,W,oe,h,f,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},xb=class F${static{this.d=0}#e;get id(){return this.C}get label(){return this.D}get rootUri(){return this.E}get contextValue(){return T(this.A,"scmProviderOptions"),this.h}set contextValue(t){T(this.A,"scmProviderOptions"),this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.handle,{contextValue:t}))}get inputBox(){return this.j}get count(){return this.k}set count(t){this.k!==t&&(this.k=t,this.#e.$updateSourceControl(this.handle,{count:t}))}get quickDiffProvider(){return this.l}set quickDiffProvider(t){this.l=t;let i;Ge(this.A,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.handle,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return T(this.A,"quickDiffProvider"),this.m}set secondaryQuickDiffProvider(t){T(this.A,"quickDiffProvider"),this.m=t;const i=t?.label;this.#e.$updateSourceControl(this.handle,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return T(this.A,"scmHistoryProvider"),this.n}set historyProvider(t){T(this.A,"scmHistoryProvider"),this.n=t,this.o.value=new he,this.#e.$updateSourceControl(this.handle,{hasHistoryProvider:!!t}),t&&(this.o.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=yb(t?.currentHistoryItemRef),r=yb(t?.currentHistoryItemRemoteRef),s=yb(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.handle,i,r,s)})),this.o.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:tn(o.icon)})),s=i.modified.map(o=>({...o,icon:tn(o.icon)})),n=i.removed.map(o=>({...o,icon:tn(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.handle,{added:r,modified:s,removed:n,silent:i.silent})})))}get commitTemplate(){return this.p}set commitTemplate(t){t!==this.p&&(this.p=t,this.#e.$updateSourceControl(this.handle,{commitTemplate:t}))}get acceptInputCommand(){return this.t}set acceptInputCommand(t){this.q.value=new he,this.t=t;const i=this.B.converter.toInternal(t,this.q.value);this.#e.$updateSourceControl(this.handle,{acceptInputCommand:i})}get actionButton(){return T(this.A,"scmActionButton"),this.v}set actionButton(t){if(T(this.A,"scmActionButton"),Dm(this.v,t))return;const i=this.u;this.u=new he,this.v=t;const r=t!==void 0?{command:{...this.B.converter.toInternal(t.command,this.u),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(s=>s.map(n=>this.B.converter.toInternal(n,this.u))),enabled:t.enabled}:null;this.#e.$updateSourceControl(this.handle,{actionButton:r}).finally(()=>i.dispose())}get statusBarCommands(){return this.x}set statusBarCommands(t){if(this.x&&t&&wj(this.x,t))return;const i=this.w;this.w=new he,this.x=t;const r=(t||[]).map(s=>this.B.converter.toInternal(s,this.w));this.#e.$updateSourceControl(this.handle,{statusBarCommands:r}).finally(()=>i.dispose())}get selected(){return this.y}constructor(t,i,r,s,n,o,a,c,l){this.A=t,this.B=s,this.C=n,this.D=o,this.E=a,this.f=new D,this.onDidDispose=this.f.event,this.g=new Map,this.h=void 0,this.k=void 0,this.l=void 0,this.m=void 0,this.o=new xo,this.p=void 0,this.q=new xo,this.t=void 0,this.u=new he,this.w=new he,this.x=void 0,this.y=!1,this.z=new D,this.onDidChangeSelection=this.z.event,this.handle=F$.d++,this.F=new Map,this.G=new Set,this.#e=r;const u=y.from({scheme:q.vscodeSourceControl,path:`${n}/scm${this.handle}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.j=new bj(t,i,this.#e,this.handle,u),this.#e.$registerSourceControl(this.handle,l?.handle,n,o,a,tn(c),u),this.onDidDisposeParent=l?l.onDidDispose:ht.None}createResourceGroup(t,i,r){const s=Ge(this.A,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new yj(this.#e,this.B,this.handle,t,i,s,this.A),o=ht.once(n.onDidDispose)(()=>this.F.delete(n));return this.F.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.F){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.G.add(r),this.eventuallyUpdateResourceStates()});ht.once(r.onDidDispose)(()=>{this.G.delete(r),n.dispose(),this.g.delete(r.handle),this.#e.$unregisterGroup(this.handle,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.g.set(r.handle,r)}this.#e.$registerGroups(this.handle,t,i),this.F.clear()}eventuallyUpdateResourceStates(){const t=[];this.G.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.handle,t),this.G.clear()}getResourceGroup(t){return this.g.get(t)}setSelectionState(t){this.y=t,this.z.fire(t)}dispose(){this.q.dispose(),this.u.dispose(),this.w.dispose(),this.g.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.handle),this.f.fire(),this.f.dispose()}};__decorate([j0(100)],xb.prototype,"eventuallyAddResourceGroups",null),__decorate([j0(100)],xb.prototype,"eventuallyUpdateResourceStates",null);var Eb=class{get onDidChangeActiveProvider(){return this.j.event}constructor(t,i,r,s){this.l=i,this.m=r,this.n=s,this.g=new Map,this.h=new Ds,this.j=new D,this.d=t.getProxy(V.MainThreadSCM),this.f=t.getProxy(V.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.g.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.g.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.g.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s,n,o){this.n.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.f.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const a=o?fi.find(this.g.values(),u=>u===o):void 0,c=new xb(t,this.m,this.d,this.l,i,r,s,n,a);this.g.set(c.handle,c);const l=this.h.get(t.identifier)||[];return l.push(c),this.h.set(t.identifier,l),c}getLastInputBox(t){this.n.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.h.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=y.revive(i);this.n.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.g.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):Qt(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,r){const s=y.revive(i);this.n.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,s.toString());const n=this.g.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):Qt(()=>n.secondaryQuickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.n.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.g.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.n.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.g.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.n.trace("ExtHostSCM#$validateInput",t);const s=this.g.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):Qt(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=de.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.n.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.g.get(t)?.setSelectionState(!0),this.k!==void 0&&this.g.get(this.k)?.setSelectionState(!1),this.k=t,Promise.resolve(void 0)}async $resolveHistoryItemChatContext(t,i,r){try{return await this.g.get(t)?.historyProvider?.resolveHistoryItemChatContext(i,r)??void 0}catch(s){this.n.error("ExtHostSCM#$resolveHistoryItemChatContext",s);return}}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.g.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.n.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.g.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:tn(o.icon)}))??void 0}catch(s){this.n.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.g.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>fj(o))??void 0}catch(s){this.n.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.g.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.n.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};Eb=__decorate([__param(3,_e)],Eb);var Sj=class O${static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(V.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:M.to(i.selection),resourceUri:y.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=O$.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,ma.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},xj=class U${static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(V.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new he,o=new lt;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new he,o=new lt;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new he,n=new lt;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=U$.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),ce(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},Ej=class Qp{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new il("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new il("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=Os.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new he,this.#e=t,this.#t=i,n&&s){this.c=qT(s.identifier,n);const l=r.get(this.c);l&&(o=l.alignLeft?Os.Left:Os.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(Qp.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(cn(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&T(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&T(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!Qp.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new he,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=d(2969,null,this.e.displayName||this.e.name);let r=this.o;this.p&&(r=Qp.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=de.fromStrict(this.l),n=!0):(s=de.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,n,this.s?.internal,r,this.p,this.g===Os.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},kj=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Os.Left,Number.MIN_VALUE),this.a.name=d(2970,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Ie(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},Cj=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(V.MainThreadStatusBar),this.b=t,this.c=new kj(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const r=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:de.fromStrict(r)}createStatusBarEntry(e,t,i,r){const s=new Ej(this.a,this.b,this.f,e,t,i,r,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Ie(()=>{i.dispose(),clearTimeout(r)})}},$j=class extends te{constructor(e,t){super(),this.n=t,this.a=new D,this.b=new D,this.c=new D,this.f=new D,this.g=new D,this.h=new D,this.j=new D,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(V.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.B(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:It.from(t),preserveFocus:i}:typeof t=="object"?r={position:It.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?M.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,r),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new MN(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(dr.to);i._acceptSelections(r)}if(t.visibleRanges){const r=ft(t.visibleRanges.map(M.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:Sa.to(t.options.lineNumbers)}}),t.selections){const r=ea.fromValue(t.selections.source),s=t.selections.selections.map(dr.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=ft(t.visibleRanges.map(M.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=It.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const r=this,s=t.map(n=>{const o=y.revive(n.original),a=y.revive(n.modified),c=n.changes.map(l=>{const[u,h,p,f]=l;let m;return u===h?m=ta.Addition:p===f?m=ta.Deletion:m=ta.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:p,endLineNumberExclusive:f},kind:m}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return r.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(s),this.g.fire({textEditor:i.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},kb=class{constructor(t){this.a=new kd(Bs.Dark),this.b=new D}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=Bs.Light;break;case"hcDark":i=Bs.HighContrast;break;case"hcLight":i=Bs.HighContrastLight;break;default:i=Bs.Dark}this.a=new kd(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};kb=__decorate([__param(0,Le)],kb);var DG=H("IExtHostTimeline"),Ij=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&r&&Ge(r,"timeline")){const s=i.uri===void 0?void 0:y.revive(i.uri);return this.c.get(i.source)?.get(bC(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(y.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new he,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const p=n(c,l);return{...h,source:t.id,items:h.items.map(p)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=bC(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,p;o.iconPath&&(a instanceof ci?p={id:a.id,color:a.color}:y.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let f;return Ai.isMarkdownString(c.tooltip)?f=de.from(c.tooltip):He(c.tooltip)?f=c.tooltip:Ai.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=de.from(c.detail)):He(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),f=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:p,tooltip:f,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),ce(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function bC(e){return e?.toString()}var PG=d(4562,null),AG=Jl("default-view-icon",ie.window,d(4563,null)),Pp;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Pp||(Pp={}));var yC;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(yC||(yC={}));var Dj=class extends te{constructor(){super(...arguments),this.c=this.B(new D),this.onDidRegister=this.c.event,this.f=this.B(new D),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},g3(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};Vt.add(Pp.ViewContainersRegistry,new Dj);var Ap;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Ap||(Ap={}));function Pj(e,t){const i=e.group??Ap.More,r=t.group??Ap.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var Aj=class extends te{constructor(){super(...arguments),this.c=this.B(new D),this.onViewsRegistered=this.c.event,this.f=this.B(new D),this.onViewsDeregistered=this.f.event,this.g=this.B(new D),this.onDidChangeContainer=this.g.event,this.h=this.B(new D),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new by}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),ce(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,ce(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(Pj)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(d(4564,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};Vt.add(Pp.ViewsRegistry,new Aj);var TG=H("viewDescriptorService"),SC;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(SC||(SC={}));var xC;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(xC||(xC={}));var vs=class extends Error{constructor(e){super(d(4565,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},Tj=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function EC(e,t){if(He(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var Rj=class extends te{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new Tj;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return T(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return T(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){kn(h)&&T(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&C1.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,p)=>a.reveal(h,p),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new vs(e));if(!t){const s=await i.getChildren();return s?[[0,...s]]:void 0}const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=await i.getChildren(n);o&&r.push([s,...o])}return r}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new vs(e));const l=Da.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new vs(e));const n=await this.j(new na,s,t,r,i);if(!(!n||r.isCancellationRequested))return Da.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new vs(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new vs(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new vs(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new vs(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new vs(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new vs(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new Lj(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId),i=e;return t&&i.$treeItemHandle?t.getExtensionElement(i.$treeItemHandle):t&&e.$focusedTreeItem?t.focusedElement:null}},Lj=class sy extends te{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!Et(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,s,n,o){if(super(),this.J=t,this.L=r,this.M=s,this.N=n,this.O=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new D),this.onDidExpandElement=this.u.event,this.w=this.B(new D),this.onDidCollapseElement=this.w.event,this.y=this.B(new D),this.onDidChangeSelection=this.y.event,this.z=this.B(new D),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new D),this.onDidChangeVisibility=this.C.event,this.D=this.B(new D),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new D),this.G=Promise.resolve(),this.H=Promise.resolve(),this.I=new Set,this.P="",this.Q="",this.$=new lt,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.Q=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=ht.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(p=>c=p),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const p=c;a=null;const f=Array.from(this.I);return this.ab(h).then(()=>(this.ub(f),p()))})),u&&this.L.$setMessage(this.J,de.fromStrict(this.P)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.N.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.Y(t);return r||(r=await this.Z(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=Et(i.select)?!0:i.select,s=Et(i.focus)?!1:i.focus,n=Et(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.U(t)).then(o=>this.X(t,o[o.length-1]).then(a=>this.L.$reveal(this.J,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.N.error(o)):this.L.$reveal(this.J,void 0,{select:r,focus:s,expand:n})}get message(){return this.P}set message(t){this.P=t,this.F.fire({message:!0,element:!1})}get title(){return this.Q}set title(t){this.Q=t,this.L.$setTitle(this.J,t,this.R)}get description(){return this.R}set description(t){this.R=t,this.L.$setTitle(this.J,this.Q,t)}get badge(){return this.S}set badge(t){this.S?.value===t?.value&&this.S?.tooltip===t?.tooltip||(this.S=ff.from(t),this.L.$setBadge(this.J,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!Fi(this.s,t);this.s=t;const s=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:r.newState?Nr.Checked:Nr.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?Nr.Checked:Nr.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.g?.handleDrop))return Qt(()=>this.g?.handleDrop?this.g.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const s=this.m.get(r);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.ib(n),s.item.tooltip=this.fb(n.tooltip),s.item.command=this.gb(s.disposableStore,n.command),s.item}}}U(t){return this.W(t).then(i=>i?this.U(i).then(r=>this.X(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}W(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):Qt(()=>this.f.getParent(t))}X(t,i){const r=this.m.get(t);return r?Promise.resolve(r):Qt(()=>this.f.getTreeItem(t)).then(s=>this.lb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.O.identifier.value}`)}))}Y(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Z(t){this.sb(t);const i=new lt(this.$.token);try{const r=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=ft(s||[]),o=await Promise.all(ft(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.eb(n[l],c,r):null);return ft(a)}finally{i.dispose()}}ab(t){if(t.some(r=>!r))return this.$.dispose(!0),this.$=new lt,this.sb(),this.L.$refresh(this.J);{const r=this.bb(t);if(r.length)return this.cb(r)}return Promise.resolve(void 0)}bb(t){const i=new Set,r=t.map(n=>this.m.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}cb(t){const i={};return Promise.all(t.map(r=>this.db(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.L.$refresh(this.J,i):void 0)}db(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.sb(i),Qt(()=>this.f.getTreeItem(i)).then(s=>{if(s){const n=this.jb(i,s,r.parent);return this.qb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}eb(t,i,r){const s=this.jb(t,i,r);if(i.id&&this.j.has(s.item.handle))throw new Error(d(2973,null,i.id));return this.pb(t,s),this.rb(s,r),s}fb(t){return Ai.isMarkdownString(t)?de.from(t):t}gb(t,i){return i?{...this.M.toInternal(i,t),originalId:i.command}:void 0}hb(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===Nr.Checked,tooltip:r,accessibilityInformation:s}}ib(t){if(!dd.isTreeItem(t,this.O))throw new Error(`Extension ${this.O.identifier.value} has provided an invalid tree item.`)}jb(t,i,r){this.ib(i);const s=this.B(new he),n=this.lb(t,i,r),o=this.mb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:EC(i.label,this.O),description:i.description,resourceUri:i.resourceUri,tooltip:this.fb(i.tooltip),command:this.gb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.nb(i)||o,themeIcon:this.kb(i),collapsibleState:Et(i.collapsibleState)?Vn.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.hb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}kb(t){return t.iconPath instanceof ci?t.iconPath:void 0}lb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${sy.b}/${i}`;const a=EC(r,this.O),c=n?n.item.handle:sy.a;let l=a?a.label:s?Jr(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.Y(n)||[];let p,f=0;do{if(p=`${c}/${f}:${l}`,o||!this.j.has(p)||u===p)break;f++}while(f<=h.length);return p}mb(t){if(t.iconPath&&!(t.iconPath instanceof ci))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.ob(t.iconPath):this.ob(t.iconPath.light)}nb(t){if(t.iconPath&&!(t.iconPath instanceof ci)&&t.iconPath.dark)return this.ob(t.iconPath.dark)}ob(t){return y.isUri(t)?t:y.file(t)}pb(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}qb(t,i,r,s){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.pb(t,i);const n=this.Y(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}rb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}sb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){this.I.add(r);const s=this.j.get(r.item.handle);s&&(this.sb(s),this.m.delete(s),this.j.delete(r.item.handle))}i.children=void 0}}else this.tb()}tb(){this.h=void 0,this.m.forEach(t=>{this.I.add(t)}),this.m.clear(),this.j.clear()}ub(t){qi(t)}vb(){this.h=void 0,this.j.clear(),qi(this.m.values()),this.m.clear(),qi(this.I),this.I.clear()}dispose(){super.dispose(),this.$.dispose(),this.vb(),this.L.$disposeTree(this.J)}},Nj=class j${static{this.a=new Set([q.http,q.https])}constructor(t){this.c=new Map,this.b=t.getProxy(V.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!j$.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),ce(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(i.resolvedUri),{sourceUri:y.revive(i.sourceUri)},r)}},Mj=class extends te{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new D),this.onDidDispose=this.#d.event,this.#h=this.B(new D),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,y.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:It.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},Fj=class H$ extends te{static c(){return ni()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(V.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:It.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Va(t),l=H$.c();this.f.$createWebviewPanel(lp(t),l,i,{title:r,panelOptions:Oj(n),webviewOptions:dk(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:It.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Va(t)}),new Ie(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new Mj(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function Oj(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var Uj=class extends te{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.B(new D),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new D),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=ff.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},jj=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(V.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(lp(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Va(e)}),new Ie(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new Uj(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},Hj=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(V.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,r){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("Settings search provider not found");const n=new L0(o=>{this.c.$handleSearchResult(e,Kv.fromSettingsSearchResult(o))});return s.provideSettingsSearchResults(t,i,n,r)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Ie(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}},Cb,Bj=class{constructor(e,t,i,r,s,n){this.session=e,this.extension=t,this.proxy=r,this.commandsConverter=s,this.sessionDisposables=n,this.a=new Bw(t,i,r,s,n)}get activeResponseStream(){return this.a}getActiveRequestStream(e){return new Bw(this.extension,e,this.proxy,this.commandsConverter,this.sessionDisposables)}},$b=class extends te{static{Cb=this}static{this.a=0}constructor(t,i,r,s){super(),this.m=t,this.n=i,this.s=r,this.t=s,this.c=new Map,this.f=new Map,this.g=0,this.h=0,this.j=new Map,this.y=new Map,this.b=this.s.getProxy(V.MainThreadChatSessions),t.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===25){const o=n.session.id,a=this.j.get(o);return a||(this.t.warn(`No chat session found for ID: ${o}`),n)}return n}})}registerChatSessionItemProvider(t,i,r){const s=this.g++,n=new he;return this.c.set(s,{provider:r,extension:t,disposable:n}),this.b.$registerChatSessionItemProvider(s,i),r.onDidChangeChatSessionItems&&n.add(r.onDidChangeChatSessionItems(()=>{this.b.$onDidChangeChatSessionItems(s)})),{dispose:()=>{this.c.delete(s),n.dispose(),this.b.$unregisterChatSessionItemProvider(s)}}}registerChatSessionContentProvider(t,i,r,s){const n=this.h++,o=new he;return this.f.set(n,{provider:r,extension:t,capabilities:s,disposable:o}),this.b.$registerChatSessionContentProvider(n,i),new Ie(()=>{this.f.delete(n),o.dispose(),this.b.$unregisterChatSessionContentProvider(n)})}async showChatSession(t,i,r,s){await this.b.$showChatSession(i,r,It.from(s?.viewColumn))}u(t){if(t!==void 0)switch(t){case 0:return 0;case 1:return 1;case 2:return 2;default:return}}w(t){return{id:t.id,label:t.label,description:t.description?de.from(t.description):void 0,status:this.u(t.status),tooltip:de.fromStrict(t.tooltip),timing:{startTime:t.timing?.startTime??0,endTime:t.timing?.endTime},statistics:t.statistics?{insertions:t.statistics?.insertions??0,deletions:t.statistics?.deletions??0}:void 0}}async $provideNewChatSessionItem(t,i,r){const s=this.c.get(t);if(!s||!s.provider.provideNewChatSessionItem)throw new Error(`No provider registered for handle ${t} or provider does not support creating sessions`);try{const n=await this.z(i.request,s.extension),a={request:Ta.to(Jt(i.request),void 0,n,[],new Map,s.extension,this.t),prompt:i.prompt,history:i.history,metadata:i.metadata},c=await s.provider.provideNewChatSessionItem(a,r);if(!c||!c.id)throw new Error("Provider did not create session");return this.j.set(c.id,c),this.w(c)}catch(n){throw this.t.error(`Error creating chat session: ${n}`),n}}async $provideChatSessionItems(t,i){const r=this.c.get(t);if(!r)return this.t.error(`No provider registered for handle ${t}`),[];const s=await r.provider.provideChatSessionItems(i);if(!s)return[];const n=[];for(const o of s)o.id&&(this.j.set(o.id,o),n.push(this.w(o)));return n}async $provideChatSessionContent(t,i,r){const s=this.f.get(t);if(!s)throw new Error(`No provider for handle ${t}`);const n=await s.provider.provideChatSessionContent(i,r),o=new he,a=Cb.a++,c=new Bj(n,s.extension,{sessionId:`${i}.${a}`,requestId:"ongoing",agentId:i,message:"",variables:{variables:[]},location:ai.Panel},{$handleProgressChunk:(h,p)=>this.b.$handleProgressChunk(t,i,h,p),$handleAnchorResolve:(h,p,f)=>{this.b.$handleAnchorResolve(t,i,h,p,f)}},this.m.converter,o),l=o.add(new lt);this.y.set(`${t}_${i}`,{sessionObj:c,disposeCts:l}),n.activeResponseCallback&&Promise.resolve(n.activeResponseCallback(c.activeResponseStream.apiObject,l.token)).finally(()=>{this.b.$handleProgressComplete(t,i,"ongoing")});const{capabilities:u}=s;return{id:a+"",hasActiveResponseCallback:!!n.activeResponseCallback,hasRequestHandler:!!n.requestHandler,supportsInterruption:!!u?.supportsInterruptions,history:n.history.map(h=>{if(h instanceof Wd)return{type:"request",prompt:h.prompt,participant:h.participant};{const p=h;return{type:"response",parts:ft(p.response.map(m=>Fl.from(m,this.m.converter,o))),participant:p.participant}}})}}async $interruptChatSessionActiveResponse(t,i,r){const s=`${t}_${i}`;this.y.get(s)?.disposeCts.cancel()}async $disposeChatSessionContent(t,i){const r=`${t}_${i}`,s=this.y.get(r);if(!s){this.t.warn(`No chat session found for ID: ${r}`);return}s.disposeCts.cancel(),s.sessionObj.sessionDisposables.dispose(),this.y.delete(r)}async $invokeChatSessionRequestHandler(t,i,r,s,n){const o=this.y.get(`${t}_${i}`);if(!o||!o.sessionObj.session.requestHandler)return{};const a=Ta.to(r,void 0,await this.z(r,o.sessionObj.extension),[],new Map,o.sessionObj.extension,this.t),c=o.sessionObj.getActiveRequestStream(r);return await o.sessionObj.session.requestHandler(a,{history:s},c.apiObject,n),{}}async z(t,i){let r;if(t.userSelectedModelId&&(r=await this.n.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.n.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}};$b=Cb=__decorate([__param(2,Le),__param(3,_e)],$b);var _j=class{constructor(e,t){this.c=t,this.b=new Map,this.a=e.getProxy(V.MainThreadChatOutputRenderer)}registerChatOutputRenderer(e,t,i){if(this.b.has(t))throw new Error(`Chat output renderer already registered for: ${t}`);return this.b.set(t,{extension:e,renderer:i}),this.a.$registerChatOutputRenderer(t,e.identifier,e.extensionLocation),new Ie(()=>{this.b.delete(t),this.a.$unregisterChatOutputRenderer(t)})}async $renderChatOutput(e,t,i,r,s){const n=this.b.get(e);if(!n)throw new Error(`No chat output renderer registered for: ${e}`);const o=this.c.createNewWebview(r,{},n.extension);return n.renderer.renderChatOutput(Object.freeze({mime:t,value:i.buffer}),o,{},s)}};function zj(e){const t=e.get(Tt),i=e.get(Lo),r=e.get(Bf),s=e.get(Zs),n=e.get(cs),o=e.get(_f),a=e.get(ls),c=e.get(rh),l=e.get(Le),u=e.get(w0),h=e.get(y0),p=e.get(Sn),f=e.get(_e),m=e.get(C0),w=e.get(ql),S=e.get(zf),E=e.get(Wf),C=e.get(ew),P=e.get(tu),Z=e.get(rw),W=e.get(Vf),oe=e.get(B0),O=e.get(V0),B=e.get(Nw),G=e.get(TE);l.set(X.ExtHostFileSystemInfo,i),l.set(X.ExtHostLogLevelServiceShape,p),l.set(X.ExtHostWorkspace,n),l.set(X.ExtHostConfiguration,a),l.set(X.ExtHostExtensionService,s),l.set(X.ExtHostStorage,u),l.set(X.ExtHostTunnelService,m),l.set(X.ExtHostWindow,S),l.set(X.ExtHostUrls,E),l.set(X.ExtHostSecretState,C),l.set(X.ExtHostTelemetry,o),l.set(X.ExtHostEditorTabs,P),l.set(X.ExtHostManagedSockets,Z),l.set(X.ExtHostProgress,W),l.set(X.ExtHostAuthentication,oe),l.set(X.ExtHostChatProvider,O),l.set(X.ExtHostDataChannels,G);const me=l.set(X.ExtHostDecorations,e.get(Mx)),xe=l.set(X.ExtHostDocumentsAndEditors,e.get(Ba)),ke=l.set(X.ExtHostCommands,e.get(oo)),j=l.set(X.ExtHostTerminalService,e.get(Ua)),_=l.set(X.ExtHostTerminalShellIntegration,e.get($E)),z=l.set(X.ExtHostDebugService,e.get(SE)),Q=l.set(X.ExtHostSearch,e.get(CE)),Y=l.set(X.ExtHostTask,e.get(uE)),ge=l.set(X.ExtHostOutputService,e.get(Nx)),Ee=l.set(X.ExtHostLocalization,e.get(iw)),De=l.set(X.ExtHostDocuments,new jO(l,xe)),nt=l.set(X.ExtHostDocumentContentProviders,new OO(l,xe,f)),yt=l.set(X.ExtHostDocumentSaveParticipant,new UO(f,De,l.getProxy(V.MainThreadBulkEdits))),We=l.set(X.ExtHostNotebook,new XU(l,ke,xe,De,r,Q,f)),dt=l.set(X.ExtHostNotebookDocuments,new ej(We)),ii=l.set(X.ExtHostNotebookEditors,new vb(f,We)),Mt=l.set(X.ExtHostNotebookKernels,new wb(l,t,We,ke,f)),zi=l.set(X.ExtHostNotebookRenderers,new oj(l,We)),bs=l.set(X.ExtHostNotebookDocumentSaveParticipant,new KU(f,We,l.getProxy(V.MainThreadBulkEdits))),Yt=l.set(X.ExtHostEditors,new $j(l,xe)),Xa=l.set(X.ExtHostTreeViews,new Rj(l.getProxy(V.MainThreadTreeViews),ke,f)),Wr=l.set(X.ExtHostEditorInsets,new gO(l.getProxy(V.MainThreadEditorInsets),Yt,t.remote)),Mi=l.set(X.ExtHostDiagnostics,new zw(l,f,i,xe)),Ue=l.set(X.ExtHostLanguages,new PU(l,De,ke.converter,c)),Pe=l.set(X.ExtHostLanguageFeatures,new iU(l,c,De,ke,Mi,f,w,o)),ys=l.set(X.ExtHostCodeMapper,new mO(l)),er=l.set(X.ExtHostFileSystem,new GO(l,Pe)),Wi=l.set(X.ExtHostFileSystemEventService,new YO(l,f,xe)),Sr=l.set(X.ExtHostQuickOpen,lj(l,n,ke)),go=l.set(X.ExtHostSCM,new Eb(l,ke,De,f)),Du=l.set(X.ExtHostQuickDiff,new cj(l,c)),Ka=l.set(X.ExtHostShare,new Sj(l,c)),ec=l.set(X.ExtHostComments,vO(l,ke,De)),mo=l.set(X.ExtHostLabelService,new KO(l)),ui=l.set(X.ExtHostTheming,new kb(l)),sn=l.set(X.ExtHostTimeline,new Ij(l,ke)),at=l.set(X.ExtHostWebviews,new $O(l,t.remote,n,f,w)),jt=l.set(X.ExtHostWebviewPanels,new Fj(l,at,n)),Jp=l.set(X.ExtHostCustomEditors,new RO(l,De,h,at,jt)),Zp=l.set(X.ExtHostWebviewViews,new jj(l,at)),tr=l.set(X.ExtHostTesting,e.get(ip)),tc=l.set(X.ExtHostUriOpeners,new Nj(l)),$=l.set(X.ExtHostProfileContentHandlers,new aj(l)),R=l.set(X.ExtHostChatOutputRenderer,new _j(l,at));l.set(X.ExtHostInteractive,new XO(l,We,xe,ke,f));const N=l.set(X.ExtHostLanguageModelTools,new DU(l,O)),ee=l.set(X.ExtHostChatAgents2,new oO(l,f,ke,De,O,Mi,N)),ve=l.set(X.ExtHostAiRelatedInformation,new XF(l)),Ft=l.set(X.ExtHostAiEmbeddingVector,new BO(l)),Qe=l.set(X.ExtHostAiSettingsSearch,new Hj(l)),Xt=l.set(X.ExtHostStatusBar,new Cj(l,ke.converter)),gt=l.set(X.ExtHostSpeech,new xj(l)),St=l.set(X.ExtHostEmbeddings,new HO(l)),Ei=l.set(X.ExtHostChatSessions,new $b(ke,O,l,f));l.set(X.ExtHostMcp,e.get(Nw));const mt=Object.values(X);l.assertRegistered(mt);const Ht=new Hw(l,xe),ri=new dO(l),hi=new sb(l,f),Se=new FO(l),Te=new uO(l);return rO.register(ke),function(x,Ze,Dt){function K(v){return(b,k,le)=>{const Fe=v(Pt=>{try{b.call(k,Pt)}catch(r3){Kp(new o5(x.identifier,r3,"FAILED to handle event"))}});return le?.push(Fe),Fe}}const je=function(){let v=!x.isUnderDevelopment;function b(){v||(f.info(`Extension '${x.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function k(le){if(Array.isArray(le))le.forEach(k);else if(typeof le=="string")b();else{const Fe=le;typeof Fe.scheme>"u"&&b(),typeof Fe.exclusive=="boolean"&&T(x,"documentFiltersExclusive")}return le}}(),nn={getSession(v,b,k){return Array.isArray(b)||T(x,"authenticationChallenges"),(typeof k?.forceNewSession=="object"&&k.forceNewSession.learnMore||typeof k?.createIfNone=="object"&&k.createIfNone.learnMore)&&T(x,"authLearnMore"),k?.authorizationServer&&T(x,"authIssuers"),oe.getSession(x,v,b,k)},getAccounts(v){return oe.getAccounts(v)},async hasSession(v,b){return T(x,"authSession"),!!await oe.getSession(x,v,b,{silent:!0})},get onDidChangeSessions(){return K(oe.getExtensionScopedSessionsEvent(x.identifier.value))},registerAuthenticationProvider(v,b,k,le){return le?.supportedAuthorizationServers&&T(x,"authIssuers"),oe.registerAuthenticationProvider(v,b,k,le)}},B$={registerCommand(v,b,k){return ke.registerCommand(!0,v,b,k,void 0,x)},registerTextEditorCommand(v,b,k){return ke.registerCommand(!0,v,(...le)=>{const Fe=Yt.getActiveTextEditor();if(!Fe){f.warn("Cannot execute "+v+" because there is no active text editor.");return}return Fe.edit(Pt=>{b.apply(k,[Fe,Pt,...le])}).then(Pt=>{Pt||f.warn("Edits from command "+v+" were not applied.")},Pt=>{f.warn("An error occurred while running command "+v,Pt)})},void 0,void 0,x)},registerDiffInformationCommand:(v,b,k)=>(T(x,"diffCommand"),ke.registerCommand(!0,v,async(...le)=>{const Fe=xe.activeEditor(!0);if(!Fe){f.warn("Cannot execute "+v+" because there is no active text editor.");return}const Pt=await Yt.getDiffInformation(Fe.id);b.apply(k,[Pt,...le])},void 0,void 0,x)),executeCommand(v,...b){return ke.executeCommand(v,...b)},getCommands(v=!1){return ke.getCommands(v)}},ny={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return ri.value},get shell(){return j.getDefaultShell(!1)},get onDidChangeShell(){return K(j.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return K(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return T(x,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return T(x,"telemetry"),K(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return NS(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return LS.validateSender(v),o.instantiateLogger(x,v,b)},openExternal(v,b){return S.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return E.createAppUri(v);try{return await S.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(Lg(v,q.http)||Lg(v,q.https))return v;throw b}},get remoteName(){return jg(t.remote.authority)},get remoteAuthority(){return T(x,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return f.getLevel()},get onDidChangeLogLevel(){return K(f.onDidChangeLogLevel)},get appQuality(){return T(x,"resolvers"),t.quality},get appCommit(){return T(x,"resolvers"),t.commit},getDataChannel(v){return T(x,"dataChannels"),G.createDataChannel(x,v)}};t.environment.extensionTestsLocationURI||Object.freeze(ny);const _$={createTestController(v,b,k){return tr.createTestController(x,v,b,k)},createTestObserver(){return T(x,"testObserver"),tr.createTestObserver()},runTests(v){return T(x,"testObserver"),tr.runTests(v)},registerTestFollowupProvider(v){return T(x,"testObserver"),tr.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return T(x,"testObserver"),K(tr.onResultsChanged)},get testResults(){return T(x,"testObserver"),tr.results}},Pu=t.remote.isRemote?Qn.Workspace:Qn.UI,z$={getExtension(v,b){Ge(x,"extensionsAny")||(b=!1);const k=Ze.mine.getExtensionDescription(v);if(k)return new Vl(s,x.identifier,k,Pu,!1);if(b){const le=Ze.all.getExtensionDescription(v);if(le)return new Vl(s,x.identifier,le,Pu,!0)}},get all(){const v=[];for(const b of Ze.mine.getAllExtensionDescriptions())v.push(new Vl(s,x.identifier,b,Pu,!1));return v},get allAcrossExtensionHosts(){T(x,"extensionsAny");const v=new bn(Ze.mine.getAllExtensionDescriptions().map(k=>k.identifier)),b=[];for(const k of Ze.all.getAllExtensionDescriptions()){const le=!v.has(k.identifier);b.push(new Vl(s,x.identifier,k,Pu,le))}return b},get onDidChange(){return Ge(x,"extensionsAny")?K(ht.any(Ze.mine.onDidChange,Ze.all.onDidChange)):K(Ze.mine.onDidChange)}},W$={createDiagnosticCollection(v){return Mi.createDiagnosticCollection(x.identifier,v)},get onDidChangeDiagnostics(){return K(Mi.onDidChangeDiagnostics)},getDiagnostics:v=>Mi.getDiagnostics(v),getLanguages(){return Ue.getLanguages()},setTextDocumentLanguage(v,b){return Ue.changeLanguage(v.uri,b)},match(v,b){const k=Pv.from(v);let le;return _E(k)&&(le=We.notebookDocuments.find(Fe=>Fe.apiNotebook.getCells().find(Pt=>Pt.document===b))?.apiNotebook),BE(k,b.uri,b.languageId,!0,le?.uri,le?.notebookType)},registerCodeActionsProvider(v,b,k){return Pe.registerCodeActionProvider(x,je(v),b,k)},registerDocumentPasteEditProvider(v,b,k){return Pe.registerDocumentPasteEditProvider(x,je(v),b,k)},registerCodeLensProvider(v,b){return Pe.registerCodeLensProvider(x,je(v),b)},registerDefinitionProvider(v,b){return Pe.registerDefinitionProvider(x,je(v),b)},registerDeclarationProvider(v,b){return Pe.registerDeclarationProvider(x,je(v),b)},registerImplementationProvider(v,b){return Pe.registerImplementationProvider(x,je(v),b)},registerTypeDefinitionProvider(v,b){return Pe.registerTypeDefinitionProvider(x,je(v),b)},registerHoverProvider(v,b){return Pe.registerHoverProvider(x,je(v),b,x.identifier)},registerEvaluatableExpressionProvider(v,b){return Pe.registerEvaluatableExpressionProvider(x,je(v),b,x.identifier)},registerInlineValuesProvider(v,b){return Pe.registerInlineValuesProvider(x,je(v),b,x.identifier)},registerDocumentHighlightProvider(v,b){return Pe.registerDocumentHighlightProvider(x,je(v),b)},registerMultiDocumentHighlightProvider(v,b){return Pe.registerMultiDocumentHighlightProvider(x,je(v),b)},registerLinkedEditingRangeProvider(v,b){return Pe.registerLinkedEditingRangeProvider(x,je(v),b)},registerReferenceProvider(v,b){return Pe.registerReferenceProvider(x,je(v),b)},registerRenameProvider(v,b){return Pe.registerRenameProvider(x,je(v),b)},registerNewSymbolNamesProvider(v,b){return T(x,"newSymbolNamesProvider"),Pe.registerNewSymbolNamesProvider(x,je(v),b)},registerDocumentSymbolProvider(v,b,k){return Pe.registerDocumentSymbolProvider(x,je(v),b,k)},registerWorkspaceSymbolProvider(v){return Pe.registerWorkspaceSymbolProvider(x,v)},registerDocumentFormattingEditProvider(v,b){return Pe.registerDocumentFormattingEditProvider(x,je(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return Pe.registerDocumentRangeFormattingEditProvider(x,je(v),b)},registerOnTypeFormattingEditProvider(v,b,k,...le){return Pe.registerOnTypeFormattingEditProvider(x,je(v),b,[k].concat(le))},registerDocumentSemanticTokensProvider(v,b,k){return Pe.registerDocumentSemanticTokensProvider(x,je(v),b,k)},registerDocumentRangeSemanticTokensProvider(v,b,k){return Pe.registerDocumentRangeSemanticTokensProvider(x,je(v),b,k)},registerSignatureHelpProvider(v,b,k,...le){return typeof k=="object"?Pe.registerSignatureHelpProvider(x,je(v),b,k):Pe.registerSignatureHelpProvider(x,je(v),b,typeof k>"u"?[]:[k,...le])},registerCompletionItemProvider(v,b,...k){return Pe.registerCompletionItemProvider(x,je(v),b,k)},registerInlineCompletionItemProvider(v,b,k){return b.handleDidShowCompletionItem&&T(x,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&T(x,"inlineCompletionsAdditions"),k&&T(x,"inlineCompletionsAdditions"),Pe.registerInlineCompletionsProvider(x,je(v),b,k)},get inlineCompletionsUnificationState(){return T(x,"inlineCompletionsAdditions"),Pe.inlineCompletionsUnificationState},onDidChangeCompletionsUnificationState(v,b,k){return T(x,"inlineCompletionsAdditions"),K(Pe.onDidChangeInlineCompletionsUnificationState)(v,b,k)},registerDocumentLinkProvider(v,b){return Pe.registerDocumentLinkProvider(x,je(v),b)},registerColorProvider(v,b){return Pe.registerColorProvider(x,je(v),b)},registerFoldingRangeProvider(v,b){return Pe.registerFoldingRangeProvider(x,je(v),b)},registerSelectionRangeProvider(v,b){return Pe.registerSelectionRangeProvider(x,v,b)},registerCallHierarchyProvider(v,b){return Pe.registerCallHierarchyProvider(x,v,b)},registerTypeHierarchyProvider(v,b){return Pe.registerTypeHierarchyProvider(x,v,b)},setLanguageConfiguration:(v,b)=>Pe.setLanguageConfiguration(x,v,b),getTokenInformationAtPosition(v,b){return T(x,"tokenInformation"),Ue.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return Pe.registerInlayHintsProvider(x,v,b)},createLanguageStatusItem(v,b){return Ue.createLanguageStatusItem(x,v,b)},registerDocumentDropEditProvider(v,b,k){return Pe.registerDocumentOnDropEditProvider(x,v,b,k)}},V$={get activeTextEditor(){return Yt.getActiveTextEditor()},get visibleTextEditors(){return Yt.getVisibleTextEditors()},get activeTerminal(){return j.activeTerminal},get terminals(){return j.terminals},async showTextDocument(v,b,k){y.isUri(v)&&v.scheme===q.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",x,"A URI of 'vscode-remote' scheme requires an authority.");const le=await(y.isUri(v)?Promise.resolve(oy.openTextDocument(v)):Promise.resolve(v));return Yt.showTextDocument(le,b,k)},createTextEditorDecorationType(v){return Yt.createTextEditorDecorationType(x,v)},onDidChangeActiveTextEditor(v,b,k){return K(Yt.onDidChangeActiveTextEditor)(v,b,k)},onDidChangeVisibleTextEditors(v,b,k){return K(Yt.onDidChangeVisibleTextEditors)(v,b,k)},onDidChangeTextEditorSelection(v,b,k){return K(Yt.onDidChangeTextEditorSelection)(v,b,k)},onDidChangeTextEditorOptions(v,b,k){return K(Yt.onDidChangeTextEditorOptions)(v,b,k)},onDidChangeTextEditorVisibleRanges(v,b,k){return K(Yt.onDidChangeTextEditorVisibleRanges)(v,b,k)},onDidChangeTextEditorViewColumn(v,b,k){return K(Yt.onDidChangeTextEditorViewColumn)(v,b,k)},onDidChangeTextEditorDiffInformation(v,b,k){return T(x,"textEditorDiffInformation"),K(Yt.onDidChangeTextEditorDiffInformation)(v,b,k)},onDidCloseTerminal(v,b,k){return K(j.onDidCloseTerminal)(v,b,k)},onDidOpenTerminal(v,b,k){return K(j.onDidOpenTerminal)(v,b,k)},onDidChangeActiveTerminal(v,b,k){return K(j.onDidChangeActiveTerminal)(v,b,k)},onDidChangeTerminalDimensions(v,b,k){return T(x,"terminalDimensions"),K(j.onDidChangeTerminalDimensions)(v,b,k)},onDidChangeTerminalState(v,b,k){return K(j.onDidChangeTerminalState)(v,b,k)},onDidWriteTerminalData(v,b,k){return T(x,"terminalDataWriteEvent"),K(j.onDidWriteTerminalData)(v,b,k)},onDidExecuteTerminalCommand(v,b,k){return T(x,"terminalExecuteCommandEvent"),K(j.onDidExecuteTerminalCommand)(v,b,k)},onDidChangeTerminalShellIntegration(v,b,k){return K(_.onDidChangeTerminalShellIntegration)(v,b,k)},onDidStartTerminalShellExecution(v,b,k){return K(_.onDidStartTerminalShellExecution)(v,b,k)},onDidEndTerminalShellExecution(v,b,k){return K(_.onDidEndTerminalShellExecution)(v,b,k)},get state(){return S.getState()},onDidChangeWindowState(v,b,k){return K(S.onDidChangeWindowState)(v,b,k)},showInformationMessage(v,...b){return hi.showMessage(x,bt.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return hi.showMessage(x,bt.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return hi.showMessage(x,bt.Error,v,b[0],b.slice(1))},showQuickPick(v,b,k){return Sr.showQuickPick(x,v,b,k)},showWorkspaceFolderPick(v){return Sr.showWorkspaceFolderPick(v)},showInputBox(v,b){return Sr.showInput(v,b)},showOpenDialog(v){return Se.showOpenDialog(v)},showSaveDialog(v){return Se.showSaveDialog(v)},createStatusBarItem(v,b,k){let le,Fe,Pt;return typeof v=="string"?(le=v,Fe=b,Pt=k):(Fe=v,Pt=b),Xt.createStatusBarEntry(x,le,Fe,Pt)},setStatusBarMessage(v,b){return Xt.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",x,"Use 'withProgress' instead."),W.withProgress(x,{location:js.SourceControl},(b,k)=>v({report(le){}}))},withProgress(v,b){return W.withProgress(x,v,b)},createOutputChannel(v,b){return ge.createOutputChannel(v,b,x)},createWebviewPanel(v,b,k,le){return jt.createWebviewPanel(x,v,b,k,le)},createWebviewTextEditorInset(v,b,k,le){return T(x,"editorInsets"),Wr.createWebviewEditorInset(v,b,k,le,x)},createTerminal(v,b,k){return typeof v=="object"?"pty"in v?j.createExtensionTerminal(v):j.createTerminalFromOptions(v):j.createTerminal(v,b,k)},registerTerminalLinkProvider(v){return j.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return j.registerProfileProvider(x,v,b)},registerTerminalCompletionProvider(v,...b){return T(x,"terminalCompletionProvider"),j.registerTerminalCompletionProvider(x,v,...b)},registerTerminalQuickFixProvider(v,b){return T(x,"terminalQuickFixProvider"),j.registerTerminalQuickFixProvider(v,x.identifier.value,b)},registerTreeDataProvider(v,b){return Xa.registerTreeDataProvider(v,b,x)},createTreeView(v,b){return Xa.createTreeView(v,b,x)},registerWebviewPanelSerializer:(v,b)=>jt.registerWebviewPanelSerializer(x,v,b),registerCustomEditorProvider:(v,b,k={})=>Jp.registerCustomEditorProvider(x,v,b,k),registerFileDecorationProvider(v){return me.registerFileDecorationProvider(v,x)},registerUriHandler(v){return E.registerUriHandler(x,v)},createQuickPick(){return Sr.createQuickPick(x)},createInputBox(){return Sr.createInputBox(x)},get activeColorTheme(){return ui.activeColorTheme},onDidChangeActiveColorTheme(v,b,k){return K(ui.onDidChangeActiveColorTheme)(v,b,k)},registerWebviewViewProvider(v,b,k){return Zp.registerWebviewViewProvider(x,v,b,k?.webviewOptions)},get activeNotebookEditor(){return We.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,k){return K(We.onDidChangeActiveNotebookEditor)(v,b,k)},get visibleNotebookEditors(){return We.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return K(We.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,k){return K(ii.onDidChangeNotebookEditorSelection)(v,b,k)},onDidChangeNotebookEditorVisibleRanges(v,b,k){return K(ii.onDidChangeNotebookEditorVisibleRanges)(v,b,k)},showNotebookDocument(v,b){return We.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,k){return T(x,"externalUriOpener"),tc.registerExternalUriOpener(x.identifier,v,b,k)},registerProfileContentHandler(v,b){return T(x,"profileContentHandlers"),$.registerProfileContentHandler(x,v,b)},registerQuickDiffProvider(v,b,k,le,Fe){return T(x,"quickDiffProvider"),Du.registerQuickDiffProvider(x,je(v),b,k,le,Fe)},get tabGroups(){return P.tabGroups},registerShareProvider(v,b){return T(x,"shareProvider"),Ka.registerShareProvider(je(v),b)},get nativeHandle(){return T(x,"nativeWindowHandle"),S.nativeHandle},createChatStatusItem:v=>(T(x,"chatStatusItem"),Te.createChatStatusItem(x,v)),showChatSession:(v,b,k)=>(T(x,"chatSessionsProvider"),Ei.showChatSession(x,v,b,k))},oy={get rootPath(){return w.report("workspace.rootPath",x,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new on("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new on("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new on("workspaceFile")},updateWorkspaceFolders:(v,b,...k)=>n.updateWorkspaceFolders(x,v,b||0,...k),onDidChangeWorkspaceFolders:function(v,b,k){return K(n.onDidChangeWorkspace)(v,b,k)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,k,le)=>n.findFiles(v,b,k,x.identifier,le),findFiles2:(v,b,k)=>(T(x,"findFiles2"),n.findFiles2(v,b,x.identifier,k)),findTextInFiles:(v,b,k,le)=>{T(x,"findTextInFiles");let Fe,Pt;return typeof b=="object"?(Fe=b,Pt=k):(Fe={},Pt=b,le=k),n.findTextInFiles(v,Fe||{},Pt,x.identifier,le)},findTextInFiles2:(v,b,k)=>(T(x,"findTextInFiles2"),T(x,"textSearchProvider2"),n.findTextInFiles2(v,b,x.identifier,k)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return Ht.applyWorkspaceEdit(v,x,b)},createFileSystemWatcher:(v,b,k,le)=>{const Fe={ignoreCreateEvents:!!b,ignoreChangeEvents:!!k,ignoreDeleteEvents:!!le};return Wi.createFileSystemWatcher(n,Dt,x,v,Fe)},get textDocuments(){return De.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new on("textDocuments")},openTextDocument(v,b){let k;if(b=b??v,typeof v=="string")k=Promise.resolve(y.file(v));else if(y.isUri(v))k=Promise.resolve(v);else if(!b||typeof b=="object")k=De.createDocumentData(b);else throw new Error("illegal argument - uriOrFileNameOrOptions");return k.then(le=>(f.trace(`openTextDocument from ${x.identifier}`),le.scheme===q.vscodeRemote&&!le.authority&&w.report("workspace.openTextDocument",x,"A URI of 'vscode-remote' scheme requires an authority."),De.ensureDocumentData(le,b).then(Fe=>Fe.document)))},onDidOpenTextDocument:(v,b,k)=>K(De.onDidAddDocument)(v,b,k),onDidCloseTextDocument:(v,b,k)=>K(De.onDidRemoveDocument)(v,b,k),onDidChangeTextDocument:(v,b,k)=>Ge(x,"textDocumentChangeReason")?K(De.onDidChangeDocumentWithReason)(v,b,k):K(De.onDidChangeDocument)(v,b,k),onDidSaveTextDocument:(v,b,k)=>K(De.onDidSaveDocument)(v,b,k),onWillSaveTextDocument:(v,b,k)=>K(yt.getOnWillSaveTextDocumentEvent(x))(v,b,k),get notebookDocuments(){return We.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let k;if(y.isUri(v))k=v,await We.openNotebookDocument(v);else if(typeof v=="string")k=y.revive(await We.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return We.getNotebookDocument(k).apiNotebook},onDidSaveNotebookDocument(v,b,k){return K(dt.onDidSaveNotebookDocument)(v,b,k)},onDidChangeNotebookDocument(v,b,k){return K(dt.onDidChangeNotebookDocument)(v,b,k)},onWillSaveNotebookDocument(v,b,k){return K(bs.getOnWillSaveNotebookDocumentEvent(x))(v,b,k)},get onDidOpenNotebookDocument(){return K(We.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return K(We.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,k,le){return We.registerNotebookSerializer(x,v,b,k,Ge(x,"notebookLiveShare")?le:void 0)},onDidChangeConfiguration:(v,b,k)=>K(Dt.onDidChangeConfiguration)(v,b,k),getConfiguration(v,b){return b=arguments.length===1?void 0:b,Dt.getConfiguration(v,b,x)},registerTextDocumentContentProvider(v,b){return nt.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",x,"Use the corresponding function on the 'tasks' namespace instead"),Y.registerTaskProvider(x,v,b)),registerFileSystemProvider(v,b,k){return ug(er.registerFileSystemProvider(x,v,b,k),r.addFileSystemProvider(v,b,k))},get fs(){return r.value},registerFileSearchProvider:(v,b)=>(T(x,"fileSearchProvider"),Q.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(T(x,"textSearchProvider"),Q.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(T(x,"aiTextSearchProvider"),T(x,"textSearchProvider2"),Q.registerAITextSearchProvider(v,b)),registerFileSearchProvider2:(v,b)=>(T(x,"fileSearchProvider2"),Q.registerFileSearchProvider(v,b)),registerTextSearchProvider2:(v,b)=>(T(x,"textSearchProvider2"),Q.registerTextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(T(x,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(T(x,"resolvers"),mo.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(T(x,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,k)=>K(Wi.onDidCreateFile)(v,b,k),onDidDeleteFiles:(v,b,k)=>K(Wi.onDidDeleteFile)(v,b,k),onDidRenameFiles:(v,b,k)=>K(Wi.onDidRenameFile)(v,b,k),onWillCreateFiles:(v,b,k)=>K(Wi.getOnWillCreateFileEvent(x))(v,b,k),onWillDeleteFiles:(v,b,k)=>K(Wi.getOnWillDeleteFileEvent(x))(v,b,k),onWillRenameFiles:(v,b,k)=>K(Wi.getOnWillRenameFileEvent(x))(v,b,k),openTunnel:v=>(T(x,"tunnels"),m.openTunnel(x,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return T(x,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,k)=>(T(x,"tunnels"),K(m.onDidChangeTunnels)(v,b,k)),registerPortAttributesProvider:(v,b)=>(T(x,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(T(x,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(T(x,"timeline"),sn.registerTimelineProvider(v,b,x.identifier,ke.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(T(x,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,k)=>K(n.onDidGrantWorkspaceTrust)(v,b,k),registerEditSessionIdentityProvider:(v,b)=>(T(x,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,k)=>(T(x,"editSessionIdentityProvider"),K(n.getOnWillCreateEditSessionIdentityEvent(x))(v,b,k)),registerCanonicalUriProvider:(v,b)=>(T(x,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,k)=>(T(x,"canonicalUriProvider"),n.provideCanonicalUri(v,b,k)),decode(v,b){return n.decode(v,b)},encode(v,b){return n.encode(v,b)}},q$={get inputBox(){return w.report("scm.inputBox",x,"Use 'SourceControl.inputBox' instead"),go.getLastInputBox(x)},createSourceControl(v,b,k,le,Fe){return(le||Fe)&&T(x,"scmProviderOptions"),go.createSourceControl(x,v,b,k,le,Fe)}},G$={createCommentController(v,b){return ec.createCommentController(x,v,b)}},Q$={get activeDebugSession(){return z.activeDebugSession},get activeDebugConsole(){return z.activeDebugConsole},get breakpoints(){return z.breakpoints},get activeStackItem(){return z.activeStackItem},registerDebugVisualizationProvider(v,b){return T(x,"debugVisualization"),z.registerDebugVisualizationProvider(x,v,b)},registerDebugVisualizationTreeProvider(v,b){return T(x,"debugVisualization"),z.registerDebugVisualizationTree(x,v,b)},onDidStartDebugSession(v,b,k){return K(z.onDidStartDebugSession)(v,b,k)},onDidTerminateDebugSession(v,b,k){return K(z.onDidTerminateDebugSession)(v,b,k)},onDidChangeActiveDebugSession(v,b,k){return K(z.onDidChangeActiveDebugSession)(v,b,k)},onDidReceiveDebugSessionCustomEvent(v,b,k){return K(z.onDidReceiveDebugSessionCustomEvent)(v,b,k)},onDidChangeBreakpoints(v,b,k){return K(z.onDidChangeBreakpoints)(v,b,k)},onDidChangeActiveStackItem(v,b,k){return K(z.onDidChangeActiveStackItem)(v,b,k)},registerDebugConfigurationProvider(v,b,k){return z.registerDebugConfigurationProvider(v,b,k||op.Initial)},registerDebugAdapterDescriptorFactory(v,b){return z.registerDebugAdapterDescriptorFactory(x,v,b)},registerDebugAdapterTrackerFactory(v,b){return z.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,k){return!k||typeof k=="object"&&"configuration"in k?z.startDebugging(v,b,{parentSession:k}):z.startDebugging(v,b,k||{})},stopDebugging(v){return z.stopDebugging(v)},addBreakpoints(v){return z.addBreakpoints(v)},removeBreakpoints(v){return z.removeBreakpoints(v)},asDebugSourceUri(v,b){return z.asDebugSourceUri(v,b)}},J$={registerTaskProvider:(v,b)=>Y.registerTaskProvider(x,v,b),fetchTasks:v=>Y.fetchTasks(v),executeTask:v=>Y.executeTask(x,v),get taskExecutions(){return Y.taskExecutions},onDidStartTask:(v,b,k)=>{const le=Fe=>{Ge(x,"taskExecutionTerminal")||Fe?.execution?.terminal!==void 0&&(Fe.execution.terminal=void 0);const Pt={...Fe,execution:Fe.execution};return v.call(b,Pt)};return K(Y.onDidStartTask)(le,b,k)},onDidEndTask:(v,b,k)=>K(Y.onDidEndTask)(v,b,k),onDidStartTaskProcess:(v,b,k)=>K(Y.onDidStartTaskProcess)(v,b,k),onDidEndTaskProcess:(v,b,k)=>K(Y.onDidEndTaskProcess)(v,b,k),onDidStartTaskProblemMatchers:(v,b,k)=>(T(x,"taskProblemMatcherStatus"),K(Y.onDidStartTaskProblemMatchers)(v,b,k)),onDidEndTaskProblemMatchers:(v,b,k)=>(T(x,"taskProblemMatcherStatus"),K(Y.onDidEndTaskProblemMatchers)(v,b,k))},Z$={createNotebookController(v,b,k,le,Fe){return Mt.createNotebookController(x,v,b,k,le,Ge(x,"notebookMessaging")?Fe:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>We.registerNotebookCellStatusBarItemProvider(x,v,b),createRendererMessaging(v){return zi.createRendererMessaging(x,v)},createNotebookControllerDetectionTask(v){return T(x,"notebookKernelSource"),Mt.createNotebookControllerDetectionTask(x,v)},registerKernelSourceActionProvider(v,b){return T(x,"notebookKernelSource"),Mt.registerKernelSourceActionProvider(x,v,b)}},Y$={t(...v){if(typeof v[0]=="string"){const b=v.shift(),k=!v||typeof v[0]!="object"?v:v[0];return Ee.getMessage(x.identifier.value,{message:b,args:k})}return Ee.getMessage(x.identifier.value,v[0])},get bundle(){return Ee.getBundle(x.identifier.value)},get uri(){return Ee.getBundleUri(x.identifier.value)}},X$={transferActiveChat(v){return T(x,"interactive"),ee.transferActiveChat(v)}},K$={getRelatedInformation(v,b){return T(x,"aiRelatedInformation"),ve.getRelatedInformation(x,v,b)},registerRelatedInformationProvider(v,b){return T(x,"aiRelatedInformation"),ve.registerRelatedInformationProvider(x,v,b)},registerEmbeddingVectorProvider(v,b){return T(x,"aiRelatedInformation"),Ft.registerEmbeddingVectorProvider(x,v,b)},registerSettingsSearchProvider(v){return T(x,"aiSettingsSearch"),Qe.registerSettingsSearchProvider(x,v)}},e3={registerMappedEditsProvider(v,b){return T(x,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(v){return T(x,"mappedEditsProvider"),ys.registerMappedEditsProvider(x,v)},createChatParticipant(v,b){return ee.createChatAgent(x,v,b)},createDynamicChatParticipant(v,b,k){return T(x,"chatParticipantPrivate"),ee.createDynamicChatAgent(x,v,b,k)},registerChatParticipantDetectionProvider(v){return T(x,"chatParticipantPrivate"),ee.registerChatParticipantDetectionProvider(x,v)},registerRelatedFilesProvider(v,b){return T(x,"chatEditing"),ee.registerRelatedFilesProvider(x,v,b)},onDidDisposeChatSession:(v,b,k)=>(T(x,"chatParticipantPrivate"),K(ee.onDidDisposeChatSession)(v,b,k)),registerChatSessionItemProvider:(v,b)=>(T(x,"chatSessionsProvider"),Ei.registerChatSessionItemProvider(x,v,b)),registerChatSessionContentProvider(v,b,k){return T(x,"chatSessionsProvider"),Ei.registerChatSessionContentProvider(x,v,b,k)},registerChatOutputRenderer:(v,b)=>(T(x,"chatOutputRenderer"),R.registerChatOutputRenderer(x,v,b))},t3={selectChatModels:v=>O.selectLanguageModels(x,v??{}),onDidChangeChatModels:(v,b,k)=>O.onDidChangeProviders(v,b,k),registerLanguageModelChatProvider:(v,b)=>O.registerLanguageModelChatProvider(x,v,b),get embeddingModels(){return T(x,"embeddings"),St.embeddingsModels},onDidChangeEmbeddingModels:(v,b,k)=>(T(x,"embeddings"),St.onDidChange(v,b,k)),registerEmbeddingsProvider(v,b){return T(x,"embeddings"),St.registerEmbeddingsProvider(x,v,b)},async computeEmbeddings(v,b,k){return T(x,"embeddings"),St.computeEmbeddings(v,b,k)},registerTool(v,b){return N.registerTool(x,v,b)},invokeTool(v,b,k){return N.invokeTool(x,v,b,k)},get tools(){return N.getTools(x)},fileIsIgnored(v,b){return O.fileIsIgnored(x,v,b)},registerIgnoredFileProvider(v){return O.registerIgnoredFileProvider(x,v)},registerMcpServerDefinitionProvider(v,b){return B.registerMcpConfigurationProvider(x,v,b)},onDidChangeChatRequestTools(...v){return T(x,"chatParticipantAdditions"),K(ee.onDidChangeChatRequestTools)(...v)}},i3={registerSpeechProvider(v,b){return T(x,"speech"),gt.registerProvider(x.identifier,v,b)}};return{version:t.version,ai:K$,authentication:nn,commands:B$,comments:G$,chat:e3,debug:Q$,env:ny,extensions:z$,interactive:X$,l10n:Y$,languages:W$,lm:t3,notebooks:Z$,scm:q$,speech:i3,tasks:J$,tests:_$,window:V$,workspace:oy,Breakpoint:ca,TerminalOutputAnchor:n1,ChatResultFeedbackKind:gl,ChatVariableLevel:Z1,ChatCompletionItem:fR,ChatReferenceDiagnostic:O8,CallHierarchyIncomingCall:p8,CallHierarchyItem:a1,CallHierarchyOutgoingCall:g8,CancellationError:ki,CancellationTokenSource:lt,CandidatePortSource:Cg,CodeAction:Jc,CodeActionKind:ut,CodeActionTriggerKind:Qc,CodeLens:rd,Color:ra,ColorInformation:ld,ColorPresentation:ud,ColorThemeKind:Bs,CommentMode:T1,CommentState:R1,CommentThreadCollapsibleState:al,CommentThreadState:cl,CommentThreadApplicability:ll,CommentThreadFocus:ul,CompletionItem:od,CompletionItemKind:ue,CompletionItemTag:Yc,CompletionList:Yo,CompletionTriggerKind:Zo,ConfigurationTarget:oa,CustomExecution:k1,DebugAdapterExecutable:md,DebugAdapterInlineImplementation:sl,DebugAdapterNamedPipeServer:vd,DebugAdapterServer:rl,DebugConfigurationProviderTriggerKind:op,DebugConsoleMode:Ed,DebugVisualization:oR,DecorationRangeBehavior:zn,Diagnostic:Gh,DiagnosticRelatedInformation:zc,DiagnosticSeverity:Zt,DiagnosticTag:Fn,Disposable:Ie,DocumentHighlight:td,DocumentHighlightKind:qc,MultiDocumentHighlight:id,DocumentLink:cd,DocumentSymbol:Gc,EndOfLine:cr,EnvironmentVariableMutatorType:Qo,EvaluatableExpression:wd,InlineValueText:bd,InlineValueVariableLookup:yd,InlineValueEvaluatableExpression:Sd,InlineCompletionTriggerKind:nl,InlineCompletionsDisposeReasonKind:rs,EventEmitter:D,ExtensionKind:Qn,ExtensionMode:da,ExternalUriOpenerPriority:H1,FileChangeType:la,FileDecoration:M1,FileDecoration2:M1,FileSystemError:Rt,FileType:Pn,FilePermission:Uo,FoldingRange:A1,FoldingRangeKind:ss,FunctionBreakpoint:Gn,InlineCompletionItem:f1,InlineCompletionList:p1,Hover:Kh,VerboseHover:ed,HoverVerbosityAction:o1,IndentAction:Ow,Location:Bi,MarkdownString:Ai,OverviewRulerLane:Q0,ParameterInformation:c1,PortAutoForwardAction:_1,Position:$e,ProcessExecution:sa,ProgressLocation:js,QuickInputButtonLocation:N1,QuickInputButtons:hl,Range:ye,RelativePattern:aa,Selection:Ar,SelectionRange:Zc,SemanticTokens:ua,SemanticTokensBuilder:nR,SemanticTokensEdit:S8,SemanticTokensEdits:xd,SemanticTokensLegend:L1,ShellExecution:Wn,ShellQuoting:E1,SignatureHelp:u1,SignatureHelpTriggerKind:h1,SignatureInformation:l1,SnippetString:Hn,SourceBreakpoint:qn,StandardTokenType:_s,StatusBarAlignment:Os,SymbolInformation:Vc,SymbolKind:et,SymbolTag:Wc,Task:hd,TaskEventKind:S1,TaskGroup:tl,TaskPanelKind:x1,TaskRevealKind:y1,TaskScope:Us,TerminalLink:GT,TerminalQuickFixTerminalCommand:JT,TerminalQuickFixOpener:QT,TerminalLocation:w1,TerminalProfile:ZT,TerminalExitReason:m1,TerminalShellExecutionCommandLineConfidence:el,TerminalCompletionItem:YT,TerminalCompletionItemKind:b1,TerminalCompletionList:XT,TerminalShellType:v1,TextDocumentSaveReason:Ko,TextEdit:Ms,SnippetTextEdit:e1,TextEditorCursorStyle:pr,TextEditorChangeKind:ta,TextEditorLineNumbersStyle:lr,TextEditorRevealType:ad,TextEditorSelectionChangeKind:ea,SyntaxTokenType:ia,TextDocumentChangeReason:Kc,ThemeColor:il,ThemeIcon:ci,TreeItem:dd,TreeItemCheckboxState:Nr,TreeItemCollapsibleState:Vn,TypeHierarchyItem:z1,UIKind:ac,Uri:y,ViewColumn:Xc,WorkspaceEdit:Bn,DocumentPasteTriggerKind:I1,DocumentDropEdit:$1,DocumentDropOrPasteEditKind:Hs,DocumentPasteEdit:tR,InlayHint:nd,InlayHintLabelPart:sd,InlayHintKind:d1,RemoteAuthorityResolverError:Go,ResolvedAuthority:VT,ManagedResolvedAuthority:Xh,SourceControlInputBoxValidationType:g1,ExtensionRuntime:Dd,TimelineItem:U1,NotebookRange:Tr,NotebookCellKind:Un,NotebookCellExecutionState:F1,NotebookCellData:Qh,NotebookData:l8,NotebookRendererScript:x8,NotebookCellStatusBarAlignment:Cd,NotebookEditorRevealType:$d,NotebookCellOutput:Zh,NotebookCellOutputItem:u8,CellErrorStackFrame:aR,NotebookCellStatusBarItem:cR,NotebookControllerAffinity:O1,NotebookControllerAffinity2:Id,NotebookEdit:Jh,NotebookKernelSourceAction:lR,NotebookVariablesRequestKind:fl,PortAttributes:hR,LinkedEditingRanges:uR,TestResultState:j1,TestRunRequest:Pd,TestMessage:Ad,TestMessageStackFrame:dR,TestTag:pl,TestRunProfileKind:fa,TextSearchCompleteMessageType:Af,DataTransfer:na,DataTransferItem:fd,TestCoverageCount:Td,FileCoverage:Ld,StatementCoverage:k8,BranchCoverage:C8,DeclarationCoverage:$8,WorkspaceTrustState:B1,LanguageStatusSeverity:Jo,QuickPickItemKind:dl,InputBoxValidationSeverity:ha,TabInputText:W1,TabInputTextDiff:Nd,TabInputTextMerge:I8,TabInputCustom:V1,TabInputNotebook:q1,TabInputNotebookDiff:G1,TabInputWebview:D8,TabInputTerminal:P8,TabInputInteractiveWindow:A8,TabInputChat:T8,TabInputTextMultiDiff:R8,TelemetryTrustedValue:Zm,LogLevel:we,EditSessionIdentityMatch:Uw,InteractiveSessionVoteDirection:Q1,ChatCopyKind:J1,ChatEditingSessionActionOutcome:Mr,InteractiveEditorResponseFeedbackKind:X1,DebugStackFrame:b8,DebugThread:y8,RelatedInformationType:lv,SpeechToTextStatus:hv,TextToSpeechStatus:dv,PartialAcceptTriggerKind:_n,InlineCompletionEndOfLifeReasonKind:Xo,InlineCompletionDisplayLocationKind:is,KeywordRecognitionStatus:fv,ChatImageMimeType:zs,ChatResponseMarkdownPart:Md,ChatResponseFileTreePart:Od,ChatResponseAnchorPart:vl,ChatResponseProgressPart:ev,ChatResponseProgressPart2:Ud,ChatResponseThinkingProgressPart:pa,ChatResponseReferencePart:Jn,ChatResponseReferencePart2:Jn,ChatResponseCodeCitationPart:Bd,ChatResponseCodeblockUriPart:Hd,ChatResponseWarningPart:wl,ChatResponseTextEditPart:bl,ChatResponseNotebookEditPart:zd,ChatResponseMarkdownWithVulnerabilitiesPart:ml,ChatResponseCommandButtonPart:jd,ChatResponseConfirmationPart:Fd,ChatResponseMovePart:_d,ChatResponseExtensionsPart:tv,ChatResponsePullRequestPart:iv,ChatPrepareToolInvocationPart:yl,ChatResponseMultiDiffPart:K1,ChatResponseReferencePartStatusKind:nv,ChatResponseClearToPreviousToolInvocationReason:ov,ChatRequestTurn:Wd,ChatRequestTurn2:Wd,ChatResponseTurn:L8,ChatResponseTurn2:pR,ChatToolInvocationPart:rv,ChatLocation:ur,ChatSessionStatus:sv,ChatRequestEditorData:N8,ChatRequestNotebookData:M8,ChatReferenceBinaryData:F8,ChatRequestEditedFileEventKind:Y1,LanguageModelChatMessageRole:Ti,LanguageModelChatMessage:U8,LanguageModelChatMessage2:j8,LanguageModelToolResultPart:Sl,LanguageModelToolResultPart2:av,LanguageModelTextPart:pt,LanguageModelTextPart2:pt,LanguageModelPartAudience:Vd,ToolResultAudience:Vd,LanguageModelToolCallPart:Zn,LanguageModelThinkingPart:ga,LanguageModelError:ns,LanguageModelToolResult:qd,LanguageModelToolResult2:H8,LanguageModelDataPart:hr,LanguageModelDataPart2:hr,LanguageModelToolExtensionSource:B8,LanguageModelToolMCPSource:_8,ExtendedLanguageModelToolResult:gR,LanguageModelChatToolMode:Gd,LanguageModelPromptTsxPart:Fr,NewSymbolName:rR,NewSymbolNameTag:P1,NewSymbolNameTriggerKind:ol,ExcludeSettingOptions:as,TextSearchContext2:e0,TextSearchMatch2:Gs,AISearchKeyword:t0,TextSearchCompleteMessageTypeNew:Af,ChatErrorLevel:cv,McpHttpServerDefinition:vR,McpStdioServerDefinition:mR,SettingsSearchResultKind:uv}}}var Tp,Ib=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),pi("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();pi("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new Wj(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(Db)),this.i.remote.isRemote&&this.register(this.f.createInstance(Pb,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};Ib=__decorate([__param(2,wc),__param(3,ls),__param(4,Zs),__param(5,Tt),__param(6,_e)],Ib);var Db=class{static{Tp=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&Tp.a.size){const i=gn(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=Tp.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};Db=Tp=__decorate([__param(0,Tt)],Db);var Wj=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new Ds}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(LT,this.e,this.f)}return this.b}},Pb=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(V.MainThreadTelemetry);const s=r.getProxy(V.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};Pb=__decorate([__param(2,Le)],Pb);var Ab=class{constructor(t,i){this.a=t.getProxy(V.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:qj(s,this.b)}),this.c&&this.f(t,r,s)}};Ab=__decorate([__param(0,Le),__param(1,Tt)],Ab);var Vj=1e5;function qj(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=PP(i);return r.length>Vj?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var Tb=class extends Ab{constructor(t,i){super(t,i)}f(t,i,r){i.apply(console,r)}};Tb=__decorate([__param(0,Le),__param(1,Tt)],Tb);var Gj=class extends Ib{k(){}getModule(e,t){for(const i of this.b){const r=i(e);if(r){e=r;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},Qj=class extends ow{constructor(){super(...arguments),this.extensionRuntime=Dd.Webworker}async wb(){this.h.createInstance(Tb);const e=this.h.invokeFunction(zj);this.r=this.h.createInstance(Gj,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Eb()}xb(e){return e.browser}async yb(e,t,i){t=t.with({path:Jj(t.path,".js")});const r=e?.identifier.value;r&&performance.mark(`code/extHost/willFetchExtensionCode/${r}`);const s=y.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(r&&performance.mark(`code/extHost/didFetchExtensionCode/${r}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(f){throw console.error(r?`Loading code for extension ${r} failed: ${f.message}`:`Loading code failed: ${f.message}`),console.error(`${t.toString(!0)}${typeof f.line=="number"?` line ${f.line}`:""}${typeof f.column=="number"?` column ${f.column}`:""}`),console.error(f),f}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},p=f=>{const m=this.r.getModule(f,t);if(m===void 0)throw new Error(`Cannot load module '${f}'`);return m};try{return i.codeLoadingStart(),r&&performance.mark(`code/extHost/willLoadExtensionCode/${r}`),l(h,u,p),h.exports!==u?h.exports:u}finally{r&&performance.mark(`code/extHost/didLoadExtensionCode/${r}`),i.codeLoadingStop()}}zb(e,t,i){throw new Error("ESM modules are not supported in the web worker extension host")}async $setRemoteEnvironment(e){}async Eb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await nr(10)}};function Jj(e,t){return Vu(e)?e:e+t}qe(_e,new Cr(Fw,[!0],!0)),qe(B0,_0,0),qe(Zs,Qj,0),qe(y0,S0,0),qe(_f,new Cr(D0,[!0],!0));var kC=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var CC=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function $C(e){return/^(file|vscode-remote):/i.test(e)}var IC=fetch.bind(self);function Zj(e){self.fetch=async function(t,i){return t instanceof Request||$C(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),IC(t,i)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,i,r,s,n){(async()=>($C(i.toString())&&(i=(await e(y.parse(i.toString()))).toString(!0)),super.open(t,i,r??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,i){if(/^file:/i.test(t.toString()))t=F4.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(p){return typeof p=="string"||p instanceof URL?String(p).replace(/^file:\/\//i,"vscode-file://vscode-app"):p}const u=fetch.bind(self);self.fetch=function(p,f){return p instanceof Request?u(p,f):u(l(p),f)},self.XMLHttpRequest=class extends XMLHttpRequest{open(p,f,m,w,S){return super.open(p,l(f),m??!0,w,S)}};const h=importScripts.bind(self);self.importScripts=(...p)=>{h(...p.map(l))},h(c)}.toString()}('${t}'))`;i=i||{},i.name=`${name} -> ${i.name||Di(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,i)}}else self.Worker=class extends yN{constructor(e,t){super(CC,e,{name:Di(e.toString()),...t})}};var Yj=new class{constructor(){this.pid=void 0}exit(e){kC()}},Xj=class{constructor(){const e=new MessageChannel,t=new D;let i=!1;CC(e.port2,[e.port2]),e.port1.onmessage=r=>{const{data:s}=r;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=ne.wrap(new Uint8Array(s,0,s.byteLength));if(iI(n,2)){i=!0,DC("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:r=>{if(!i){const s=r.buffer.buffer.slice(r.buffer.byteOffset,r.buffer.byteOffset+r.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function Kj(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString());e.send(Ny(0)),t({protocol:e,initData:s})});e.send(Ny(1))})}var DC=e=>kC();function eH(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function tH(){pi("code/extHost/willConnectToRenderer");const e=new Xj;return{onmessage(t){eH(t)&&Kj(e.protocol).then(i=>{pi("code/extHost/didWaitForInitData");const r=new wN(i.protocol,i.initData,Yj,null,t.data);Zj(s=>r.asBrowserUri(s)),DC=s=>r.terminate(s)})}}}var iH=tH();self.onmessage=e=>iH.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/385651c938df8a906869babee516bffd0ddb9829/core/vs/workbench/api/worker/extensionHostWorkerMain.js.map
